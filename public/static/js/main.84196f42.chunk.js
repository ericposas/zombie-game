(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{102:function(e,t,a){e.exports=a.p+"static/media/GameCover.82b711ae.png"},103:function(e,t,a){e.exports=a.p+"static/media/9mm1.604f7da7.wav"},104:function(e,t,a){e.exports=a.p+"static/media/9mm2.c11c6dad.mp3"},105:function(e,t,a){e.exports=a.p+"static/media/explosion1.9434e92f.wav"},106:function(e,t,a){e.exports=a.p+"static/media/explosion_distant.d9a90524.wav"},107:function(e,t,a){e.exports=a.p+"static/media/pistolReload.915ac0e1.wav"},108:function(e,t,a){e.exports=a.p+"static/media/grenadeClink.e7168e2c.wav"},109:function(e,t,a){e.exports=a.p+"static/media/throw.e7ed00d6.wav"},110:function(e,t,a){e.exports=a.p+"static/media/coinCollect.b65cb627.wav"},111:function(e,t,a){e.exports=a.p+"static/media/collectAmmo.b05c1059.wav"},112:function(e,t,a){e.exports=a.p+"static/media/collectItem.a7bd5386.wav"},113:function(e,t,a){e.exports=a.p+"static/media/bloodSquash.6c1046e0.flac"},114:function(e,t,a){e.exports=a.p+"static/media/bloodSquish.508e6483.wav"},115:function(e,t,a){e.exports=a.p+"static/media/bloodSmack.eb606367.wav"},116:function(e,t,a){e.exports=a.p+"static/media/deathRipSound.733ed512.wav"},117:function(e,t,a){e.exports=a.p+"static/media/jumpLanding.f703082d.wav"},118:function(e,t,a){e.exports=a.p+"static/media/dirtImpact.de2bbd17.wav"},119:function(e,t,a){e.exports=a.p+"static/media/zombieHurt.2e807e84.wav"},120:function(e,t,a){e.exports=a.p+"static/media/zombieDeath.0ac25f1f.wav"},121:function(e,t,a){e.exports=a.p+"static/media/pain1.e6646ac7.wav"},122:function(e,t,a){e.exports=a.p+"static/media/pain2.defb4bdf.wav"},123:function(e,t,a){e.exports=a.p+"static/media/playerDeath.e8c5712d.wav"},124:function(e,t,a){e.exports=a.p+"static/media/buttonAdd.8db1c8cf.wav"},125:function(e,t,a){e.exports=a.p+"static/media/buttonSubtract.b240a4d0.wav"},126:function(e,t,a){e.exports=a.p+"static/media/buttonClick.10d30b9f.wav"},127:function(e,t,a){e.exports=a.p+"static/media/buttonHover.e0064aca.wav"},128:function(e,t,a){e.exports=a.p+"static/media/placeObject.fa092176.flac"},129:function(e,t,a){e.exports=a.p+"static/media/cancelSound.0d1ffcde.wav"},130:function(e,t,a){e.exports=a.p+"static/media/moneySound.1bae50c5.wav"},131:function(e,t,a){e.exports=a.p+"static/media/purchase.4979dc37.wav"},132:function(e,t,a){e.exports=a.p+"static/media/shellImpact.8075d182.wav"},133:function(e,t,a){e.exports=a.p+"static/media/health.29ff687c.wav"},134:function(e,t,a){e.exports=a.p+"static/media/zombieGrowl.4792280f.wav"},135:function(e,t,a){e.exports=a.p+"static/media/smgFire.b1f03f38.wav"},136:function(e,t,a){e.exports=a.p+"static/media/magDrop.1547e6a9.wav"},137:function(e,t,a){e.exports=a.p+"static/media/shotShell.f90e6de6.wav"},138:function(e,t,a){e.exports=a.p+"static/media/shotgunBlast.4118af72.wav"},139:function(e,t,a){e.exports=a.p+"static/media/achievement1.dd62d37e.wav"},140:function(e,t,a){e.exports=a.p+"static/media/achievement2.7a014c29.mp3"},141:function(e,t,a){e.exports=a.p+"static/media/achievement3.23db76c0.wav"},142:function(e,t,a){e.exports=a.p+"static/media/jumpSound.ccaa05f0.wav"},143:function(e,t,a){e.exports=a.p+"static/media/grenadeCharge.31709a11.wav"},147:function(e,t,a){e.exports=a(293)},152:function(e,t,a){},183:function(e,t){},293:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(31),r=a.n(i),s=(a(152),a(17)),l=a(9),d=a(54),c=(a(157),a(2)),p=a(51),u=a(34),h=a(32),m="neutral",g="waiting",y="wave started",f="wave defeated",b="player death",w="player respawn",v="shop query sub-menu",x="build trap placement mode",E="score entry",S={MAIN_MENU:"main menu",GAMEPLAY:"gameplay",PAUSE:"pause",IN_GAME_MENU:"in-game menu",GAMEOVER:"gameover",SHOP_MENU:"in-game shop menu",BUILD_MENU:"build menu",SCORES_VIEW:"scores view"},k={width:1200,height:550,keys:[],score:0,prevScore:0,lvlToWin:30,scoreToggle:!1,scoreAmounts:{zombie:500,meleeConnect:100,zombieStreakBonus:250,zombieKnockedOffStage:500,headShot:100,collectCredit:10,collectHealth:10,collectAmmo:10,waveCompleted:1e3,achievement:5e3,penalties:{respawn:1e3,killed:500,damageTaken:20}},achievements:{SPARTA:{owned:!1,description:"Kicking a zombie off-stage"},Downtown:{owned:!1,description:"Throwing a grenade 2000 ft. and hitting a zombie"},Triplets:{owned:!1,description:"Killing 3 Zombies with one grenade"},Collector:{owned:!1,description:"Buying both the Shotgun and the SMG from the Shop"},"P.Modder":{owned:!1,description:"Purchasing all pistol modifications"},"SMG Modder":{owned:!1,description:"Purchasing all SMG modifications"},"S.Modder":{owned:!1,description:"Purchasing all Shotgun modifications"},Aficionado:{owned:!1,description:"Buying all mods in available"},Jumpshot:{owned:!1,description:"Jumping in the air and firing the final killshot"},Piledrive:{owned:!1,description:"Killing 5 zombies with melee attacks as the final strike"},Traphouse:{owned:!1,description:"Building and placing 3 different traps"},Barricade:{owned:!1,description:"Building and placing 3 different barrier types"},Miner:{owned:!1,description:"Killing at least 3 zombies with landmines"},Gunna:{owned:!1,description:"Killing at least 10 zombies with turrets"}},stats:{zombiesKilled:0,bulletsFired:0,timesReloaded:0,grenadesThrown:0,timesKilled:0,timesRespawned:0,itemsPickedUp:0,creditsEarned:0,storePurchases:0,trapsBuilt:0,barriersBuilt:0,meleeKills:0,mineKills:0,trapsPlaced:0,barriersPlaced:0,turretKills:0,damageTaken:0,damageDealt:0},scoreSubmissionName:"",scoreSubmissions:{},trapTypesPlaced:{},barrierTypesPlaced:{},lastAchievementEarned:null,lastMagDropped:null,consecutiveGrenadeKills:0,lastGrenadeKill:null,zombieLastKilled:null,filterEffects:!1,displayZombieHealth:!0,rightMouseDown:!1,mouseState:{x:"",y:"",btn:""},mousePosition:{x:0,y:0},mouseRelativeToPlayerPosition:{x:0,y:0},textures:{},gameState:S.MAIN_MENU,lastGameState:null,gameSubState:m,lastGameSubState:null,waveNum:0,waveCountToDefeat:null,zombiesOnStage:0,showingMessage:!1,respawnCost:300,respawnToShopCost:150,purchases:0,lastPurchase:{item:null,amount:null},player:{perks:{magnetism:{cost:750,owned:!1},magDmg:{cost:750,owned:!1},lastBullet:{cost:750,owned:!1},creditDropper:{cost:1250,owned:!1},ammoDropper:{cost:1250,owned:!1},healthDropper:{cost:1250,owned:!1},quickTurret:{cost:1e3,owned:!1},barrierPlus:{cost:1e3,owned:!1},cluck:{cost:1e3,owned:!1}},health:100,credits:500,position:{x:0,y:0},compositeId:"",composite:{headId:"",bodyId:"",armId:""},weapons:{list:["pistol weapon"],equipped:null,grenadeChargeRate:35e-5,grenadeUpperForceThreshold:.025,grenadeFuseTime:{default:3},grenadeExplosionSize:450,laser:{"pistol weapon":!1,"smg weapon":!1,"shotgun weapon":!1},meleeDamage:{"pistol weapon":10,"smg weapon":15,"shotgun weapon":20},damage:{"pistol weapon":{min:4,max:10},"smg weapon":{min:3,max:7},"shotgun weapon":{min:4,max:8},"turret weapon":{min:4,max:6}},shotLimiter:{"pistol weapon":300,"smg weapon":100,"shotgun weapon":500},ammoCapacity:{"pistol weapon":9,"smg weapon":19,"shotgun weapon":6,grenades:1},totalAmmo:{"pistol weapon":45,"smg weapon":95,"shotgun weapon":30,grenades:3},ammoCostPerBox:{"pistol weapon":10,"smg weapon":20,"shotgun weapon":20,grenades:80},lastShot:{"pistol weapon":null,"smg weapon":null,"shotgun weapon":null},reloadSpeed:{"pistol weapon":.4,"smg weapon":.4,"shotgun weapon":.4},reloadAnimationFrames:{"pistol weapon":55,"smg weapon":60,"shotgun weapon":80},bulletVariance:{"pistol weapon":4e-4,"smg weapon":.001,"shotgun weapon":.002},bulletForce:{"pistol weapon":.0075,"smg weapon":.0075,"shotgun weapon":.0075,turret:.01},shellEjectionForce:{"pistol weapon":{min:3e-4,max:7e-4},"smg weapon":{min:3e-4,max:.001},"shotgun weapon":{min:8e-4,max:.0012}},shellRemovalTimeout:{"pistol weapon":2e3,"smg weapon":2e3,"shotgun weapon":2e3},buyWeapons:{"smg weapon":1500,"shotgun weapon":2750}},constants:{width:50,height:180},variables:{magnetism:400,magnetismSpeed:1,currentDirection:"",lastDirection:"",jumping:!1,jumpForce:-.4,defense:0,acceleration:{min:2,max:5},deceleration:.5},upgradeTiers:{run:{min:1,current:1,max:4},jump:{min:1,current:1,max:4},reload:{min:1,current:1,max:4},defense:{min:1,current:1,max:4},melee:{min:1,current:1,max:4}},upgradeCosts:{run:200,jump:200,reload:300,defense:400,melee:400},upgradeAmounts:{run:1,jump:-.1,reload:.1,defense:7,melee:{"pistol weapon":5,"smg weapon":6,"shotgun weapon":8}},modTiers:{rof:{"pistol weapon":{min:1,current:1,max:4},"smg weapon":{min:1,current:1,max:4},"shotgun weapon":{min:1,current:1,max:4}},powder:{"pistol weapon":{min:1,current:1,max:4},"smg weapon":{min:1,current:1,max:4},"shotgun weapon":{min:1,current:1,max:4}},sight:{"pistol weapon":{min:1,current:1,max:4},"smg weapon":{min:1,current:1,max:4},"shotgun weapon":{min:1,current:1,max:4}},mag:{"pistol weapon":{min:1,current:1,max:4},"smg weapon":{min:1,current:1,max:4},"shotgun weapon":{min:1,current:1,max:4}}},modCosts:{rof:{"pistol weapon":300,"smg weapon":400,"shotgun weapon":500},powder:{"pistol weapon":400,"smg weapon":550,"shotgun weapon":750},sight:{"pistol weapon":200,"smg weapon":300,"shotgun weapon":300},mag:{"pistol weapon":350,"smg weapon":600,"shotgun weapon":600}},modAmounts:{rof:{"pistol weapon":20,"smg weapon":15,"shotgun weapon":25},powder:{"pistol weapon":3,"smg weapon":2,"shotgun weapon":3},sight:{"pistol weapon":1e-4,"smg weapon":2e-4,"shotgun weapon":3e-4},mag:{"pistol weapon":3,"smg weapon":5,"shotgun weapon":1}}},barriers:{selectedBarrier:null,costToBuild:{Wooden:150,Stone:250,Metal:350,"Explosive Barrel":400}},traps:{turret:{fireDistance:500,cooldown:.5},selectedTrap:null,costToBuild:{Landmine:250,"Remote Mine":400,"Machine Gun Turret":750,"Cluster Bomb":500}},enemies:{zombies:{attackDmg:20,attackDmgDefault:20,attackIncrementer:.25,walkSpeed:1.5,walkSpeedDefault:1.5,walkSpeedIncrementer:.015,zombieAttackLimiter:2e3,zombieAttackDefaultLimiter:2e3,zombieAttackLimiterDecrementer:15,zombieAttackDistance:150,defaultHealth:100,startingHealth:100,healthIncrementer:.5,onRight:0,onLeft:0}},consumables:{healthkit:{20:{cost:40},50:{cost:80},full:{cost:150}}}},A="SPARTA",C="Downtown",B="Triplets",K="Collector",_="P.Modder",O="SMG Modder",V="S.Modder",T="Aficionado",j="Jumpshot",F="Piledrive",M="Traphouse",P="Barricade",D="Miner",L="Gunna",R="zombiesKilled",z="bulletsFired",W="timesReloaded",I="grenadesThrown",H="timesKilled",N="timesRespawned",U="meleeKills",G="mineKills",q="trapsPlaced",Y="turretKills",X="damageTaken",J=Object(p.b)({name:"game",initialState:k,reducers:{loadLocalStorageState:function(e){return localStorage&&localStorage.getItem("ZombieChamber-GameSave")?JSON.parse(localStorage.getItem("ZombieChamber-GameSave")):e},setTrapTypePlaced:function(e,t){return Object(h.a)({},e,{trapTypesPlaced:Object(h.a)({},e.trapTypesPlaced,Object(u.a)({},t.payload,e.trapTypesPlaced[t.payload]?e.trapTypesPlaced[t.payload]+1:1))})},setBarrierTypePlaced:function(e,t){return Object(h.a)({},e,{barrierTypesPlaced:Object(h.a)({},e.barrierTypesPlaced,Object(u.a)({},t.payload,e.barrierTypesPlaced[t.payload]?e.barrierTypesPlaced[t.payload]+1:1))})},setLastMagDropped:function(e,t){e.lastMagDropped=t.payload},increaseStats:function(e,t){e.stats[t.payload]+=1},increaseStatsByAmount:{reducer:function(e,t){e.stats[t.payload.type]+=t.payload.amount},prepare:function(e,t){return{payload:{type:e,amount:t}}}},setLastGrenadeKill:function(e,t){e.lastGrenadeKill=t.payload,e.consecutiveGrenadeKills+=1},resetConsecutiveGrenadeKills:function(e){e.consecutiveGrenadeKills=0},setZombieLastKilled:function(e,t){e.zombieLastKilled=t.payload},flipScoreToggle:function(e){e.scoreToggle=!e.scoreToggle},increaseScore:function(e,t){e.score+=t.payload},decreaseScore:function(e,t){e.score-=t.payload},updatePrevScore:function(e){e.prevScore=e.score},addPurchase:{reducer:function(e,t){e.purchases+=1,e.lastPurchase=t.payload},prepare:function(e,t){return{payload:{item:e,amount:t}}}},setZombiesOnLeft:function(e,t){e.enemies.zombies.onLeft=t.payload},setZombiesOnRight:function(e,t){e.enemies.zombies.onRight=t.payload},setRightMouseDown:function(e,t){e.rightMouseDown=t.payload},attachMod:{reducer:function(e,t){var a=t.payload,n=a.modType,o=a.wepType;switch(n){case"rof":e.player.modTiers.rof[o].current+=1,e.player.weapons.shotLimiter[o]-=e.player.modAmounts.rof[o];break;case"powder":e.player.modTiers.powder[o].current+=1,e.player.weapons.damage[o].min+=Math.round(.5*e.player.modAmounts.powder[o]),e.player.weapons.damage[o].max+=Math.round(e.player.modAmounts.powder[o]);break;case"sight":e.player.modTiers.sight[o].current+=1,e.player.weapons.bulletVariance[o]-=e.player.modAmounts.sight[o];break;case"mag":e.player.modTiers.mag[o].current+=1,e.player.weapons.ammoCapacity[o]+=e.player.modAmounts.mag[o]}},prepare:function(e,t){return{payload:{modType:e,wepType:t}}}},setPlayerCompositeId:function(e,t){console.log(t.type),e.player.compositeId=t.payload},setKeyPress:function(e,t){e.keys.push(t.payload)},removeKeyPress:function(e,t){e.keys.splice(e.keys.indexOf(parseInt(t.payload)),1)},setLastDirection:function(e,t){e.player.variables.lastDirection=t.payload},setCurrentDirection:function(e,t){e.player.variables.currentDirection=t.payload},setJumping:function(e,t){e.player.variables.jumping=t.payload},setGroundId:function(e,t){e.groundId=t.payload},setMousePosition:function(e,t){e.mousePosition=t.payload},setMouseStateX:function(e,t){e.mouseState.x=t.payload},setMouseStateY:function(e,t){e.mouseState.y=t.payload},setMouseButtonState:function(e,t){e.mouseState.btn=t.payload},setWeaponEquipped:function(e,t){e.player.weapons.equipped=t.payload},setLastShot:{reducer:function(e,t){var a=e.player.weapons;a.lastShot[a.equipped]=t.payload.dateTimeObject},prepare:function(e,t){return{payload:{weapon:e,dateTimeObject:t}}}},setMouseRelativeToPlayerPosition:function(e,t){e.mouseRelativeToPlayerPosition=t.payload},setCompositeBodyIds:function(e,t){e.player.composite=t.payload},setStaticGunAngle:function(e,t){e.staticGunAngle=t.payload},setStaticGunAngleState:function(e,t){e.staticGun=t.payload},setTexturePath:{reducer:function(e,t){e.textures[t.payload.textureName]=t.payload.texturePath},prepare:function(e,t){return{payload:{textureName:e,texturePath:t}}}},gameStateTransition:{reducer:function(e,t){switch(t.payload.type){case"sub":e.lastGameSubState=t.payload.from,e.gameSubState=t.payload.to;break;case"main":e.lastGameState=t.payload.from,e.gameState=t.payload.to}},prepare:function(e,t,a){return{payload:{type:e,from:t,to:a}}}},incrementWave:function(e){e.waveNum+=1},decrementWave:function(e){e.waveNum-=1},setWaveCountToDefeat:function(e,t){e.waveCountToDefeat=t.payload},incrementWaveCountToDefeat:function(e,t){e.waveCountToDefeat+=1},decrementWaveCountToDefeat:function(e,t){e.waveCountToDefeat-=1,e.zombiesOnStage-=1},setWeaponsList:function(e,t){e.player.weapons.list=t.payload},setShowingMessage:function(e,t){e.showingMessage=t.payload},unsetAllKeys:function(e,t){e.keys=[]},resetPlayerVariables:function(e){e=Object.assign({variables:Object(h.a)({},e,{currentDirection:"",lastDirection:"",jumping:!1})},e)},decrementTotalAmmo:function(e,t){e.player.weapons.totalAmmo[t.payload]-=1},addToTotalAmmo:{reducer:function(e,t){e.player.weapons.totalAmmo[t.payload.wepType]+=t.payload.amount},prepare:function(e,t){return{payload:{wepType:e,amount:t}}}},updateAmmoCapacity:{reducer:function(e,t){e.player.weapons.ammoCapacity[t.payload.wepType]=t.payload.newCapacityAmount},prepare:function(e,t){return{payload:{wepType:e,newCapacityAmount:t}}}},setPlayerPosition:function(e,t){e.player.position=t.payload},addToTotalCredits:function(e,t){e.player.credits+=t.payload},subtractFromTotalCredits:function(e,t){e.player.credits-=t.payload},upgradeRunSpeed:function(e){e.player.upgradeTiers.run.current+=1,e.player.variables.acceleration.max=e.player.variables.acceleration.max+e.player.upgradeAmounts.run},upgradeReloadSpeed:function(e){e.player.upgradeTiers.reload.current+=1,e.player.weapons.reloadSpeed["pistol weapon"]=e.player.weapons.reloadSpeed["pistol weapon"]+e.player.upgradeAmounts.reload,e.player.weapons.reloadSpeed["smg weapon"]=e.player.weapons.reloadSpeed["smg weapon"]+e.player.upgradeAmounts.reload},upgradeJumpForce:function(e){e.player.upgradeTiers.jump.current+=1,e.player.variables.jumpForce=e.player.variables.jumpForce+e.player.upgradeAmounts.jump},upgradeDefense:function(e){e.player.upgradeTiers.defense.current+=1,e.player.variables.defense=e.player.variables.defense+e.player.upgradeAmounts.defense},upgradeMelee:function(e){e.player.upgradeTiers.melee.current+=1,e.player.weapons.meleeDamage["pistol weapon"]+=e.player.upgradeAmounts.melee["pistol weapon"],e.player.weapons.meleeDamage["smg weapon"]+=e.player.upgradeAmounts.melee["smg weapon"]},updatePlayerHealth:function(e,t){e.player.health=t.payload},decrementGrenadeCount:function(e){e.player.weapons.totalAmmo.grenades-=1},incrementGrenadeCount:function(e){e.player.weapons.totalAmmo.grenades+=1},updateZombieWalkSpeed:function(e,t){var a=e.enemies.zombies.walkSpeedDefault,n=e.enemies.zombies.walkSpeedIncrementer;e.enemies.zombies.walkSpeed=a+t.payload*n},updateZombieAttackDmg:function(e,t){e.enemies.zombies.attackDmg=Math.round(t.payload*e.enemies.zombies.attackIncrementer+e.enemies.zombies.attackDmgDefault)},decrementZombieAttackTimeLimit:function(e,t){e.enemies.zombies.zombieAttackLimiter=e.enemies.zombies.zombieAttackDefaultLimiter-t.payload*e.enemies.zombies.zombieAttackLimiterDecrementer,console.log(e.enemies.zombies.zombieAttackLimiter)},showLaserSight:function(e,t){e.player.weapons.laser[t.payload]=!0},incrementZombieHealth:function(e,t){e.enemies.zombies.startingHealth=Math.round(e.enemies.zombies.defaultHealth+e.enemies.zombies.healthIncrementer*t.payload)},setSelectedBarrierToBuild:function(e,t){e.barriers.selectedBarrier=t.payload},setSelectedTrapToBuild:function(e,t){e.traps.selectedTrap=t.payload},setLastWaveCountDefeated:function(e){e.lastWaveCountDefeated=e.waveCountToDefeat},incrementZombiesOnStage:function(e){e.zombiesOnStage+=1},setZombiesOnStage:function(e,t){e.zombiesOnStage=t.payload},updateWeaponsList:function(e,t){e.player.weapons.list.push(t.payload)},setPlayerMagnetism:{reducer:function(e,t){e.player.variables.magnetism=t.payload.range,e.player.variables.magnetismSpeed=t.payload.speed,e.player.perks.magnetism.owned=!0},prepare:function(e,t){return{payload:{range:e,speed:t}}}},setPlayerMagDamage:function(e){e.player.perks.magDmg.owned=!0},setPlayerLastBullet:function(e){e.player.perks.lastBullet.owned=!0},setPlayerCreditDropper:function(e){e.player.perks.creditDropper.owned=!0},setPlayerAmmoDropper:function(e){e.player.perks.ammoDropper.owned=!0},setPlayerHealthDropper:function(e){e.player.perks.healthDropper.owned=!0},setPlayerQuickTurret:function(e){e.player.perks.quickTurret.owned=!0,e.traps.turret.cooldown=.25,e.traps.turret.fireDistance=600},setPlayerBarrierPlus:function(e){e.player.perks.barrierPlus.owned=!0},setPlayerFusterCluck:function(e){e.player.perks.cluck.owned=!0},toggleFilterEffects:function(e,t){e.filterEffects=t.payload},toggleZombieHealthDisplay:function(e,t){e.displayZombieHealth=t.payload},setAchievementOwned:function(e,t){e.achievements[t.payload].owned=!0,e.lastAchievementEarned=t.payload},setSubmissionForWave:function(e,t){e.scoreSubmissions[t.payload]=1},setScoreSubmissionName:function(e,t){e.scoreSubmissionName=t.payload}}}),Z=J.actions,$=Z.setScoreSubmissionName,Q=Z.setSubmissionForWave,ee=Z.loadLocalStorageState,te=Z.increaseStatsByAmount,ae=Z.setTrapTypePlaced,ne=Z.setBarrierTypePlaced,oe=Z.setLastMagDropped,ie=Z.increaseStats,re=Z.setAchievementOwned,se=Z.resetConsecutiveGrenadeKills,le=Z.setLastGrenadeKill,de=Z.setZombieLastKilled,ce=Z.flipScoreToggle,pe=Z.updatePrevScore,ue=Z.increaseScore,he=Z.decreaseScore,me=Z.toggleZombieHealthDisplay,ge=Z.toggleFilterEffects,ye=Z.setPlayerFusterCluck,fe=Z.setPlayerBarrierPlus,be=Z.setPlayerQuickTurret,we=Z.setPlayerHealthDropper,ve=Z.setPlayerAmmoDropper,xe=Z.setPlayerCreditDropper,Ee=Z.setPlayerLastBullet,Se=Z.setPlayerMagDamage,ke=Z.setPlayerMagnetism,Ae=Z.addPurchase,Ce=(Z.setZombiesOnLeft,Z.setZombiesOnRight,Z.setRightMouseDown),Be=Z.resetPlayerVariables,Ke=Z.unsetAllKeys,_e=Z.setPlayerCompositeId,Oe=Z.setKeyPress,Ve=Z.removeKeyPress,Te=Z.setLastDirection,je=Z.setCurrentDirection,Fe=Z.setJumping,Me=(Z.setGroundId,Z.setMousePosition),Pe=Z.setMouseStateX,De=Z.setMouseStateY,Le=Z.setMouseButtonState,Re=Z.setLastShot,ze=Z.setWeaponEquipped,We=Z.setMouseRelativeToPlayerPosition,Ie=Z.setCompositeBodyIds,He=Z.setTexturePath,Ne=Z.gameStateTransition,Ue=Z.incrementWave,Ge=Z.decrementWave,qe=(Z.incrementWaveCountToDefeat,Z.setWaveCountToDefeat),Ye=Z.decrementWaveCountToDefeat,Xe=(Z.setWeaponsList,Z.setShowingMessage),Je=Z.decrementTotalAmmo,Ze=Z.addToTotalAmmo,$e=(Z.updateAmmoCapacity,Z.addToTotalCredits),Qe=Z.subtractFromTotalCredits,et=Z.setPlayerPosition,tt=Z.upgradeRunSpeed,at=Z.upgradeReloadSpeed,nt=Z.upgradeJumpForce,ot=Z.upgradeDefense,it=Z.upgradeMelee,rt=Z.updatePlayerHealth,st=Z.attachMod,lt=(Z.incrementGrenadeCount,Z.decrementGrenadeCount),dt=Z.updateZombieWalkSpeed,ct=Z.updateZombieAttackDmg,pt=Z.decrementZombieAttackTimeLimit,ut=Z.showLaserSight,ht=Z.incrementZombieHealth,mt=Z.setSelectedBarrierToBuild,gt=Z.setSelectedTrapToBuild,yt=(Z.lastWaveCountDefeated,Z.incrementZombiesOnStage),ft=Z.setZombiesOnStage,bt=Z.updateWeaponsList,wt=J.reducer,vt=Object(p.a)({reducer:{game:wt}});vt.subscribe((function(){}));var xt=vt,Et=a(1),St=a(7),kt=a.n(St),At=xt.getState,Ct=window.TweenLite.to,Bt=function(e){return new c.h(c.j.from(At().game.textures[e]))},Kt=function(e){return e.bounds.max.x-e.bounds.min.x},_t=function(e){return e.bounds.max.y-e.bounds.min.y},Ot=function(e,t){var a=At().game.player.composite,n=a.headId,o=a.bodyId,i=a.armId,r=a.gunId,s=t.getKeyValue("world");return"head"===e?Et.Composite.get(s,n,"body"):"body"===e?Et.Composite.get(s,o,"body"):"arm"===e?Et.Composite.get(s,i,"body"):"gun"===e?Et.Composite.get(s,r,"body"):void 0},Vt=function(e){var t=e.getKeyValue("world"),a=At().game.player.composite.bodyId;return Et.Composite.get(t,a,"body")};var Tt=a(15),jt=a(23),Ft="greater than player x position",Mt={group:-1,category:1,mask:1},Pt={group:-1,category:2,mask:1},Dt={category:1,mask:1},Lt=a(18),Rt=a(19);function zt(){var e=Object(Lt.a)(["\npadding: ","px;\n"]);return zt=function(){return e},e}function Wt(){var e=Object(Lt.a)(["\nopacity: ","\ncolor: #fff;\nposition: relative;\nwidth: ","px;\nheight: ","px;\nline-height: ","px;\nbackground-color: ",";\nleft: 0; right: 0;\ncursor: pointer;\nmargin: auto;\nborder: 2px solid ",";\ntransform: scale(1.00);\n&:hover {\n  ",";\n  ",";\n  background-color: ",";\n  border: 2px solid ",";\n}\n"]);return Wt=function(){return e},e}function It(){var e=Object(Lt.a)(["\ntop: ","px;\nfont-size: 1.5em;\ntext-align: center;\nposition: absolute;\nwidth: 100%;\n"]);return It=function(){return e},e}function Ht(){var e=Object(Lt.a)(["\nleft: 0;\nright: 0;\ntop: 20px;\nwidth: 300px;\nmargin: auto;\ndisplay: block;\nfont-size: 2em;\ntext-align: center;\nposition: absolute;\n"]);return Ht=function(){return e},e}function Nt(){var e=Object(Lt.a)(["\nheight: ","px;\nwidth: ","px;\nopacity: ",";\nbackground-color: ",";\n"]);return Nt=function(){return e},e}function Ut(){var e=Object(Lt.a)(["\ntop: 0;\nleft: 0;\nright: 0;\nbottom: 0;\nmargin: auto;\ndisplay: block;\nposition: absolute;\nheight: ","px;\nwidth: ","px;\nbackground-color: ",";\n"]);return Ut=function(){return e},e}var Gt={Container:Rt.a.div(Ut(),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.bgcolor?e.bgcolor:"none"})),Backing:Rt.a.div(Nt(),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.opacity?e.opacity:.5}),(function(e){return e.bgcolor?e.bgcolor:"#222"})),MenuTitle:Rt.a.div(Ht()),MenuButtonContainer:Rt.a.div(It(),(function(e){return e["space-top"]?e["space-top"]:80})),MenuButton:Rt.a.div(Wt(),(function(e){return e.opacity?e.opacity:1}),(function(e){return e.width?e.width:200}),(function(e){return e.height?e.height:60}),(function(e){return e.height?e.height:60}),(function(e){return e.bgcolor?e.bgcolor:"#00589b"}),(function(e){return e.bordercolor?e.bordercolor:"rgba(0,0,0,0)"}),(function(e){return e&&!0===e.cancelTransition?"":"transition: all .35s"}),(function(e){return e&&!0===e.cancelTransition?"":"transform: scale(1.05)"}),(function(e){return e.hovercolor}),(function(e){return e.hoverborder?e.hoverborder:"rgba(0,0,0,0)"})),MenuButtonSpacer:Rt.a.div(zt(),(function(e){return e.padding?e.padding:10}))},qt=a(22),Yt=function(e){var t=xt.dispatch,a=window.TweenLite.delayedCall;t(ue(e)),t(ce()),a(.25,(function(){t(pe())}))},Xt=function(e){var t=xt.dispatch,a=window.TweenLite.delayedCall;t(he(e)),t(ce()),a(.25,(function(){t(pe())}))};function Jt(){var e=Object(Lt.a)(["\ncolor: #FFF;\ntext-align: center;\n"]);return Jt=function(){return e},e}function Zt(){var e=Object(Lt.a)(["\ntop: 0;\nwidth: 30px;\nheight: 30px;\ncolor: darkgreen;\nline-height: 30px;\ntext-align: center;\nposition: absolute;\nbackground-color: #ccc;\nleft: ",";\nright: ",";\ntransform: scale(1.0);\n&:hover {\n  transition: all;\n  transform: scale(1.05);\n  background-color: #fff;\n}\n"]);return Zt=function(){return e},e}function $t(){var e=Object(Lt.a)(["\ndisplay: inline-block;\nvertical-align: top;\nmargin-right: 4px;\n"]);return $t=function(){return e},e}var Qt=Gt.Container,ea=Gt.Backing,ta=Gt.MenuTitle,aa=Gt.MenuButtonContainer,na=Gt.MenuButton,oa=Gt.MenuButtonSpacer,ia=Rt.a.div($t()),ra=Rt.a.div(Zt(),(function(e){return e.left?0:"auto"}),(function(e){return e.right?0:"auto"})),sa=Rt.a.div(Jt()),la=function(e){return o.a.createElement(na,{opacity:e&&e.opacity?e.opacity:1,bgcolor:e&&e.bgcolor?e.bgcolor:"#222",bordercolor:e&&e.bordercolor?e.bordercolor:"#333",hovercolor:e&&e.hovercolor?e.hovercolor:"#333",hoverborder:e&&e.hoverborder?e.hoverborder:"#fff",width:e.width,height:e.height,style:e.style,cancelTransition:!(!e||!e.cancelTransition)&&e.cancelTransition,onClick:function(){e.onClick&&(e.onClick(),window.gameObjects.getKeyValue("button-click-sound").play())},onMouseOver:function(){e.cancelTransition}},e.children)},da=function(e){return o.a.createElement(la,{width:e.width?e.width:120,height:40,style:{borderRadius:"10px"},bgcolor:"#444",hovercolor:"#189969",onClick:e.onClick},e.arrowOnly?o.a.createElement("span",{style:{fontSize:"18px"}},"\u21d0"):o.a.createElement("span",{style:{fontSize:"18px"}},"\u21d0 Back"))},ca=function(e){return o.a.createElement("div",{style:{top:0,right:e.right?e.right:"20px",marginTop:e.marginTop?e.marginTop:"-40px",position:"absolute"}},e.children?e.children:o.a.createElement(da,{onClick:e.onClick,width:e.width?e.width:120,arrowOnly:!!e.arrowOnly&&e.arrowOnly}))};function pa(e){var t=e.label,a=e.labelClr,n=e.width,i=e.height,r=e.clickConfirmHandler,s=e.clickCancelHandler;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Qt,{style:{top:"150px"},width:n||500,height:i||300},o.a.createElement(ea,{width:n||500,height:i||300,bgcolor:"#222",opacity:1,style:{borderRadius:"2px",boxShadow:"5px 5px rgba(0, 0, 0, 0.2)"}}),o.a.createElement(ta,{style:{fontSize:"1.2em"}},o.a.createElement("span",{style:{color:a}},t)),o.a.createElement(aa,{"space-top":200},o.a.createElement(na,{bgcolor:"#222",bordercolor:"#333",hovercolor:"#333",hoverborder:"red",style:{display:"inline-block",fontSize:".8em",marginRight:"12px",borderRadius:"2px"},onClick:s},"Nope."),o.a.createElement(na,{bgcolor:"#222",bordercolor:"#333",hovercolor:"#333",hoverborder:"#189969",style:{display:"inline-block",fontSize:".8em",borderRadius:"2px"},onClick:r},"Confirm"))))}function ua(e){var t=e.type,a=e.toDefaultSubMenu,n=(e.toAmmoSubMenu,e.toStandardMenu,window.gameObjects),i=Object(l.c)(),r=Object(l.d)((function(e){return e.game.player.weapons.ammoCostPerBox})),d=Object(l.d)((function(e){return e.game.player.weapons.ammoCapacity})),c=Object(l.d)((function(e){return e.game.player.credits})),p=o.a.useReducer((function(e,t){switch(t.type){case"INCREASE":return Object(h.a)({},e,Object(u.a)({},t.wepType,e[t.wepType]+t.amount));case"DECREASE":return Object(h.a)({},e,Object(u.a)({},t.wepType,e[t.wepType]-t.amount));case"SET":return Object(h.a)({},e,Object(u.a)({},t.wepType,t.amount));default:return e}}),{"pistol weapon":0,"smg weapon":0,grenades:0,"shotgun weapon":0}),m=Object(s.a)(p,2),g=m[0],y=m[1],f=o.a.useState(0),b=Object(s.a)(f,2),w=b[0],v=b[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(na,{cancelTransition:!0,bgcolor:"#28934C",width:100,height:30,style:{borderRadius:"4px",fontWeight:"bold"}},"$".concat(w)),o.a.createElement(na,{cancelTransition:!0,width:150,height:30,bgcolor:"#444"},o.a.createElement(ra,{onClick:function(){var e=(g[t]-d[t])/d[t]*r[t];g[t]>0&&(y({type:"DECREASE",wepType:t,amount:d[t]}),v(e),window.gameObjects.getKeyValue("button-subtract-sound").play())},left:!0},o.a.createElement("span",{style:{fontWeight:"bold"}},"-")),o.a.createElement(sa,null,g[t]),o.a.createElement(ra,{onClick:function(){var e=(g[t]+d[t])/d[t]*r[t];c>=e?(y({type:"INCREASE",wepType:t,amount:d[t]}),v(e),window.gameObjects.getKeyValue("button-add-sound").play()):window.gameObjects.getKeyValue("button-cancel-sound").play()},right:!0},o.a.createElement("span",{style:{fontWeight:"bold"}},"+"))),o.a.createElement(na,{cancelTransition:!0,bgcolor:"rgba(0,0,0,0)",height:30},o.a.createElement("div",{style:{display:"inline-block",marginRight:"4px"}},o.a.createElement(la,{onClick:function(){a(),y({type:"SET",wepType:t,amount:0}),v(0),window.gameObjects.getKeyValue("button-cancel-sound").play()},width:80,height:30,hoverborder:"#B00000"},"Cancel")),o.a.createElement("div",{style:{display:"inline-block"}},w>0?o.a.createElement(la,{onClick:function(){var e=n.getKeyValue("weapons-ui");Object(l.b)((function(){i(Qe(w)),i(Ae("grenades"!==t?"".concat(t," ammo"):w>r[t]?t:"a grenade",w)),i(Ze(t,g[t]))})),y({type:"SET",wepType:t,amount:0}),"grenades"===t?e.updateGrenadeIcons():(e.select(t),i(ze(t)),e.reload(!0)),v(0),a()},width:100,height:30,hoverborder:"#189969"},"Buy"):null)))}var ha=function(e){var t=e.type,a=e.toDefaultSubMenu,n=e.subMenuType,i=e.setSubMenuType,r=(e.toStandardMenu,Object(l.d)((function(e){return e.game.player.upgradeTiers}))),s=Object(l.d)((function(e){return e.game.player.upgradeCosts})),d=Object(l.d)((function(e){return e.game.player.credits})),c=Object(l.c)(),p={run:tt,jump:nt,reload:at,defense:ot,melee:it},u=function(e){switch(e){case"run":return"Run Speed";case"jump":return"Jump Height";case"reload":return"Reload Speed";case"defense":return"Defense";case"melee":return"Melee Attack Power"}};return o.a.createElement(o.a.Fragment,null,n.indexOf(" upgrade sub menu")>-1?n===t+" upgrade sub menu"?o.a.createElement(pa,{label:"Upgrade ".concat(u(t)," to lvl. ").concat(r[t].current+1,"?"),clickConfirmHandler:function(){c(Qe(s[t])),c(Ae("".concat(u(t)," Boost"),s[t])),c(p[t]()),a()},clickCancelHandler:function(){a()}}):null:o.a.createElement(o.a.Fragment,null,o.a.createElement(la,{width:u(t).length>14?340:240,onClick:function(){d>s[t]&&r[t].current<r[t].max?i(t+" upgrade sub menu"):window.gameObjects.getKeyValue("button-cancel-sound").play()}},u(t)," ",r[t].current!==r[t].max?"Lvl.":"",r[t].current!==r[t].max?r[t].current+1:""," - ",o.a.createElement("span",{style:{color:d>s[t]&&r[t].current<r[t].max?"#189969":"red"}},r[t].current<r[t].max?"$".concat(s[t]):"MAXED")),o.a.createElement("br",null)))};function ma(e){var t=e.type,a=e.setSubMenuType,n=window.gameObjects,i=Object(l.c)(),r=Object(l.d)((function(e){return e.game.player.credits})),d=Object(l.d)((function(e){return e.game.player.modTiers})),c=Object(l.d)((function(e){return e.game.player.modCosts})),p=Object(l.d)((function(e){return e.game.player.weapons.ammoCapacity})),u=function(e){switch(e){case"pistol weapon":return"Pistol";case"smg weapon":return"SMG";case"shotgun weapon":return"SHOTGUN"}},h=u(t),m=function(e,t){switch(e){case"rof":return d[e][t].current===d[e][t].max?"RATE OF FIRE MAXED!":"Upgrade Rate-of-Fire";case"powder":return d[e][t].current===d[e][t].max?"FIREPOWER MAXED!":"Increase Firepower";case"sight":return d[e][t].current===d[e][t].max?"ACCURACY MAXED!":"Upgrade Accuracy";case"mag":return d[e][t].current===d[e][t].max?"AMMO CAP MAXED!":"Increase Ammo Capacity"}},g=o.a.useState(null),y=Object(s.a)(g,2),f=y[0],b=y[1],w=o.a.useState(null),v=Object(s.a)(w,2),x=v[0],E=v[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(ia,{style:{marginLeft:"40px"}},f&&x?o.a.createElement(o.a.Fragment,null,o.a.createElement(pa,{label:"".concat(u(x)," ").concat(m(f,x)," lvl.").concat(d[f][x].current+1,"?"),labelClr:d[f][x].current===d[f][x].max?"red":"white",clickConfirmHandler:function(){(i(Qe(c[f][x])),i(Ae(function(e,t){switch(e){case"rof":return"Rate of fire boost for the ".concat(t);case"powder":return"Firepower boost for the ".concat(t);case"sight":return"Accuracy boost for the ".concat(t);case"mag":return"Magazine ammo capacity boost for the ".concat(t)}}(f,x),c[f][x])),i(st(f,x)),"mag"===f)&&(i(Ze(x,p[x])),n.getKeyValue("weapons-ui").updateWeaponMagazines(x));"sight"===f&&i(ut(x)),b(null),E(null),a("none - default")},clickCancelHandler:function(){b(null),E(null),a("none - default")}})):["rof","powder","sight","mag"].map((function(e,a){return o.a.createElement(o.a.Fragment,{key:a},o.a.createElement(la,{onClick:function(){r>=c[e][t]&&d[e][t].current<d[e][t].max?(b(e),E(t)):window.gameObjects.getKeyValue("button-cancel-sound").play()},width:520},h,": ",m(e,t)," ",d[e][t].current===d[e][t].max?"":" - lvl."," ",d[e][t].current<d[e][t].max?d[e][t].current+1:"",d[e][t].current<d[e][t].max?"-":"",o.a.createElement("span",{style:{color:r>=c[e][t]&&d[e][t].current!==d[e][t].max?"#189969":"red"}},"\n                  ".concat(d[e][t].current===d[e][t].max?"":"$".concat(c[e][t])))),o.a.createElement("br",null))}))),f||x?null:o.a.createElement(ia,null,o.a.createElement(la,{onClick:function(){a("none - default")},width:80,height:30,hoverborder:"red",style:{marginLeft:"10px"}},"close")))}function ga(){var e=o.a.useState("standard menu"),t=Object(s.a)(e,2),a=t[0],n=t[1],i=o.a.useState("none - default"),r=Object(s.a)(i,2),d=r[0],c=r[1],p=Object(l.c)(),u=Object(l.d)((function(e){return e.game})),h=Object(l.d)((function(e){return e.game.gameState})),m=Object(l.d)((function(e){return e.game.gameSubState})),g=Object(l.d)((function(e){return e.game.player.credits})),y=window.gameObjects,f=y.getKeyValue("game-width"),b=y.getKeyValue("game-height"),w=y.getKeyValue("screen-ui"),x=y.getKeyValue("player"),E=function(){c("none - default")},k=function(){n("ammo menu")},A=function(){n("standard menu"),c("none - default")},C=function(e){switch(e){case"pistol weapon":c("pistol ammunition submenu");break;case"smg weapon":c("smg ammunition submenu");break;case"shotgun weapon":c("shotgun ammunition submenu");break;case"grenades":c("grenades submenu")}},B=function(e){return{color:u.player.credits>u.consumables.healthkit[e].cost&&u.player.health<100?"#189969":"red"}};return o.a.useEffect((function(){"buy weapons menu"===a&&u.player.weapons.list.indexOf("shotgun weapon")>-1&&u.player.weapons.list.indexOf("smg weapon")>-1&&(p(re(K)),Yt(u.scoreAmounts.achievement),A())}),[u.player.weapons.list,a]),o.a.useEffect((function(){u.player.modTiers.rof["pistol weapon"].current===u.player.modTiers.rof["pistol weapon"].max&&u.player.modTiers.powder["pistol weapon"].current===u.player.modTiers.powder["pistol weapon"].max&&u.player.modTiers.sight["pistol weapon"].current===u.player.modTiers.sight["pistol weapon"].max&&u.player.modTiers.mag["pistol weapon"].current===u.player.modTiers.mag["pistol weapon"].max&&(p(re(_)),Yt(u.scoreAmounts.achievement)),u.player.modTiers.rof["smg weapon"].current===u.player.modTiers.rof["smg weapon"].max&&u.player.modTiers.powder["smg weapon"].current===u.player.modTiers.powder["smg weapon"].max&&u.player.modTiers.sight["smg weapon"].current===u.player.modTiers.sight["smg weapon"].max&&u.player.modTiers.mag["smg weapon"].current===u.player.modTiers.mag["smg weapon"].max&&(p(re(O)),Yt(u.scoreAmounts.achievement)),u.player.modTiers.rof["shotgun weapon"].current===u.player.modTiers.rof["shotgun weapon"].max&&u.player.modTiers.powder["shotgun weapon"].current===u.player.modTiers.powder["shotgun weapon"].max&&u.player.modTiers.sight["shotgun weapon"].current===u.player.modTiers.sight["shotgun weapon"].max&&u.player.modTiers.mag["shotgun weapon"].current===u.player.modTiers.mag["shotgun weapon"].max&&(p(re(V)),Yt(u.scoreAmounts.achievement)),u.achievements[_].owned&&u.achievements[O].owned&&u.achievements[V].owned&&(p(re(T)),Yt(u.scoreAmounts.achievement))}),[u.player.modTiers]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Qt,{width:.75*f,height:.75*b},o.a.createElement(ea,{width:.75*f,height:.75*b}),o.a.createElement(ta,null,"Shop"),o.a.createElement(aa,{width:f},"standard menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(oa,null,o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(la,{width:350,onClick:function(){k()}},"Buy Ammo & Grenades"))),o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(la,{onClick:function(){n("healthkit menu")}},"Buy Health Kits"))),o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(la,{onClick:function(){n("perks menu")}},"Perks")))),o.a.createElement(oa,null,o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(la,{onClick:function(){n("player attributes menu")}},"Upgrade Player"))),o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(la,{onClick:function(){n("weapon mods menu")}},"Weapon Mods"))),u.player.weapons.list.indexOf("shotgun weapon")>-1&&u.player.weapons.list.indexOf("smg weapon")>-1?null:o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(la,{onClick:function(){n("buy weapons menu")}},"Buy New Weapons")))),o.a.createElement(oa,null,o.a.createElement(da,{onClick:function(){w.unpause(),p(Ne("main",h,S.GAMEPLAY)),p(Ne("sub",m,v))}},"Back"))):null,"ammo menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(oa,null,o.a.createElement(ia,null,o.a.createElement(oa,null,"pistol ammunition submenu"===d?o.a.createElement(ua,{type:"pistol weapon",toDefaultSubMenu:E,toAmmoSubMenu:k,toStandardMenu:A}):o.a.createElement(la,{onClick:function(){C("pistol weapon")}},"Buy Pistol Ammo"))),u.player.weapons.list.indexOf("smg weapon")>-1?o.a.createElement(ia,null,o.a.createElement(oa,null,"smg ammunition submenu"===d&&u.player.weapons.list.indexOf("smg weapon")>-1?o.a.createElement(ua,{type:"smg weapon",toDefaultSubMenu:E,toAmmoSubMenu:k,toStandardMenu:A}):o.a.createElement(la,{onClick:function(){C("smg weapon")}},"Buy SMG Ammo"))):null),o.a.createElement(oa,null,o.a.createElement(ia,null,o.a.createElement(oa,null,"grenades submenu"===d?o.a.createElement(ua,{type:"grenades",toDefaultSubMenu:E,toAmmoSubMenu:k,toStandardMenu:A}):o.a.createElement(la,{onClick:function(){C("grenades")}},"Buy Grenades"))),u.player.weapons.list.indexOf("shotgun weapon")>-1?o.a.createElement(ia,null,o.a.createElement(oa,null,"shotgun ammunition submenu"===d&&u.player.weapons.list.indexOf("shotgun weapon")>-1?o.a.createElement(ua,{type:"shotgun weapon",toDefaultSubMenu:E,toAmmoSubMenu:k,toStandardMenu:A}):o.a.createElement(la,{onClick:function(){C("shotgun weapon")}},"Buy Shotgun Shells"))):null),o.a.createElement(oa,null,o.a.createElement(da,{onClick:function(){A()}}))):null,"healthkit menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(oa,null,o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(la,{width:300,onClick:function(){var e;u.player.health<100?(e=u.player.health+20>100?100:u.player.health+20,x.acceptHealth(e),p(Qe(u.consumables.healthkit[20].cost)),p(Ae("+20 Healthkit",u.consumables.healthkit[20].cost)),y.getKeyValue("health-pickup-sound").play()):y.getKeyValue("button-cancel-sound").play()}},"+20 Healthkit - ",o.a.createElement("span",{style:B("20")},u.player.health<100?"".concat(u.consumables.healthkit[20].cost):"Health Full")))),o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(la,{width:300,onClick:function(){var e;u.player.health<100?(e=u.player.health+50>100?100:u.player.health+50,x.acceptHealth(e),p(Qe(u.consumables.healthkit[50].cost)),p(Ae("+50 Healthkit",u.consumables.healthkit[50].cost)),y.getKeyValue("health-pickup-sound").play()):y.getKeyValue("button-cancel-sound").play()}},"+50 Healthkit - ",o.a.createElement("span",{style:B("50")},u.player.health<100?"".concat(u.consumables.healthkit[50].cost):"Health Full"))))),o.a.createElement(oa,null,o.a.createElement(la,{width:300,onClick:function(){u.player.health<100?(x.acceptHealth(100),p(Qe(u.consumables.healthkit.full.cost)),p(Ae("Full Healthkit",u.consumables.healthkit.full.cost)),y.getKeyValue("health-pickup-sound").play()):y.getKeyValue("button-cancel-sound").play()}},"Full Healthkit - ",o.a.createElement("span",{style:B("full")},u.player.health<100?"".concat(u.consumables.healthkit.full.cost):"Health Full"))),o.a.createElement(oa,null,o.a.createElement(da,{onClick:function(){A()}},"Back"))):null,"player attributes menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(oa,null,o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(ha,{type:"run",toDefaultSubMenu:E,toStandardMenu:A,subMenuType:d,setSubMenuType:c}))),o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(ha,{type:"jump",toDefaultSubMenu:E,toStandardMenu:A,subMenuType:d,setSubMenuType:c}))),o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(ha,{type:"reload",toDefaultSubMenu:E,toStandardMenu:A,subMenuType:d,setSubMenuType:c})))),o.a.createElement(oa,null,o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(ha,{type:"defense",toDefaultSubMenu:E,toStandardMenu:A,subMenuType:d,setSubMenuType:c}))),o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(ha,{type:"melee",toDefaultSubMenu:E,toStandardMenu:A,subMenuType:d,setSubMenuType:c}))),d.indexOf(" upgrade sub menu")>-1?null:o.a.createElement(oa,null,o.a.createElement(da,{onClick:function(){A()}},"Back")))):null,"perks menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{onClick:function(){n("standard menu")},style:{top:0,right:"20px",marginTop:"-40px",position:"absolute"}},o.a.createElement(da,{width:50,arrowOnly:!0})),o.a.createElement(oa,null,u.player.perks.magnetism.owned?null:o.a.createElement(ia,null,o.a.createElement(oa,{"data-tip":!0,"data-for":"increase-magnetism"},o.a.createElement(la,{width:260,onClick:function(){g>=u.player.perks.magnetism.cost?(p(Qe(u.player.perks.magnetism.cost)),p(ke(1200,4)),p(Ae("Magnetism perk",u.player.perks.magnetism.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Increase Magnetism",o.a.createElement("span",{style:{color:g>=u.player.perks.magnetism.cost?"green":"red"}},"\xa0$",u.player.perks.magnetism.cost))),o.a.createElement(qt.a,{id:"increase-magnetism",type:"dark"},o.a.createElement("span",null,"Will increase the effect of items being drawn to you for easy pick up"))),u.player.perks.magDmg.owned?null:o.a.createElement(ia,null,o.a.createElement(oa,{"data-tip":!0,"data-for":"mag-damage"},o.a.createElement(la,{width:260,onClick:function(){g>=u.player.perks.magDmg.cost?(p(Qe(u.player.perks.magDmg.cost)),p(Se()),p(Ae("Mag Damage perk",u.player.perks.magDmg.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Magazine Damage",o.a.createElement("span",{style:{color:g>=u.player.perks.magDmg.cost?"green":"red"}},"\xa0$",u.player.perks.magDmg.cost))),o.a.createElement(qt.a,{id:"mag-damage",type:"dark"},o.a.createElement("span",null,"Ejected magazines will damage enemies"))),u.player.perks.lastBullet.owned?null:o.a.createElement(ia,null,o.a.createElement(oa,{"data-tip":!0,"data-for":"last-bullet"},o.a.createElement(la,{width:260,onClick:function(){g>=u.player.perks.lastBullet.cost?(p(Qe(u.player.perks.lastBullet.cost)),p(Ee()),p(Ae("Last Bullet Extra Damage perk",u.player.perks.lastBullet.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Last Round",o.a.createElement("span",{style:{color:g>=u.player.perks.lastBullet.cost?"green":"red"}},"\xa0$",u.player.perks.lastBullet.cost))),o.a.createElement(qt.a,{id:"last-bullet",type:"dark"},o.a.createElement("span",null,"Last bullet fired will cause greater damage to enemies")))),o.a.createElement(oa,null,u.player.perks.creditDropper.owned?null:o.a.createElement(ia,null,o.a.createElement(oa,{"data-tip":!0,"data-for":"credit-dropper"},o.a.createElement(la,{width:260,onClick:function(){g>=u.player.perks.creditDropper.cost?(p(Qe(u.player.perks.creditDropper.cost)),p(xe()),p(Ae("Credit Dropper perk",u.player.perks.creditDropper.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Credit Dropper",o.a.createElement("span",{style:{color:g>=u.player.perks.creditDropper.cost?"green":"red"}},"\xa0$",u.player.perks.creditDropper.cost))),o.a.createElement(qt.a,{id:"credit-dropper",type:"dark"},o.a.createElement("span",null,"Enemies will drop more credits"))),u.player.perks.ammoDropper.owned?null:o.a.createElement(ia,null,o.a.createElement(oa,{"data-tip":!0,"data-for":"ammo-dropper"},o.a.createElement(la,{width:260,onClick:function(){g>=u.player.perks.ammoDropper.cost?(p(Qe(u.player.perks.ammoDropper.cost)),p(ve()),p(Ae("Ammo Dropper perk",u.player.perks.ammoDropper.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Ammo Dropper",o.a.createElement("span",{style:{color:g>=u.player.perks.ammoDropper.cost?"green":"red"}},"\xa0$",u.player.perks.ammoDropper.cost))),o.a.createElement(qt.a,{id:"ammo-dropper",type:"dark"},o.a.createElement("span",null,"Enemies will now drop ammunition"))),u.player.perks.healthDropper.owned?null:o.a.createElement(ia,null,o.a.createElement(oa,{"data-tip":!0,"data-for":"health-dropper"},o.a.createElement(la,{width:260,onClick:function(){g>=u.player.perks.healthDropper.cost?(p(Qe(u.player.perks.healthDropper.cost)),p(we()),p(Ae("Health Dropper perk",u.player.perks.healthDropper.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Health Dropper",o.a.createElement("span",{style:{color:g>=u.player.perks.healthDropper.cost?"green":"red"}},"\xa0$",u.player.perks.healthDropper.cost))),o.a.createElement(qt.a,{id:"health-dropper",type:"dark"},o.a.createElement("span",null,"Enemies will now drop small health kits")))),o.a.createElement(oa,null,u.player.perks.quickTurret.owned?null:o.a.createElement(ia,null,o.a.createElement(oa,{"data-tip":!0,"data-for":"quick-turret"},o.a.createElement(la,{width:260,onClick:function(){g>=u.player.perks.quickTurret.cost?(p(Qe(u.player.perks.quickTurret.cost)),p(be()),p(Ae("Turret Upgrade perk",u.player.perks.quickTurret.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Quick Turrets",o.a.createElement("span",{style:{color:g>=u.player.perks.quickTurret.cost?"green":"red"}},"\xa0$",u.player.perks.quickTurret.cost))),o.a.createElement(qt.a,{id:"quick-turret",type:"dark"},o.a.createElement("span",null,"Any placed machine gun turrets will now have less delay between fired shots and slightly more range"))),u.player.perks.barrierPlus.owned?null:o.a.createElement(ia,null,o.a.createElement(oa,{"data-tip":!0,"data-for":"barrier-plus"},o.a.createElement(la,{width:260,onClick:function(){g>=u.player.perks.barrierPlus.cost?(p(Qe(u.player.perks.barrierPlus.cost)),p(fe()),p(Ae("Barrier Plus+ perk",u.player.perks.barrierPlus.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Barrier Plus",o.a.createElement("span",{style:{color:g>=u.player.perks.barrierPlus.cost?"green":"red"}},"\xa0$",u.player.perks.barrierPlus.cost))),o.a.createElement(qt.a,{id:"barrier-plus",type:"dark"},o.a.createElement("span",null,"Placed barriers will now have increased strength to ward of oncoming enemies"))),u.player.perks.cluck.owned?null:o.a.createElement(ia,null,o.a.createElement(oa,{"data-tip":!0,"data-for":"big-cluster"},o.a.createElement(la,{width:260,onClick:function(){g>=u.player.perks.cluck.cost?(p(Qe(u.player.perks.cluck.cost)),p(ye()),p(Ae("Fuster Cluck perk",u.player.perks.cluck.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Fuster Cluck",o.a.createElement("span",{style:{color:g>=u.player.perks.cluck.cost?"green":"red"}},"\xa0$",u.player.perks.cluck.cost))),o.a.createElement(qt.a,{id:"big-cluster",type:"dark"},o.a.createElement("span",null,"Cluster bombs will now expel more explosives"))))):null,"buy weapons menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(oa,null,u.player.weapons.list.indexOf("smg weapon")<0?o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(la,{width:300,onClick:function(){g>=u.player.weapons.buyWeapons["smg weapon"]?Object(l.b)((function(){p(Qe(u.player.weapons.buyWeapons["smg weapon"])),p(Ae("Submachine Gun",u.player.weapons.buyWeapons["smg weapon"])),p(bt("smg weapon"))})):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Buy Submachine Gun: ",o.a.createElement("span",{style:{color:g<=u.player.weapons.buyWeapons["smg weapon"]?"red":"green"}},"$",u.player.weapons.buyWeapons["smg weapon"])))):null,u.player.weapons.list.indexOf("shotgun weapon")<0?o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(la,{width:300,onClick:function(){g>=u.player.weapons.buyWeapons["shotgun weapon"]?Object(l.b)((function(){p(Qe(u.player.weapons.buyWeapons["shotgun weapon"])),p(Ae("Shotgun",u.player.weapons.buyWeapons["shotgun weapon"])),p(bt("shotgun weapon"))})):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Buy Shotgun: ",o.a.createElement("span",{style:{color:g<=u.player.weapons.buyWeapons["shotgun weapon"]?"red":"green"}},"$",u.player.weapons.buyWeapons["shotgun weapon"])))):null),o.a.createElement(oa,null,o.a.createElement(da,{onClick:function(){A()}}))):null,"weapon mods menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(oa,{style:{marginTop:"-15px"}},"pistol mods submenu"===d?o.a.createElement(ia,null,o.a.createElement(ma,{type:"pistol weapon",setSubMenuType:c})):null,"smg mods submenu"===d?o.a.createElement(ia,null,o.a.createElement(ma,{type:"smg weapon",setSubMenuType:c})):null,"shotgun mods submenu"===d?o.a.createElement(ia,null,o.a.createElement(ma,{type:"shotgun weapon",setSubMenuType:c})):null,"none - default"===d?o.a.createElement(o.a.Fragment,null,o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(la,{onClick:function(){c("pistol mods submenu")}},"Pistol Mods"))),u.player.weapons.list.indexOf("smg weapon")>-1?o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(la,{onClick:function(){c("smg mods submenu")}},"SMG Mods"))):null,u.player.weapons.list.indexOf("shotgun weapon")>-1?o.a.createElement(ia,null,o.a.createElement(oa,null,o.a.createElement(la,{onClick:function(){c("shotgun mods submenu")}},"Shotgun Mods"))):null,o.a.createElement(oa,{style:{marginTop:"40px"}},o.a.createElement(da,{onClick:A},"Back"))):null)):null)))}var ya=function(e){var t=e.backBtnFn,a=window.gameObjects,n=Object(l.d)((function(e){return e})),i=Object.keys(n.game.achievements);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Gt.Container,{width:a?.75*a.getKeyValue("game-width"):900,height:a?.75*a.getKeyValue("game-height"):412.5},o.a.createElement(Gt.Backing,{width:a?.75*a.getKeyValue("game-width"):900,height:a?.75*a.getKeyValue("game-height"):412.5}),o.a.createElement(Gt.MenuTitle,null,"Achievements"),o.a.createElement(Gt.MenuButtonContainer,null,i.map((function(e){if(n.game.achievements[e].owned)return o.a.createElement(o.a.Fragment,{key:e},o.a.createElement(ia,null,o.a.createElement(Gt.MenuButtonSpacer,{"data-tip":!0,"data-for":e+"-description"},o.a.createElement(la,null,e))),o.a.createElement(qt.a,{id:e+"-description"},o.a.createElement("span",null,"Earned by: ",n.game.achievements[e].description)))})),o.a.createElement(ca,{marginTop:"-60px",onClick:t}))))},fa=a(21),ba=a(41),wa=a(72),va=xt.getState,xa=xt.dispatch,Ea=window.TweenLite,Sa=Ea.to,ka=Ea.from;function Aa(){var e,t=this,a=window.gameObjects,n=a.getKeyValue("game-pixi-container"),o=a.getKeyValue("game-width"),i=a.getKeyValue("game-height"),r=Bt("weapon-ui-icon-pistol"),s=Bt("weapon-ui-icon-smg"),l=Bt("weapon-ui-icon-shotgun"),d=[],p=(new wa.a({distance:3,alpha:1}),new wa.a({distance:1,alpha:2}),new c.f);p.beginFill(4345921),p.drawRect(0,0,120,90),p.alpha=.65,p.position.x=o-p.width-20,p.position.y=i-p.height-20,n.addChild(p),r.width=r.width/2,r.height=r.height/2,d.push(r),s.width=s.width/2,s.height=s.height/2,d.push(s),l.width=l.width/2,l.height=l.height/2,d.push(l),d.forEach((function(e){e.position.x=o-(e.width+20),e.position.y=i-(e.height+10),e.alpha=0,n.addChild(e)})),this.keepOnTop=function(){n.addChild(p),d.forEach((function(e){n.addChild(e)})),u["pistol weapon"].concat(u["smg weapon"]).concat(u["shotgun weapon"]).forEach((function(e){n.addChild(e)})),t.grenades.forEach((function(e){n.addChild(e)})),t.shaking&&!t.reloading&&n.addChild(t.emptyText)},setInterval(this.keepOnTop,1e3);var u={"pistol weapon":null,"smg weapon":null,"shotgun weapon":null},h=new c.f;h.beginFill(16777215),h.drawRect(r.position.x,r.position.y,r.width,r.height),n.addChild(h),window.gameObjects.getKeyValue("bullet-shell-bevel-ui")||window.gameObjects.setKeyValue("bullet-shell-bevel-ui",new fa.a({lightAlpha:.5,shadowAlpha:.5,thickness:.5}));var m=window.gameObjects.getKeyValue("bullet-shell-bevel-ui");this.checkFilters=function(){va().game.filterEffects?(u["pistol weapon"].forEach((function(e){e.filters=[m]})),u["shotgun weapon"].forEach((function(e){e.filters=[m]})),t.grenades&&t.gbevel&&t.gnoise&&t.grenades.forEach((function(e){e.filters=[t.gbevel,t.gnoise]}))):(u["pistol weapon"].forEach((function(e){e.filters=[]})),u["shotgun weapon"].forEach((function(e){e.filters=[]})),t.grenades&&t.grenades.forEach((function(e){e.filters=[]})))};var g={"pistol weapon":function(){u["pistol weapon"]=u["pistol weapon"].map((function(e,t){var a=new c.f;return a.lineStyle(1,5656365),a.beginFill(12559650),a.drawRect(0,0,4,8),a.filters=va().game.filterEffects?[m]:[],a.alpha=0,a.position.x=o-27-r.width/u["pistol weapon"].length*t,a.position.y=r.position.y+r.height-22,n.addChild(a),a.mask=h,a}))},"smg weapon":function(){u["smg weapon"]=u["smg weapon"].map((function(e,t){var a=new c.f;return a.lineStyle(1,5656365),a.beginFill(13549954),a.drawRect(0,0,2,8),a.alpha=0,a.position.x=o-24-s.width/u["smg weapon"].length*t,a.position.y=s.position.y+s.height-22,n.addChild(a),a.mask=h,a}))},"shotgun weapon":function(){u["shotgun weapon"]=u["shotgun weapon"].map((function(e,t){var a=new c.f;return a.lineStyle(1,4068115),a.beginFill(11534336),a.drawRect(0,0,4,8),a.beginFill(12363845),a.drawRect(0,8,4,3),a.filters=va().game.filterEffects?[m]:[],a.alpha=0,a.position.x=o-32-l.width/u["shotgun weapon"].length*t,a.position.y=l.position.y+l.height-26,n.addChild(a),a.mask=h,a}))}},y={"pistol weapon":r,"smg weapon":s,"shotgun weapon":l};this.updateMagazine=function(e){var t=va().game.player.weapons.ammoCapacity;u[e]&&(u[e].forEach((function(e){e.destroy()})),u[e]=null),u[e]=new Array(t[e]).fill(1),g[e]()},this.updateMagazine("pistol weapon"),this.updateMagazine("smg weapon"),this.updateMagazine("shotgun weapon"),e=[u["pistol weapon"],u["smg weapon"],u["shotgun weapon"]],this.swapSwap=function(e){var a=va().game.player.weapons,n=a.list,o=a.equipped;f[e]=0;var i=n.indexOf(e);i>-1&&t.select(n[i+1]?n[i+1]:n[0]),window.TweenLite.delayedCall(.05,(function(){t.select(o)}))},this.updateWeaponMagazines=function(a){var o=va().game.player.weapons.list;e.forEach((function(e){e.forEach((function(e){n.removeChild(e)}))})),o.forEach((function(e){t.updateMagazine(e)})),e=[u["pistol weapon"],u["smg weapon"],u["shotgun weapon"]],t.reload(!0),xa(ze(a)),t.swapSwap(a)};var f={"pistol weapon":0,"smg weapon":0,"shotgun weapon":0},b={"pistol weapon":!1,"smg weapon":!1,"shotgun weapon":!1};this.checkEmpty=function(e){return b[e]};var w=function(e,a,n){Sa(e,.1,{x:a+10,onComplete:function(){Sa(e,.1,{x:a-10,onComplete:function(){Sa(e,.1,{x:a+5,onComplete:function(){Sa(e,.1,{x:a-5,onComplete:function(){Sa(e,.1,{x:a+3,onComplete:function(){Sa(e,.1,{x:a-2,onComplete:function(){Sa(e,.1,{x:a+1,onComplete:function(){Sa(e,.1,{x:a,onComplete:function(){t.shaking=!1,n()}})}})}})}})}})}})}})}})};this.textForEmptyShake="RELOAD",this.changeTextForEmptyShake=function(e){t.textForEmptyShake=e,t.emptyText.text=e},this.emptyText=new c.i(this.textForEmptyShake,{fill:11534336,fontSize:"15px",fontWeight:"bold"}),this.emptyText.pivot.x=.5*this.emptyText.width,this.emptyText.pivot.y=.5*this.emptyText.height,this.emptyText.position.x=p.position.x+.5*p.width,this.emptyText.position.y=p.position.y+.8*p.height,this.removeEmptyText=function(){n.removeChild(t.emptyText)},this.shaking=!1,this.emptyMagShake=function(){n.addChild(t.emptyText),t.shaking||(t.shaking=!0,d.forEach((function(e){var a=e.position.x;w(e,a,t.removeEmptyText)})),w(p,p.position.x,t.removeEmptyText))},this.reloading=!1,this.reload=function(e){t.reloading&&!e||function(){var a=va().game.player.weapons,n=a.reloadAnimationFrames,i=a.equipped,r=a.totalAmmo;if(t.removeEmptyText(),0!==f[i]&&0!==r[i]||e){e&&(f[i]=0),t.reloading=!0;var s=r[i]<u[i].length;u[i].forEach((function(e,t){e.alpha=0}));for(var l=function(a,s){var l=u[i][a];l.alpha=1,ka(l,n[i]/60,{x:o-l.width*a,onComplete:function(a){a===s-1&&(f[i]=0,b[i]=!1,t.lastBulletByWepType[i]=!1,e&&(t.reloading=!1)),0===r[i]&&(t.reloading=!1)},onCompleteParams:[a]})},d=0,c=s?r[i]:u[i].length;d<c;++d)l(d,c)}}()},this.select=function(t){var a=va().game.player.weapons,n=a.totalAmmo,o=a.equipped;d.forEach((function(e){e.alpha=0})),e.forEach((function(e){e.forEach((function(e){e&&e.hasOwnProperty("alpha")&&(e.alpha=0)}))})),y[t||o].alpha=1;var i=n[t||o]<u[t||o].length;if(0!==n[t||o]){var r=i?n[t||o]:u[t||o].length-f[t||o],s=i?u[t||o].length-n[t||o]:0;i&&(f[t||o]=s);for(var l=0;l<r;++l)u[t||o][u[t||o].length-1-l].alpha=1}b[o]&&u[o].forEach((function(e){t||(e.alpha=0)}))},this.lastBulletByWepType={"pistol weapon":!1,"smg weapon":!1,"shotgun weapon":!1},this.fireBullet=function(e){u[e][f[e]]&&(u[e][f[e]].alpha=0,f[e]++,xa(Je(e)),u[e].length===f[e]&&(t.lastBulletByWepType[e]=!0),u[e].length===f[e]&&(b[e]=!0))};var v=function(){t.gbevel=new fa.a,t.gnoise=new ba.a,t.gbevel.shadowAlpha=.45,t.gbevel.lightAlpha=.35,t.gbevel.thickness=5,t.gbevel.shadowColor=0,t.gbevel.lightColor=2133060,t.gnoise.noise=.1,t.gnoise.seed=.5;var e=new c.f;return e.lineStyle(1,0),e.beginFill(2049836),e.drawCircle(0,0,6),e.filters=va().game.filterEffects?[t.gbevel,t.gnoise]:[],n.addChild(e),e};return this.grenades=[],this.updateGrenadeIcons=function(){t.grenades&&t.grenades.forEach((function(e){e.destroy()})),t.grenades=[];for(var e=va().game.player.weapons.totalAmmo.grenades,a=0;a<e;++a){var n=v();t.grenades.push(n)}t.grenades.forEach((function(e,t){e.position.x=va().game.width-25-1.5*e.width*t,e.position.y=va().game.height-110-e.height,ka(e,.1*t,{y:e.position.y-10,alpha:0})}))},this.updateGrenadeIcons(),this}var Ca=function(){var e=window.gameObjects,t=va().game.gameState;if(e){var a=e.getKeyValue("weapons-ui");!a||a.reloading&&t!==S.SHOP_MENU||(a.select(),e=null)}},Ba=Gt.Container,Ka=Gt.Backing,_a=Gt.MenuTitle,Oa=Gt.MenuButtonContainer,Va=Gt.MenuButtonSpacer,Ta=function(){for(var e=window.gameObjects.getKeyValue("screen-ui"),t=window.gameObjects.getKeyValue("player"),a=window.gameObjects.getKeyValue("zombies");a.length>0;)a.forEach((function(e){e.kill(null,!0)}));window.gameObjects.setKeyValue("zombies",[]),e.unpause(),t.dead&&e.respawn()},ja=function(){var e=xt.dispatch;Ta(),Object(l.b)((function(){e(ft(0)),e(qe(null)),e(Ne("sub",xt.getState().game.gameSubState,m)),e(Ne("main",xt.getState().game.gameState,S.MAIN_MENU))}))},Fa=function(e){var t=e.bgcolor,a=e.bordercolor,n=e.hoverborder,i=e.hovercolor,r=e.width,s=e.height,l=e.children;return o.a.createElement(la,{onMouseOver:null,width:r||"200px",height:s||"60px",hovercolor:i||"#222",hoverborder:n||"#333",bordercolor:a||"#333",bgcolor:t||"#222",cancelTransition:!0},l)},Ma=function(e){var t=e.label,a=e.stat;return o.a.createElement(Va,{padding:1},o.a.createElement(ia,null,o.a.createElement(Fa,{width:200,height:35,bgcolor:"rgba(0, 0, 0, 0.75)",hovercolor:"rgba(0, 0, 0, 0.75)",bordercolor:"rgba(0, 0, 0, 0)",hoverborder:"rgba(0, 0, 0, 0)"},t)),o.a.createElement(ia,null,o.a.createElement(Fa,{width:400,height:35,bgcolor:"rgba(0, 0, 0, 0.4)",hovercolor:"rgba(0, 0, 0, 0.5)",bordercolor:"rgba(0, 0, 0, 0)",hoverborder:"rgba(0, 0, 0, 0)"},a)))};function Pa(e){var t=window.gameObjects,a=Object(l.c)(),n=Object(l.d)((function(e){return e.game})),i=Object(l.d)((function(e){return e.game.gameState})),r=Object(l.d)((function(e){return e.game.gameSubState})),d=Object(l.d)((function(e){return e.game.stats})),c=t.getKeyValue("game-width"),p=t.getKeyValue("game-height"),u="Default",h="achievements",m="Controls",y="Options",f="Stats",b=function(){E(u)},w=o.a.useState(u),v=Object(s.a)(w,2),x=v[0],E=v[1],k=Object(l.d)((function(e){return e.game.filterEffects})),A=Object(l.d)((function(e){return e.game.displayZombieHealth}));return o.a.createElement(o.a.Fragment,null,t?o.a.createElement(Ba,{style:{top:e.margintop?"100px":0},width:.75*c,height:e["shop-query-visibility"]?.5*p:.75*p},e.hidebg?null:o.a.createElement(o.a.Fragment,null,o.a.createElement(Ka,{bgcolor:"#222",opacity:i===S.MAIN_MENU?.35:.5,width:.75*c,height:e["shop-query-visibility"]?.5*p:.75*p})),x===u?o.a.createElement(o.a.Fragment,null,e.hidetitle?null:o.a.createElement(_a,null,"Pause Menu"),o.a.createElement(Oa,{width:c||0},o.a.createElement(Va,{padding:i===S.PAUSE?4:6},e.playbtn?o.a.createElement(la,{height:40,onClick:function(){a(Ne("main",i,S.GAMEPLAY)),a(Ne("sub",r,g)),setTimeout((function(){var e=window.gameObjects.getKeyValue("weapons-ui");e.updateGrenadeIcons(),Ca(),e.updateWeaponMagazines(n.player.weapons.equipped),window.gameObjects.getKeyValue("screen-ui").unpause()}),100)}},"Play Game"):o.a.createElement(la,{height:40,onClick:function(){i===S.PAUSE&&window.gameObjects.getKeyValue("screen-ui").togglePause()}},"Resume Game")),i!==S.MAIN_MENU?o.a.createElement(Va,{padding:4},o.a.createElement(la,{height:40,onClick:ja},"Main Menu")):o.a.createElement(Va,{padding:2},o.a.createElement(la,{height:40,onClick:function(){a(Ne("main",S.MAIN_MENU,S.SCORES_VIEW))}},"Scoreboard")),o.a.createElement(Va,{padding:4},o.a.createElement(la,{height:40,onClick:function(){E(m)}},"View Controls")),o.a.createElement(Va,{padding:4},o.a.createElement(la,{height:40,onClick:function(){E(y)}},"Options")),o.a.createElement(Va,{padding:i===S.PAUSE?1:4},o.a.createElement(la,{height:40,onClick:function(){E(f)}},"Stats")),o.a.createElement(Va,{padding:i===S.PAUSE?1:4},o.a.createElement(la,{height:40,onClick:function(){E(h)}},"Achievements")))):null,x===h?o.a.createElement(ya,{backBtnFn:b}):null,x===m?o.a.createElement(o.a.Fragment,null,o.a.createElement(_a,null,"Controls"),o.a.createElement(Oa,{width:c},o.a.createElement(ca,{marginTop:"-60px",onClick:b}),o.a.createElement(ia,null,o.a.createElement(la,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Jump: W"),o.a.createElement(la,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Run Left: A"),o.a.createElement(la,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Run Right: D"),o.a.createElement(la,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Melee Weapon Bash: F"),o.a.createElement(la,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Aim: Mouse"),o.a.createElement(la,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Shoot: Left Mouse")),o.a.createElement(ia,null,o.a.createElement(la,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Pause Game: P / Esc"),o.a.createElement(la,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Charge Grenade Throw: Hold G / Right Mouse"),o.a.createElement(la,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Change Weapon: Space / Mouse Wheel"),o.a.createElement(la,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Turn Turret: L/R Arrow (while placing)"),o.a.createElement(la,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Detonate remote mines: Numpad  1 - 9")))):null,x===y?o.a.createElement(o.a.Fragment,null,o.a.createElement(_a,null,"Options"),o.a.createElement(Oa,null,o.a.createElement(ca,{marginTop:"-60px",onClick:b}),o.a.createElement(Va,null,o.a.createElement(ia,null,o.a.createElement(Va,{padding:4},o.a.createElement(Fa,{width:240,height:60},"Effect Filters?"))),o.a.createElement(ia,null,o.a.createElement(Va,{padding:4,"data-tip":!0,"data-for":"effects-filter"},o.a.createElement(la,{width:100,hoverborder:k?"white":"red",onClick:function(){a(ge(!k)),window.gameObjects.getKeyValue("zombies").forEach((function(e){return e.checkFilters()}));var e=window.gameObjects.getKeyValue("ammo-drops-by-type");e["smg weapon"].concat(e["pistol weapon"]).concat(e["shotgun weapon"]).forEach((function(e){return e.checkFilters()})),window.gameObjects.getKeyValue("currency-drops").forEach((function(e){return e.checkFilters()})),window.gameObjects.getKeyValue("health-drops").forEach((function(e){return e.checkFilters()})),window.gameObjects.getKeyValue("player").checkFilters(),window.gameObjects.getKeyValue("weapons-ui").checkFilters()}},o.a.createElement("span",{style:{color:k?"white":"red"}},k?"On":"Off"))),o.a.createElement(qt.a,{id:"effects-filter"},o.a.createElement("span",null,"Adds filter effects like glow and motion blur to animations. Turning off could improve performance.")))),o.a.createElement(Va,null,o.a.createElement(ia,null,o.a.createElement(Va,{padding:4},o.a.createElement(Fa,{width:240,height:60},"Display Zombie Health?"))),o.a.createElement(ia,null,o.a.createElement(Va,{padding:4,"data-tip":!0,"data-for":"display-zombie-health"},o.a.createElement(la,{width:100,hoverborder:A?"white":"red",onClick:function(){a(me(!A)),window.gameObjects.getKeyValue("zombies").forEach((function(e){e.displayHealth(!A)}))}},o.a.createElement("span",{style:{color:A?"white":"red"}},A?"On":"Off"))),o.a.createElement(qt.a,{id:"display-zombie-health"},o.a.createElement("span",null,"Displays a yellow text box above each enemy zombie")))))):null,x===f?o.a.createElement(o.a.Fragment,null,o.a.createElement(_a,null,"Stats"),o.a.createElement(Oa,null,o.a.createElement(ca,{marginTop:"-60px",onClick:b}),o.a.createElement(Ma,{label:"Shots Fired",stat:d.bulletsFired}),o.a.createElement(Ma,{label:"Mags Changed",stat:d.timesReloaded}),o.a.createElement(Ma,{label:"Grenades Thrown",stat:d.grenadesThrown}),o.a.createElement(Ma,{label:"Zombies Killed",stat:d.zombiesKilled}),o.a.createElement(Ma,{label:"Deaths",stat:d.timesKilled}))):null):null)}var Da=xt.getState,La=xt.dispatch,Ra=function(e,t,a,n){c.c.from("Arial",{fill:t,fontSize:40,fontWeight:"bold"});var o=window,i=o.gameObjects,r=o.TweenLite,s=r.from,l=r.to,d=o.Power1,p=i.getKeyValue("game-pixi-container"),u=i.getKeyValue("game-width"),h=i.getKeyValue("game-height"),m=new c.d(e,{font:"Arial"});m.pivot.x=m.width/2,m.pivot.y=m.height/2,m.position.x=u/2,m.position.y=h/2,p.addChild(m),s(m,a,{x:-100,alpha:0,onStart:function(){La(Xe(!0))},onComplete:function(){l(m,a,{delay:n,x:1.5*u,ease:d.easeIn,onComplete:function(){La(Xe(!1)),p.removeChild(m)}})}})},za=function(e,t,a,n,o){var i=window,r=i.gameObjects,s=i.TweenLite,l=s.to,d=s.set,p=r.getKeyValue("game-pixi-container"),u=r.getKeyValue("text-messages"),h=r.getKeyValue("player").body,m=new c.i(e,{fill:t,fontSize:o||13,fontWeight:"bold"});m.pivot.x=.5*m.width,m.pivot.y=.5*m.height,p.addChild(m);var g=Da().game.player.position,y=g.y-.65*_t(h);u.push(m),d(m,{x:g.x,y:y-20*u.length}),l(m,a,{x:g.x,y:y-20*u.length-20,onComplete:function(){l(m,a,{delay:n,alpha:0,onComplete:function(){m.destroy();var e=u.indexOf(m);e>-1&&u.splice(e,1)}})}})},Wa=window.TweenLite,Ia=Wa.delayedCall,Ha=Wa.to;function Na(e,t,a){var n=this,o=e.position_x,i=e.position_y,r=t.force_x,s=t.force_y,l=window.gameObjects,d=l.getKeyValue("gibs"),p=l.getKeyValue("world"),u=l.getKeyValue("game-pixi-container"),h=Et.Bodies.circle(o,i,5,{collisionFilter:{category:2,mask:1}});h.label="gib",Et.World.add(p,h);var m=l.getKeyValue("player-parts-sheet"),g=new c.h(m.textures[function(){var e=["gib.png","gib2.png","gib3.png","gib4.png"];return e[Math.floor(Math.random()*e.length)]}()]);return u.addChild(g),d.push(this),g.pivot.x=.5*g.width,g.pivot.y=.475*g.height,Et.Body.applyForce(h,{x:o,y:i},{x:kt.a.float(.25*r,r),y:kt.a.float(.25*s,s)}),this.animate=function(e){var t=e(h),a=t.x,n=t.y,o=t.rotation;g.position={x:a,y:n},g.rotation=o},this.destroy=function(){g&&g.destroy(),h&&Et.World.remove(p,h);var e=d.indexOf(n);e>-1&&d.splice(e,1),p=null,h=null,u=null,d=null,l=null},Ia(a,(function(){Ha(g,2,{alpha:0,onComplete:function(){n.destroy()}})})),this}function Ua(e,t,a,n){for(var o=t.x,i=t.y,r=a=a||{force_x:0,force_y:0},s=r.x,l=r.y,d=0;d<e;++d)new Na({position_x:o,position_y:i},{force_x:s,force_y:l},n)}function Ga(e,t,a){var n=this,o=e.x,i=e.y,r=window.gameObjects,s=r.getKeyValue("world"),l=r.getKeyValue("game-pixi-container"),d=40,p=60,u=25,h=25,m=15,g=30,y=15,f=50,b=15,w=20,v=10,x=7,E=10,S=14,k=10,A=10,C=Et.Bodies.rectangle(o,i,d,p,{collisionFilter:Pt}),B=Et.Bodies.rectangle(o,i,u,h,{}),K=Et.Bodies.rectangle(o,i,u,h,{}),_=Et.Bodies.rectangle(o,i,m,g,{collisionFilter:Mt}),O=Et.Bodies.rectangle(o,i,m,g,{collisionFilter:Mt}),V=Et.Bodies.rectangle(o,i,b,w,{}),T=Et.Bodies.rectangle(o,i,m,g,{}),j=Et.Bodies.rectangle(o,i,m,g,{}),F=Et.Bodies.rectangle(o,i,b,w,{}),M=Et.Bodies.rectangle(o,i,y,f,{collisionFilter:Mt}),P=Et.Bodies.rectangle(o,i,y,f,{collisionFilter:Mt}),D=Et.Bodies.rectangle(o,i,y,f,{}),L=Et.Bodies.rectangle(o,i,y,f,{}),R=Et.Bodies.rectangle(o,i,E,S,{}),z=Et.Bodies.rectangle(o,i,v,x,{}),W=Et.Constraint.create({bodyA:C,bodyB:B,pointA:{x:0,y:-p/2},pointB:{x:0,y:h/2},length:1}),I=Et.Constraint.create({bodyA:C,bodyB:_,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),H=Et.Constraint.create({bodyA:C,bodyB:O,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),N=Et.Constraint.create({bodyA:_,bodyB:T,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),U=Et.Constraint.create({bodyA:O,bodyB:j,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),G=Et.Constraint.create({bodyA:T,bodyB:V,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),q=Et.Constraint.create({bodyA:j,bodyB:F,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),Y=Et.Constraint.create({bodyA:C,bodyB:M,pointA:{x:0,y:p/2},pointB:{x:0,y:-f/2},length:2}),X=Et.Constraint.create({bodyA:C,bodyB:P,pointA:{x:0,y:p/2},pointB:{x:0,y:-f/2},length:1}),J=Et.Constraint.create({bodyA:M,bodyB:D,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),Z=Et.Constraint.create({bodyA:P,bodyB:L,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:2}),$=Et.Constraint.create({bodyA:D,bodyB:R,pointA:{x:0,y:f/2},pointB:{x:0,y:-S/2},length:1}),Q=Et.Constraint.create({bodyA:L,bodyB:z,pointA:{x:0,y:f/2},pointB:{x:0,y:-x/2},length:1}),ee=[],te=function(){for(var e=[],t=0;t<6;++t){var a=Et.Bodies.rectangle(C.position.x,C.position.y,k,A);e.push(a)}return{spineLinks:e,spineConstraints:[Et.Constraint.create({bodyA:e[0],bodyB:e[1],pointA:{x:0,y:A/2},pointB:{x:0,y:-A/2},length:4}),Et.Constraint.create({bodyA:e[1],bodyB:e[2],pointA:{x:0,y:A/2},pointB:{x:0,y:-A/2},length:4}),Et.Constraint.create({bodyA:e[2],bodyB:e[3],pointA:{x:0,y:A/2},pointB:{x:0,y:-A/2},length:4}),Et.Constraint.create({bodyA:e[3],bodyB:e[4],pointA:{x:0,y:A/2},pointB:{x:0,y:-A/2},length:4}),Et.Constraint.create({bodyA:e[4],bodyB:e[5],pointA:{x:0,y:A/2},pointB:{x:0,y:-A/2},length:4})]}}(),ae=te.spineLinks,ne=te.spineConstraints,oe=Et.Constraint.create({bodyA:B,bodyB:ae[0],pointA:{x:0,y:h/2},pointB:{x:0,y:-A/2},length:10});this.composite=Et.Composite.create(),Et.Composite.add(this.composite,[B,K,C,_,O,T,j,M,P,D,L,V,F,R,z,W,G,q,$,Q,I,H,N,U,Y,X,J,Z]),Et.Composite.add(this.composite,ae),Et.Composite.add(this.composite,ne),Et.Composite.add(this.composite,oe),Et.World.add(s,this.composite),Et.Body.applyForce(C,C.position,t);var ie=t.x<0?{x:-.002}:{x:.002};ie.y=-.002,new Ua(kt.a.int(15,20),C.position,ie,5);var re=r.getKeyValue("player-parts-sheet"),se=[];console.log(a);var le=new c.h(re.textures["rear_leg_foot.png"]);le._id="foot 2",se.push(le);var de=new c.h(re.textures["rear_leg_lower.png"]);de._id="leg 2",se.push(de);var ce=new c.h(re.textures["rear_arm_hand.png"]);ce._id="hand 2",se.push(ce);var pe=new c.h(re.textures["rear_arm_forearm.png"]);pe._id="arm 2",se.push(pe);var ue=new c.h(re.textures["rear_arm_upper.png"]);ue._id="limb",se.push(ue);var he=new c.h(re.textures["front_leg_foot.png"]);he._id="foot 1",se.push(he);var me=new c.h(re.textures["rear_leg_upper.png"]);me._id="limb",se.push(me);var ge=new c.h(re.textures["head_gore.png"]);ge._id="skull",se.push(ge);var ye=new c.h(re.textures["mask.png"]);ye._id="mask",se.push(ye);var fe=new c.h(re.textures["front_leg_lower.png"]);fe._id="leg 1",se.push(fe);var be=new c.h(re.textures["front_leg_upper.png"]);be._id="limb",se.push(be),ae.forEach((function(e){var t=new c.h(re.textures["spine_link.png"]);ee.push(t),se.push(t)}));var we=new c.h(re.textures["torso_whole_headless.png"]);we._id="torso upper",se.push(we);var ve=new c.h(re.textures["front_arm_hand.png"]);ve._id="hand 1",se.push(ve);var xe=new c.h(re.textures["front_arm_forearm.png"]);xe._id="arm 1",se.push(xe);var Ee=new c.h(re.textures["front_arm_upper.png"]);return Ee._id="limb",se.push(Ee),se.forEach((function(e){e.updateAnchor=!0,"skull"===e._id?(e.pivot.x=.55*e.width,e.pivot.y=.475*e.height):"foot 1"===e._id||"foot 2"===e._id?(e.pivot.x=.525*e.width,e.pivot.y=.5*e.height):(e.pivot.x=.5*e.width,e.pivot.y=.5*e.height),l.addChild(e)})),this.head=B,this.mask=K,this.bodyUpper=C,this.armUpperL=_,this.armUpperR=O,this.armLowerL=T,this.armLowerR=j,this.legUpperL=M,this.legUpperR=P,this.legLowerL=D,this.legLowerR=L,this.handL=V,this.handR=F,this.footL=R,this.footR=z,this.destroy=function(){r.setKeyValue("player-ragdoll",null),se.forEach((function(e){e.destroy(),e=null})),Et.World.remove(s,n.composite),n.composite=null,s=null,l=null,r=null},this.animateRagParts=function(e){ae.forEach((function(t,a){var n=e(t);ee[a].position=n,ee[a].rotation=n.rotation}));var t=e(n.mask);ye.position=t,ye.rotation=t.rotation;var a=e(n.head);ge.position=a,ge.rotation=a.rotation;var o=e(n.bodyUpper);we.position=o,we.rotation=o.rotation;var i=e(n.armLowerL);xe.position=i,xe.rotation=i.rotation;var r=e(n.armUpperL);Ee.position=r,Ee.rotation=r.rotation;var s=e(n.handL);ve.position=s,ve.rotation=s.rotation;var l=e(n.legUpperL);be.position=l,be.rotation=l.rotation;var d=e(n.legLowerL);fe.position=d,fe.rotation=d.rotation;var c=e(n.footL);he.position=c,he.rotation=c.rotation;var p=e(n.armLowerR);pe.position=p,pe.rotation=p.rotation;var u=e(n.armUpperR);ue.position=u,ue.rotation=u.rotation;var h=e(n.handR);ce.position=h,ce.rotation=h.rotation;var m=e(n.legUpperR);me.position=m,me.rotation=m.rotation;var g=e(n.legLowerR);de.position=g,de.rotation=g.rotation;var y=e(n.footR);le.position=y,le.rotation=y.rotation},Et.Composite.remove(this.composite,W),Et.Body.applyForce(this.head,this.head.position,{x:0,y:-.1}),this}function qa(e,t,a){var n=this,o=e.x,i=e.y,r=window.gameObjects,s=r.getKeyValue("world"),l=r.getKeyValue("game-pixi-container"),d=40,p=35,u=45,h=5,m=25,g=25,y=15,f=30,b=15,w=50,v=15,x=20,E=10,S=7,k=10,A=14,C=10,B=10,K=Et.Bodies.rectangle(o,i,u,h),_=Et.Bodies.rectangle(o,i,d,p,{collisionFilter:Pt}),O=Et.Bodies.rectangle(o,i,m,g,{}),V=Et.Bodies.rectangle(o,i,y,f,{collisionFilter:Mt}),T=Et.Bodies.rectangle(o,i,y,f,{collisionFilter:Mt}),j=Et.Bodies.rectangle(o,i,v,x,{}),F=Et.Bodies.rectangle(o,i,y,f,{}),M=Et.Bodies.rectangle(o,i,y,f,{}),P=Et.Bodies.rectangle(o,i,v,x,{}),D=Et.Bodies.rectangle(o,i,b,w,{collisionFilter:Mt}),L=Et.Bodies.rectangle(o,i,b,w,{collisionFilter:Mt}),R=Et.Bodies.rectangle(o,i,b,w,{}),z=Et.Bodies.rectangle(o,i,b,w,{}),W=Et.Bodies.rectangle(o,i,k,A,{}),I=Et.Bodies.rectangle(o,i,E,S,{}),H=Et.Constraint.create({bodyA:_,bodyB:O,pointA:{x:0,y:-p/2},pointB:{x:0,y:g/2},length:1}),N=Et.Constraint.create({bodyA:_,bodyB:V,pointA:{x:0,y:-p/4},pointB:{x:0,y:-f/2},length:1}),U=Et.Constraint.create({bodyA:_,bodyB:T,pointA:{x:0,y:-p/4},pointB:{x:0,y:-f/2},length:1}),G=Et.Constraint.create({bodyA:V,bodyB:F,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),q=Et.Constraint.create({bodyA:T,bodyB:M,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),Y=Et.Constraint.create({bodyA:F,bodyB:j,pointA:{x:0,y:f/2},pointB:{x:0,y:-x/2},length:1}),X=Et.Constraint.create({bodyA:M,bodyB:P,pointA:{x:0,y:f/2},pointB:{x:0,y:-x/2},length:1}),J=Et.Constraint.create({bodyA:K,bodyB:D,pointA:{x:0,y:h/2},pointB:{x:0,y:-w/2},length:2}),Z=Et.Constraint.create({bodyA:K,bodyB:L,pointA:{x:0,y:h/2},pointB:{x:0,y:-w/2},length:1}),$=Et.Constraint.create({bodyA:D,bodyB:R,pointA:{x:0,y:w/2},pointB:{x:0,y:-w/2},length:1}),Q=Et.Constraint.create({bodyA:L,bodyB:z,pointA:{x:0,y:w/2},pointB:{x:0,y:-w/2},length:2}),ee=Et.Constraint.create({bodyA:R,bodyB:W,pointA:{x:0,y:w/2},pointB:{x:0,y:-A/2},length:1}),te=Et.Constraint.create({bodyA:z,bodyB:I,pointA:{x:0,y:w/2},pointB:{x:0,y:-S/2},length:1}),ae=[],ne=[],oe=function(){for(var e=[],t=0;t<6;++t){var a=Et.Bodies.rectangle(_.position.x,_.position.y,C,B);e.push(a)}return{spineLinks:e,spineConstraints:[Et.Constraint.create({bodyA:e[0],bodyB:e[1],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4}),Et.Constraint.create({bodyA:e[1],bodyB:e[2],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4}),Et.Constraint.create({bodyA:e[2],bodyB:e[3],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4}),Et.Constraint.create({bodyA:e[3],bodyB:e[4],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4}),Et.Constraint.create({bodyA:e[4],bodyB:e[5],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4})]}},ie=oe(),re=ie.spineLinks,se=ie.spineConstraints,le=oe(),de=le.spineLinks,ce=le.spineConstraints,pe=Et.Constraint.create({bodyA:_,bodyB:re[0],pointA:{x:0,y:p/2},pointB:{x:0,y:-B/2},length:10}),ue=Et.Constraint.create({bodyA:K,bodyB:de[0],pointA:{x:0,y:-h/2},pointB:{x:0,y:-B/2},length:10});this.composite=Et.Composite.create(),Et.Composite.add(this.composite,[O,_,K,V,T,F,M,D,L,R,z,j,P,W,I,H,Y,X,ee,te,N,U,G,q,J,Z,$,Q]),Et.Composite.add(this.composite,re),Et.Composite.add(this.composite,se),Et.Composite.add(this.composite,pe),Et.Composite.add(this.composite,de),Et.Composite.add(this.composite,ce),Et.Composite.add(this.composite,ue),Et.World.add(s,this.composite),Et.Body.applyForce(_,_.position,t);var he=t.x<0?{x:-.002}:{x:.002};he.y=-.002,new Ua(kt.a.int(15,20),_.position,he,5);var me=r.getKeyValue("player-parts-sheet"),ge=[];console.log(a);var ye=new c.h(me.textures["rear_leg_foot.png"]);ye._id="foot 2",ge.push(ye);var fe=new c.h(me.textures["rear_leg_lower.png"]);fe._id="leg 2",ge.push(fe);var be=new c.h(me.textures["rear_arm_hand.png"]);be._id="hand 2",ge.push(be);var we=new c.h(me.textures["rear_arm_forearm.png"]);we._id="arm 2",ge.push(we);var ve=new c.h(me.textures["rear_arm_upper.png"]);ve._id="limb",ge.push(ve);var xe=new c.h(me.textures["front_leg_foot.png"]);xe._id="foot 1",ge.push(xe);var Ee=new c.h(me.textures["rear_leg_upper.png"]);Ee._id="limb",ge.push(Ee);var Se=new c.h(me.textures["skull.png"]);Se._id="skull",ge.push(Se);var ke=new c.h(me.textures["front_leg_lower.png"]);ke._id="leg 1",ge.push(ke);var Ae=new c.h(me.textures["front_leg_upper.png"]);Ae._id="limb",ge.push(Ae),re.forEach((function(e){var t=new c.h(me.textures["spine_link.png"]);ae.push(t),ge.push(t)})),de.forEach((function(e){var t=new c.h(me.textures["entrail_chunk.png"]);ne.push(t),ge.push(t)}));var Ce=new c.h(me.textures["torso_upper_gore.png"]);Ce._id="torso upper",ge.push(Ce);var Be=new c.h(me.textures["torso_lower_gore.png"]);Be._id="torso lower",ge.push(Be);var Ke=new c.h(me.textures["front_arm_hand.png"]);Ke._id="hand 1",ge.push(Ke);var _e=new c.h(me.textures["front_arm_forearm.png"]);_e._id="arm 1",ge.push(_e);var Oe=new c.h(me.textures["front_arm_upper.png"]);return Oe._id="limb",ge.push(Oe),ge.forEach((function(e){e.updateAnchor=!0,"skull"===e._id?(e.pivot.x=.55*e.width,e.pivot.y=.475*e.height):"foot 1"===e._id||"foot 2"===e._id?(e.pivot.x=.525*e.width,e.pivot.y=.5*e.height):(e.pivot.x=.5*e.width,e.pivot.y=.5*e.height),l.addChild(e)})),this.head=O,this.bodyUpper=_,this.bodyLower=K,this.armUpperL=V,this.armUpperR=T,this.armLowerL=F,this.armLowerR=M,this.legUpperL=D,this.legUpperR=L,this.legLowerL=R,this.legLowerR=z,this.handL=j,this.handR=P,this.footL=W,this.footR=I,this.destroy=function(){r.setKeyValue("player-ragdoll",null),ge.forEach((function(e){e.destroy()})),Et.World.remove(s,n.composite)},this.animateRagParts=function(e){re.forEach((function(t,a){var n=e(t);ae[a].position=n,ae[a].rotation=n.rotation})),de.forEach((function(t,a){var n=e(t);ne[a].position=n,ne[a].rotation=n.rotation}));var t=e(n.head);Se.position=t,Se.rotation=t.rotation;var a=e(n.bodyUpper);Ce.position=a,Ce.rotation=a.rotation;var o=e(n.bodyLower);Be.position=o,Be.rotation=o.rotation;var i=e(n.armLowerL);_e.position=i,_e.rotation=i.rotation;var r=e(n.armUpperL);Oe.position=r,Oe.rotation=r.rotation;var s=e(n.handL);Ke.position=s,Ke.rotation=s.rotation;var l=e(n.legUpperL);Ae.position=l,Ae.rotation=l.rotation;var d=e(n.legLowerL);ke.position=d,ke.rotation=d.rotation;var c=e(n.footL);xe.position=c,xe.rotation=c.rotation;var p=e(n.armLowerR);we.position=p,we.rotation=p.rotation;var u=e(n.armUpperR);ve.position=u,ve.rotation=u.rotation;var h=e(n.handR);be.position=h,be.rotation=h.rotation;var m=e(n.legUpperR);Ee.position=m,Ee.rotation=m.rotation;var g=e(n.legLowerR);fe.position=g,fe.rotation=g.rotation;var y=e(n.footR);ye.position=y,ye.rotation=y.rotation},this}function Ya(e,t,a){var n=this,o=e.x,i=e.y,r=window.gameObjects,s=r.getKeyValue("world"),l=r.getKeyValue("game-pixi-container"),d=40,p=55,u=25,h=15,m=15,g=30,y=15,f=50,b=15,w=20,v=10,x=7,E=10,S=14,k=Et.Bodies.rectangle(o,i,d,p,{collisionFilter:Pt}),A=Et.Bodies.rectangle(o,i,u,h,{}),C=Et.Bodies.rectangle(o,i,m,g,{collisionFilter:Mt}),B=Et.Bodies.rectangle(o,i,m,g,{collisionFilter:Mt}),K=Et.Bodies.rectangle(o,i,b,w,{}),_=Et.Bodies.rectangle(o,i,m,g,{}),O=Et.Bodies.rectangle(o,i,m,g,{}),V=Et.Bodies.rectangle(o,i,b,w,{}),T=Et.Bodies.rectangle(o,i,y,f,{collisionFilter:Mt}),j=Et.Bodies.rectangle(o,i,y,f,{collisionFilter:Mt}),F=Et.Bodies.rectangle(o,i,y,f,{}),M=Et.Bodies.rectangle(o,i,y,f,{}),P=Et.Bodies.rectangle(o,i,E,S,{}),D=Et.Bodies.rectangle(o,i,v,x,{}),L=Et.Constraint.create({bodyA:k,bodyB:A,pointA:{x:0,y:-p/2},pointB:{x:0,y:h/2},length:1}),R=Et.Constraint.create({bodyA:k,bodyB:C,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),z=Et.Constraint.create({bodyA:k,bodyB:B,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),W=Et.Constraint.create({bodyA:C,bodyB:_,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),I=Et.Constraint.create({bodyA:B,bodyB:O,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),H=Et.Constraint.create({bodyA:_,bodyB:K,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),N=Et.Constraint.create({bodyA:O,bodyB:V,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),U=Et.Constraint.create({bodyA:k,bodyB:T,pointA:{x:-d/4,y:p/2},pointB:{x:0,y:-f/2},length:2}),G=Et.Constraint.create({bodyA:k,bodyB:j,pointA:{x:0,y:p/2},pointB:{x:0,y:-f/2},length:1}),q=Et.Constraint.create({bodyA:T,bodyB:F,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),Y=Et.Constraint.create({bodyA:j,bodyB:M,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:2}),X=Et.Constraint.create({bodyA:F,bodyB:P,pointA:{x:0,y:f/2},pointB:{x:0,y:-S/2},length:1}),J=Et.Constraint.create({bodyA:M,bodyB:D,pointA:{x:0,y:f/2},pointB:{x:0,y:-x/2},length:1});this.composite=Et.Composite.create(),Et.Composite.add(this.composite,[A,k,C,B,_,O,T,j,F,M,K,V,P,D,L,H,N,X,J,R,z,W,I,U,G,q,Y]),Et.World.add(s,this.composite),Et.Body.applyForce(k,k.position,t);var Z=r.getKeyValue("player-parts-sheet"),$=[];console.log(a);var Q=t.x<0?{x:-.002}:{x:.002};Q.y=-.002,new Ua(kt.a.int(15,20),k.position,Q,5);var ee=new c.h(Z.textures["rear_leg_foot.png"]);ee._id="foot 2",$.push(ee);var te=new c.h(Z.textures["rear_leg_lower.png"]);te._id="leg 2",$.push(te);var ae=new c.h(Z.textures["rear_arm_hand.png"]);ae._id="hand 2",$.push(ae);var ne=new c.h(Z.textures["rear_arm_forearm.png"]);ne._id="arm 2",$.push(ne);var oe=new c.h(Z.textures["rear_arm_upper_gore.png"]);oe._id="limb",$.push(oe);var ie=new c.h(Z.textures["front_leg_foot.png"]);ie._id="foot 1",$.push(ie);var re=new c.h(Z.textures["rear_leg_upper.png"]);re._id="limb",$.push(re);var se=new c.h(Z.textures["skull_gore.png"]);se._id="skull",$.push(se);var le=new c.h(Z.textures["front_leg_lower.png"]);le._id="leg 1",$.push(le);var de=new c.h(Z.textures["front_leg_upper.png"]);de._id="limb",$.push(de);var ce=new c.h(Z.textures["torso_whole_gore.png"]);ce._id="torso",$.push(ce);var pe=new c.h(Z.textures["front_arm_hand.png"]);pe._id="hand 1",$.push(pe);var ue=new c.h(Z.textures["front_arm_forearm.png"]);ue._id="arm 1",$.push(ue);var he=new c.h(Z.textures["front_arm_upper_gore.png"]);return he._id="limb",$.push(he),$.forEach((function(e){e.updateAnchor=!0,"skull"===e._id?(e.pivot.x=.55*e.width,e.pivot.y=.475*e.height):"foot 1"===e._id||"foot 2"===e._id?(e.pivot.x=.525*e.width,e.pivot.y=.5*e.height):(e.pivot.x=.5*e.width,e.pivot.y=.5*e.height),l.addChild(e)})),this.head=A,this.bodyUpper=k,this.armUpperL=C,this.armUpperR=B,this.armLowerL=_,this.armLowerR=O,this.legUpperL=T,this.legUpperR=j,this.legLowerL=F,this.legLowerR=M,this.handL=K,this.handR=V,this.footL=P,this.footR=D,this.destroy=function(){r.setKeyValue("player-ragdoll",null),$.forEach((function(e){e.destroy()})),Et.World.remove(s,n.composite)},this.animateRagParts=function(e){var t=e(n.head);se.position=t,se.rotation=t.rotation;var a=e(n.bodyUpper);ce.position=a,ce.rotation=a.rotation;var o=e(n.armLowerL);ue.position=o,ue.rotation=o.rotation;var i=e(n.armUpperL);he.position=i,he.rotation=i.rotation;var r=e(n.handL);pe.position=r,pe.rotation=r.rotation;var s=e(n.legUpperL);de.position=s,de.rotation=s.rotation;var l=e(n.legLowerL);le.position=l,le.rotation=l.rotation;var d=e(n.footL);ie.position=d,ie.rotation=d.rotation;var c=e(n.armLowerR);ne.position=c,ne.rotation=c.rotation;var p=e(n.armUpperR);oe.position=p,oe.rotation=p.rotation;var u=e(n.handR);ae.position=u,ae.rotation=u.rotation;var h=e(n.legUpperR);re.position=h,re.rotation=h.rotation;var m=e(n.legLowerR);te.position=m,te.rotation=m.rotation;var g=e(n.footR);ee.position=g,ee.rotation=g.rotation},Et.Composite.remove(this.composite,[R,z]),Et.Body.applyForce(this.armLowerL,this.armLowerL.position,{x:-.01,y:-.1}),Et.Body.applyForce(this.armLowerR,this.armUpperR.position,{x:.01,y:-.1}),this}function Xa(e,t,a){var n=this,o=e.x,i=e.y,r=window.gameObjects,s=r.getKeyValue("world"),l=r.getKeyValue("game-pixi-container"),d=40,p=55,u=25,h=15,m=15,g=30,y=15,f=50,b=15,w=20,v=10,x=7,E=10,S=14,k=Et.Bodies.rectangle(o,i,d,p,{collisionFilter:Pt}),A=Et.Bodies.rectangle(o,i,u,h,{}),C=Et.Bodies.rectangle(o,i,m,g,{collisionFilter:Mt}),B=Et.Bodies.rectangle(o,i,m,g,{collisionFilter:Mt}),K=Et.Bodies.rectangle(o,i,b,w,{}),_=Et.Bodies.rectangle(o,i,m,g,{}),O=Et.Bodies.rectangle(o,i,m,g,{}),V=Et.Bodies.rectangle(o,i,b,w,{}),T=Et.Bodies.rectangle(o,i,y,f,{collisionFilter:Mt}),j=Et.Bodies.rectangle(o,i,y,f,{collisionFilter:Mt}),F=Et.Bodies.rectangle(o,i,y,f,{}),M=Et.Bodies.rectangle(o,i,y,f,{}),P=Et.Bodies.rectangle(o,i,E,S,{}),D=Et.Bodies.rectangle(o,i,v,x,{}),L=Et.Constraint.create({bodyA:k,bodyB:A,pointA:{x:0,y:-p/2},pointB:{x:0,y:h/2},length:1}),R=Et.Constraint.create({bodyA:k,bodyB:C,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),z=Et.Constraint.create({bodyA:k,bodyB:B,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),W=Et.Constraint.create({bodyA:C,bodyB:_,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),I=Et.Constraint.create({bodyA:B,bodyB:O,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),H=Et.Constraint.create({bodyA:_,bodyB:K,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),N=Et.Constraint.create({bodyA:O,bodyB:V,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),U=Et.Constraint.create({bodyA:k,bodyB:T,pointA:{x:-d/4,y:p/2},pointB:{x:0,y:-f/2},length:2}),G=Et.Constraint.create({bodyA:k,bodyB:j,pointA:{x:0,y:p/2},pointB:{x:0,y:-f/2},length:1}),q=Et.Constraint.create({bodyA:T,bodyB:F,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),Y=Et.Constraint.create({bodyA:j,bodyB:M,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:2}),X=Et.Constraint.create({bodyA:F,bodyB:P,pointA:{x:0,y:f/2},pointB:{x:0,y:-S/2},length:1}),J=Et.Constraint.create({bodyA:M,bodyB:D,pointA:{x:0,y:f/2},pointB:{x:0,y:-x/2},length:1});this.composite=Et.Composite.create(),Et.Composite.add(this.composite,[A,k,C,B,_,O,T,j,F,M,K,V,P,D,L,H,N,X,J,R,z,W,I,U,G,q,Y]),Et.World.add(s,this.composite),Et.Body.applyForce(k,k.position,t);var Z=r.getKeyValue("player-parts-sheet"),$=[];console.log(a);var Q=t.x<0?{x:-.002}:{x:.002};Q.y=-.002,new Ua(kt.a.int(10,15),k.position,Q,5);var ee=new c.h(Z.textures["rear_leg_foot.png"]);ee._id="foot 2",$.push(ee);var te=new c.h(Z.textures["rear_leg_lower.png"]);te._id="leg 2",$.push(te);var ae=new c.h(Z.textures["rear_arm_hand.png"]);ae._id="hand 2",$.push(ae);var ne=new c.h(Z.textures["rear_arm_forearm.png"]);ne._id="arm 2",$.push(ne);var oe=new c.h(Z.textures["rear_arm_upper.png"]);oe._id="limb",$.push(oe);var ie=new c.h(Z.textures["front_leg_foot.png"]);ie._id="foot 1",$.push(ie);var re=new c.h(Z.textures["rear_leg_upper.png"]);re._id="limb",$.push(re);var se=new c.h(Z.textures["skull.png"]);se._id="skull",$.push(se);var le=new c.h(Z.textures["front_leg_lower.png"]);le._id="leg 1",$.push(le);var de=new c.h(Z.textures["front_leg_upper.png"]);de._id="limb",$.push(de);var ce=new c.h(Z.textures["torso_whole_gore.png"]);ce._id="torso",$.push(ce);var pe=new c.h(Z.textures["front_arm_hand.png"]);pe._id="hand 1",$.push(pe);var ue=new c.h(Z.textures["front_arm_forearm.png"]);ue._id="arm 1",$.push(ue);var he=new c.h(Z.textures["front_arm_upper.png"]);return he._id="limb",$.push(he),$.forEach((function(e){e.updateAnchor=!0,"skull"===e._id?(e.pivot.x=.55*e.width,e.pivot.y=.475*e.height):"foot 1"===e._id||"foot 2"===e._id?(e.pivot.x=.525*e.width,e.pivot.y=.5*e.height):(e.pivot.x=.5*e.width,e.pivot.y=.5*e.height),l.addChild(e)})),this.head=A,this.bodyUpper=k,this.armUpperL=C,this.armUpperR=B,this.armLowerL=_,this.armLowerR=O,this.legUpperL=T,this.legUpperR=j,this.legLowerL=F,this.legLowerR=M,this.handL=K,this.handR=V,this.footL=P,this.footR=D,this.destroy=function(){r.setKeyValue("player-ragdoll",null),$.forEach((function(e){e.destroy()})),Et.World.remove(s,n.composite)},this.animateRagParts=function(e){var t=e(n.head);se.position=t,se.rotation=t.rotation;var a=e(n.bodyUpper);ce.position=a,ce.rotation=a.rotation;var o=e(n.armLowerL);ue.position=o,ue.rotation=o.rotation;var i=e(n.armUpperL);he.position=i,he.rotation=i.rotation;var r=e(n.handL);pe.position=r,pe.rotation=r.rotation;var s=e(n.legUpperL);de.position=s,de.rotation=s.rotation;var l=e(n.legLowerL);le.position=l,le.rotation=l.rotation;var d=e(n.footL);ie.position=d,ie.rotation=d.rotation;var c=e(n.armLowerR);ne.position=c,ne.rotation=c.rotation;var p=e(n.armUpperR);oe.position=p,oe.rotation=p.rotation;var u=e(n.handR);ae.position=u,ae.rotation=u.rotation;var h=e(n.legUpperR);re.position=h,re.rotation=h.rotation;var m=e(n.legLowerR);te.position=m,te.rotation=m.rotation;var g=e(n.footR);ee.position=g,ee.rotation=g.rotation},this}var Ja=window.TweenLite.set;function Za(e,t,a,n){var o=window.gameObjects,i=o.getKeyValue("world"),r=o.getKeyValue("game-pixi-container"),s=null,l=o.getKeyValue("blood-spurt-1"),d=new c.a(l.animations.blood_spurt_1),p=o.getKeyValue("blood-spurt-2"),u=new c.a(p.animations.blood_spurt_2),h=o.getKeyValue("blood-spurt-3"),m=new c.a(h.animations.blood_spurt_3),g=["blood spurt type 1","blood spurt type 2","blood spurt type 3"],y=g[Math.floor(Math.random()*g.length)];return e||(e=y),(s="blood spurt type 1"===e?d:"blood spurt type 2"===e?u:m).onComplete=function(){s.destroy(),n&&Et.World.remove(i,n),i=null,r=null,o=null,s=null,d=null,l=null,u=null,p=null,m=null,h=null,g=null,y=null},s.animationSpeed=.5,s.pivot.x=.5*s.width,s.pivot.y=.5*s.height,Ja(s.scale,a?{x:a,y:a}:{x:.5,y:.5}),s.position=t,s.loop=!1,s.updateAnchor=!0,s.play(),r.addChild(s),s}var $a="fell off of ledge",Qa=xt.getState;function en(e){var t=this,a=window,n=a.gameObjects,o=a.TweenLite,i=o.to,r=o.delayedCall,s=n.getKeyValue("world"),l=n.getKeyValue("rocks"),d=n.getKeyValue("game-pixi-container"),p=n.getKeyValue("explosion-assets-sheet"),u=["rock-piece1.png","rock-piece2.png","rock-piece3.png"],h=new c.h(p.textures[u[Math.floor(Math.random()*u.length)]]),m=function(){return kt.a.float(.45,.65)};h.pivot.x=.48*h.width,h.pivot.y=.48*h.height,h.scale.x=m(),h.scale.y=m(),d.addChild(h);var g=Et.Bodies.rectangle(e.x,e.y-50,10,10,{restitution:.25,collisionFilter:{category:2,mask:1}});return Et.Body.applyForce(g,g.position,{x:kt.a.float(-.005,.005),y:kt.a.float(-.001,-.0025)}),Et.World.add(s,g),this.animate=function(e){var t=e(g),a=t.x,n=t.y;h.position={x:a,y:n}},this.destroy=function(){var e=l.indexOf(t);Et.World.remove(s,g),d.removeChild(h),e>-1&&l.splice(e,1),s=null,l=null,d=null,g=null,h=null,n=null},r(Qa().game.lastWaveCountDefeated&&Qa().game.lastWaveCountDefeated<10?4:1,(function(){i(h,.5,{alpha:0,onComplete:function(){t.destroy()}})})),this}var tn=a(16),an=function(){function e(t){var a=this;Object(Tt.a)(this,e),this.gameObjects=window.gameObjects;var n=window.TweenLite,o=n.to,i=n.delayedCall,r=this.gameObjects.getKeyValue("game-pixi-container"),s=this.gameObjects.getKeyValue("world");this.woodPlanksSheet=this.gameObjects.getKeyValue("wood-planks-sheet"),this.woodPlanks=this.gameObjects.getKeyValue("wood-planks"),this.plankRange=["000.png","001.png","002.png"];var l=t.x,d=t.y;return this.gfc=this.getPlank(),this.gfc.width=50,this.gfc.height=15,this.gfcContainer=new c.e,this.gfcContainer.addChild(this.gfc),this.gfcContainer.pivot.x=.5*this.gfcContainer.width,this.gfcContainer.pivot.y=.5*this.gfcContainer.height,this.body=new Et.Bodies.rectangle(l,d,50,15,{collisionFilter:Mt}),this.body.torque=kt.a.float(-.5,.5),Et.Body.applyForce(this.body,this.body.position,{x:kt.a.float(-.02,.02),y:kt.a.float(-.01,-.02)}),Et.World.add(s,this.body),r.addChild(this.gfcContainer),this.destroy=function(){var e=a.woodPlanks.indexOf(a);Et.World.remove(s,a.body),r.removeChild(a.gfcContainer),e>-1&&a.woodPlanks.splice(e,1),s=null,r=null,a.gameObjects=null,a.woodPlanks=null,a.gfc=null},i(4,(function(){o(a.gfcContainer,2,{alpha:0,onComplete:function(){a.destroy()}})})),this}return Object(tn.a)(e,[{key:"animate",value:function(e){var t=e(this.body),a=t.x,n=t.y,o=t.rotation;this.gfcContainer.position={x:a,y:n},this.gfcContainer.rotation=o}},{key:"getPlank",value:function(){return new c.h(this.woodPlanksSheet.textures[this.plankRange[Math.floor(Math.random()*this.plankRange.length)]])}}]),e}(),nn=(a(198),a(42)),on=a(45),rn=a(29),sn=function(){function e(t,a){var n=this;Object(Tt.a)(this,e),this.gameObjects=window.gameObjects;var o=window.TweenLite.to;this.container=this.gameObjects.getKeyValue("game-pixi-container");var i=this.gameObjects.getKeyValue("explosion3d1-sheet"),r=this.gameObjects.getKeyValue("explosion3d2-sheet");this.explosion1=new c.a(i.animations.explosion3d),this.explosion2=new c.a(r.animations.explosion3d),this.explosions=[this.explosion1,this.explosion2],this.explosions.forEach((function(e){e.pivot.x=.5*e.width,e.pivot.y=.5*e.height,e.loop=!1,e.onComplete=function(){n.container.removeChild(e),n.container=null,n.gameObjects=null,i=null,r=null,n.explosions=null}})),1===t&&(this.explosion=this.explosion1,this.explosion.animationSpeed=1),2===t&&(this.explosion=this.explosion2,this.explosion.animationSpeed=1),this.renderBody=a;var s=new nn.a;s.brightness=20,s.saturation=3;var l=new on.a;l.blur=.5;var d=new rn.a({outerStrength:3});this.filters=xt.getState().game.filterEffects?[s,l,d]:[],this.explosion.filters=this.filters,o(this.explosion,.35,{alpha:0}),o(s,.5,{brightness:1,saturation:1.5,onUpdate:function(){xt.getState().game.filterEffects&&(n.explosion.filters=n.filters)}}),this.explosion.play()}return Object(tn.a)(e,[{key:"renderPosition",value:function(e){this.renderBody&&(this.explosion.position=e(this.renderBody),this.container&&-1===this.container.children.indexOf(this.explosion)&&this.container.addChild(this.explosion))}}]),e}(),ln=a(11);function dn(e,t,a){var n=this,o=window,i=o.gameObjects,r=o.TweenLite.to,s=window.gameObjects.getKeyValue("explosion1"),l=new ln.Howl({src:[s]}),d=window.gameObjects.getKeyValue("distant-explosion"),p=new ln.Howl({src:[d]}),u=i.getKeyValue("world"),h=i.getKeyValue("rocks"),m=i.getKeyValue("game-pixi-container"),g=i.getKeyValue("explosions"),y=i.getKeyValue("explosion-assets-sheet"),f=["smoke1.png","smoke2.png","smoke3.png","smoke4.png"],b=Et.Bodies.rectangle(e.x,e.y,20,20,{restitution:0,collisionFilter:Mt,isStatic:!0});Et.World.add(u,b),this.calcRenderedPosition=function(e){var t=e(b),a=t.x,o=t.y;n.calculatedPosition={x:a,y:o}},g.push(this);for(var w=kt.a.int(5,10),v=function(e){var t=new c.h(y.textures[f[Math.floor(Math.random()*f.length)]]);t.pivot.x=.5*t.width,t.pivot.y=.5*t.height;r(t,2,{onStart:function(){m.addChild(t)},alpha:0,onComplete:function(){if(e===w-1){Et.World.remove(u,b);var t=g.indexOf(n);t>-1&&g.splice(t,1),u=null,g=null,y=null,f=null}}});var a=kt.a.int(1,2);r(t.scale,.5,{x:a,y:a});var o={x:0,y:0};r(o,.5,{x:kt.a.int(-100,100),y:kt.a.int(-50,50)}),r(t.position,2,{onUpdate:function(){n.calculatedPosition&&(t.position.x=n.calculatedPosition.x+o.x,t.position.y=n.calculatedPosition.y+o.y)},onComplete:function(){t.destroy(),m=null,i=null}})},x=0;x<w;++x)v(x);var E=i.getKeyValue("wood-planks");if(e.y>300||t){for(var S=0;S<kt.a.int(4,7);++S)a&&a.showWood?E.push(new an(e)):h.push(new en(e));E=null,h=null}if(!a||a.showExplosionSprite){var k=i.getKeyValue("explosion-sprites");l.seek(.5),l.play(),p.play(),k.push(new sn(kt.a.int(1,2),b)),k=null}}function cn(e,t,a){var n=this,o=xt.getState,i=window,r=i.gameObjects,s=i.TweenLite.delayedCall,l=r.getKeyValue("barriers-sheet"),d=r.getKeyValue("game-pixi-container"),p=r.getKeyValue("world"),u=r.getKeyValue("build-objects"),h=t.width,m=t.height,g=new c.h(l.textures["woodenBarrier.png"]),y=new c.h(l.textures["stoneBarrier.png"]),f=new c.h(l.textures["metalBarrier.png"]),b=Bt("explosive-barrel");this.types={WOOD:"Wooden",STONE:"Stone",METAL:"Metal",EXPLOSIVE:"Explosive Barrel"};var w,v=e.x,x=e.y,E=Et.Bodies.rectangle(v,x,h,m,{inertia:1/0,label:a===this.types.EXPLOSIVE?"explosive barrier":"barrier"}),S=r.getKeyValue("ground"),k=Et.Constraint.create({bodyA:S,bodyB:E,pointA:{x:-Kt(S)/2+e.x,y:-_t(S)/2},pointB:{x:0,y:_t(E)/2},length:0});if(a)switch(a){case this.types.WOOD:E.strength=o().game.player.perks.barrierPlus.owned?300:100;break;case this.types.STONE:E.strength=o().game.player.perks.barrierPlus.owned?500:250;break;case this.types.METAL:E.strength=o().game.player.perks.barrierPlus.owned?800:400;break;case this.types.EXPLOSIVE:E.strength=o().game.player.perks.barrierPlus.owned?200:100;break;default:E.strength=o().game.player.perks.barrierPlus.owned?300:100}E.main=this,this.destroyed=!1,this.getBody=function(){return E},Et.World.add(p,[k,E]);var A=new c.i(E.strength,{fill:"#ffffff",fontSize:12});if(A.pivot.x=.5*A.width,A.pivot.y=.5*A.height,a)switch(a){case this.types.WOOD:w=g;break;case this.types.STONE:w=y;break;case this.types.METAL:w=f;break;case this.types.EXPLOSIVE:w=b}w.width=h,w.height=m;var C=new c.e;return C.addChild(w),C.pivot.x=.5*C.width,C.pivot.y=.5*C.height,d.addChild(C),d.addChild(A),r.getKeyValue("player").sprites.forEach((function(e){d.addChild(e)})),this.takeDamage=function(e){E.strength-=e,A.text=E.strength},this.displayBarrierStrength=function(e){A.position=e(E),w.position=e(E)},E.removeSelf=function(){if(n.destroyed=!0,new dn(E.position,!0,{showWood:a===n.types.WOOD,showExplosionSprite:a===n.types.EXPLOSIVE}),a===n.types.EXPLOSIVE){var e=E.position,t=e.x,o=e.y,i=Et.Bodies.rectangle(t,o,400,300);i.label="barrel explosion",Et.World.add(p,i),s(2,(function(){i&&Et.World.remove(p,i)})),i.removeSelf=function(){Et.World.remove(p,i)}}Et.World.remove(p,[k,E]),d.removeChild(A),d.removeChild(C);var r=u.indexOf(n);r>-1&&u.splice(r,1)},this}var pn=function(){function e(t){var a=this;Object(Tt.a)(this,e);var n=t.x,o=t.y,i=window.gameObjects;this.world=i.getKeyValue("world"),this.container=i.getKeyValue("game-pixi-container"),this.landmines=i.getKeyValue("build-objects");var r=i.getKeyValue("landmine-sheet");this.body=Et.Bodies.rectangle(n,o,100,5),this.body.label="landmine trap",this.body.destroy=function(){a.destroy()};var s=i.getKeyValue("ground");return this.constraint=Et.Constraint.create({bodyA:s,bodyB:this.body,pointA:{x:-Kt(s)/2+t.x,y:-_t(s)/2},pointB:{x:0,y:_t(this.body)/2},length:0}),Et.World.add(this.world,[this.body,this.constraint]),this.gfc=new c.a(r.animations.landmine),this.gfc.updateAnchor=!0,this.gfc.loop=!0,this.gfc.animationSpeed=.75,this.gfc.play(),this.gfc.width=100,this.gfc.height=100,this.gfcContainer=new c.e,this.gfcContainer.addChild(this.gfc),this.gfcContainer.pivot.x=0,this.gfcContainer.pivot.y=0,this.container.addChild(this.gfcContainer),console.log(this.gfcContainer.position),this.destroyed=!1,this}return Object(tn.a)(e,[{key:"getBody",value:function(){return this.body}},{key:"updatePosition",value:function(e){var t=e(this.body),a=t.x,n=t.y;this.gfcContainer.position={x:a,y:n}}},{key:"destroy",value:function(){var e=this;new dn(this.body.position,!0);var t=window.TweenLite.delayedCall,a=this.body.position,n=a.x,o=a.y;if(this.hitbox=Et.Bodies.rectangle(n,o,500,300),this.hitbox.label="landmine explosion",this.hitbox.removeSelf=function(){Et.World.remove(e.world,e.hitbox)},Et.World.add(this.world,this.hitbox),t(.1,(function(){e.hitbox.removeSelf()})),!this.destroyed){this.destroyed=!0,Et.World.remove(this.world,[this.body,this.constraint]),this.container.removeChild(this.gfcContainer);var i=this.landmines.indexOf(this);i>-1&&this.landmines.splice(i,1)}}}]),e}(),un=a(37);function hn(e,t,a,n,o){var i=this;this.grenadeDistance={start:e,end:null};var r=xt.getState,s=window,l=s.gameObjects,d=s.TweenLite,p=d.delayedCall,u=d.from,h=l.getKeyValue("world"),m=l.getKeyValue("game-pixi-container"),g=l.getKeyValue("grenades"),y=Et.Bodies.circle(e,t,a,{restitution:.8,collisionFilter:{category:3}});y.label="grenade",y.main=this,Et.World.add(h,y),Et.Body.applyForce(y,y.position,n),y.torque=.01;var f=new c.f;f.beginFill(2049836),f.drawCircle(0,0,a),this.grenadeBody=y;var b=new fa.a;b.shadowAlpha=.45,b.lightAlpha=.35,b.thickness=5,b.shadowColor=0,b.lightColor=2133060;var w=new ba.a;w.noise=.1,w.seed=.5,f.filters=xt.getState().game.filterEffects?[b,w]:[];var v=new un.a({velocity:{x:0,y:0}});u(v.velocity,.75,{x:100,y:10}),m.addChild(f),this.animate=function(e){if(y&&f){var t=e(y),a=t.x,n=t.y,o=t.rotation;f.position.x=a,f.position.y=n,f.rotation=o,b.rotation=Object(jt.radians)(o),f.filters=xt.getState().game.filterEffects?[b,w,v]:[]}},p(o||r().game.player.weapons.grenadeFuseTime.default,(function(){i.exploded||i.explode()})),this.exploded=!1,this.explode=function(e){i.grenadeDistance.end=i.grenadeBody.position.x,i.exploded=!0,new dn(y.position,e||null);var t=r().game.player.weapons.grenadeExplosionSize;i.explosionHitbox=Et.Bodies.rectangle(y.position.x,y.position.y,t,t,{}),y.distance=i.grenadeDistance,i.explosionHitbox.label="grenade explosion",Et.World.remove(h,y),Et.World.add(h,i.explosionHitbox),m.removeChild(f),p(.01,(function(){i.destroy()}))},this.destroy=function(){Et.World.remove(h,i.explosionHitbox);var e=g.indexOf(i);e>-1&&g.splice(e,1)}}var mn=function(){function e(t){var a=this;Object(Tt.a)(this,e);var n=t.x,o=t.y,i=window.gameObjects;this.world=i.getKeyValue("world"),this.container=i.getKeyValue("game-pixi-container"),this.landmines=i.getKeyValue("build-objects");var r=i.getKeyValue("clustermine-sheet");this.body=Et.Bodies.rectangle(n,o,100,5),this.body.label="clustermine trap",this.body.destroy=function(){a.destroy()};var s=i.getKeyValue("ground");return this.constraint=Et.Constraint.create({bodyA:s,bodyB:this.body,pointA:{x:-Kt(s)/2+t.x,y:-_t(s)/2},pointB:{x:0,y:_t(this.body)/2},length:0}),Et.World.add(this.world,[this.body,this.constraint]),this.gfc=new c.a(r.animations.clustermine),this.gfc.updateAnchor=!0,this.gfc.loop=!0,this.gfc.animationSpeed=.75,this.gfc.play(),this.gfc.width=100,this.gfc.height=100,this.gfcContainer=new c.e,this.gfcContainer.addChild(this.gfc),this.gfcContainer.pivot.x=0,this.gfcContainer.pivot.y=0,this.container.addChild(this.gfcContainer),console.log(this.gfcContainer.position),this.destroyed=!1,this}return Object(tn.a)(e,[{key:"getBody",value:function(){return this.body}},{key:"updatePosition",value:function(e){var t=e(this.body),a=t.x,n=t.y;this.gfcContainer.position={x:a,y:n}}},{key:"destroy",value:function(){var e=this,t=window.TweenLite.delayedCall,a=window.gameObjects.getKeyValue("grenades");t(.25,(function(){for(var n=xt.getState,o=n().game.player.perks.cluck.owned?8:4,i=n().game.player.perks.cluck.owned?kt.a.float(-.02,.02):kt.a.float(-.01,.01),r=n().game.player.perks.cluck?kt.a.float(-.025,-.075):kt.a.float(-.01,-.05),s=0;s<o;++s)t(.1*s,(function(){var t=new hn(e.body.position.x,e.body.position.y-50,10,{x:i,y:r},4);a.push(t)}))})),new dn(this.body.position,!0);var n=this.body.position,o=n.x,i=n.y;if(this.hitbox=Et.Bodies.rectangle(o,i,500,300),this.hitbox.label="clustermine explosion",this.hitbox.removeSelf=function(){Et.World.remove(e.world,e.hitbox)},Et.World.add(this.world,this.hitbox),t(.1,(function(){e.hitbox.removeSelf()})),!this.destroyed){this.destroyed=!0,Et.World.remove(this.world,[this.body,this.constraint]),this.container.removeChild(this.gfcContainer);var r=this.landmines.indexOf(this);r>-1&&this.landmines.splice(r,1)}}}]),e}(),gn={WOOD:"Wooden",STONE:"Stone",METAL:"Metal",EXPLOSIVE:"Explosive Barrel"},yn={LANDMINE:"Landmine",CLUSTER_BOMB:"Cluster Bomb",REMOTE_MINE:"Remote Mine",TURRET:"Machine Gun Turret"},fn=function(){function e(t,a){var n=this;Object(Tt.a)(this,e);var o=t.x,i=t.y,r=window.gameObjects;this.world=r.getKeyValue("world"),this.container=r.getKeyValue("game-pixi-container"),this.buildObjects=r.getKeyValue("build-objects"),this.remoteMines=r.getKeyValue("remote-mines"),this.remoteMinesArr=r.getKeyValue("remote-mines-array");var s=r.getKeyValue("remote-mine-sheet");this.body=Et.Bodies.rectangle(o,i,100,5,{collisionFilter:Mt}),this.body.label="remote mine trap",this.body.destroy=function(){n.destroy()};var l=r.getKeyValue("ground");this.constraint=Et.Constraint.create({bodyA:l,bodyB:this.body,pointA:{x:-Kt(l)/2+t.x,y:-_t(l)/2},pointB:{x:0,y:_t(this.body)/2},length:0}),Et.World.add(this.world,[this.body,this.constraint]),this.gfc=new c.a(s.animations["remote-mine"]),this.gfc.updateAnchor=!0,this.gfc.loop=!0,this.gfc.animationSpeed=.75,this.gfc.play(),this.gfc.width=100,this.gfc.height=100,this.gfcContainer=new c.e,this.gfcContainer.addChild(this.gfc),this.gfcContainer.pivot.x=0,this.gfcContainer.pivot.y=0,this.container.addChild(this.gfcContainer),console.log(this.gfcContainer.position);return this.num=new c.i("[ ".concat(a," ]: detonate"),{fill:"#00FFFF",fontSize:12}),this.num.pivot.x=.5*this.num.width,this.num.pivot.y=.5*this.num.height,this.container.addChild(this.num),this.destroyed=!1,this}return Object(tn.a)(e,[{key:"getBody",value:function(){return this.body}},{key:"updatePosition",value:function(e){var t=e(this.body),a=t.x,n=t.y;this.gfcContainer.position={x:a,y:n},this.num.position={x:a,y:n-50}}},{key:"detonate",value:function(){this.destroy()}},{key:"updateNumber",value:function(e){this.num.text="[ ".concat(e," ]: detonate")}},{key:"destroy",value:function(){var e=this,t=window.TweenLite.delayedCall;new dn(this.body.position,!0);var a=this.body.position,n=a.x,o=a.y;if(this.hitbox=Et.Bodies.rectangle(n,o,500,300),this.hitbox.label="landmine explosion",this.hitbox.removeSelf=function(){Et.World.remove(e.world,e.hitbox)},Et.World.add(this.world,this.hitbox),t(.1,(function(){e.hitbox.removeSelf()})),!this.destroyed){this.destroyed=!0,Et.World.remove(this.world,[this.body,this.constraint]),this.container.removeChild(this.gfcContainer),this.container.removeChild(this.num);var i=this.buildObjects.indexOf(this);i>-1&&this.buildObjects.splice(i,1),this.remoteMinesArr.indexOf(this)>-1&&this.remoteMinesArr.splice(i,1)}}}]),e}(),bn=xt.getState,wn=xt.dispatch,vn=function(e){var t=bn().game.player.weapons.damage["pistol weapon"],a=t.min,n=t.max;return e.label.indexOf("body")>-1?{part:"torso",dmg:a}:e.label.indexOf("head")>-1?{part:"head",dmg:n}:void 0};function xn(e,t,a){var n=this,o=t.x,i=t.y,r=window,s=r.gameObjects,l=r.TweenLite,d=l.to,p=l.set,u=(l.from,s.getKeyValue("world")),h=s.getKeyValue("game-pixi-container"),m=Et.Bodies.rectangle(o,i,10,10,{isStatic:!0,collisionFilter:Mt});Et.World.add(u,m);for(var g=s.getKeyValue("explosion-assets-sheet"),y=["smoke1.png","smoke2.png","smoke3.png","smoke4.png"],f=function(t){var o=new c.h(g.textures[y[Math.floor(Math.random()*y.length)]]);"enemy"===e&&(o.tint=16711680),o.pivot.x=.5*o.width,o.pivot.y=.5*o.height,d(o,a&&a.alphaDuration?a.alphaDuration:.5,{alpha:0,onComplete:function(){1===t&&(Et.World.remove(u,m),u=null)}});var i=void 0;i=a&&a.rand&&a.rand.min&&a.rand.max?kt.a.float(a.rand.min,a.rand.max):kt.a.float(.25,.5),p(o.scale,{x:a&&a.set?a.set:.1,y:a&&a.set?a.set:.1}),d(o.scale,a&&a.duration?a.duration:.25,{x:i,y:i});var r={x:0,y:0};d(r,a&&a.duration?a.duration:.25,{x:"enemy"===e?kt.a.int(-20,20):kt.a.int(-10,10),y:"enemy"===e?kt.a.int(-20,20):kt.a.int(-50,0)}),d(o.position,3,{onUpdate:function(){n.calculatedPosition&&(o.position.x=n.calculatedPosition.x+r.x,o.position.y=n.calculatedPosition.y+r.y,h&&h.children.indexOf(o)<0&&h.addChild(o))},onComplete:function(){o.destroy(),h=null,s=null}})},b=0;b<2;++b)f(b);return this.renderPosition=function(e){n.calculatedPosition=e(m)},this}function En(e,t,a,n,o){var i,r,s,l=bn().game,d=l.mouseState,p=l.player.weapons,u=p.equipped,h=p.shellEjectionForce,m=p.shellRemovalTimeout;r||(r=a.getKeyValue("game-pixi-container")),i||(i=a.getKeyValue("world")),s||(s=a.getKeyValue("pistol-shells")),this.body=o&&o.body?o.body:Et.Bodies.rectangle("greater than player y position"===d.y||"less than player y position"===d.y?e:d.x===Ft?e+30:e-30,"less than player y position"===d.y?t-40:t-20,7,4,{restitution:.75,collisionFilter:Mt}),this.body.label=void 0!==n?"player ".concat(n," shell"):"player pistol shell","shotgun weapon"===u&&(this.body.label="shotgun shell"),Et.World.add(i,this.body),Et.Body.applyForce(this.body,this.body.position,o&&o.force?o.force:{x:d.x===Ft?kt.a.float(-h[u].min,-h[u].max):kt.a.float(h[u].min,h[u].max),y:kt.a.float(-h[u].min,-h[u].max)}),Et.Body.setAngularVelocity(this.body,kt.a.float(-.5,-1)),this.gfc=new c.f,this.gfc.beginFill("shotgun weapon"===u?11534336:11244318);var g=Kt(this.body),y=_t(this.body);"shotgun weapon"===u?this.gfc.drawRect(0,0,y,g+1):"smg weapon"===u?this.gfc.drawRect(0,0,y,g+2):this.gfc.drawRect(0,0,g,y),this.gfc.endFill(),"shotgun weapon"===u&&(this.gfc.beginFill(13416013),this.gfc.drawRect(0,g+1,y,3)),window.gameObjects.getKeyValue("bullet-shell-bevel")||window.gameObjects.setKeyValue("bullet-shell-bevel",new fa.a({lightAlpha:.5,shadowAlpha:.5}));var f=[window.gameObjects.getKeyValue("bullet-shell-bevel")];return this.gfc.filters=bn().game.filterEffects?f:[],this.gfc.pivot.x=this.gfc.width/2,this.gfc.pivot.y=this.gfc.height/2,r.addChild(this.gfc),s.push(this),this.destroy=function(){r.removeChild(this.gfc),Et.World.remove(i,this.body),this.body=null,this.gfc=null,s.splice(s.indexOf(this),1),i=null,r=null,a=null,s=null},setTimeout(this.destroy.bind(this),m[u]),this}function Sn(e,t,a,n,o,i){var r,s,l,d,p;l=Ot("arm",a);var u=bn().game,h=u.mouseRelativeToPlayerPosition,m=u.mouseState;return s||(s=a.getKeyValue("game-pixi-container")),r||(r=a.getKeyValue("world")),d||(d=a.getKeyValue("pistol-bullets")),this.body=o&&o.overrideBody?o.overrideBody:Et.Bodies.circle("greater than player y position"===m.y||"less than player y position"===m.y?e:m.x===Ft?e+50:e-50,t,4,{restitution:.3}),this.body.label=i?"extra damage bullet":void 0!==n&&null!==n?"player ".concat(n," bullet"):"player pistol bullet",this.body.main=this,Et.World.add(r,this.body),Et.Body.setAngle(this.body,o&&o.overrideAngle?o.overrideAngle:Et.Vector.angle(this.body.position,h)),Et.Body.applyForce(this.body,this.body.position,o&&o.overrideForce?o.overrideForce:function(e,t){var a=At().game.player.weapons,n=a.bulletVariance,o=a.equipped,i=a.bulletForce,r=Et.Vector.angle(e,t);return{x:Math.cos(r)*i[o],y:Math.sin(r)*i[o]+kt.a.float(-n[o],n[o])}}(l.position,h)),this.gfc=new c.f,this.gfc.beginFill(16777215),p||(p=Kt(this.body)),this.gfc.drawRect(0,0,p,p/3),this.gfc.endFill(),this.gfc.pivot.x=this.gfc.width/2,this.gfc.pivot.y=this.gfc.height/2,s.addChild(this.gfc),d.push(this),this.addImpactEffect=function(e,t){var n=a.getKeyValue("bullet-impacts"),o=new xn(e,t);n.push(o)},this.destroyed=!1,this.destroy=function(e){if(!this.destroyed){var t=this.body.position;this.destroyed=!0,s.removeChild(this.gfc),s.removeChild(this.bulletTrail),Et.World.remove(r,this.body),this.linePoints=null,this.body=null,this.gfc=null,d.indexOf(this)>-1&&d.splice(d.indexOf(this),1),e&&this.addImpactEffect(e,t),r=null,s=null,a=null}},setTimeout(this.destroy.bind(this),500),this}var kn=function(e){var t,a,n,o,i,r,s;t||(t=e.getKeyValue("world")),a||(a=e.getKeyValue("weapons-ui")),n||(n=e.getKeyValue("player"));var l=bn().game.player.weapons,d=l.lastShot,c=l.totalAmmo,p=l.equipped,u=l.shotLimiter;if(JSON.parse(d[p])+u[p]<Date.now()&&!a.checkEmpty(p)&&!a.reloading&&c[p]>0){wn(Re(p,JSON.stringify(Date.now()))),wn(ie(z)),a.fireBullet(p),n.fireWeaponAnimation(),o||(o=Vt(e)),i||(i=Kt(o)),r||(r=_t(o)),s||(s=Ot("arm",e));var h=!(!a.lastBulletByWepType[p]||!bn().game.player.perks.lastBullet.owned);if("shotgun weapon"===p?new En(0,0,e,null,{body:Et.Bodies.rectangle(o.position.x,s.position.y,10,4,{collisionFilter:Mt})}):new En(o.position.x,s.position.y,e,"pistol weapon"!==p?p.split(" ")[0]:void 0),"shotgun weapon"===p)for(var m=0;m<10;++m)new Sn(s.position.x,s.position.y,e,"shotgun",h);else new Sn(s.position.x,s.position.y,e,"pistol weapon"!==p?p.split(" ")[0]:void 0,null,h);t=null,a=null,n=null,o=null,i=null,r=null,s=null}else 0===c[p]&&!1===bn().game.showingMessage?a.shaking||(a.changeTextForEmptyShake("EMPTY"),a.emptyMagShake()):a.checkEmpty(p)&&!1===bn().game.showingMessage&&(a.reloading||a.shaking||(a.changeTextForEmptyShake("RELOAD"),a.emptyMagShake()))},An=function(){function e(){var t=this;Object(Tt.a)(this,e);var a=window.gameObjects;this.to=window.TweenLite.to,this.set=window.TweenLite.set;var n=a.getKeyValue("game-pixi-container");this.container=n;var o=a.getKeyValue("muzzle-flashes-sheet"),i=new c.h(o.textures["muzzle-flash1.png"]),r=new c.h(o.textures["muzzle-flash2.png"]),s=new c.h(o.textures["muzzle-flash3.png"]),l=new c.h(o.textures["muzzle-flash4.png"]),d=new c.h(o.textures["muzzle-flash5.png"]),p=[i,r,s,l,d];n.addChild(i),n.addChild(r),n.addChild(s),n.addChild(l),n.addChild(d),i.visible=!1,r.visible=!1,s.visible=!1,l.visible=!1,d.visible=!1,this.muzzleScale=.65,this.blurFilter=new c.k.BlurFilter,this.blurFilter.blur=this.getRandomBlur(),this.blurFilter.quality=5,this.glowFilter=new rn.a,this.glowFilter.innerStrength=.1,this.glowFilter.outerStrength=kt.a.float(1,1.5),this.adjustmentFilter=new nn.a,this.adjustmentFilter.brightness=2,this.adjustmentFilter.saturation=2,this.flashes=[],p.forEach((function(e){e.updateAnchor=!0,e.scale={x:t.muzzleScale,y:t.muzzleScale},e.filters=xt.getState().game.filterEffects?[t.blurFilter,t.adjustmentFilter,t.glowFilter]:[],t.flashes.push(e)}))}return Object(tn.a)(e,[{key:"fireEffect",value:function(e){var t=xt.getState().game.player.weapons.equipped,a=xt.getState().game.player.modTiers.powder[t].current,n=this.getRandomFlash();n.visible=!0,e&&(n.position=e),xt.getState().game.filterEffects&&(this.adjustmentFilter.saturation=1===a?1:2===a?2:3===a?3:4===a?5:1,this.glowFilter.color=1===a?16774400:2===a?16765184:3===a?16739584:4===a?16726016:16777215),n.filters=xt.getState().game.filterEffects?[this.glowFilter,this.adjustmentFilter,this.blurFilter]:[],this.container.addChild(n),this.set(n,{alpha:1}),this.set(n.scale,{x:this.muzzleScale}),this.to(n,.1,{alpha:0}),this.to(n.scale,.1,{x:2*this.muzzleScale,onComplete:function(){n.visible=!1}})}},{key:"setMuzzleRotations",value:function(e){this.flashes.forEach((function(t){t.rotation=e})),this.rotation=e}},{key:"getRandomBlur",value:function(){return kt.a.float(.5,4)}},{key:"changeBlurAmount",value:function(){this.blurFilter.blur=this.getRandomBlur()}},{key:"getFlashes",value:function(){return this.flashes}},{key:"getRandomFlash",value:function(){return this.flashes[Math.floor(Math.random()*this.flashes.length)]}},{key:"muzzleScale",get:function(){return this._muzzleScale},set:function(e){this._muzzleScale=e}}]),e}(),Cn=function(){function e(t){var a=this;Object(Tt.a)(this,e);var n=t.x,o=t.y;this.delayedCall=window.TweenLite.delayedCall,this.gameObjects=window.gameObjects,this.world=this.gameObjects.getKeyValue("world"),this.buildObjects=this.gameObjects.getKeyValue("build-objects"),this.container=this.gameObjects.getKeyValue("game-pixi-container"),this.scanAnim=new c.a(this.gameObjects.getKeyValue("turret-scan-sheet").animations.turretScan),this.scanAnim.visible=!0,this.scanAnim.loop=!0,this.scanAnim.play(),this.shootAnim=new c.a(this.gameObjects.getKeyValue("turret-shoot-sheet").animations.turretShoot),this.shootAnim.loop=!1,this.shootAnim.onFrameChange=function(){},this.shootAnim.onComplete=function(){a.shootAnim.gotoAndStop(0),a.scanAnim.play(),a.scanAnim.visible=!0,a.shootAnim.visible=!1},this.shootAnim.visible=!1,this.scanAnim.width=150,this.scanAnim.height=150,this.scanAnim.pivot.x=.5*this.scanAnim.width,this.scanAnim.pivot.y=this.scanAnim.height,this.shootAnim.width=150,this.shootAnim.height=150,this.shootAnim.pivot.x=.5*this.shootAnim.width,this.shootAnim.pivot.y=this.shootAnim.height,this.turret=new c.e,this.turret.addChild(this.scanAnim,this.shootAnim),this.container.addChild(this.turret),this.turret.children.forEach((function(e){})),this.body=Et.Bodies.rectangle(n,o,50,50,{label:"turret barrier",main:this}),this.body.removeSelf=function(){a.destroy()};var i=this.gameObjects.getKeyValue("ground");this.constraint=Et.Constraint.create({bodyA:i,bodyB:this.body,pointA:{x:-Kt(i)/2+t.x,y:-_t(i)/2},pointB:{x:0,y:_t(this.body)/2},length:0}),Et.World.add(this.world,[this.body,this.constraint]),this.body.strength=250,this.healthDisplay=new c.i("health: ".concat(this.body.strength),{fontSize:12,fill:16777215}),this.healthDisplay.pivot.x=.5*this.healthDisplay.width,this.container.addChild(this.healthDisplay),this.direction="right";var r=this.gameObjects.getKeyValue("player");return r.dead||r.sprites.forEach((function(e){a.container.addChild(e)})),this.destroyed=!1,this}return Object(tn.a)(e,[{key:"takeDamage",value:function(e){this.body.strength-=e,this.healthDisplay.text="health: ".concat(this.body.strength)}},{key:"displayBarrierStrength",value:function(e){var t=e(this.body),a=t.x,n=t.y;this.healthDisplay.position={x:a,y:n-100},this.turret.position={x:a,y:n}}},{key:"updateDirection",value:function(e){this.turret.scale.x="left"===e?-1:1,this.direction=e}},{key:"getBody",value:function(){return this.body}},{key:"resumeScan",value:function(){this.scanning||(this.scanning=!0,this.scanAnim.play(),this.scanAnim.visible=!0,this.shootAnim.visible=!1)}},{key:"fireBullet",value:function(){if(!this.destroyed){this.muzzleFlashFX||(this.muzzleFlashFX=new An,this.muzzleFlashFX.setMuzzleRotations("left"===this.direction?Object(jt.degrees)(-92):Object(jt.degrees)(92)));xt.getState().game.player.weapons.bulletForce;var e=this.body.position,t=e.x,a=e.y;this.muzzleFlashFX.fireEffect("left"==this.direction?{x:this.turret.position.x-100,y:this.turret.position.y-25}:{x:this.turret.position.x+100,y:this.turret.position.y-25});var n=Et.Bodies.circle(t,a-25,5),o=kt.a.float(-5e-4,-75e-5);new En(0,0,this.gameObjects,null,{body:Et.Bodies.rectangle(t,a-50,7,4,{collisionFilter:Mt}),force:"right"===this.direction?{x:kt.a.float(-35e-5,-75e-5),y:o}:{x:kt.a.float(35e-5,75e-5),y:o}}),new Sn(0,0,this.gameObjects,"turret",{overrideBody:n,overrideForce:"left"===this.direction?{x:-.01,y:-75e-5}:{x:.01,y:-75e-5},overrideAngle:"left"===this.direction?-3:.1})}}},{key:"shoot",value:function(){var e=this;if(!this.shooting&&!this.destroyed){var t=xt.getState().game.traps.turret.cooldown;this.fireBullet(),this.shooting=!0,this.scanAnim.visible=!1,this.shootAnim.visible=!0,this.shootAnim.play(),this.delayedCall(t,(function(){e.shooting=!1}))}}},{key:"destroy",value:function(){if(!this.destroyed){this.destroyed=!0,new dn(this.body.position,!0),this.container.removeChild(this.turret,this.healthDisplay),Et.World.remove(this.world,[this.body,this.constraint]);var e=this.buildObjects.indexOf(this,1);e>-1&&this.buildObjects.splice(e,1)}}}]),e}(),Bn=function(){function e(t,a,n){var o=this;Object(Tt.a)(this,e);var i=new c.a(window.gameObjects.getKeyValue("sparks-sheet").animations["spark-particle"]),r=new c.a(window.gameObjects.getKeyValue("muzzle-sparks-sheet").animations.muzzleSparks),s=[i,r];switch(s.forEach((function(e){var t=n&&n.scale?n.scale:1;1!==t&&(e.scale.x=t,e.scale.y=t),e.pivot.x=.5*e.width,e.pivot.y=.5*e.height,e.loop=!1,e.animationSpeed=n&&n.animationSpeed?n.animationSpeed:1,e.onComplete=function(){o.container.removeChild(e),o.container=null,e=null,i=null,r=null,s=null}})),this.container=window.gameObjects.getKeyValue("game-pixi-container"),t){case 1:this.spark=i,n&&n.tint&&(this.spark.tint=n.tint);break;case 2:this.spark=r,this.blurFilter=new c.k.BlurFilter(kt.a.float(.5,.75),5),this.adjFilter=new nn.a,this.glowFilter=new rn.a,this.adjFilter.saturation=2,this.adjFilter.brightness=1.5,this.glowFilter.color=16777215,this.filters=xt.getState().game.filterEffects?[this.blurFilter,this.adjFilter,this.glowFilter]:[],this.spark.filters=this.filters}if(n&&n.scale){var l=new c.e;this.spark.scale.x=n.scale,this.spark.scale.y=n.scale,l.addChild(this.spark),l.pivot.x=l.width*(.5*n.scale),l.pivot.y=l.height*(.5*n.scale),this.spark=l}return this.renderBody=a,(!n||n&&!n.stop)&&(this.spark.play&&this.spark.play(),this.spark.children&&this.spark.children[0]&&this.spark.children[0].play()),this}return Object(tn.a)(e,[{key:"getFilters",value:function(){return{glow:this.glowFilter,adjust:this.adjFilter,blur:this.blurFilter}}},{key:"updateFilters",value:function(e){this.filters=e,this.spark.filters=this.filters}},{key:"renderPosition",value:function(e){this.renderBody&&(this.spark.position=e(this.renderBody),this.container&&-1===this.container.children.indexOf(this.spark)&&this.container.addChild(this.spark))}}]),e}(),Kn=xt.dispatch,_n=function(){Kn(Ke()),Kn(Le("mouse up")),localStorage&&localStorage.setItem("ZombieChamber-GameSave",JSON.stringify(xt.getState().game))},On=a(53),Vn=a.n(On),Tn=a(50),jn=a.n(Tn);function Fn(){var e=Object(Lt.a)(["\nheight: 140px;\nwidth: 100%;\nbackground-color: #222;\nopacity: .5;\n"]);return Fn=function(){return e},e}function Mn(){var e=Object(Lt.a)(["\nheight: 140px;\nwidth: 100%;\nposition: absolute;\nmargin: auto;\ntop: 40px;\n"]);return Mn=function(){return e},e}var Pn=Gt.MenuButtonContainer,Dn=Gt.MenuButtonSpacer,Ln=Rt.a.div(Mn()),Rn=Rt.a.div(Fn()),zn=function(){var e=xt.dispatch,t=(0,xt.getState)().game,a=t.waveNum,n=t.lvlToWin,o=t.gameState,i=t.gameSubState,r=window.gameObjects.getKeyValue("screen-ui");a<n?(_n(),r.unpause(),e(Ne("main",o,S.GAMEPLAY)),e(Ne("sub",i,g))):alert("You win!")};function Wn(){window.gameObjects;var e=Object(l.c)(),t=Object(l.d)((function(e){return e.game.waveNum})),a=Object(l.d)((function(e){return e.game.lvlToWin})),n=Object(l.d)((function(e){return e.game.gameState})),i=Object(l.d)((function(e){return e.game.gameSubState})),r=Object(l.d)((function(e){return e.game.scoreSubmissions})),s=Object(l.d)((function(e){return e.game.scoreSubmissionName})),d=function(){e(Ne("sub",i,E))};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ln,{className:"shop-query-menu"},o.a.createElement(Rn,null),o.a.createElement(Pn,{"space-top":2},o.a.createElement(Dn,null,o.a.createElement(ia,null,o.a.createElement(Dn,{padding:4},o.a.createElement(la,{width:300,height:40,onClick:function(){e(Ne("main",n,S.SHOP_MENU)),e(Ne("sub",i,m))}},"Shop"))),o.a.createElement(ia,null,o.a.createElement(Dn,{padding:4},o.a.createElement(la,{width:300,height:40,onClick:function(){e(Ne("main",n,S.BUILD_MENU)),e(Ne("sub",i,m))}},"Build Barriers/Traps")))),i===E?o.a.createElement(Dn,null,o.a.createElement(ia,null,o.a.createElement(Dn,{padding:2},o.a.createElement("input",{value:s,onChange:function(t){t.preventDefault(),e($(t.target.value))},style:{width:"200px",height:"30px",borderRadius:"2px",border:"2px solid rgba(0, 0, 0, 0.5)"}}))),o.a.createElement(ia,null,o.a.createElement(Dn,{padding:2},o.a.createElement(la,{width:300,height:40,onClick:function(){Vn.a.isEmpty(s)&&i===E?e(Ne("sub",i,v)):function(e){var t=xt.getState,a=xt.dispatch;Vn.a.isEmpty(t().game.scoreSubmissionName)?console.log("empty name field"):jn.a.post("http://localhost:8080/scores",{name:t().game.scoreSubmissionName,score:t().game.score}).catch((function(e){return console.log(e)})).then((function(n){console.log(n),a(Q(t().game.waveNum)),e()}))}((function(){e(Ne("sub",i,v))}))}},Vn.a.isEmpty(s)&&i===E?"Cancel":"Submit")))):o.a.createElement(Dn,null,o.a.createElement(ia,null,o.a.createElement(Dn,{padding:2},o.a.createElement(la,{width:300,height:40,onClick:t<a||r[t]&&1===r[t]?zn:d},t<a||r[t]&&1===r[t]?"Next Wave":"Submit your score!"))),(!r[t]||1!==r[t])&&t<a?o.a.createElement(ia,null,o.a.createElement(Dn,{padding:2},o.a.createElement(la,{width:300,height:40,onClick:d},"Submit your score"))):o.a.createElement(o.a.Fragment,null)))))}var In=function e(t){Object(Tt.a)(this,e);var a=xt.getState().game.player.weapons.equipped,n=xt.getState().game.player.modTiers.powder[a].current,o=window.TweenLite.to,i=window.gameObjects,r=new Bn(2,t),s=i.getKeyValue("spark-sprites");if(r.spark.scale.x=.5,r.spark.scale.y=.5,s.push(r),r.spark.gotoAndPlay(kt.a.int(10,15)),xt.getState().game.filterEffects){var l=r.getFilters(),d=l.adjust,c=l.glow,p=l.blur;d.brightness=1===n?1:2===n?2:3===n?3:4===n?3.5:1,d.saturation=1===n?1:2===n?2:3===n?3:4===n?5:1,c.color=1===n?16777215:2===n?16774400:3===n||4===n?16739584:16777215,r.updateFilters([c,p,d])}return o(r.spark.scale,.1,{x:.55,y:.55}),r};function Hn(){var e=this,t=window.gameObjects,a=t.getKeyValue("world"),n=t.getKeyValue("engine"),o=t.getKeyValue("weapons-ui"),i=t.getKeyValue("game-pixi-container"),r=xt.getState,s=xt.dispatch,d=r().game,p=d.width,u=d.height,h=d.player.constants,g=h.width,y=h.height,f=window.TweenLite,k=f.delayedCall,A=f.to,C=f.from;f.set;this.body=Et.Bodies.rectangle(400,200,g,y,{inertia:1/0,collisionFilter:Mt}),this.arm=Et.Bodies.rectangle(400,200,30,15,{friction:0,inertia:1/0,collisionFilter:Mt}),this.armAttach=Et.Constraint.create({bodyA:this.arm,bodyB:this.body,pointA:{x:12,y:0},pointB:{x:0,y:-80},length:0}),this.head=Et.Bodies.rectangle(400,200,20,24,{inertia:1/0,collisionFilter:Mt}),this.headAttach=Et.Constraint.create({bodyA:this.head,bodyB:this.body,pointA:{x:0,y:10},pointB:{x:0,y:-(y/2+5)},length:0}),this.composite=Et.Composite.create(),Et.Composite.add(this.composite,[this.body,this.arm,this.head,this.armAttach,this.headAttach]),this.composite.bodies.forEach((function(t){t.label="player character",t.main=e})),s(_e(this.composite.id)),s(Ie({bodyId:this.body.id,headId:this.head.id,armId:this.arm.id})),s(oe(JSON.stringify(Date.now()))),this.composite.body=this.body,this.composite.arm=this.arm,Et.World.add(a,this.composite),s(Re("pistol weapon",JSON.stringify(Date.now()))),s(Re("smg weapon",JSON.stringify(Date.now()))),s(Re("shotgun weapon",JSON.stringify(Date.now()))),this.life=100;var B=new c.f;B.lineStyle(1,2108682),B.drawRect(0,0,.75*p,12),i.addChild(B);var K=new c.f;K.beginFill(16777215),K.tint=64154,K.drawRect(0,0,.75*p-2,10);var _=new fa.a({thickness:5,lightAlpha:.5,lightColor:16777215,shadowAlpha:.4,shadowColor:0});K.filters=r().game.filterEffects?[_]:[],i.addChild(K),this.initialLifebarWidth=K.width,B.position.x=50,B.position.y=u-60,K.position.x=B.position.x+1,K.position.y=B.position.y+1;K.position;var O=t.getKeyValue("char-reload-pistol-sheet"),V=new c.a(O.animations.char_reload_pistol);V.loop=!1,V.animationSpeed=.5,V.updateAnchor=!0,V.pivot.x=.52*V.width,V.pivot.y=.5*V.height,V.visible=!1,V.onComplete=function(){V.gotoAndStop(0),o.reloading=!1},i.addChild(V);var T=t.getKeyValue("char-reload-smg-sheet"),j=new c.a(T.animations.char_reload_smg);j.loop=!1,j.animationSpeed=.5,j.updateAnchor=!0,j.pivot.x=.52*V.width,j.pivot.y=.5*V.height,j.visible=!1,j.onComplete=function(){j.gotoAndStop(0),o.reloading=!1},i.addChild(j);var F=t.getKeyValue("char-reload-shotgun-sheet"),D=new c.a(F.animations.shotgunReload);D.loop=!1,D.animationSpeed=.5,D.updateAnchor=!0,D.pivot.x=.725*D.width,D.pivot.y=.5*D.height,D.visible=!1,this.shotgunShellLoadIterations=0,this.gotoToEndOfShotgunReload=!0,D.onComplete=function(){D.gotoAndStop(0),o.reloading=!1,e.shotgunShellLoadIterations=0,e.gotoToEndOfShotgunReload=!0},i.addChild(D),this.reloadAnimsByType={"pistol weapon":V,"smg weapon":j,"shotgun weapon":D},this.reloadAnims=[V,j,D];var L=new un.a;L.kernelSize=5,L.velocity.x=30,L.velocity.y=40;var R=t.getKeyValue("melee-pistol-sheet"),z=new c.a(R.animations.melee_pistol);z.loop=!1,z.animationSpeed=.75,z.updateAnchor=!0,z.pivot.x=.5*z.width,z.pivot.y=.5*z.height,z.visible=!1,z.onComplete=function(){z.gotoAndStop(0),z.visible=!1,e.meleeAttackInProgress=!1,e.removeMeleeHitbox()},z.onFrameChange=function(){e.meleeAttackInProgress=!0,r().game.filterEffects&&z.currentFrame>12&&z.currentFrame<15?z.filters=[L]:z.filters=[]},i.addChild(z);var U=t.getKeyValue("melee-ump-sheet"),G=new c.a(U.animations.melee_ump);G.loop=!1,G.animationSpeed=.75,G.updateAnchor=!0,G.pivot.x=.5*G.width,G.pivot.y=.5*G.height,G.visible=!1,G.onComplete=function(){G.gotoAndStop(0),G.visible=!1,e.meleeAttackInProgress=!1,e.removeMeleeHitbox()},G.onFrameChange=function(){e.meleeAttackInProgress=!0,r().game.filterEffects&&G.currentFrame>11&&G.currentFrame<14?G.filters=[L]:G.filters=[]},i.addChild(G);var Y=t.getKeyValue("melee-shotgun-sheet"),J=new c.a(Y.animations.meleeShotgun);J.loop=!1,J.animationSpeed=.5,J.updateAnchor=!0,J.pivot.x=.75*J.width,J.pivot.y=.5*J.height,J.visible=!1,J.onComplete=function(){J.gotoAndStop(0),J.visible=!1,e.meleeAttackInProgress=!1,e.removeMeleeHitbox()},J.onFrameChange=function(){e.meleeAttackInProgress=!0,r().game.filterEffects&&J.currentFrame>6&&J.currentFrame<9?J.filters=[L]:J.filters=[]},i.addChild(J),this.meleeSprites=[z,G,J],this.grenadeThrowInProgress=!1,this.grenadeForce={x:.001,y:.001},this.chargingGrenade=!1,this.chargeGrenade=function(){e.chargeGrenadeSound=t.getKeyValue("charging-grenade-sound"),e.chargeGrenadeSound&&!e.chargingGrenade&&e.chargeGrenadeSound.play(),i.addChild(e.meter),e.grenadeChargeRate=r().game.player.weapons.grenadeChargeRate,e.chargingGrenade=!0,e.grenadeForce.x<=e.grenadeUpperForceThreshold&&(e.grenadeForce.x+=e.grenadeChargeRate,e.grenadeForce.y+=e.grenadeChargeRate)};e.meter=new c.f,e.meter.beginFill(16753215),e.meter.drawRect(0,0,100,10),i.addChild(e.meter),this.renderGrenadeChargeMeter=function(t){var a=t(e.body),n=a.x,o=a.y;e.grenadeUpperForceThreshold=r().game.player.weapons.grenadeUpperForceThreshold,e.meter&&e.chargingGrenade?(e.meter.position.x=n-e.meter.width/2,e.meter.position.y=o-.75*_t(e.body),e.meter.width=e.grenadeForce.x/e.grenadeUpperForceThreshold*100):e.meter.width=0},this.createGrenade=function(){t.getKeyValue("weapons-ui").updateGrenadeIcons();var a=t.getKeyValue("grenades");e.grenadeChargeRate=r().game.player.weapons.grenadeChargeRate,e.calculatedGrenadeForce=function(e,t,a){var n=Et.Vector.angle(e,t);return{x:Math.cos(n)*a.x,y:Math.sin(n)*a.y}}(e.arm.position,r().game.mouseRelativeToPlayerPosition,e.grenadeForce),a.push(new hn(r().game.mouseState.x===Ft?e.body.position.x+Kt(e.body):e.body.position.x-Kt(e.body),e.body.position.y-_t(e.body)/2,8,e.calculatedGrenadeForce)),e.grenadeForce={x:.001,y:.001},e.chargingGrenade=!1},this.throwGrenade=function(){var t=r().game.player.weapons.equipped,a={"pistol weapon":function(){$.currentFrame<1&&($.visible=!0,$.gotoAndPlay(8))},"smg weapon":function(){ee.currentFrame<1&&(ee.visible=!0,ee.gotoAndPlay(8))},"shotgun weapon":function(){le.currentFrame<1&&(le.visible=!0,le.gotoAndPlay(8))}};e.grenadeThrowInProgress||(e.chargeGrenadeSound&&e.chargeGrenadeSound.stop(),k(.2,(function(){window.gameObjects.getKeyValue("throw-sound").play(),e.createGrenade()})),e.chargingGrenade=!1,e.grenadeThrowInProgress=!0,a[t]&&(a[t](),Object(l.b)((function(){s(lt()),s(ie(I))}))))};var Z=t.getKeyValue("grenade-pistol-sheet"),$=new c.a(Z.animations.grenade_throw_pistol);$.loop=!1,$.animationSpeed=1,$.updateAnchor=!0,$.pivot.x=.5*$.width,$.pivot.y=.5*$.height,$.visible=!1,$.onComplete=function(){$.gotoAndStop(0),$.visible=!1,e.grenadeThrowInProgress=!1},$.onFrameChange=function(){e.grenadeThrowInProgress=!0,$.currentFrame>22&&(e.grenadeThrown||(e.grenadeThrown=!0,k(.5,(function(){e.grenadeThrown=!1})))),$.currentFrame>27&&($.gotoAndStop(0),$.visible=!1,e.grenadeThrowInProgress=!1)},i.addChild($);var Q=t.getKeyValue("grenade-ump-sheet"),ee=new c.a(Q.animations.grenade_throw_ump);ee.loop=!1,ee.animationSpeed=1,ee.updateAnchor=!0,ee.pivot.x=.5*ee.width,ee.pivot.y=.5*ee.height,ee.visible=!1,ee.onComplete=function(){ee.gotoAndStop(0),ee.visible=!1,e.grenadeThrowInProgress=!1},ee.onFrameChange=function(){e.grenadeThrowInProgress=!0,22===ee.currentFrame&&(e.grenadeThrown=!0,k(.5,(function(){e.grenadeThrown=!1}))),ee.currentFrame>27&&(ee.gotoAndStop(0),ee.visible=!1,e.grenadeThrowInProgress=!1)},i.addChild(ee);var se=t.getKeyValue("grenade-shotgun-sheet"),le=new c.a(se.animations.shotgunGrenadeThrow);le.loop=!1,le.animationSpeed=1,le.updateAnchor=!0,le.pivot.x=.5*le.width,le.pivot.y=.5*le.height,le.visible=!1,le.onComplete=function(){le.gotoAndStop(0),le.visible=!1,e.grenadeThrowInProgress=!1},le.onFrameChange=function(){22===le.currentFrame&&(e.grenadeThrown=!0,k(.5,(function(){e.grenadeThrown=!1}))),le.currentFrame>27&&(le.gotoAndStop(0),le.visible=!1,e.grenadeThrowInProgress=!1)},i.addChild(le),this.grenadeSprites=[$,ee,le],this.grenadeSpritesByEquipped={"pistol weapon":$,"smg weapon":ee,"shotgun weapon":le},this.ejectedMags=[],this.reloadMagazineActionsByType={"pistol weapon":function(){var t=r().game,n=t.player,o=n.weapons,s=(o.equipped,o.reloadSpeed,n.perks.magDmg.owned),l=t.mouseState.x;Ye.play(),Ye.fade(1,0,300);var d=l===Ft?"left":"right",p=Et.Bodies.rectangle(e.body.position.x+("left"===d?20:-20),e.body.position.y,7,20,{collisionFilter:s?{}:Dt});p.label="magazine",Et.World.add(a,p),Et.Body.applyForce(p,e.body.position,{x:+("left"===d?kt.a.float(.0025,.005):kt.a.float(-.0025,-.005)),y:kt.a.float(-.0025,-.005)});var u=new c.f;u.beginFill(3355443),u.drawRect(0,0,7,20),u.pivot.x=u.width/2,u.pivot.y=u.height/2;var h={gfx:u,body:p};e.ejectedMags.unshift(h),i.addChild(u),k(2,(function(){Et.World.remove(a,p),u.destroy(),e.ejectedMags.pop()}))},"smg weapon":function(){var t=r().game,n=t.player.perks.magDmg.owned,o=t.mouseState.x;Ye.play(),Ye.fade(1,0,300);var s=o===Ft?"left":"right",l=Et.Bodies.rectangle(e.body.position.x+("left"===s?20:-20),e.body.position.y-_t(e.body)/2,7,42,{collisionFilter:n?{}:Dt});l.label="magazine",Et.World.add(a,l),Et.Body.applyForce(l,e.body.position,{x:+("left"===s?kt.a.float(.004,.01):kt.a.float(-.004,-.01)),y:kt.a.float(-.0015,-.01)});var d=new c.f;d.beginFill(3355443),d.drawRect(0,0,7,42),d.pivot.x=d.width/2,d.pivot.y=d.height/2;var p={gfx:d,body:l};e.ejectedMags.unshift(p),i.addChild(d),k(2,(function(){Et.World.remove(a,l),d.destroy(),e.ejectedMags.pop()}))},"shotgun weapon":function(){!function t(){k(.3,(function(){e.shotgunShellLoadIterations>5?D.gotoAndPlay(21):(D.gotoAndPlay(10),e.shotgunShellLoadIterations++,t())}))}()}},this.updateEjectedMagPositions=function(t){e.ejectedMags.forEach((function(e){var a=t(e.body),n=a.x,o=a.y,i=a.rotation;e.gfx.position={x:n,y:o},e.gfx.rotation=i}))},this.reloadWeapon=function(){var t=r().game.player.weapons,a=t.reloadSpeed,n=(t.reloadAnimationFrames,t.equipped);e.reloadAnimsByType[n].animationSpeed=a[n],e.reloadAnimsByType[n].gotoAndPlay(1),k("pistol weapon"===n?a[n]/4:"smg weapon"===n?2*a[n]+a[n]/2:"shotgun weapon"===n?a[n]+a[n]/4:0,(function(){!0===e.reloadAnimsByType[n].visible&&(s(ie(W)),e.reloadMagazineActionsByType[n]())}))};var de=t.getKeyValue("right-arm-pistol-fire-sheet"),ce=new c.a(de.animations.right_char_arm_pistol_fire);ce.play(),ce.loop=!1,ce.animationSpeed=.35,ce.updateAnchor=!0,ce.pivot.x=.6*ce.width,ce.pivot.y=.4*ce.height,ce.onComplete=function(){ce.stop()},i.addChild(ce);var pe=t.getKeyValue("right-arm-smg-fire-sheet"),ue=new c.a(pe.animations.char_right_arm_smg_fire);ue.play(),ue.loop=!1,ue.animationSpeed=.35,ue.updateAnchor=!0,ue.pivot.x=.6*ue.width,ue.pivot.y=.4*ue.height,ue.onComplete=function(){ue.stop()},i.addChild(ue);var he=t.getKeyValue("arms-fire-shotgun-sheet"),me=new c.a(he.animations.rightArmFireShotgun);me.play(),me.loop=!1,me.animationSpeed=.5,me.updateAnchor=!0,me.pivot.x=.6*me.width,me.pivot.y=.4*me.height,me.onComplete=function(){me.stop()},i.addChild(me);var ge=Bt("char-head");i.addChild(ge),this.positionHeadSprite=function(t){var a=r().game,n=a.keys,o=a.mouseState.x,i=a.mousePosition,s=a.player,l=s.variables,d=l.jumping,c=l.currentDirection,p=s.weapons.equipped,u=t.mx,h=t.my,m=(0,t.fn)(e.head),g=m.x,y=m.y;(n.indexOf(68)>-1||n.indexOf(65)>-1)&&!d?"right"===c?ge.position.x=o===Ft?g+5:g:"left"===c&&(ge.position.x="less than player x position"===o?g-5:g):ge.position.x=g,ge.position.y=y+12,d?e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.6*e.width,e.pivot.y=.47*e.height})):"less than player y position"===h?(e.armsSpritesByType[p].forEach((function(e){e.pivot.y=.45*e.height})),ge.rotation=u===Ft?2.5:.957):"greater than player y position"===h?(e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.65*e.width,e.pivot.y=.45*e.height})),ge.rotation=u===Ft?-2.723:-.5532):i.x>550&&i.x<650?(e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.62*e.width,e.pivot.y=.42*e.height})),ge.rotation=u===Ft?-2.723:-.5532):i.x<750&&i.y>250&&u===Ft?(e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.62*e.width,e.pivot.y=.42*e.height})),ge.rotation=-2.723):i.x>450&&i.y>250&&"less than player x position"===u?(e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.62*e.width,e.pivot.y=.42*e.height})),ge.rotation=-.5532):(e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.6*e.width,e.pivot.y=.42*e.height})),ge.rotation=ke.rotation)},ge.pivot.x=.52*ge.width,ge.pivot.y=.17*ge.height,this.headSprite=ge;var ye=t.getKeyValue("char-run-sheet"),fe=new c.a(ye.animations.char_run);fe.loop=!0,fe.animationSpeed=1,fe.updateAnchor=!0,fe.pivot.x=.52*fe.width,fe.pivot.y=.5*fe.height,i.addChild(fe);var be=t.getKeyValue("char-idle-sheet"),we=new c.a(be.animations.char_idle);we.play(),we.loop=!0,we.animationSpeed=.1,we.updateAnchor=!0,we.pivot.x=.52*we.width,we.pivot.y=.5*we.height,i.addChild(we);var ve=t.getKeyValue("char-jump-sheet"),xe=new c.a(ve.animations.char_jump);xe.loop=!1,xe.animationSpeed=.35,xe.updateAnchor=!0,xe.pivot.x=.52*xe.width,xe.pivot.y=.5*xe.height,xe.visible=!1,i.addChild(xe),this.stopJumpAnimation=function(){xe.gotoAndStop(0),xe.visible=!1},xe.onComplete=function(){r().game.player.variables.jumping?e.resumeJumpAnimation():e.stopJumpAnimation()};var Ee=new un.a({velocity:{y:0}});this.resumeJumpAnimation=function(){xe.gotoAndPlay(3),xe.visible=!0,fe.visible=!1,we.visible=!1},this.playJumpAnimation=function(){r().game.filterEffects&&(xe.filters=[Ee],C(Ee.velocity,.35,{y:50,onUpdate:function(){xe.filters=[Ee]}})),xe.gotoAndPlay(0),xe.visible=!0,fe.visible=!1,we.visible=!1};var Se=t.getKeyValue("left-arm-pistol-fire-sheet"),ke=new c.a(Se.animations.left_char_arm_pistol_fire);ke.play(),ke.loop=!1,ke.animationSpeed=.35,ke.updateAnchor=!0,ke.pivot.x=.6*ke.width,ke.pivot.y=.4*ke.height,ke.onComplete=function(){ke.gotoAndStop(0)},i.addChild(ke);var Ae=t.getKeyValue("left-arm-smg-fire-sheet"),Te=new c.a(Ae.animations.char_left_arm_smg_fire);Te.play(),Te.loop=!1,Te.animationSpeed=.35,Te.updateAnchor=!0,Te.pivot.x=.6*Te.width,Te.pivot.y=.4*Te.height,Te.onComplete=function(){Te.gotoAndStop(0)},i.addChild(Te);var je=new c.a(he.animations.leftArmFireShotgun);je.play(),je.loop=!1,je.animationSpeed=.5,je.updateAnchor=!0,je.pivot.x=.6*je.width,je.pivot.y=.4*je.height,je.onComplete=function(){je.stop()},i.addChild(je);new un.a({velocity:{y:0}});this.armsSprites=[ke,ce,Te,ue,je,me],this.armsSpritesByType={"pistol weapon":[ke,ce],"smg weapon":[Te,ue],"shotgun weapon":[je,me]};var We=new An,He=window.gameObjects.getKeyValue("9mm-sound1"),Ue=window.gameObjects.getKeyValue("9mm-sound2"),Ge=new ln.Howl({src:[He]}),qe=(new ln.Howl({src:[Ue],sprite:{_1:[500,1e3]}}),window.gameObjects.getKeyValue("pistol-reload-sound")),Ye=new ln.Howl({src:[qe],volume:.25}),Xe=t.getKeyValue("jump-sound"),Je=t.getKeyValue("pain1-sound"),et=t.getKeyValue("pain2-sound"),tt=t.getKeyValue("death-rip-sound"),at=t.getKeyValue("player-death-sound"),nt=t.getKeyValue("bullet-impact-body-sound"),ot=t.getKeyValue("smg-fire-sound"),it=t.getKeyValue("shotgun-blast-sound");this.fireWeaponAnimation=function(){var t=r().game,a=(t.mouseState,t.player.weapons.equipped);e.armsSpritesByType[a].forEach((function(e){e.visible=!0})),e.armsSpritesByType[a].forEach((function(e){e.gotoAndPlay(0)})),We.fireEffect();var n=new In(e.arm);e.currentMuzzleSpark=n,"pistol weapon"===a&&Ge.play(),"smg weapon"===a&&ot.play(),"shotgun weapon"===a&&it.play()},this.charRunSprite=fe,this.charIdleSprite=we,this.charJumpSprite=xe,this.charReloadPistolSprite=V,this.charReloadSMGSprite=j,this.charReloadShotgunSprite=D,this.bodySprites=[fe,we,xe,V,j,D,z,G,J,$,ee,le],this.sprites=[ce,ue,me,fe,we,xe,V,j,D,z,G,$,ee,le,ke,Te,je],this.shadow=new c.f,this.shadow.beginFill(0,.35),this.shadow.drawEllipse(0,0,60,10);var st=new c.k.BlurFilter;st.blur=8,this.shadow.filters=r().game.filterEffects?[st]:[],this.checkFilters=function(){r().game.filterEffects?(e.shadow.alpha=.85,e.shadow.filters=[st],K.filters=[_]):(e.shadow.alpha=.45,e.shadow.filters=[],K.filters=[])},this.setBodySpritesPositions=function(t){var a=(0,t.fn)(e.body),n=a.x,o=a.y;e.bodySprites.forEach((function(e){e.position.x=n,e.position.y=o-15})),i&&-1===i.children.indexOf(e.shadow)&&i.addChild(e.shadow),e.shadow.position.x=n,e.shadow.position.y=e.bodySprites[0].position.y+e.bodySprites[0].height/2-5},this.setArmsSpritePosition=function(t){var a,n=r().game,o=n.keys,i=n.mouseState,s=i.x,l=i.y,d=n.player.variables,c=d.jumping,p=d.currentDirection,u=(0,t.fn)(e.arm),h=u.x,m=u.y,g=u.rotation;e.armsSprites.forEach((function(e){(o.indexOf(68)>-1||o.indexOf(65)>-1)&&!c?"right"===p?e.x=s===Ft?h+5:h:"left"===p&&(e.x="less than player x position"===s?h-5:h):e.x=h,e.y=c&&"less than player y position"===l?m-10:m,e.rotation=g})),We.getFlashes().forEach((function(e){e.position=ce.position,e.rotation=g-Object(jt.degrees)(90),e.pivot.x=.05*-e.width,e.pivot.y="shotgun weapon"===r().game.player.weapons.equipped?3.25*e.height:2.25*e.height,a=e.position,e.rotation})),e.currentMuzzleSpark&&(e.currentMuzzleSpark.spark.pivot.x=-e.currentMuzzleSpark.spark.width,e.currentMuzzleSpark.spark.position=a,e.currentMuzzleSpark.spark.rotation=g-Object(jt.degrees)(180))},this.meleeAttackInProgress=!1,this.createMeleeHitbox=function(){var t=r().game,n=t.mouseState,o=t.player.weapons.equipped;window.gameObjects.getKeyValue("throw-sound").play(),e.meleeHitbox=Et.Bodies.rectangle(n.x===Ft?e.body.position.x+1.75*Kt(e.body):e.body.position.x-1.75*Kt(e.body),e.body.position.y-_t(e.body)/2,2*Kt(e.body),_t(e.body),{isStatic:!0}),e.meleeHitbox.main=e,e.meleeHitbox.label="melee hitbox ".concat(o),Et.World.add(a,e.meleeHitbox)},this.removeMeleeHitbox=function(){e.meleeHitbox&&Et.World.remove(a,e.meleeHitbox)},this.meleeAttack=function(){var t=r().game.player.weapons.equipped,a={"pistol weapon":function(){z.currentFrame<1&&(z.visible=!0,z.gotoAndPlay(1))},"smg weapon":function(){G.currentFrame<1&&(G.visible=!0,G.gotoAndPlay(1))},"shotgun weapon":function(){J.currentFrame<1&&(J.visible=!0,J.gotoAndPlay(1))}};e.meleeAttackInProgress||(e.meleeAttackInProgress=!0,k(.35,(function(){e.dead||e.createMeleeHitbox(),k(.1,(function(){e.removeMeleeHitbox()}))})),a[t]())},this.collectHealth=function(t){e.life+=t,e.life>100&&(e.life=100),s(rt(e.life)),Yt(r().game.scoreAmounts.collectHealth),A(K,.5,{width:e.life/100*e.initialLifebarWidth})},this.collectCredits=function(e){s($e(e)),Yt(r().game.scoreAmounts.collectCredit)},this.collectAmmo=function(e,t){za("+".concat(t," ").concat(e," ammo"),"#32BD6A",.35,1),s(Ze(e,t)),Yt(r().game.scoreAmounts.collectAmmo)},this.playerHit=!1,this.resetPlayerHit=function(){e.playerHit=!0,k(1,(function(){e.playerHit=!1}))},this.blinkAlpha=function(){e.headSprite.alpha=.25,e.armsSprites.forEach((function(e){e.alpha=.25})),e.bodySprites.forEach((function(e){e.alpha=.25})),k(.1,(function(){e.headSprite.alpha=1,e.armsSprites.forEach((function(e){e.alpha=1})),e.bodySprites.forEach((function(e){e.alpha=1}))})),k(.2,(function(){e.headSprite.alpha=.25,e.armsSprites.forEach((function(e){e.alpha=.25})),e.bodySprites.forEach((function(e){e.alpha=.25}))})),k(.3,(function(){e.headSprite.alpha=1,e.armsSprites.forEach((function(e){e.alpha=1})),e.bodySprites.forEach((function(e){e.alpha=1}))})),k(.35,(function(){e.headSprite.alpha=.25,e.armsSprites.forEach((function(e){e.alpha=.25})),e.bodySprites.forEach((function(e){e.alpha=.25}))})),k(.4,(function(){e.headSprite.alpha=1,e.armsSprites.forEach((function(e){e.alpha=1})),e.bodySprites.forEach((function(e){e.alpha=1}))})),k(.45,(function(){e.headSprite.alpha=.25,e.armsSprites.forEach((function(e){e.alpha=.25})),e.bodySprites.forEach((function(e){e.alpha=.25}))})),k(.5,(function(){e.headSprite.alpha=1,e.armsSprites.forEach((function(e){e.alpha=1})),e.bodySprites.forEach((function(e){e.alpha=1}))}))},this.takeDamage=function(t){var a=r().game.player.variables.defense;e.life-=t-a,Xt(r().game.scoreAmounts.penalties.damageTaken),Object(l.b)((function(){s(rt(e.life)),s(te(X,t))})),1===[1,2][Math.floor(2*Math.random())]?Je.play():et.play(),nt.play(),K.tint=14487054,A(K,.2,{width:e.life/100*e.initialLifebarWidth}),A(K,.1,{y:K.position.y+2,onComplete:function(){A(K,.1,{y:K.position.y-3,onComplete:function(){A(K,.1,{y:K.position.y+1,onComplete:function(){K.tint=64154}})}})}});var n={x:kt.a.float(e.bodySprites[0].position.x-5,e.bodySprites[0].position.x+20),y:kt.a.float(e.bodySprites[0].position.y,e.bodySprites[0].position.y-60)};za("-".concat(t),"#FF0000",.35,1,12),new Za(null,n,.75),e.blinkAlpha(),e.resetPlayerHit(),e.life<=0&&e.kill()},this.acceptHealth=function(t){e.life=t,s(rt(e.life)),A(K,.5,{width:e.life/100*e.initialLifebarWidth})},this.addSpritesInOrder=function(){i.addChild(e.headSprite),e.armsSprites.forEach((function(e){return i.addChild(e)})),e.bodySprites.forEach((function(e){return i.addChild(e)})),i.addChild(ke),i.addChild(Te),i.addChild(je),i.addChild(K)},this.respawn=function(){if(n.timing.timeScale=1,e.playerRagdoll&&(e.playerRagdoll.destroy(),e.playerRagdoll=null),s(ie(N)),Xt(r().game.scoreAmounts.penalties.respawn),e.addSpritesInOrder(),e.life=100,K.width=e.initialLifebarWidth,e.dead=!1,K.visible=B.visible=!0,e.lastDeathType===$a)if(e.lastBodyPosition.x<0)for(;e.body.position.x<200&&e.body.position.y>0;)Et.Composite.translate(e.composite,{x:100,y:-100});else for(;e.body.position.x>r().game.width&&e.body.position.y>0;)Et.Composite.translate(e.composite,{x:-100,y:-100});Et.World.add(a,e.composite),r().game.lastGameSubState===v?s(Ne("sub",r().game.gameSubState,v)):s(Ne("sub",r().game.gameSubState,w))},this.dead=!1,this.kill=function(o){if(!1===e.dead){o?e.lastDeathType=o:(tt.play(),e.lastDeathType="killed by zombie"),s(ie(H)),Xt(r().game.scoreAmounts.penalties.killed),at.play(),n.timing.timeScale=.5,K.visible=B.visible=!1,e.life=0,e.dead=!0,e.removeMeleeHitbox(),e.lastBodyPosition=e.body.position,Et.World.remove(a,e.composite),e.bodySprites&&e.armsSprites&&(i.removeChild(e.headSprite),e.bodySprites.forEach((function(e){return i.removeChild(e)})),e.armsSprites.forEach((function(e){return i.removeChild(e)})));var d={x:1===n.timing.timeScale?1===we.scale.x?.1:-.1:1===we.scale.x?.25:-.25,y:1===n.timing.timeScale?-.25:-.75},c=["head","body","limb","none"],p=c[Math.floor(Math.random()*c.length)];e.playerRagdoll="head"===p?t.setKeyValue("player-ragdoll",new Ga({x:e.body.position.x,y:e.body.position.y},d,p)):"body"===p?t.setKeyValue("player-ragdoll",new qa({x:e.body.position.x,y:e.body.position.y},d,p)):"limb"===p?t.setKeyValue("player-ragdoll",new Ya({x:e.body.position.x,y:e.body.position.y},d,p)):t.setKeyValue("player-ragdoll",new Xa({x:e.body.position.x,y:e.body.position.y},d,p)),Object(l.b)((function(){s(Ke()),s(Be()),s(Le("mouse up")),s(Ne("sub",r().game.gameSubState,b))}))}};var dt=Vt(t),ct=function(e){var t=e.getKeyValue("world"),a=At().game.player.compositeId;return Et.Composite.get(t,a,"composite")}(t).bodies[1],pt=_t(this.body);return window.keydownListenersAdded||(window.addEventListener("keydown",(function(a){var n=r().game,i=n.keys,l=n.gameState,d=n.gameSubState,c=n.player.variables,p=c.jumpForce,u=c.jumping;if(d!==E){if(l===S.GAMEPLAY&&(e.dead||o.reloading||e.meleeAttackInProgress||e.grenadeThrowInProgress||(87!==a.keyCode||u||e.chargingGrenade?i.indexOf(a.keyCode)<0&&s(Oe(a.keyCode)):(s(Fe(!0)),Xe.play(),e.playJumpAnimation(),Et.Body.applyForce(e.body,e.body.position,{x:0,y:p})))),l===S.GAMEPLAY&&d!==v&&d!==x&&(e.dead||o.reloading||e.meleeAttackInProgress||u||e.grenadeThrowInProgress||"f"!==a.key&&"F"!==a.key||e.meleeAttack()),l!==S.SHOP_MENU&&d===x)if("b"===a.key||"B"===a.key)t.getKeyValue("object-placement-arrow").changeBack=!0,s(Ne("main",l,S.BUILD_MENU)),s(Ne("sub",d,m));if((l===S.GAMEPLAY||l===S.SHOP_MENU)&&32===a.keyCode&&(!o.reloading||l===S.SHOP_MENU)&&!e.meleeAttackInProgress&&!e.grenadeThrowInProgress){var h=r().game.player.weapons,g=h.equipped,y=h.list;if(y[y.indexOf(g)+1]){var f=y.indexOf(g);s(ze(y[f+1]))}else s(ze(y[0]))}if(l===S.GAMEPLAY&&d!==v&&d!==x){var b=t.getKeyValue("remote-mines"),w=["1","2","3","4","5","6","7","8","9"].indexOf(a.key.toString());console.log(a.key),w>-1&&b[a.key.toString()]&&(b[a.key.toString()].detonate(),delete b[a.key.toString()])}if(l===S.GAMEPLAY&&d===x&&r().game.traps.selectedTrap===yn.TURRET){var k=t.getKeyValue("current-turret");k&&("ArrowLeft"===a.key&&k.updateDirection("left"),"ArrowRight"===a.key&&k.updateDirection("right"))}if(l===S.GAMEPLAY&&82===a.keyCode&&!e.meleeAttackInProgress){var A=r().game,C=A.showingMessage,B=A.player.weapons,K=B.equipped;0===B.totalAmmo[K]&&!1===C?za("Out of ammo!","#FF0000",.25,.75):o.reloading||u||e.dead||(e.reloadWeapon(),o.reload())}}})),window.addEventListener("keyup",(function(t){var a=r().game,n=a.keys,i=a.gameState,l=a.gameSubState,d=a.player.variables.jumping;i===S.GAMEPLAY&&(e.dead||(n.indexOf(t.keyCode)>-1&&s(Ve(t.keyCode)),"g"!==t.key&&"G"!==t.key||!(r().game.player.weapons.totalAmmo.grenades>0)||e.meleeAttackInProgress||o.reloading||d||i===S.GAMEPLAY&&l!==x&&l!==v&&e.throwGrenade()))})),window.addEventListener("mousemove",(function(e){var t=r().game,a=t.gameState;t.gameSubState;if(a===S.GAMEPLAY&&e.target&&e.target===document.getElementsByTagName("canvas")[1]&&e.target.getBoundingClientRect){var n,o,i,l=e.target.getBoundingClientRect(),d=e.clientX-l.left,c=e.clientY-l.top,p=r().game.mouseRelativeToPlayerPosition;s(Me({x:d,y:c})),p.x>dt.position.x&&(o=Ft),p.x<dt.position.x&&(o="less than player x position"),p.y>dt.position.y+pt/2&&(i="greater than player y position"),p.y<dt.position.y-pt&&(i="less than player y position"),n=Et.Vector.angle(p,ct.position),Et.Body.setAngle(ct,n),s(Pe(o)),s(De(i))}})),window.addEventListener("mousedown",(function(t){console.log(t);var a=r().game,n=a.gameState,o=a.gameSubState;n===S.GAMEPLAY&&o!==x&&o!==v&&o!==E&&(e.dead||e.meleeAttackInProgress||e.grenadeThrowInProgress||(1===t.buttons?s(Le("mouse down")):2===t.buttons&&(s(Ce(!0)),console.log("should charge"))))})),window.addEventListener("mouseup",(function(e){r().game.gameState===S.GAMEPLAY&&(console.log(e),s(Le("mouse up")),r().game.rightMouseDown&&s(Ce(!1)))})),window.addEventListener("click",(function(e){var a=r().game,n=a.player.credits,o=a.mouseRelativeToPlayerPosition,i=a.gameSubState,d=a.traps,c=d.selectedTrap,p=d.costToBuild,u=a.barriers,h=u.selectedBarrier,m=u.costToBuild;if(i===x){var g,y,f={x:o.x,y:360},b=!0,w=(t.getKeyValue("remote-mines"),t.getKeyValue("build-objects")),v=t.getKeyValue("place-object-sound"),E=t.getKeyValue("button-cancel-sound"),S=w.map((function(e){return function(e){return f.x+25<e.getBody().position.x-Kt(e.getBody())/2||e.getBody().position.x+Kt(e.getBody())/2<f.x-25}(e)?"allow placement":"place next to"}));if(w.length>0)g=w.map((function(e){return e.getBody().position.x})).reduce((function(e,t){return Math.abs(t-f.x)<Math.abs(e-f.x)?t:e})),console.log(g);if(S.indexOf("place next to")>-1&&(b=!1),h)n>=m[h]?(y=b||0===w.length?new cn(f,{width:50,height:100},h):new cn(f.x<g?{x:g-50,y:f.y}:{x:g+50,y:f.y},{width:50,height:100},h))&&(Object(l.b)((function(){s(ne(h)),s(ie(q)),s(Qe(m[h]))})),setTimeout((function(){r().game.barrierTypesPlaced&&Object.keys(r().game.barrierTypesPlaced).length>2&&!r().game.achievements[P].owned&&s(re(P))}),0),za("- $".concat(m[h]),16711680,.5,.75),w.push(y),v.play()):(E.play(),za("insufficient credits",16711680,.5,.75));var k,A=function(e){switch(c){case yn.LANDMINE:return new pn(e);case yn.CLUSTER_BOMB:return new mn(e);case yn.REMOTE_MINE:var a=t.getKeyValue("remote-mines-array");return new fn(e,a.length+1);case yn.TURRET:return new Cn(e)}};if(c)if(n>=p[c]){if(k=b||0===w.length?A(f):A(f.x<g?{x:g-50,y:f.y}:{x:g+50,y:f.y})){Object(l.b)((function(){s(ae(c)),s(ie(q)),s(Qe(p[c]))})),setTimeout((function(){r().game.trapTypesPlaced&&Object.keys(r().game.trapTypesPlaced).length>2&&!r().game.achievements[M].owned&&s(re(M))}),0),za("- $".concat(p[c]),16711680,.5,.75),v.play(),w.push(k);var C=t.getKeyValue("remote-mines-array");if(c===yn.REMOTE_MINE)if(C.length<10){var B=t.getKeyValue("remote-mines");C.push(k),C.forEach((function(e,t){B[t+1]=e,e.updateNumber(t+1)}))}else E.play(),za("can hold up to 9 remote mines at a time",16711680,.5,.75);c===yn.TURRET&&(za("Press Left or Right arrow to change turret direction",16777215,.75,2),t.setKeyValue("current-turret",k))}}else E.play(),za("insufficient credits",16711680,.5,.75)}})),window.addEventListener("contextmenu",(function(t){t.preventDefault();var a=r().game,n=a.gameState,i=a.gameSubState,s=a.player,l=s.variables.jumping,d=s.weapons.totalAmmo.grenades;n===S.GAMEPLAY&&d>0&&!e.meleeAttackInProgress&&!o.reloading&&!l&&i!==x&&i!==v&&(e.throwGrenade(),console.log("throw!"))})),window.addEventListener("wheel",(function(t){var a=r().game.gameState;if(a===S.MAIN_MENU&&a===S.SCORES_VIEW||t.preventDefault(),(a===S.GAMEPLAY||a===S.SHOP_MENU)&&(!o.reloading||a===S.SHOP_MENU)&&!e.meleeAttackInProgress&&!e.grenadeThrowInProgress){var n=r().game.player.weapons,i=n.equipped,l=n.list;if(t.deltaY<0)if(l[l.indexOf(i)-1]){var d=l.indexOf(i);s(ze(l[d-1]))}else s(ze(l[l.length-1]));else if(t.deltaY>0)if(l[l.indexOf(i)+1]){var c=l.indexOf(i);s(ze(l[c+1]))}else s(ze(l[0]))}})),window.keydownListenersAdded=!0),this.pause=function(){0!==e.charRunSprite.currentFrame&&e.charRunSprite.play(),0!==e.charReloadPistolSprite.currentFrame&&e.charReloadPistolSprite.play(),0!==e.charReloadSMGSprite.currentFrame&&e.charReloadSMGSprite.play(),0!==xe.currentFrame&&xe.play()},this.unpause=function(){e.charRunSprite.stop(),e.charReloadPistolSprite.stop(),e.charReloadSMGSprite.stop(),xe.stop(),s(Fe(!1))},this}var Nn=window.TweenLite,Un=Nn.to;Nn.from,Nn.kill;function Gn(e){var t=this,a=e.getKeyValue("game-pixi-container");return this.crosshair=new c.e,this.cross=new c.f,this.cross.lineStyle(2,11534336,.75),this.cross.moveTo(0,-15),this.cross.lineTo(0,15),this.cross.moveTo(-15,0),this.cross.lineTo(15,0),this.crosshair.addChild(this.cross),this.circle=new c.f,this.circle.lineStyle(1,11534336,.75),this.circle.drawCircle(0,0,10),this.crosshair.addChild(this.circle),this.changed=!1,this.changeBack=!1,this._new=null,a.addChild(this.crosshair),this.crosshair.buildArrow=function(n){var o=e.getKeyValue("crosshair");a.removeChild(o);var i=new c.f;return i.lineStyle(2,n,1),i.beginFill(7829367,0),i.moveTo(0,0),i.lineTo(20,0),i.lineTo(20,30),i.lineTo(30,30),i.lineTo(10,45),i.lineTo(-10,30),i.lineTo(0,30),i.lineTo(0,0),i.endFill(),i.pivot.x=.5*i.width,i.pivot.y=.5*i.height,a.addChild(i),t._new=i,o._new=i,o.changed=!0,e.setKeyValue("object-placement-arrow",i),t.animationLoop=function(){Un(i.scale,.5,{x:1.2,y:.75,onComplete:function(){Un(i.scale,.5,{x:.9,y:1.2,onComplete:t.animationLoop})}})},t.animationLoop(),i},this}function qn(e,t,a){var n,o=this,i=e.x,r=e.y,s=window,l=s.gameObjects,d=s.TweenLite,p=d.to,u=d.delayedCall,h=l.getKeyValue("world"),m=l.getKeyValue("game-pixi-container"),g=l.getKeyValue("static-ground-effects"),y=l.getKeyValue("ground-fx-sheet"),f=["bullet-impact1.png","bullet-impact2.png"],b=["ground-blood-spatter1.png","ground-blood-spatter2.png","ground-blood-spatter3.png"];"bullet impact"===t&&(n=new c.h(y.textures[f[Math.floor(Math.random()*f.length)]])),"blood spatter"===t&&(n=new c.h(y.textures[b[Math.floor(Math.random()*b.length)]])),n.pivot.x=.5*n.width,n.pivot.y=n.height*(a?.2:.5);var w=l.getKeyValue("ground");n.position.x-n.width>w.bounds.min.x||(n.position.x,n.width,w.bounds.max.x);var v=l.getKeyValue("player");v.dead||v.sprites.forEach((function(e){m.addChild(e)}));var x=Et.Bodies.rectangle(i,r,10,10,{isStatic:!0,collisionFilter:Mt});Et.World.add(h,x),this.renderPosition=function(e){n.position=e(x),m&&-1===m.children.indexOf(n)&&m.addChild(n)},this.destroy=function(){Et.World.remove(h,x),m.removeChild(n);var e=g.indexOf(o);e>-1&&g.splice(e,1),h=null,m=null,l=null,g=null,y=null,f=null,b=null,x=null};return u(1,(function(){p(n,.5,{alpha:0,onComplete:function(){o.destroy()}})})),this}var Yn,Xn,Jn,Zn,$n,Qn,eo,to,ao,no,oo,io,ro,so,lo,co,po,uo,ho,mo,go,yo,fo,bo,wo,vo,xo,Eo,So,ko,Ao,Co,Bo,Ko,_o,Oo,Vo,To,jo,Fo,Mo=a(145),Po=a(146),Do=a(6),Lo=function(e){Object(Po.a)(a,e);var t=Object(Mo.a)(a);function a(){var e;Object(Tt.a)(this,a);var n=Do.p.from(window.gameObjects.getKeyValue("wall-tile"));return(e=t.call(this,n,1,n.height)).width=window.gameObjects.getKeyValue("game-width"),e.height=window.gameObjects.getKeyValue("game-height"),e.alpha=.2,e}return Object(tn.a)(a,[{key:"onResize",value:function(e,t){}},{key:"onUpdate",value:function(e){this.tilePosition.x-=4*e}},{key:"renderPosition",value:function(e,t,a){var n=e(t),o=(n.x,n.y,(0,xt.getState)().game),i=o.keys,r=o.player.variables,s=r.currentDirection,l=r.jumping;"right"===s&&i.indexOf(68)>-1&&(this.tilePosition.x-=.35),"left"===s&&i.indexOf(65)>-1&&(this.tilePosition.x+=.35),l&&(this.tilePosition.y+=.25)}}]),a}(a(39).a),Ro=xt.getState,zo=xt.dispatch,Wo=Ro().game,Io=Wo.width,Ho=Wo.height,No=window.TweenLite.delayedCall,Uo=function(e,t,a){var n=a.body1_label,o=a.body2_label,i=a.callback,r={};e.pairs[t].bodyA.label.indexOf(n)>-1&&e.pairs[t].bodyB.label.indexOf(o)>-1?(r.body1=e.pairs[t].bodyA,r.body2=e.pairs[t].bodyB,i(r)):e.pairs[t].bodyB.label.indexOf(n)>-1&&e.pairs[t].bodyA.label.indexOf(o)>-1&&(r.body1=e.pairs[t].bodyB,r.body2=e.pairs[t].bodyA,i(r))},Go=function(e,t){return"pistol weapon"===e?vn(t):"smg weapon"===e?function(e){var t=bn().game.player.weapons.damage["smg weapon"],a=t.min,n=t.max;return e.label.indexOf("body")>-1?{part:"torso",dmg:a}:e.label.indexOf("head")>-1?{part:"head",dmg:n}:void 0}(t):"shotgun weapon"===e?function(e){var t=bn().game.player.weapons.damage["shotgun weapon"],a=t.min,n=t.max;return e.label.indexOf("body")>-1?{part:"torso",dmg:a}:e.label.indexOf("head")>-1?{part:"head",dmg:n}:void 0}(t):"turret weapon"===e?function(e){var t=bn().game.player.weapons.damage["turret weapon"],a=t.min,n=t.max;return e.label.indexOf("body")>-1?{part:"torso",dmg:a}:e.label.indexOf("head")>-1?{part:"head",dmg:n}:void 0}(t):vn(t)},qo=function(e,t,a){Uo(e,t,{body1_label:"player character",body2_label:"ground",callback:function(){zo(Fe(!1));var e=a.getKeyValue("jump-landing-sound");e.seek(.1),e.play()}}),Uo(e,t,{body1_label:"player character",body2_label:"barrier",callback:function(){zo(Fe(!1));var e=a.getKeyValue("jump-landing-sound");e.seek(.1),e.play()}}),Uo(e,t,{body1_label:"gib",body2_label:"ground",callback:function(e){a.getKeyValue("static-ground-effects").push(new qn(e.body1.position,"blood spatter"))}}),Uo(e,t,{body1_label:"zombie body part",body2_label:"ground",callback:function(e){a.getKeyValue("static-ground-effects").push(new qn(e.body1.position,"blood spatter",!0))}}),Uo(e,t,{body1_label:"bullet",body2_label:"ground",callback:function(e){e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("ground")}}),Uo(e,t,{body1_label:"pistol shell",body2_label:"ground",callback:function(e){e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("ground"),a.getKeyValue("shell-impact-sound").play()}}),Uo(e,t,{body1_label:"smg shell",body2_label:"ground",callback:function(e){e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("ground"),a.getKeyValue("shell-impact-sound").play()}}),Uo(e,t,{body1_label:"bullet",body2_label:"player character",callback:function(e){e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy()}}),Uo(e,t,{body1_label:"grenade explosion",body2_label:"ground",callback:function(e){var t=a.getKeyValue("world");Et.World.remove(t,e.body1)}}),Uo(e,t,{body1_label:"turret bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=Go("turret weapon",e.body2),a=t.part,n=t.dmg;e.body2.main.takeDamage(n,a,null,null,"turret")}}}),Uo(e,t,{body1_label:"pistol bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=Go("pistol weapon",e.body2),n=t.part,o=t.dmg;e.body2.main.takeDamage(o,n)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Uo(e,t,{body1_label:"smg bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=Go("smg weapon",e.body2),n=t.part,o=t.dmg;e.body2.main.takeDamage(o,n)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Uo(e,t,{body1_label:"shotgun bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=Go("shotgun weapon",e.body2),n=t.part,o=t.dmg;e.body2.main.takeDamage(o,n)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Uo(e,t,{body1_label:"extra damage bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=Ro().game.player.weapons.damage[Ro().game.player.weapons.equipped].max;e.body2.main.takeDamage(3*t,"head","critical")}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Uo(e,t,{body1_label:"magazine",body2_label:"ground",callback:function(e){Ro().game.lastMagDropped&&JSON.parse(Ro().game.lastMagDropped)+200<Date.now()&&a.getKeyValue("mag-drop-sound").play();zo(oe(JSON.stringify(Date.now())))}}),Uo(e,t,{body1_label:"magazine",body2_label:"enemy",callback:function(e){e.body2.main&&e.body2.main.takeDamage&&e.body2.main.takeDamage(20,"head"),a.getKeyValue("spark-sprites").push(new Bn(1,e.body2,{tint:16741632})),a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Uo(e,t,{body1_label:"melee hitbox",body2_label:"enemy zombie body",callback:function(e){a.getKeyValue("spark-sprites").push(new Bn(1,e.body2,{tint:16711680})),a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play();for(var t=Ro().game.player.variables.currentDirection,n=0,o=3*Ro().game.player.upgradeTiers.melee.current;n<10;)n++,Et.Body.translate(e.body2,{x:"right"===t?-o:o,y:-.25});Yt(Ro().game.scoreAmounts.meleeConnect)}}),Uo(e,t,{body1_label:"melee hitbox pistol",body2_label:"enemy",callback:function(e){if(e.body2.main&&e.body2.main.takeDamage){var t=Ro().game.player.weapons.meleeDamage["pistol weapon"];e.body1.main.removeMeleeHitbox(),e.body2.main.takeDamage(t,null,null,!0)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Uo(e,t,{body1_label:"melee hitbox smg",body2_label:"enemy",callback:function(e){if(e.body2.main&&e.body2.main.takeDamage){var t=Ro().game.player.weapons.meleeDamage["smg weapon"];e.body1.main.removeMeleeHitbox(),e.body2.main.takeDamage(t,null,null,!0)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Uo(e,t,{body1_label:"melee hitbox shotgun",body2_label:"enemy",callback:function(e){if(e.body2.main&&e.body2.main.takeDamage){var t=Ro().game.player.weapons.meleeDamage["shotgun weapon"];e.body1.main.removeMeleeHitbox(),e.body2.main.takeDamage(t,null,null,!0)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Uo(e,t,{body1_label:"clustermine trap",body2_label:"enemy",callback:function(e){e.body1.destroy&&e.body1.destroy(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill()}}),Uo(e,t,{body1_label:"clustermine explosion",body2_label:"enemy",callback:function(e){e.body1.removeSelf(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill(null,null,"clustermine explosion")}}),Uo(e,t,{body1_label:"landmine trap",body2_label:"enemy",callback:function(e){e.body1.destroy&&e.body1.destroy(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill(null,null,"landmine")}}),Uo(e,t,{body1_label:"landmine explosion",body2_label:"enemy",callback:function(e){e.body1.removeSelf(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill(null,null,"landmine")}}),Uo(e,t,{body1_label:"barrel explosion",body2_label:"enemy",callback:function(e){e.body1.removeSelf(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill(null,null,"barrel explosion")}}),Uo(e,t,{body1_label:"grenade explosion",body2_label:"enemy",callback:function(e){e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill(null,null,"grenade explosion")}}),Uo(e,t,{body1_label:"pistol bullet",body2_label:"grenade",callback:function(e){e.body2.main&&e.body2.main.explode&&e.body2.main.explode()}}),Uo(e,t,{body1_label:"smg bullet",body2_label:"grenade",callback:function(e){e.body2.main&&e.body2.main.explode&&e.body2.main.explode()}}),Uo(e,t,{body1_label:"shotgun bullet",body2_label:"grenade",callback:function(e){e.body2.main&&e.body2.main.explode&&e.body2.main.explode()}}),Uo(e,t,{body1_label:"enemy",body2_label:"grenade",callback:function(e){e.body2.main&&e.body2.main.explode&&No(.1,(function(){e.body2.main.explode(),(e.body2.distance.start-e.body2.distance.end>2e3||e.body2.distance.end-e.body2.distance.start>2e3)&&(zo(re(C)),Yt(Ro().game.scoreAmounts.achievement))}))}}),Uo(e,t,{body1_label:"player character",body2_label:"attack",callback:function(e){if(e.body1.main&&e.body1.main.takeDamage){var t=Ro().game.enemies.zombies.attackDmg,a=e.body1.main;a.playerHit||a.takeDamage(t)}}}),Uo(e,t,{body1_label:"explosive barrier",body2_label:"bullet",callback:function(e){var t=Ro().game.enemies.zombies.attackDmg;e.body1.main&&e.body1.main.takeDamage(t),e.body1.strength<0&&e.body1.removeSelf(),a.getKeyValue("spark-sprites").push(new Bn(1,e.body2,{scale:.5,animationSpeed:2}))}}),Uo(e,t,{body1_label:"barrier",body2_label:"attack",callback:function(e){var t=Ro().game.enemies.zombies.attackDmg;e.body1.main&&e.body1.main.takeDamage(t),e.body1.strength<0&&e.body1.removeSelf()}}),Uo(e,t,{body1_label:"player character",body2_label:"health drop",callback:function(e){(e.body2.main.destroy&&e.body2.main.destroy(),e.body1.main&&e.body1.main.collectHealth)&&(Qn.collectHealth(e.body2.amount),a.getKeyValue("spark-sprites").push(new Bn(1,e.body2,{scale:.5,animationSpeed:.75})),a.getKeyValue("health-pickup-sound").play())}}),Uo(e,t,{body1_label:"player character",body2_label:"ammo drop",callback:function(e){(e.body2.main.destroy&&e.body2.main.destroy(),e.body1.main&&e.body1.main.collectAmmo)&&(Qn.collectAmmo(e.body2.ammo_type,e.body2.amount),a.getKeyValue("spark-sprites").push(new Bn(1,e.body2,{scale:.5,animationSpeed:.75})),a.getKeyValue("ammo-collect-sound").play())}}),Uo(e,t,{body1_label:"player character",body2_label:"currency drop",callback:function(e){(e.body2.main.destroy&&e.body2.main.destroy(),e.body1.main&&e.body1.main.collectCredits)&&(Qn.collectCredits(e.body2.amount),a.getKeyValue("spark-sprites").push(new Bn(1,e.body2,{scale:.5,animationSpeed:.75})),a.getKeyValue("coin-collect-sound").play())}}),Uo(e,t,{body1_label:"ground",body2_label:"shotgun shell",callback:function(e){var t=a.getKeyValue("shot-shell-sound");t.play(),t.fade(1,0,200)}}),Uo(e,t,{body1_label:"ground",body2_label:"grenade",callback:function(e){var t=a.getKeyValue("grenade-clink-sound");t.play(),t.fade(1,0,500)}})},Yo=!1,Xo=function(e){return{fill:0===e?"#00e595":"#FF0000",fontSize:12}},Jo=function(e,t){if(!Yo){Xn=t.getKeyValue("render"),Ao=t.getKeyValue("container"),Co=t.getKeyValue("game-width"),Yn=t.getKeyValue("weapons-ui"),Jn=t.getKeyValue("ground-texture"),Zn=t.getKeyValue("ground"),$n=t.getKeyValue("static-ground-effects"),to=Ro().game.player.variables.acceleration.min,(_o=new c.i("")).position={x:10,y:5},(Oo=new c.i("zombies on right: 0")).pivot.x=.075*Oo.width,Oo.position={x:Co,y:5},Qn=t.getKeyValue("player"),eo=Ot("body",t),yo=new Gn(t),go=yo.crosshair,t.setKeyValue("crosshair-shape",yo.crosshair),t.setKeyValue("crosshair",go),vo=t.getKeyValue("gibs"),xo=t.getKeyValue("grenades"),Eo=t.getKeyValue("explosions"),So=t.getKeyValue("rocks"),ko=t.getKeyValue("wood-planks"),wo=t.getKeyValue("build-objects"),Vo=t.getKeyValue("explosion-sprites"),To=t.getKeyValue("spark-sprites"),Ao=t.getKeyValue("game-pixi-container"),Fo=new Lo;var a=t.getKeyValue("gradient-alpha");a.alpha=.75,Ao.addChild(Fo,a,Jn),Qn.addSpritesInOrder(),Ao.addChild(_o),Ao.addChild(Oo),Yo=!0}fo=t.getKeyValue("zombies"),bo=t.getKeyValue("zombie-ragdolls"),ro=t.getKeyValue("pistol-shells"),ao=t.getKeyValue("pistol-bullets"),io=t.getKeyValue("bullet-impacts"),co=t.getKeyValue("ammo-drops-by-type"),mo=t.getKeyValue("currency-drops"),jo=t.getKeyValue("health-drops"),po=co["pistol weapon"],uo=co["smg weapon"],ho=co["shotgun weapon"];var n=Ro().game,o=n.keys,i=n.gameState,r=n.gameSubState,s=n.mouseState,l=n.mousePosition,d=n.player,p=d.variables,u=p.magnetism,h=p.magnetismSpeed,m=p.currentDirection,g=p.jumping,y=p.acceleration.max,f=p.deceleration,w=d.weapons,E=(w.laser,w.equipped),k=w.totalAmmo.grenades,A=n.enemies.zombies,C=A.zombieAttackLimiter,B=A.zombieAttackDistance,K=n.traps.turret.fireDistance,_=n.mouseState,O=_.x,V=_.y,T=_.btn,j={x:l.x+eo.position.x-Io/2,y:l.y+eo.position.y-Ho/2};zo(We({x:j.x,y:j.y}));var F=function(e){return{x:e.position.x-eo.position.x+Io/2+("right"===m?to:-to),y:e.position.y-eo.position.y+Ho/2,rotation:e.angle}};if(i===S.GAMEPLAY){Fo.renderPosition(F,eo,to),"mouse down"!==T||Qn.meleeAttackInProgress||Qn.grenadeThrowInProgress||("pistol weapon"===E&&function(e){kn(e)}(t),"smg weapon"===E&&function(e){kn(e)}(t),"shotgun weapon"===E&&function(e){kn(e)}(t)),Et.Render.lookAt(Xn,{min:{x:eo.position.x+Io/2,y:eo.position.y-Ho/2},max:{x:eo.position.x-Io/2,y:eo.position.y+Ho/2}}),Et.Body.setAngle(eo,0),Yn.reloading||Qn.meleeAttackInProgress||Qn.grenadeThrowInProgress||(o.indexOf(68)>-1||o.indexOf(65)>-1?to<y&&(to+=.25):(zo(Te(m)),to>0&&(to-=f)),o.indexOf(68)>-1&&o.indexOf(65)>-1&&to>0&&(to-=f),o.indexOf(68)>-1&&(zo(je("right")),Et.Body.translate(eo,{x:to,y:0})),o.indexOf(65)>-1&&(zo(je("left")),Et.Body.translate(eo,{x:-to,y:0})),o.indexOf(71)>-1&&k>0&&Qn&&!Qn.meleeAttackInProgress&&!Yn.reloading&&!g&&r!==v&&r!==x&&Qn.chargeGrenade(),Ro().game.rightMouseDown&&k>0&&Qn&&!Qn.meleeAttackInProgress&&!Yn.reloading&&!g&&r!==v&&r!==x&&(Qn.chargeGrenade(),console.log("should charge grenade from engineHandlers")));var M=F(eo),P=M.x,D=M.y;if(zo(et({x:P,y:D})),jo.forEach((function(e){e.renderPosition(F)})),po.concat(uo).concat(ho).forEach((function(e){e.positionAmmoBox(F),e.body&&e.body.position.y>500&&e.destroy(),e.body&&(eo.position.x>e.body.position.x&&eo.position.x-e.body.position.x<u&&Et.Body.translate(e.body,{x:h,y:0}),eo.position.x<e.body.position.x&&e.body.position.x-eo.position.x<u&&Et.Body.translate(e.body,{x:-h,y:0}))})),mo.forEach((function(e){e.positionCreditGfx(F),e.creditBody&&e.creditBody.position.y>500&&e.destroy(),e.creditBody&&(eo.position.x>e.creditBody.position.x&&eo.position.x-e.creditBody.position.x<u&&(eo.position.x>e.creditBody.position.x&&eo.position.x-e.creditBody.position.x<u/2?Et.Body.translate(e.creditBody,{x:2*h,y:0}):Et.Body.translate(e.creditBody,{x:h,y:0})),eo.position.x<e.creditBody.position.x&&e.creditBody.position.x-eo.position.x<u&&(eo.position.x<e.creditBody.position.x&&e.creditBody.position.x-eo.position.x<u/2?Et.Body.translate(e.creditBody,{x:-2*h,y:0}):Et.Body.translate(e.creditBody,{x:-h,y:0})))})),Qn.setBodySpritesPositions({mx:O,fn:F}),Qn.setArmsSpritePosition({mx:O,my:V,fn:F}),Qn.positionHeadSprite({mx:O,my:V,fn:F}),Qn.renderGrenadeChargeMeter(F),Qn.charRunSprite&&Qn.charIdleSprite&&Qn.charJumpSprite&&(o.indexOf(65)>-1||o.indexOf(68)>-1?g||(Qn.charRunSprite.play(),Qn.charRunSprite.visible=!0,Qn.charIdleSprite.visible=!1,Qn.stopJumpAnimation()):(Qn.charRunSprite.stop(),Qn.charRunSprite.visible=!1,Qn.charIdleSprite.visible=!0,Qn.armsSprites.forEach((function(e){e.visible=!1})),Qn.reloadAnims.forEach((function(e){e.visible=!1}))),o.indexOf(65)>-1&&s.x===Ft||o.indexOf(68)>-1&&"less than player x position"===s.x?Qn.charRunSprite.animationSpeed=-1:Qn.charRunSprite.animationSpeed=1,s.x===Ft?(Qn.bodySprites.forEach((function(e){e.scale.x=-1})),Qn.armsSprites.forEach((function(e){e.scale.y=-1})),Qn.headSprite.scale.y=-1):(Qn.bodySprites.forEach((function(e){e.scale.x=1})),Qn.armsSprites.forEach((function(e){e.scale.y=1})),Qn.headSprite.scale.y=1),Yn.reloading?(Qn.bodySprites.forEach((function(e){e.visible=!1})),Qn.armsSprites.forEach((function(e){e.visible=!1})),Qn.reloadAnimsByType[E].visible=!0,Qn.charIdleSprite.visible=!1):Qn.armsSpritesByType[E]&&(Qn.armsSprites.forEach((function(e){e.visible=!1})),Qn.armsSpritesByType[E].forEach((function(e){e.visible=!0})),Qn.reloadAnimsByType[E].visible=!1),g||Yn.reloading||Qn.meleeAttackInProgress||Qn.grenadeThrowInProgress?Qn.headSprite.visible=!1:Qn.headSprite.visible=!0,g?(Qn.charIdleSprite.visible=!1,Qn.charJumpSprite.currentFrame<2&&Qn.armsSpritesByType[E].forEach((function(e){e.y+=80}))):Qn.stopJumpAnimation(),Qn.meleeAttackInProgress&&(Qn.armsSprites.forEach((function(e){e.visible=!1})),Qn.bodySprites.forEach((function(e){Qn.meleeSprites.indexOf(e)<0&&(e.visible=!1)}))),Qn.grenadeThrowInProgress&&(Qn.armsSprites.forEach((function(e){e.visible=!1})),Qn.bodySprites.forEach((function(e){Qn.grenadeSprites.indexOf(e)<0&&(e.visible=!1)})))),null!==t.getKeyValue("player-ragdoll")){var L=t.getKeyValue("player-ragdoll");L&&L.animateRagParts&&L.animateRagParts(F)}}Qn.body.position.y>500&&Qn.kill($a);for(var R=0;R<ro.length;++R)so||(so=Kt(ro[R].body)),lo||(lo=_t(ro[R].body)),ro[R].gfc.position.x=ro[R].body.position.x-eo.position.x+Io/2+("right"===m?to:-to),ro[R].gfc.position.y=ro[R].body.position.y-eo.position.y+Ho/2,ro[R].gfc.rotation="shotgun weapon"===E?ro[R].body.angle+Object(jt.degrees)(90):ro[R].body.angle;for(var z=0;z<ao.length;++z)no||(no=Kt(ao[z].body)),oo||(oo=_t(ao[z].body)),ao[z].gfc.position.x=ao[z].body.position.x-eo.position.x+Io/2+("right"===m?to:-to),ao[z].gfc.position.y=ao[z].body.position.y-eo.position.y+Ho/2,ao[z].gfc.rotation=ao[z].body.angle;xo.forEach((function(e){e.animate(F)})),Eo.forEach((function(e){e.calcRenderedPosition(F)})),So.forEach((function(e){e.animate(F)})),ko.forEach((function(e){e.animate(F)})),Qn.updateEjectedMagPositions(F),vo.forEach((function(e){e.animate(F)})),Bo=0,Ko=0,fo.forEach((function(e){if(e.setPlayerVars({player:Qn,playerDirection:m,playerBody:eo}),e.paused||e.walk(),Et.Body.setAngle(e.body,0),e.setSpritesPositions(F),e.body.position.y>500){e.kill(null,null,"fell off")}(eo.position.x>e.body.position.x&&eo.position.x-e.body.position.x<B||eo.position.x<e.body.position.x&&e.body.position.x-eo.position.x<B)&&e.timeSinceLastAttack+C<Date.now()&&e.attack(),wo.forEach((function(t){t&&!t.destroyed&&"remote mine trap"!==t.getBody().label&&((t.getBody().position.x>e.body.position.x&&t.getBody().position.x-e.body.position.x<B||t.getBody().position.x<e.body.position.x&&e.body.position.x-t.getBody().position.x<B)&&e.timeSinceLastAttack+C<Date.now()&&"landmine trap"!==t.getBody().label&&e.attack(),(t.direction&&"right"===t.direction&&e.body.position.x>t.getBody().position.x-10&&e.body.position.x-t.getBody().position.x<K||t.direction&&"left"===t.direction&&e.body.position.x<t.getBody().position.x-10&&t.getBody().position.x-e.body.position.x<K)&&t.shoot())})),e.dead||(e.body.position.x<eo.position.x&&(Bo+=1),e.body.position.x>eo.position.x&&(Ko+=1))})),wo.forEach((function(e){e&&!e.destroyed&&e.displayBarrierStrength&&e.displayBarrierStrength(F),e.updatePosition&&e.updatePosition(F)})),0!==Ro().game.waveCountToDefeat&&null!==Ro().game.waveCountToDefeat||(Bo=0,Ko=0),_o.text="".concat(Bo),_o.style=Xo(Bo),Oo.text="".concat(Ko),Oo.style=Xo(Ko),bo.forEach((function(e){e.animateRagParts(F)})),r!==b&&(go.position=l),go.changed&&((go=go._new).changed=!1),go.changeBack&&(Ao.removeChild(go),go=yo.crosshair,Ao.addChild(yo.crosshair),go.changeBack=!1),Jn.position=F(Zn),io.forEach((function(e){e.renderPosition(F)})),$n.forEach((function(e){e.renderPosition(F)})),Vo.forEach((function(e){e.renderPosition(F)})),To.forEach((function(e){e.renderPosition(F)})),Ao.addChild(yo.crosshair)},Zo=function(){function e(t,a){Object(Tt.a)(this,e),this.container=window.gameObjects.getKeyValue("game-pixi-container");var n=3*t;return this.gfc=new c.f,this.gfc.lineStyle(2,0),this.gfc.beginFill(1881185),this.gfc.drawRect(0,0,n/2,n),this.gfc.drawRect(-n/4,n/4,n,n/2),this.gfc.lineStyle(0,0,0),this.gfc.beginFill(1881185),this.gfc.drawRect(0,0,n/2,n),this.gfc.drawRect(-n/4,n/4,n,n/2),this.bevel=new fa.a({thickness:3,lightAlpha:.5,shadowAlpha:.5,shadowColor:2391885}),this.glow=new rn.a({outerStrength:.5}),this.gfc.filters=xt.getState().game.filterEffects?[this.glow,this.bevel]:[],this.body=Et.Bodies.rectangle(a.x,a.y,n,n,{restitution:.65,collisionFilter:Dt}),this.body.main=this,this.body.amount=t,this.body.label="health drop",Et.World.add(window.gameObjects.getKeyValue("world"),this.body),window.gameObjects.getKeyValue("health-drops").push(this),this}return Object(tn.a)(e,[{key:"checkFilters",value:function(){this.gfc&&xt.getState().game.filterEffects?this.gfc.filters=[this.bevel,this.glow]:this.gfc&&(this.gfc.filters=[])}},{key:"destroy",value:function(){var e=window.gameObjects.getKeyValue("health-drops"),t=e.indexOf(this);t>-1&&e.splice(t,1),this.gfc.destroy(),this.gfc=null,Et.World.remove(window.gameObjects.getKeyValue("world"),this.body),this.body=null,e=null,t=null,this.container=null}},{key:"renderPosition",value:function(e){this.container&&-1===this.container.children.indexOf(this.gfc)&&this.container.addChild(this.gfc),this.gfc.position=e(this.body)}}]),e}();function $o(e,t,a){var n=this,o=c.k.BlurFilter,i=window.gameObjects,r=i.getKeyValue("game-pixi-container"),s=i.getKeyValue("ammo-drops-by-type"),l={"pistol weapon":152831,"smg weapon":16751874,"shotgun weapon":10821921},d={x:e.x,y:e.y,w:50,h:20},p=Et.Bodies.rectangle(d.x,d.y,d.w,d.h,{collisionFilter:Dt});p.label="ammo drop",p.ammo_type=t,p.amount=a;var u=i.getKeyValue("world");Et.World.add(u,p),p.main=this;var h=new c.e,m=new c.f;m.beginFill(l[t]),m.drawRect(0,0,d.w,d.h),m.pivot.x=.5*m.width,m.pivot.y=.5*m.height;var g,y,f=new fa.a;f.thickness=5,f.lightColor=16777215,f.lightAlpha=.25,f.shadowColor=0,f.shadowAlpha=.25,m.filters=xt.getState().game.filterEffects?[f]:[],(g=new c.f).beginFill(0),g.drawRect(0,d.h/2,d.w,d.h/2),g.pivot.x=.5*g.width,g.pivot.y=.5*g.height,y=new o(5,3),g.alpha=.85,g.filters=xt.getState().game.filterEffects?[y]:[];var b=new c.f;b.beginFill(l[t]),b.drawRect(0,0,d.w,d.h),b.pivot.x=.5*b.width,b.pivot.y=.5*b.height,g.mask=b,xt.getState().game.filterEffects?h.addChild(m,g,b):h.addChild(m,b);var w=new c.i({"pistol weapon":"PISTOL","smg weapon":"SMG","shotgun weapon":"SHOTGUN"}[t],{fontSize:"9px",fill:"#FFF",fontWeight:"bold"});w.pivot.x=.5*w.width,w.pivot.y=.5*w.height;var v=new rn.a;return v.color=0,v.outerStrength=1,w.filters=xt.getState().game.filterEffects?[v]:[],h.addChild(w),this.gfc=h,this.body=p,this.checkFilters=function(){xt.getState().game.filterEffects?(h.addChild(g,w),m.filters=[f],g.filters=[y],w.filters=[v]):(h.children.indexOf(g)>-1&&h.removeChild(g),m.filters=[],g.filters=[],w.filters=[])},this.destroy=function(){var e=s[t].indexOf(n);e>-1&&(s[t].splice(e,1),h.destroy(),Et.World.remove(u,p))},setTimeout((function(){n.destroy()}),2e4),s[t].push(this),this.positionAmmoBox=function(e){var t=e(p),a=t.x,o=t.y,i=t.rotation;h.position={x:a,y:o},h.rotation=i,r&&-1===r.children.indexOf(n.gfc)&&r.addChild(h)},this}function Qo(e,t,a){var n,o,i,r=this,s=e.x,l=e.y,d=(xt.dispatch,xt.getState),p=window.TweenLite,u=p.delayedCall,h=p.to,m=window.gameObjects;n||(n=m.getKeyValue("world")),o||(o=m.getKeyValue("game-pixi-container")),i||(i=m.getKeyValue("zombie-ragdolls")),m.getKeyValue("death-rip-sound").play(),m.getKeyValue("zombie-death-sound").play();var g=40,y=90,f=20,b=30,w=15,v=40,x=15,E=40,S=15,k=35,A=15,C=35,B=Et.Bodies.rectangle(s,l,g,y,{collisionFilter:Mt}),K=Et.Bodies.rectangle(s,l,f,b,{collisionFilter:Mt}),_=Et.Bodies.rectangle(s,l,w,v,{collisionFilter:Mt}),O=Et.Bodies.rectangle(s,l,w,v,{collisionFilter:Mt}),V=Et.Bodies.rectangle(s,l,S,k,{collisionFilter:Mt}),T=Et.Bodies.rectangle(s,l,w,v,{collisionFilter:Mt}),j=Et.Bodies.rectangle(s,l,w,v,{collisionFilter:Mt}),F=Et.Bodies.rectangle(s,l,S,k,{collisionFilter:Mt}),M=Et.Bodies.rectangle(s,l,x,E,{collisionFilter:Mt}),P=Et.Bodies.rectangle(s,l,x,E,{collisionFilter:Mt}),D=Et.Bodies.rectangle(s,l,x,E,{collisionFilter:Mt}),L=Et.Bodies.rectangle(s,l,x,E,{collisionFilter:Mt}),R=Et.Bodies.rectangle(s,l,A,C,{collisionFilter:Mt}),z=Et.Bodies.rectangle(s,l,A,C,{collisionFilter:Mt}),W=Et.Constraint.create({bodyA:B,bodyB:K,pointA:{x:0,y:-y/2},pointB:{x:0,y:b/2},length:1}),I=Et.Constraint.create({bodyA:B,bodyB:_,pointA:{x:-g/4,y:-y/2+10},pointB:{x:0,y:-v/2},length:2}),H=Et.Constraint.create({bodyA:B,bodyB:O,pointA:{x:0,y:-y/2+10},pointB:{x:0,y:-v/2},length:2}),N=Et.Constraint.create({bodyA:_,bodyB:T,pointA:{x:0,y:v/2},pointB:{x:0,y:-v/2},length:2}),U=Et.Constraint.create({bodyA:O,bodyB:j,pointA:{x:0,y:v/2},pointB:{x:0,y:-v/2},length:2}),G=Et.Constraint.create({bodyA:T,bodyB:V,pointA:{x:0,y:v/2},pointB:{x:0,y:-k/2},length:1}),q=Et.Constraint.create({bodyA:j,bodyB:F,pointA:{x:0,y:v/2},pointB:{x:0,y:-k/2},length:1}),Y=Et.Constraint.create({bodyA:B,bodyB:M,pointA:{x:-g/4,y:y/2},pointB:{x:0,y:-E/2},length:2}),X=Et.Constraint.create({bodyA:B,bodyB:P,pointA:{x:0,y:y/2},pointB:{x:0,y:-E/2},length:2}),J=Et.Constraint.create({bodyA:M,bodyB:D,pointA:{x:0,y:E/2},pointB:{x:0,y:-E/2},length:2}),Z=Et.Constraint.create({bodyA:P,bodyB:L,pointA:{x:0,y:E/2},pointB:{x:0,y:-E/2},length:2}),$=Et.Constraint.create({bodyA:D,bodyB:R,pointA:{x:0,y:E/2},pointB:{x:0,y:-C/2},length:1}),Q=Et.Constraint.create({bodyA:L,bodyB:z,pointA:{x:0,y:E/2},pointB:{x:0,y:-C/2},length:1});this.composite=Et.Composite.create(),this.bodies=[K,_,O,T,j,M,P,D,L,R,z],this.bodies.forEach((function(e){e.label="zombie body part"})),B.label="torso",Et.Composite.add(this.composite,[K,B,_,O,T,j,M,P,D,L,V,F,R,z,W,G,q,$,Q,I,H,N,U,Y,X,J,Z]),this.constraints=[W,G,q,$,Q,I,H,N,U,Y,X,J,Z],Et.World.add(n,this.composite),Et.Body.applyForce(B,B.position,t),this.bodies.forEach((function(e){Et.Body.applyForce(e,e.position,{x:kt.a.float(-.01,-.05),y:kt.a.float(-.01,-.05)})})),i.push(this);var ee=m.getKeyValue("zombie-parts-gored-sheet"),te=new c.h(ee.textures[function(){var e=["skull_gored.png","skull_gored2.png","skull_gored3.png"];return e[Math.floor(Math.random()*e.length)]}()]);te._id="skull";var ae=new c.h(ee.textures["torso_whole_gored.png"]);ae._id="torso";var ne=[],oe=new c.h(ee.textures["rear_leg_lower_gored.png"]);oe._id="leg 2",ne.push(oe);var ie=new c.h(ee.textures["rear_arm_hand_gored.png"]);ie._id="hand 2",ne.push(ie);var re=new c.h(ee.textures["rear_arm_forearm_gored.png"]);re._id="arm 2",ne.push(re);var se=new c.h(ee.textures["rear_arm_upper_gored.png"]);se._id="limb",ne.push(se);var le=new c.h(ee.textures["rear_leg_upper_gored.png"]);le._id="limb",ne.push(le);var de=new c.h(ee.textures["rear_leg_foot_gored.png"]);de._id="foot 2",ne.push(de),ne.push(ae,te);var ce=new c.h(ee.textures["front_leg_lower_gored.png"]);ce._id="leg 1",ne.push(ce);var pe=new c.h(ee.textures["front_arm_hand_gored.png"]);pe._id="hand 1",ne.push(pe);var ue=new c.h(ee.textures["front_arm_forearm_gored.png"]);ue._id="arm 1",ne.push(ue);var he=new c.h(ee.textures["front_arm_upper_gored.png"]);he._id="limb",ne.push(he);var me=new c.h(ee.textures["front_arm_upper_gored.png"]);me._id="limb",ne.push(me);var ge=new c.h(ee.textures["front_leg_foot_gored.png"]);ge._id="foot 1",ne.push(ge),ne.forEach((function(e){e.updateAnchor=!0,e.pivot.x=.5*e.width,e.pivot.y=.5*e.height,o.addChild(e)})),this.head=K,this.bodyUpper=B,this.armUpperL=_,this.armUpperR=O,this.armLowerL=T,this.armLowerR=j,this.legUpperL=M,this.legUpperR=P,this.legLowerL=D,this.legLowerR=L,this.handL=V,this.handR=F,this.footL=R,this.footR=z;var ye=t?t.x<0?{x:-.002}:{x:.002}:{x:kt.a.float(-.002,.002)};ye.y=-.005,new Ua(d().game.lastWaveCountDefeated&&d().game.lastWaveCountDefeated<10?kt.a.int(5,10):3,B.position,ye,d().game.lastWaveCountDefeated&&d().game.lastWaveCountDefeated<10?2:1),this.destroy=function(){ne.forEach((function(e,t){h(e,d().game.lastWaveCountDefeated&&d().game.lastWaveCountDefeated<10?1:.5,{alpha:0,onComplete:function(){o.removeChild(e),t===ne.length-1&&(Et.World.remove(n,r.composite),i.splice(i.indexOf(r),1),i=null,n=null,r.bodies.forEach((function(e){null})),r.constraints.forEach((function(e){null})))}})}))},this.animateRagParts=function(e){var t=e(r.head);te.position=t,te.rotation=t.rotation;var a=e(r.bodyUpper);ae.position=a,ae.rotation=a.rotation;var n=e(r.armLowerL);ue.position=n,ue.rotation=n.rotation;var o=e(r.armUpperL);he.position=o,he.rotation=o.rotation;var i=e(r.handL);pe.position=i,pe.rotation=i.rotation;var s=e(r.legUpperL);me.position=s,me.rotation=s.rotation;var l=e(r.legLowerL);ce.position=l,ce.rotation=l.rotation;var d=e(r.footL);ge.position=d,ge.rotation=d.rotation;var c=e(r.armLowerR);re.position=c,re.rotation=c.rotation;var p=e(r.armUpperR);se.position=p,se.rotation=p.rotation;var u=e(r.handR);ie.position=u,ie.rotation=u.rotation;var h=e(r.legUpperR);le.position=h,le.rotation=h.rotation;var m=e(r.legLowerR);oe.position=m,oe.rotation=m.rotation;var g=e(r.footR);de.position=g,de.rotation=g.rotation};var fe=new Array(kt.a.int(1,10)).fill(1);return(fe=fe.map((function(e,t){var a;return function e(){if(a=r.constraints[Math.floor(Math.random()*r.constraints.length)],!(fe.indexOf(a)>-1))return a;e()}()}))).forEach((function(e){Et.Composite.remove(r.composite,e)})),u(!d().game.lastWaveCountDefeated||d().game.lastWaveCountDefeated<10?4:1,this.destroy),this}function ei(e,t){var a,n,o,i=this,r=xt.dispatch,s=xt.getState,l=window,d=(l.Power2,l.TweenLite),p=d.delayedCall,u=(d.to,d.set,window.gameObjects);a||(a=u.getKeyValue("world")),n||(n=u.getKeyValue("zombies")),o||(o=u.getKeyValue("game-pixi-container"));var h=u.getKeyValue("bullet-impacts");r(yt());var m=60,g=125,y=40,f=60,b=s().game.enemies.zombies.walkSpeed,w=Et.Bodies.rectangle(e,t,m,g,{collisionFilter:Pt}),v=Et.Bodies.rectangle(e,t,y,f,{collisionFilter:Pt,inertia:1/0});w.label="enemy zombie body",v.label="enemy zombie head";var x=Et.Constraint.create({bodyA:v,bodyB:w,pointA:{x:0,y:f/2},pointB:{x:0,y:-g/2},length:0}),E=Et.Composite.create();this.composite=E,this.body=w,this.head=v,Et.Composite.add(E,[w,v,x]),Et.World.add(a,E);var S=u.getKeyValue("zombie-walk-sheet"),k=u.getKeyValue("zombie-attack1-sheet"),C=u.getKeyValue("zombie-idle-sheet"),K=new c.a(C.animations.idle),_=new c.a(S.animations.walkcycle),O=new c.a(k.animations.attack1),V=new c.a(u.getKeyValue("zombie-attack2-sheet").animations.attackTwo),T=u.getKeyValue("zombie-slash-fx-sheet"),M=new c.a(T.animations.slash);M.loop=!1,M.animationSpeed=.5,M.updateAnchor=!0,M.pivot.x=.5*M.width,M.pivot.y=.5*M.height,M.visible=!1,M.onComplete=function(){M.visible=!1},o.addChild(M),this.shadow=new c.f,this.shadow.beginFill(0,.35),this.shadow.drawEllipse(0,0,80,10);var P=new c.k.BlurFilter;P.blur=8,this.shadow.filters=s().game.filterEffects?[P]:[],o&&-1===o.children.indexOf(this.shadow)&&o.addChild(this.shadow),K.loop=!0,K.animationSpeed=.5,K.updateAnchor=!0,K.pivot.x=.5*K.width,K.pivot.y=.6*K.height,o.addChild(K),_.loop=!0,_.animationSpeed=.5,_.updateAnchor=!0,_.pivot.x=.5*_.width,_.pivot.y=.6*_.height,o.addChild(_),O.loop=!1,O.animationSpeed=.65,O.updateAnchor=!0,O.pivot.x=.5*O.width,O.pivot.y=.6*O.height,o.addChild(O),O.visible=!1,V.loop=!1,V.animationSpeed=.65,V.updateAnchor=!0,V.pivot.x=.5*V.width,V.pivot.y=.6*V.height,o.addChild(V),V.visible=!1,this.walkAnim=_,this.attackAnim=O,this.attackAnim2=V,this.idleAnim=K,this.anims=[this.walkAnim,this.attackAnim,this.attackAnim2,this.idleAnim],this.anims.forEach((function(e){window.TweenLite.from(e,1,{alpha:0})})),this.playerBodyPosition=null,this.playSlashAnim=function(){i.attackAnim.visible?(M.position={x:i.attackAnim.position.x,y:i.attackAnim.position.y-50},M.scale.x=i.attackAnim.scale.x,M.rotation=Object(jt.degrees)(0)):(M.position={x:i.attackAnim.position.x,y:i.attackAnim.position.y-50},M.scale.x=-1*i.attackAnim.scale.x,M.rotation=Object(jt.degrees)(180)),M.visible=!0,M.gotoAndPlay(0)},this.setSpritesPositions=function(e){var t=e(i.body),a=t.x,n=t.y;i.shadow.position.x=a,i.shadow.position.y=n+i.walkAnim.height/4+10,i.walkAnim.position.x=a,i.walkAnim.position.y=n,i.attackAnim.position.x=a,i.attackAnim.position.y=n,i.attackAnim2.position.x=a,i.attackAnim2.position.y=n,i.idleAnim.position.x=a,i.idleAnim.position.y=n,i.player.dead?(i.walkAnim.animationSpeed=.2,i.walkAnim.animationSpeed=.2,i.attackAnim.animationSpeed=.2,i.attackAnim2.animationSpeed=.2,i.idleAnim.animationSpeed=.2,M.animationSpeed=.2):(i.walkAnim.animationSpeed=.5,i.attackAnim.animationSpeed=.65,i.attackAnim2.animationSpeed=.65,i.idleAnim.animationSpeed=.5,M.animationSpeed=.5),i.shouldDisplayHealth&&void 0!==i.healthDisplay&&i.moveLifeDisplay(e(i.body))},this.setPlayerVars=function(e){var t=e.player,a=e.playerDirection,n=e.playerBody;i.player=t,i.playerBodyPosition=n.position,i.playerBody=n,i.playerDirection=a};var z=function(e){return i.playerBody.position.x-(e||120)>i.body.position.x||i.playerBody.position.x+(e||120)<i.body.position.x};this.playIdleAnim=function(){O.playing||V.playing||i.walkAnimPlaying||(K.play(),K.visible=!0)},this.stopIdleAnim=function(){K.visible=!1},this.walkAnimPlaying=!1,this.playWalkAnim=function(){!1===i.walkAnimPlaying?(i.stopIdleAnim(),i.walkAnim.visible=!0,i.walkAnim.play(),i.walkAnimPlaying=!0):i.playIdleAnim()},this.stopWalkAnim=function(){!0===i.walkAnimPlaying&&(i.walkAnim.stop(),i.walkAnim.gotoAndStop(0),i.walkAnimPlaying=!1,i.walkAnim.visible=!1,i.playIdleAnim())},this.playWalkAnim(),this.healthOffsetY=160,this.damageDisplayOptions={fill:"#FF0000",fontSize:11},this.healthDisplayOptions={fill:"#FFFF00",fontSize:11},this.healthDisplay=new c.i(this.health,this.healthDisplayOptions),this.healthDisplay.pivot.x=.5*this.healthDisplay.width,s().game.displayZombieHealth&&(this.shouldDisplayHealth=!0,o.addChild(this.healthDisplay)),this.moveLifeDisplay=function(e){i.shouldDisplayHealth?(i.dead?i.healthDisplay.text=0:i.healthDisplay.text=i.health,i.healthDisplay.position={x:e.x,y:e.y-i.healthOffsetY}):o.children.indexOf(i.healthDisplay)>-1&&o.removeChild(i.healthDisplay)},this.walk=function(){var e,t=i.playerBody.position.x<i.body.position.x;!z()||O.playing||V.playing||i.player.dead?i.stopWalkAnim():(i.playWalkAnim(),t?i.sprites.forEach((function(e){e.scale.x=1})):i.sprites.forEach((function(e){e.scale.x=-1})),z(800)?(_.animationSpeed=1,e=b*kt.a.float(2.8,3.2)):z(400)?(_.animationSpeed=.75,e=b*kt.a.float(1.8,2.2)):(_.animationSpeed=.5,e=b),Et.Body.translate(i.body,{x:t?-e:e,y:0}))},this.health=s().game.enemies.zombies.startingHealth,this.checkFilters=function(){},this.displayHealth=function(e){i.shouldDisplayHealth=e,e?o.addChild(i.healthDisplay):o.children.indexOf(i.healthDisplay)&&o.removeChild(i.healthDisplay)},this.sprites=[this.walkAnim,this.attackAnim,this.attackAnim2,this.idleAnim,M],this.composite.bodies.forEach((function(e){e.main=i})),this.dead=!1,this.dmgTxts=[],this.dmgIterator=0,this.tintAmounts={1:16751616,2:16723456,3:16711680,4:11993103},this.takeDamage=function(e,t,a,n,o){var l={x:kt.a.float(i.walkAnim.position.x-20,i.walkAnim.position.x+20),y:kt.a.float(i.walkAnim.position.y,i.walkAnim.position.y+50)},d={x:kt.a.float(i.walkAnim.position.x-20,i.walkAnim.position.x+20),y:kt.a.float(i.walkAnim.position.y-100,i.walkAnim.position.y-50)};new Za(null,t&&"head"!==t?l:d),i.health-=e,i.directionX=!!i.playerBodyPosition&&i.playerBodyPosition.x>i.body.position.x,i.health<=0&&!i.dead&&("turret"===o&&r(ie(Y)),i.kill(t,null,o||null),n&&(r(ie(U)),setTimeout((function(){5!==s().game.stats.meleeKills||s().game.achievements[F].owned||r(re(F))}),0))),i.sprites.forEach((function(e){e!==M&&(i.health<25&&(e.tint=i.tintAmounts[3]),i.health<10&&(e.tint=i.tintAmounts[4]))}))},this.removeZombieFromMatterWorld=function(){return i.dead=!0,i.attackHitbox&&Et.World.remove(a,i.attackHitbox),i.healthDisplay&&o.removeChild(i.healthDisplay),i.sprites.forEach((function(e){o.removeChild(e)})),i.attackHitbox&&Et.World.remove(a,i.attackHitbox),Et.World.remove(a,i.composite),"zombie removed"},this.removeZombieFromZombiesArray=function(){var e=n.indexOf(i);e>-1&&n.splice(e,1)},this.kill=function(e,t,l){if(i.attackHitbox&&Et.World.remove(a,i.attackHitbox),!i.dead){i.dead=!0,i.health=0,i.healthDisplay&&o.removeChild(i.healthDisplay),i.shadow&&o.removeChild(i.shadow),o.removeChild(i.shadow),i.removeZombieFromMatterWorld(),i.removeZombieFromZombiesArray();var d={x:i.directionX?-.2:.2,y:-.25},c={x:i.directionX?i.body.position.x-20:i.body.position.x+20,y:i.body.position.y-60};if(!t){if(oi(c),s().game.player.perks.ammoDropper.owned){var p=s().game.player.weapons.list;new $o(c,p[Math.floor(Math.random()*p.length)],kt.a.int(4,16))}s().game.player.perks.healthDropper.owned&&new Zo(kt.a.int(2,6),c),h.push(new xn("enemy",i.body.position,{duration:3,alphaDuration:3,set:1,rand:{min:1,max:4}}))}if(!t){r(Ye());var u=s().game.scoreAmounts.zombie;"head"===e&&(u+=s().game.scoreAmounts.headShot),Date.now()-JSON.parse(s().game.zombieLastKilled)<1e3&&(za("kill streak bonus!","#FF5500",.35,.75),u+=s().game.scoreAmounts.zombieStreakBonus),l&&"fell off"===l&&(s().game.achievements[A].owned||(r(re(A)),Yt(s().game.scoreAmounts.achievement)),za("knockoff bonus!","#FF5500",.35,.75),u+=s().game.scoreAmounts.zombieKnockedOffStage),r(de(JSON.stringify(Date.now()))),"grenade explosion"===l&&(r(le(JSON.stringify(Date.now()))),setTimeout((function(){Date.now()-JSON.parse(s().game.lastGrenadeKill<100)&&s().game.consecutiveGrenadeKills>2&&(s().game.achievements[B].owned||(r(re(B)),Yt(s().game.scoreAmounts.achievement))),r(se())}),0)),"landmine"===l&&(r(ie(G)),setTimeout((function(){s().game.stats.mineKills>2&&!s().game.achievements[D].owned&&(r(re(D)),Yt(s().game.scoreAmounts.achievement))}),0)),"turret"===l&&(r(ie(Y)),setTimeout((function(){s().game.stats.turretKills>9&&!s().game.achievements[L].owned&&(r(re(L)),Yt(s().game.scoreAmounts.achievement))}),0)),s().game.player.variables.jumping&&!s().game.achievements[j].owned&&"grenade explosion"!==l&&"landmine"!==l&&"landmine explosion"!==l&&"clustermine explosion"!==l&&r(re(j)),Yt(u),r(ie(R)),new Qo({x:i.body.position.x,y:i.body.position.y-_t(i.body)},d,e)}i.attackHitbox&&Et.World.remove(a,i.attackHitbox),n=1,n=null}};O.onFrameChange=function(){K.visible=!1},O.onComplete=function(){O.gotoAndStop(0),O.visible=!1,i.playWalkAnim(),Et.World.remove(a,i.attackHitbox)},V.onComplete=function(){V.gotoAndStop(0),V.visible=!1,i.playWalkAnim(),Et.World.remove(a,i.attackHitbox)},this.timeSinceLastAttack=Date.now()+500;var W=u.getKeyValue("zombie-growl-sound");return this.attack=function(){if(!i.paused&&n.indexOf(i)>-1&&!i.player.dead&&!i.dead){i.timeSinceLastAttack=Date.now();var e=[1,2][Math.floor(2*Math.random())];i.attackHitbox=function(e){if(i.playerBodyPosition){var t=i.playerBodyPosition.x>i.body.position.x?80:-80;return Et.Bodies.rectangle(i.body.position.x+t,i.body.position.y-_t(i.body)/2,2===e?120:100,150,{label:"enemy zombie attack",isStatic:!0})}}(e),W.play(),_.visible=!1,1===e?(O.visible=!0,O.play()):(V.visible=!0,V.play()),K.visible=!1,p(.15,(function(){i.playSlashAnim()})),p(.2,(function(){Et.World.add(a,i.attackHitbox),p(.1,(function(){Et.World.remove(a,i.attackHitbox)}))}))}else i.attackHitbox&&Et.World.remove(a,i.attackHitbox)},this.pause=function(){i.paused=!0,K.stop(),i.walkAnim.stop(),i.attackAnim.stop(),i.attackAnim2.stop()},this.unpause=function(){i.paused=!1,i.walkAnim.play(),0!==O.currentFrame&&O.play()},n.push(this),this}function ti(e,t){var a=this,n=window.gameObjects,o=n.getKeyValue("world"),i=n.getKeyValue("game-pixi-container"),r=n.getKeyValue("currency-drops"),s=e.x,l=e.y,d=Et.Bodies.circle(s,l,.25*t,{restitution:.5,collisionFilter:Dt});d.label="currency drop",d.amount=t,Et.World.add(o,d);var p=new c.e,u=new c.f;u.beginFill(977624),u.drawCircle(0,0,.25*t);var h=new c.k.BlurFilter;h.blur=3,u.filters=xt.getState().game.filterEffects?[h]:[],u.pivot.x=.25*u.width*.5,u.pivot.y=.25*u.height*.5,u.scale.x=1.1,u.scale.y=1.1,p.addChild(u);var m=new c.f;m.beginFill(977624),m.drawCircle(0,0,.25*t),m.pivot.x=.25*m.width*.5,m.pivot.y=.25*m.height*.5,p.addChild(m);var g=new fa.a;return g.lightColor=16777215,g.lightAlpha=.3,g.shadowColor=0,g.shadowAlpha=.3,p.filters=xt.getState().game.filterEffects?[g]:[],i.addChild(p),r.push(this),d.main=this,this.creditBody=d,this.checkFilters=function(){xt.getState().game.filterEffects?(p.filters=[g],u.filters=[h]):(p.filters=[],u.filters=[])},this.destroyed=!1,this.destroy=function(){if(!a.destroyed){a.destroyed=!0;var e=r.indexOf(a);e>-1&&(r.splice(e,1),p.destroy(),Et.World.remove(o,d),o=null,i=null,r=null,n=null,d=null,a.creditBody=null,p=null)}},setTimeout((function(){a.destroy()}),2e4),this.positionCreditGfx=function(e){var t=e(d),a=t.x,n=t.y,o=t.rotation;p.position={x:a,y:n},p.rotation=o},this}var ai=xt.getState,ni=(window.TweenLite.delayedCall,ai().game.height/2),oi=function(e,t){for(var a=window.gameObjects.getKeyValue("world-width"),n=ai().game.player.perks.creditDropper.owned?kt.a.int(5,8):kt.a.int(4,5),o=0;o<n;++o)new ti(e?{x:e.x,y:e.y-kt.a.int(0,75)}:{x:kt.a.int(150,a-150),y:200-kt.a.int(0,75)},t?kt.a.int(t.min,t.max):ai().game.player.perks.creditDropper.owned?kt.a.int(15,30):kt.a.int(5,20))},ii=xt.dispatch,ri=xt.getState;function si(){var e=new c.e,t=new c.f;t.beginFill(5592405),t.drawRect(0,0,150,50),e.addChild(t);var a=new c.i("Respawn?",{font:"Arial",fill:"#FFFFFF",fontSize:20,fontWeight:"bold"});return a.position.x=t.width/2-a.width/2,a.position.y=t.height/2-a.height/2,e.addChild(a),e}function li(){var e,t=this,a=window,n=a.gameObjects,o=a.TweenLite.from,i=a.Bounce,r=n.getKeyValue("game-pixi-container"),s=n.getKeyValue("engine");this.respawnButton=new si,r.addChild(this.respawnButton),this.respawnButton.visible=!1,this.respawnButton.interactive=!0,this.respawnButton.pivot.x=this.respawnButton.width/2,this.respawnButton.pivot.y=this.respawnButton.height/2,this.respawnButton.position.x=this.respawnButton.width/2+20,this.respawnButton.position.y=this.respawnButton.height/2+20,this.respawn=function(){var e=n.getKeyValue("player");e.respawn(),Ra("Still alive!",16777215,.5,.75),e.lastDeathType!==$a&&(!function(e,t,a){for(var n=window.gameObjects.getKeyValue("world-width"),o=ai().game.player.weapons,i=o.list,r=o.ammoCapacity,s=a||kt.a.int(1,2),l=i[Math.floor(Math.random()*i.length)],d=0;d<s;++d)new $o(e||{x:kt.a.int(150,n-150),y:200},l,t?kt.a.int(t.min,t.max):kt.a.int(5,r[l]))}({x:kt.a.float(e.body.position.x-100,e.body.position.x+100),y:e.body.position.y-200},{min:10,max:2*ri().game.player.weapons.ammoCapacity[ri().game.player.weapons.equipped]},kt.a.int(1,2)),oi({x:kt.a.float(e.body.position.x-100,e.body.position.x+100),y:e.body.position.y-200}))},this.respawnButton.on("click",(function(){t.respawn(),t.respawnButton.visible=!1})),(e=this.respawnButton).on("mouseover",(function(){Ct(e.scale,.35,{x:1.05,y:1.05})})),e.on("mouseout",(function(){Ct(e.scale,.35,{x:1,y:1})})),this.showRespawnButton=function(){t.respawnButton.visible=!0,o(t.respawnButton.scale,1.5,{x:.5,y:.5,ease:i.easeOut})};var l=function(){var e=n.getKeyValue("zombies");n.getKeyValue("player").pause(),e.forEach((function(e){e.unpause()})),s.timing.timeScale=1},d=function(){var e=n.getKeyValue("zombies");ii(Ke()),n.getKeyValue("player").unpause(),e.forEach((function(e){e.pause()})),s.timing.timeScale=.05};return this.unpause=l,this.pause=d,this.togglePause=function(){var e=ri().game,t=e.gameState,a=e.gameSubState;t!==S.MAIN_MENU&&t!==S.SHOP_MENU&&a!==x&&t!==S.BUILD_MENU&&a!==v&&a!==E&&a!==f&&(n.getKeyValue("player").dead||(t!==S.PAUSE&&a!==g?(ii(Ne("main",t,S.PAUSE)),d()):(ii(Ne("main",t,S.GAMEPLAY)),a===y?ii(Ne("sub",a,y)):a===m&&ii(Ne("sub",a,g)),l())))},document.body.addEventListener("keydown",(function(e){"p"!==e.key&&"P"!==e.key&&"Escape"!==e.key||(console.log("pause key was pressed"),t.togglePause())})),this}var di=a(63),ci=a.n(di),pi=a(64),ui=a.n(pi),hi=a(65),mi=a.n(hi),gi=a(66),yi=a.n(gi),fi=a(67),bi=a.n(fi),wi=a(68),vi=a.n(wi),xi=a(102),Ei=a.n(xi),Si=a(69),ki=a.n(Si),Ai=a(70),Ci=a.n(Ai),Bi=a(103),Ki=a.n(Bi),_i=a(104),Oi=a.n(_i),Vi=a(105),Ti=a.n(Vi),ji=a(106),Fi=a.n(ji),Mi=a(107),Pi=a.n(Mi),Di=a(71),Li=a.n(Di),Ri=a(108),zi=a.n(Ri),Wi=a(109),Ii=a.n(Wi),Hi=a(110),Ni=a.n(Hi),Ui=a(111),Gi=a.n(Ui),qi=a(112),Yi=a.n(qi),Xi=a(113),Ji=a.n(Xi),Zi=a(114),$i=a.n(Zi),Qi=a(115),er=a.n(Qi),tr=a(116),ar=a.n(tr),nr=a(117),or=a.n(nr),ir=a(118),rr=a.n(ir),sr=a(119),lr=a.n(sr),dr=a(120),cr=a.n(dr),pr=a(121),ur=a.n(pr),hr=a(122),mr=a.n(hr),gr=a(123),yr=a.n(gr),fr=a(124),br=a.n(fr),wr=a(125),vr=a.n(wr),xr=a(126),Er=a.n(xr),Sr=a(127),kr=a.n(Sr),Ar=a(128),Cr=a.n(Ar),Br=a(129),Kr=a.n(Br),_r=a(130),Or=a.n(_r),Vr=a(131),Tr=a.n(Vr),jr=a(132),Fr=a.n(jr),Mr=a(133),Pr=a.n(Mr),Dr=a(134),Lr=a.n(Dr),Rr=a(135),zr=a.n(Rr),Wr=a(136),Ir=a.n(Wr),Hr=a(137),Nr=a.n(Hr),Ur=a(138),Gr=a.n(Ur),qr=a(139),Yr=a.n(qr),Xr=a(140),Jr=a.n(Xr),Zr=a(141),$r=a.n(Zr),Qr=a(142),es=a.n(Qr),ts=a(143),as=a.n(ts),ns="./spritesheet-assets/FX/muzzle_flashes/muzzle-flashes.json",os="./spritesheet-assets/enemy-spritesheets/zombie/idle/idle.json",is="./spritesheet-assets/enemy-spritesheets/zombie/walkcycle/walkcycle.json",rs="./spritesheet-assets/enemy-spritesheets/zombie/attack1/attack1.json",ss="./spritesheet-assets/enemy-spritesheets/zombie/attack2/attack2.json",ls="./spritesheet-assets/enemy-spritesheets/zombie/parts/zombie_parts.json",ds="./spritesheet-assets/enemy-spritesheets/zombie/parts/zombie_parts_gored.json",cs="./spritesheet-assets/enemy-spritesheets/zombie/slash_fx/slash_fx.json",ps="./spritesheet-assets/barriers/barriers.json",us="./spritesheet-assets/character-spritesheets/parts/player_parts.json",hs="./spritesheet-assets/character-spritesheets/idle/char_idle_anim.json",ms="./spritesheet-assets/character-spritesheets/run/char_run_anim.json",gs="./spritesheet-assets/character-spritesheets/jump/char_jump_anim.json",ys="./spritesheet-assets/character-spritesheets/reloadPistol/char_reload_pistol_anim.json",fs="./spritesheet-assets/character-spritesheets/reloadSMG/char_reload_smg_anim.json",bs="./spritesheet-assets/character-spritesheets/leftArmPistolFire/char_left_arm_pistol_fire.json",ws="./spritesheet-assets/character-spritesheets/rightArmPistolFire/char_right_arm_pistol_fire.json",vs="./spritesheet-assets/character-spritesheets/leftArmSMGFire/char_left_arm_smg_fire.json",xs="./spritesheet-assets/character-spritesheets/rightArmSMGFire/char_right_arm_smg_fire.json",Es="./spritesheet-assets/character-spritesheets/melee/melee_pistol/melee_pistol.json",Ss="./spritesheet-assets/character-spritesheets/melee/melee_ump/melee_ump.json",ks="./spritesheet-assets/character-spritesheets/melee/melee_shotgun/melee_shotgun.json",As="./spritesheet-assets/character-spritesheets/grenadeThrow/pistolEquipped/grenade_throw_pistol.json",Cs="./spritesheet-assets/character-spritesheets/grenadeThrow/umpEquipped/grenade_throw_ump.json",Bs="./spritesheet-assets/character-spritesheets/grenadeThrow/shotgunEquipped/grenade_throw_shotgun.json",Ks="./spritesheet-assets/character-spritesheets/armsFireShotgun/arms_fire_shotgun_anim.json",_s="./spritesheet-assets/character-spritesheets/reloadShotgun/reloadShotgun.json",Os="./spritesheet-assets/FX/blood_fx/blood_spurt_1/blood_spurt_1.json",Vs="./spritesheet-assets/FX/blood_fx/blood_spurt_2/blood_spurt_2.json",Ts="./spritesheet-assets/FX/blood_fx/blood_spurt_3/blood_spurt_3.json",js="./spritesheet-assets/landmine/landmine.json",Fs="./spritesheet-assets/FX/wood_planks/wood_planks.json",Ms="./spritesheet-assets/FX/spark-particle/spark_particle.json",Ps=xt.dispatch,Ds=xt.getState,Ls=window.TweenLite.to,Rs=function(e,t){var a=Et.Engine.create(),n=a.world;n.bounds={min:{x:-6e3,y:-1100},max:{x:6e3,y:825}};var o=Et.Render.create({element:document.getElementById(e),engine:a,options:{width:1200,height:550,pixelRatio:.5}});Et.Render.run(o);var i=Et.Runner.create();if(Et.Runner.run(i,a),t){var r=Et.Mouse.create(o.canvas),s=Et.MouseConstraint.create(a,{mouse:r,constraint:{stiffness:.2,render:{visible:!1}}});Et.World.add(n,s),o.mouse=r}return{engine:a,render:o,runner:i,world:n,width:1200,height:550,worldWidth:6e3}}("app-container",!0),zs=Rs.world,Ws=Rs.render,Is=Rs.engine,Hs=Rs.width,Ns=Rs.height,Us=Rs.worldWidth,Gs=function(e){var t=new c.b({width:1200,height:550,antialias:!1,resolution:1});return c.l.ROUND_PIXELS=!0,document.getElementById(e).appendChild(t.view),{app:t,loader:new c.g}}("app-container"),qs=Gs.app,Ys=Gs.loader;function Xs(){window.onload=function(){setTimeout((function(){Ps(ee()),Ds().game.gameState!==S.GAMEPLAY&&Ds().game.gameState!==S.SHOP_MENU&&Ds().game.gameSubState!==v&&Ds().game.gameSubState!==E||ja()}),1e3)},Ys.add(vi.a).add(bi.a).add(_s).add(Ks).add(Ms).add("./spritesheet-assets/FX/muzzle-sparks/muzzle_sparks.json").add("./spritesheet-assets/FX/explosion3d/explosion3d1.json").add("./spritesheet-assets/FX/explosion3d/explosion3d2.json").add("./spritesheet-assets/turret/sheets/turret_scan.json").add("./spritesheet-assets/turret/sheets/turret_shoot.json").add("./spritesheet-assets/remote-mine/remote-mine.json").add("./spritesheet-assets/clustermine/clustermine.json").add(js).add(ki.a).add(ps).add(yi.a).add("./spritesheet-assets/zombie_walkcycle_test.json").add("./spritesheet-assets/z_walk/z_walk.json").add("./spritesheet-assets/z_attack/z_attack.json").add("./spritesheet-assets/z_parts/limbs.json").add(os).add(is).add(rs).add(ss).add(ls).add(ds).add(cs).add(ns).add(Os).add(Vs).add(Ts).add("./spritesheet-assets/FX/explosion_fx/explosion_assets.json").add(Fs).add("./spritesheet-assets/FX/ground_fx/ground_fx.json").add(us).add(hs).add(ms).add(gs).add(ys).add(fs).add(Es).add(Ss).add(ks).add(As).add(Cs).add(Bs).add(bs).add(ws).add(vs).add(xs).add(Ci.a).add(ci.a).add(ui.a).add(mi.a).load((function(){window.gameObjects=new function(){var e=this;this.state={},this.getKeyValue=function(t){return!!e.state[t]&&e.state[t]},this.setKeyValue=function(t,a){return e.state[t]=a,e.state[t]},this.getFullState=function(){return e.state},this.setFullState=function(t){e.state=t}};var e=window.gameObjects;Ps(He("game-cover",Ei.a)),Ps(He("char-head",Ci.a)),Ps(He("gradient-alpha",vi.a)),Ps(He("weapon-ui-icon-pistol",ci.a)),Ps(He("weapon-ui-icon-smg",ui.a)),Ps(He("weapon-ui-icon-shotgun",mi.a)),Ps(He("ground-texture",yi.a)),Ps(He("explosive-barrel",ki.a));var t=Bt("ground-texture");t.pivot.x=.5*t.width,t.pivot.y=.425*t.height;var a=Bt("gradient-alpha");a.width=Hs,a.height=Ns,e.setKeyValue("gradient-alpha",a);var n=Bt("game-cover");e.setKeyValue("game-cover-art",n),e.setKeyValue("9mm-sound1",Ki.a),e.setKeyValue("9mm-sound2",Oi.a),e.setKeyValue("explosion1",Ti.a),e.setKeyValue("distant-explosion",Fi.a),e.setKeyValue("pistol-reload-sound",Pi.a),e.setKeyValue("bullet-impact-body",Li.a),e.setKeyValue("bullet-impact-body-sound",new ln.Howl({src:[Li.a]})),e.setKeyValue("grenade-clink-sound",new ln.Howl({src:[zi.a]})),e.setKeyValue("throw-sound",new ln.Howl({src:[Ii.a]})),e.setKeyValue("confirm-sound",new ln.Howl({src:[Tr.a]})),e.setKeyValue("coin-collect-sound",new ln.Howl({src:[Ni.a]})),e.setKeyValue("ammo-collect-sound",new ln.Howl({src:[Gi.a]})),e.setKeyValue("item-collect-sound",new ln.Howl({src:[Yi.a]})),e.setKeyValue("blood-squish-sound",new ln.Howl({src:[$i.a]})),e.setKeyValue("blood-squash-sound",new ln.Howl({src:[Ji.a]})),e.setKeyValue("blood-smack-sound",new ln.Howl({src:[er.a]})),e.setKeyValue("death-rip-sound",new ln.Howl({src:[ar.a]})),e.setKeyValue("jump-landing-sound",new ln.Howl({src:[or.a]})),e.setKeyValue("dirt-impact-sound",new ln.Howl({src:[rr.a]})),e.setKeyValue("zombie-hurt-sound",new ln.Howl({src:[lr.a],volume:.5})),e.setKeyValue("zombie-death-sound",new ln.Howl({src:[cr.a],volume:.5})),e.setKeyValue("pain1-sound",new ln.Howl({src:[ur.a]})),e.setKeyValue("pain2-sound",new ln.Howl({src:[mr.a]})),e.setKeyValue("player-death-sound",new ln.Howl({src:[yr.a]})),e.setKeyValue("button-add-sound",new ln.Howl({src:[br.a]})),e.setKeyValue("button-subtract-sound",new ln.Howl({src:[vr.a]})),e.setKeyValue("button-hover-sound",new ln.Howl({src:[kr.a]})),e.setKeyValue("button-click-sound",new ln.Howl({src:[Er.a]})),e.setKeyValue("place-object-sound",new ln.Howl({src:[Cr.a]})),e.setKeyValue("button-cancel-sound",new ln.Howl({src:[Kr.a]})),e.setKeyValue("purchase-sound",new ln.Howl({src:[Or.a]})),e.setKeyValue("shell-impact-sound",new ln.Howl({src:[Fr.a]})),e.setKeyValue("health-pickup-sound",new ln.Howl({src:[Pr.a]})),e.setKeyValue("zombie-growl-sound",new ln.Howl({src:[Lr.a]})),e.setKeyValue("smg-fire-sound",new ln.Howl({src:[zr.a]})),e.setKeyValue("mag-drop-sound",new ln.Howl({src:[Ir.a]})),e.setKeyValue("shot-shell-sound",new ln.Howl({src:[Nr.a]})),e.setKeyValue("shotgun-blast-sound",new ln.Howl({src:[Gr.a]})),e.setKeyValue("achievement1-sound",new ln.Howl({src:[Yr.a]})),e.setKeyValue("achievement2-sound",new ln.Howl({src:[Jr.a]})),e.setKeyValue("achievement3-sound",new ln.Howl({src:[$r.a]})),e.setKeyValue("charging-grenade-sound",new ln.Howl({src:[as.a]})),e.setKeyValue("jump-sound",new ln.Howl({src:[es.a]})),e.setKeyValue("zombie-idle-sheet",Ys.resources[os].spritesheet),e.setKeyValue("zombie-walk-sheet",Ys.resources[is].spritesheet),e.setKeyValue("zombie-attack1-sheet",Ys.resources[rs].spritesheet),e.setKeyValue("zombie-attack2-sheet",Ys.resources[ss].spritesheet),e.setKeyValue("zombie-parts-sheet",Ys.resources[ls].spritesheet),e.setKeyValue("zombie-parts-gored-sheet",Ys.resources[ds].spritesheet),e.setKeyValue("zombie-slash-fx-sheet",Ys.resources[cs].spritesheet),e.setKeyValue("muzzle-flashes",Ys.resources[ns].spritesheet),e.setKeyValue("sparks-sheet",Ys.resources[Ms].spritesheet),e.setKeyValue("muzzle-sparks-sheet",Ys.resources["./spritesheet-assets/FX/muzzle-sparks/muzzle_sparks.json"].spritesheet),e.setKeyValue("explosion3d1-sheet",Ys.resources["./spritesheet-assets/FX/explosion3d/explosion3d1.json"].spritesheet),e.setKeyValue("explosion3d2-sheet",Ys.resources["./spritesheet-assets/FX/explosion3d/explosion3d2.json"].spritesheet),e.setKeyValue("blood-spurt-1",Ys.resources[Os].spritesheet),e.setKeyValue("blood-spurt-2",Ys.resources[Vs].spritesheet),e.setKeyValue("blood-spurt-3",Ys.resources[Ts].spritesheet),e.setKeyValue("explosion-assets-sheet",Ys.resources["./spritesheet-assets/FX/explosion_fx/explosion_assets.json"].spritesheet),e.setKeyValue("wood-planks-sheet",Ys.resources[Fs].spritesheet),e.setKeyValue("remote-mine-sheet",Ys.resources["./spritesheet-assets/remote-mine/remote-mine.json"].spritesheet),e.setKeyValue("landmine-sheet",Ys.resources[js].spritesheet),e.setKeyValue("clustermine-sheet",Ys.resources["./spritesheet-assets/clustermine/clustermine.json"].spritesheet),e.setKeyValue("turret-scan-sheet",Ys.resources["./spritesheet-assets/turret/sheets/turret_scan.json"].spritesheet),e.setKeyValue("turret-shoot-sheet",Ys.resources["./spritesheet-assets/turret/sheets/turret_shoot.json"].spritesheet),e.setKeyValue("barriers-sheet",Ys.resources[ps].spritesheet),e.setKeyValue("ground-fx-sheet",Ys.resources["./spritesheet-assets/FX/ground_fx/ground_fx.json"].spritesheet),e.setKeyValue("player-parts-sheet",Ys.resources[us].spritesheet),e.setKeyValue("char-idle-sheet",Ys.resources[hs].spritesheet),e.setKeyValue("char-run-sheet",Ys.resources[ms].spritesheet),e.setKeyValue("char-jump-sheet",Ys.resources[gs].spritesheet),e.setKeyValue("char-reload-pistol-sheet",Ys.resources[ys].spritesheet),e.setKeyValue("char-reload-smg-sheet",Ys.resources[fs].spritesheet),e.setKeyValue("char-reload-shotgun-sheet",Ys.resources[_s].spritesheet),e.setKeyValue("left-arm-pistol-fire-sheet",Ys.resources[bs].spritesheet),e.setKeyValue("right-arm-pistol-fire-sheet",Ys.resources[ws].spritesheet),e.setKeyValue("left-arm-smg-fire-sheet",Ys.resources[vs].spritesheet),e.setKeyValue("right-arm-smg-fire-sheet",Ys.resources[xs].spritesheet),e.setKeyValue("melee-pistol-sheet",Ys.resources[Es].spritesheet),e.setKeyValue("melee-ump-sheet",Ys.resources[Ss].spritesheet),e.setKeyValue("melee-shotgun-sheet",Ys.resources[ks].spritesheet),e.setKeyValue("grenade-pistol-sheet",Ys.resources[As].spritesheet),e.setKeyValue("grenade-ump-sheet",Ys.resources[Cs].spritesheet),e.setKeyValue("grenade-shotgun-sheet",Ys.resources[Bs].spritesheet),e.setKeyValue("arms-fire-shotgun-sheet",Ys.resources[Ks].spritesheet);var o=new c.e;o.interactive=!0,o.width=Hs,o.height=Ns,e.setKeyValue("muzzle-flashes-sheet",Ys.resources[ns].spritesheet);var i=function(){var e=Et.Bodies.rectangle(Us/2,Ns,Us,Ns/2,{isStatic:!0,collisionFilter:{mask:3}});return e.label="ground",Et.World.add(zs,e),e}();qs.stage.interactive=!0,qs.stage.addChild(o),o.addChild(t),e.setKeyValue("pixi-app",qs),e.setKeyValue("game-pixi-container",o),e.setKeyValue("ammo-drops-by-type",{"pistol weapon":[],"smg weapon":[],"shotgun weapon":[]}),e.setKeyValue("text-messages",[]),e.setKeyValue("reload-text-messages",[]),e.setKeyValue("gibs",[]),e.setKeyValue("grenades",[]),e.setKeyValue("explosions",[]),e.setKeyValue("rocks",[]),e.setKeyValue("currency-drops",[]),e.setKeyValue("pistol-shells",[]),e.setKeyValue("pistol-bullets",[]),e.setKeyValue("build-objects",[]),e.setKeyValue("bullet-impacts",[]),e.setKeyValue("wood-planks",[]),e.setKeyValue("spark-sprites",[]),e.setKeyValue("explosion-sprites",[]),e.setKeyValue("remote-mines",{}),e.setKeyValue("remote-mines-array",[]),e.setKeyValue("static-ground-effects",[]),e.setKeyValue("zombie-ragdolls",[]),e.setKeyValue("zombies",[]),e.setKeyValue("health-drops",[]),e.setKeyValue("wall-tile",bi.a),e.setKeyValue("ground",i),e.setKeyValue("ground-texture",t),e.setKeyValue("game-width",Hs),e.setKeyValue("game-height",Ns),e.setKeyValue("world-width",Us),e.setKeyValue("world",zs),e.setKeyValue("render",Ws),e.setKeyValue("engine",Is);var r=new li,s=new Aa;e.setKeyValue("screen-ui",r),e.setKeyValue("weapons-ui",s);var l=new Hn;e.setKeyValue("player",l);var d=function(){var t=new c.e;n.pivot.x=.5*n.width,n.pivot.y=.5*n.height,n.scale.x=.51,n.scale.y=.51,o.alpha=0,t.addChild(n),o.alpha=1,t.interactive=!0;var a=new c.e,i=new c.f;i.beginFill(5592405),i.drawRect(0,0,250,80);var r=new c.i("Play",{fontFamily:"Arial",fontSize:36,fill:16777215});function s(){a.position.x=Hs/2-a.width/2,a.position.y=Ns/2-a.height/2}return a.addChild(i,r),s(),r.position.x=a.width/2-r.width/2,r.position.y=a.height/2-r.height/2,a.interactive=!0,a.on("click",(function(){var e=Ds().game,t=e.gameState,a=e.gameSubState;Ps(Ne("main",t,S.GAMEPLAY)),Ps(Ne("sub",a,g))})),a.on("mouseover",(function(){Ls(a.scale,.35,{x:1.05,y:1.05,onUpdate:s})})),a.on("mouseout",(function(){Ls(a.scale,.35,{x:1,y:1,onUpdate:s})})),qs.stage.addChild(t),e.setKeyValue("main-menu",t),{menu:t}}().menu;Et.Events.on(Is,"tick",(function(t){var a=Ds().game,n=a.gameState,o=a.gameSubState;window.gameObjects&&!0===d.visible&&(d.visible=!1,document.body.style.cursor="auto"),(window.gameObjects&&n===S.MAIN_MENU||n===S.SCORES_VIEW)&&!1===d.visible&&(d.visible=!0,document.body.style.cursor="auto"),window.gameObjects&&n===S.MAIN_MENU||n===S.SCORES_VIEW||n===S.PAUSE||o===v||o===E||n===S.SHOP_MENU||n===S.BUILD_MENU||o===b?document.getElementsByClassName("App")[0]&&(document.body.style.cursor="auto",document.getElementsByClassName("App")[0].style.pointerEvents="all"):document.getElementsByClassName("App")[0]&&(document.getElementsByClassName("App")[0].style.pointerEvents="none"),n===S.GAMEPLAY&&window.gameObjects&&(document.body.style.cursor=o===v||o===E||o===b?"auto":"none"),Jo(0,e)})),Et.Events.on(Is,"collisionStart",(function(t){if(Ds().game.gameState===S.GAMEPLAY)for(var a=0;a<t.pairs.length;++a)qo(t,a,e)}))}))}var Js=xt.getState,Zs=xt.dispatch,$s=function(){0===Js().game.waveNum&&Zs(Ue());!function e(){if(0!==Js().game.zombiesOnStage&&0!==window.gameObjects.getKeyValue("zombies").length||Js().game.gameState!==S.GAMEPLAY||Js().game.gameSubState===v||Js().game.gameSubState===f)console.log(Js().game.zombiesOnStage,window.gameObjects.getKeyValue("zombies").length),setTimeout(e,3e3);else{var t=Js().game.waveNum;Object(l.b)((function(){Zs(dt(t)),Zs(ct(t)),Zs(pt(t)),Zs(ht(t)),Zs(qe(t))})),function(e){var t=window.gameObjects.getKeyValue("world-width");!function(){for(var a=ai().game.waveNum>20?4:ai().game.waveNum>10?3:2,n=0;n<e;++n)!function e(){ai().game.zombiesOnStage<a&&ai().game.gameState!==S.PAUSE&&ai().game.gameState!==S.MAIN_MENU&&(ai().game.gameSubState===y||ai().game.gameSubState===w)?(console.log("should create a zombo"),ai().game.gameSubState!==f&&new ei(kt.a.int(150,t-150),ni)):setTimeout((function(){e()}),2e3)}()}()}(t)}}()},Qs=function(){Zs(ft(0)),Zs(qe(null)),function(e){c.c.from("Arial",{fill:"#FFFFFF",fontSize:40,fontWeight:"bold"},{chars:[["a","z"],["0","9"],["A","Z"]," .!?"]});var t=window,a=t.gameObjects,n=t.TweenLite,o=n.from,i=n.to,r=t.Power1,s=a.getKeyValue("player"),l=a.getKeyValue("game-pixi-container"),d=a.getKeyValue("game-width"),p=a.getKeyValue("game-height"),u=new c.d(e,{font:"Arial"});u.pivot.x=u.width/2,u.pivot.y=u.height/2,u.position.x=d/2,u.position.y=p/5,l.addChild(u);var h=function(){Ta(),Da().game.gameState===S.MAIN_MENU||Da().game.gameState===S.PAUSE?Da().game.gameSubState===f||Da().game.gameSubState===v?La(Ne("sub",Da().game.gameSubState,v)):La(Ne("sub",Da().game.gameSubState,m)):s.dead?La(Ne("sub",Da().game.gameSubState,b)):(La(Ne("sub",Da().game.gameSubState,v)),l.removeChild(u))},g=function e(){Da().game.gameState===S.PAUSE?setTimeout(e,2e3):i(u,.75,{delay:2,x:1.5*d,ease:r.easeIn,onUpdate:function(){a.getKeyValue("zombies").length>0&&Ta()},onComplete:h})};!function e(){Da().game.gameState===S.PAUSE?setTimeout(e,2e3):o(u,.75,{x:-100,alpha:0,onUpdate:function(){a.getKeyValue("zombies").length>0&&Ta()},onComplete:g})}()}("Wave Defeated!"),Yt(Js().game.scoreAmounts.waveCompleted*Js().game.waveNum),Zs(Ue()),_n()},el=function(){var e=window.gameObjects,t=Object(l.c)(),a=Object(l.d)((function(e){return e.game.gameSubState})),n=Object(l.d)((function(e){return e.game.lastGameSubState})),i=Object(l.d)((function(e){return e.game.player.credits})),r=Object(l.d)((function(e){return e.game.respawnCost})),s=Object(l.d)((function(e){return e.game.respawnToShopCost})),d=Object(l.d)((function(e){return e.game.waveNum})),c=e.getKeyValue("game-width"),p=e.getKeyValue("game-height"),u=e.getKeyValue("screen-ui");return o.a.createElement(o.a.Fragment,null,o.a.createElement(Gt.Container,{width:.75*c,height:.75*p},o.a.createElement(Gt.Backing,{width:.75*c,height:.75*p}),o.a.createElement(Gt.MenuTitle,null,i>=s?"Respawn Menu":"Game Over"),o.a.createElement(Gt.MenuButtonContainer,null,i>=r||n===v?o.a.createElement(Gt.MenuButtonSpacer,null,o.a.createElement(la,{width:240,onClick:function(){u.respawn(),n!==v&&n!==w&&n!==y&&t(Ne("sub",a,g)),n!==v&&t(Qe(r)),t(Ae("Respawn",r))}},"Respawn? ",n===v?"":"$".concat(r))):null,i>=s&&d>0&&n!==v?o.a.createElement(Gt.MenuButtonSpacer,null,o.a.createElement(la,{width:360,onClick:function(){Ta(),Object(l.b)((function(){t(ft(0)),t(qe(null)),t(Ge()),t(Ne("sub",a,v)),t(Qe(s)),t(Ae("Shop Respawn",s))}))}},"Restart Current Wave from Shop? ","$".concat(s))):null,o.a.createElement(Gt.MenuButtonSpacer,null,o.a.createElement(la,{onClick:ja},"Go to Main Menu")))))},tl=function(){var e=window.gameObjects,t=Object(l.c)(),a=e.getKeyValue("game-width"),n=e.getKeyValue("game-height"),i=e.getKeyValue("screen-ui"),r=Object(l.d)((function(e){return e.game.gameState})),d=Object(l.d)((function(e){return e.game.gameSubState})),c="main",p="barriers",u="traps",h=o.a.useState(c),m=Object(s.a)(h,2),g=m[0],y=m[1],f=Object(l.d)((function(e){return e.game.barriers.costToBuild})),b=Object(l.d)((function(e){return e.game.traps.costToBuild})),w=Object(l.d)((function(e){return e.game.player.credits})),E=function(){y(c)},k=function(){e.getKeyValue("screen-ui").unpause(),t(Ne("main",r,S.GAMEPLAY)),t(Ne("sub",d,x))},A=function(){e.getKeyValue("crosshair").buildArrow(16777215)},C=function(e){w>=f[e]&&(t(mt(e)),t(gt(null)),A(),setTimeout((function(){k()}),50))},B=function(e){w>=b[e]&&(t(gt(e)),t(mt(null)),A(),setTimeout((function(){k()}),50))};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Gt.Container,{width:.75*a,height:.75*n},o.a.createElement(Gt.Backing,{width:.75*a,height:.75*n}),g===u?o.a.createElement(o.a.Fragment,null,o.a.createElement(Gt.MenuTitle,null,"Build Traps"),o.a.createElement(Gt.MenuButtonContainer,null,o.a.createElement(Gt.MenuButtonSpacer,null,o.a.createElement(Gt.MenuButtonSpacer,null,Object.keys(yn).filter((function(e,t){return t%2==0})).map((function(e,t){return o.a.createElement(ia,{key:t},o.a.createElement(Gt.MenuButtonSpacer,null,o.a.createElement(la,{width:yn[e].length>14?300:200,onClick:function(){return B(yn[e])}},yn[e]," ",o.a.createElement("span",{style:{color:w>=b[yn[e]]?"#ffffff":"#ff0000"}},"$",b[yn[e]]))))}))),o.a.createElement(Gt.MenuButtonSpacer,null,Object.keys(yn).filter((function(e,t){return t%2==1})).map((function(e,t){return o.a.createElement(ia,{key:t},o.a.createElement(Gt.MenuButtonSpacer,null,o.a.createElement(la,{width:yn[e].length>14?300:200,onClick:function(){return B(yn[e])}},yn[e]," ",o.a.createElement("span",{style:{color:w>=b[yn[e]]?"#ffffff":"#ff0000"}},"$",b[yn[e]]))))}))),o.a.createElement(Gt.MenuButtonSpacer,null,o.a.createElement(da,{onClick:E},"Back"))))):null,g===p?o.a.createElement(o.a.Fragment,null,o.a.createElement(Gt.MenuTitle,null,"Build Barriers"),o.a.createElement(Gt.MenuButtonContainer,null,o.a.createElement(Gt.MenuButtonSpacer,null,Object.keys(gn).filter((function(e,t){return t%2==1})).map((function(e,t){return o.a.createElement(ia,{key:t},o.a.createElement(Gt.MenuButtonSpacer,null,o.a.createElement(la,{width:gn[e].length>14?300:200,onClick:function(){return C(gn[e])}},gn[e]," ",o.a.createElement("span",{style:{color:w>=f[gn[e]]?"#ffffff":"#ff0000"}},"$",f[gn[e]]))))}))),o.a.createElement(Gt.MenuButtonSpacer,null,Object.keys(gn).filter((function(e,t){return t%2==0})).map((function(e,t){return o.a.createElement(ia,{key:t},o.a.createElement(Gt.MenuButtonSpacer,null,o.a.createElement(la,{width:gn[e].length>14?300:200,onClick:function(){return C(gn[e])}},gn[e]," ",o.a.createElement("span",{style:{color:w>=f[gn[e]]?"#ffffff":"#ff0000"}},"$",f[gn[e]]))))})),o.a.createElement(Gt.MenuButtonSpacer,null,o.a.createElement(Gt.MenuButtonSpacer,{padding:20}),o.a.createElement(da,{onClick:E},"Back"))))):null,g===c?o.a.createElement(o.a.Fragment,null,o.a.createElement(Gt.MenuTitle,null,"Build Menu"),o.a.createElement(Gt.MenuButtonContainer,null,o.a.createElement(Gt.MenuButtonSpacer,null,o.a.createElement(ia,null,o.a.createElement(Gt.MenuButtonSpacer,null,o.a.createElement(la,{onClick:function(){y(p)}},"Barriers"))),o.a.createElement(ia,null,o.a.createElement(Gt.MenuButtonSpacer,null,o.a.createElement(la,{onClick:function(){y(u)}},"Traps")))),o.a.createElement(Gt.MenuButtonSpacer,{padding:20}),o.a.createElement(Gt.MenuButtonSpacer,null,o.a.createElement(da,{onClick:function(){i.unpause(),t(Ne("main",r,S.GAMEPLAY)),t(Ne("sub",d,v))}},"Back")))):null))};function al(){var e=Object(Lt.a)(["\nheight: 120px;\nwidth: 100%;\nbackground-color: #333;\nopacity: .8;\n"]);return al=function(){return e},e}function nl(){var e=Object(Lt.a)(["\nheight: 120px;\nwidth: 100%;\nposition: absolute;\nbottom: 0;\n"]);return nl=function(){return e},e}var ol=Gt.MenuButton,il=Gt.MenuButtonContainer,rl=Gt.MenuButtonSpacer,sl=Rt.a.div(nl()),ll=Rt.a.div(al()),dl=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(sl,{className:"shop-query-menu"},o.a.createElement(ll,null),o.a.createElement(il,{"space-top":2},o.a.createElement(rl,null,o.a.createElement(ia,null,o.a.createElement(rl,{padding:4},o.a.createElement(ol,{bgcolor:"#555",width:500,height:40},"Done Placing Barriers/Traps: Press [ B ]")))))))},cl=a(144),pl=function(e){return o.a.createElement(Gt.Container,null,o.a.createElement(Gt.MenuTitle,null,"Top 100 Scores of All-time"),o.a.createElement(Gt.MenuButtonContainer,{style:{height:470,overflow:"scroll"}},e&&e.scores&&e.scores.sort((function(e,t){return t.score-e.score})).map((function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Fa,{bgcolor:"rgba(0, 0, 0, 0.25)",hovercolor:"rgba(0, 0, 0, 0.35)",bordercolor:"rgba(0, 0, 0, 0)",hoverborder:"rgba(0, 0, 0, 0)"},o.a.createElement(ia,null,o.a.createElement("div",{style:{left:"20px",position:"absolute"}},e.name)),o.a.createElement(ia,null,o.a.createElement("div",{style:{left:0,right:0}},e.score)),o.a.createElement(ia,null,o.a.createElement("div",{style:{right:"20px",position:"absolute"}},function(){var t=e.time.substr(0,e.time.indexOf("T")),a=t.substr(0,e.time.indexOf("-")),n=t.substr(e.time.indexOf("-")+1,t.length);return"".concat(n," - ").concat(a)}()))))}))),o.a.createElement(Gt.MenuButtonContainer,null,o.a.createElement(ia,null,o.a.createElement(ca,{marginTop:"-60px",onClick:ja},"Refresh List")),o.a.createElement(ia,null,o.a.createElement(ca,{marginTop:"-60px",onClick:ja}))))};function ul(){var e=window,t=e.gameObjects,a=e.TweenLite.delayedCall,i=Object(l.c)(),r=Object(l.d)((function(e){return e.game})),c=Object(l.d)((function(e){return e.game.player.weapons.equipped})),p=o.a.useRef(null),u=o.a.useRef(!1),h=function(e){var t=o.a.useState(e),a=Object(s.a)(t,2);return[a[0],a[1]]}([]),m=Object(s.a)(h,2),w=m[0],k=m[1],A=Object(n.useState)(!1),C=Object(s.a)(A,2),B=C[0],K=C[1],_=Object(n.useState)(!1),O=Object(s.a)(_,2),V=O[0],T=O[1],j=Object(n.useState)(!1),F=Object(s.a)(j,2),M=F[0],P=F[1],D=Object(n.useState)(!1),L=Object(s.a)(D,2),R=L[0],z=L[1],W=Object(n.useState)(!1),I=Object(s.a)(W,2),H=I[0],N=I[1],U=Object(n.useState)(!1),G=Object(s.a)(U,2),q=G[0],Y=G[1];return o.a.useEffect((function(){Xs()}),[]),o.a.useEffect((function(){Ca()}),[c]),o.a.useEffect((function(){if(r.gameSubState===y&&$s(),r.gameSubState===f&&Qs(),r.gameSubState===g){var e=3;u.current=!1,p.current=setInterval((function(){Ra("".concat(e),"#FFFFFF",.25,.5),e-=1}),500),a(2,(function(){u.current||(clearInterval(p.current),i(Ne("sub",r.gameSubState,y)))}))}r.gameSubState===b&&(clearInterval(p.current),u.current=!0,Ra("You died.","#FF0000",.75,3))}),[r.gameSubState,a,i]),o.a.useEffect((function(){0===r.waveCountToDefeat&&r.gameSubState!==v&&Qs()}),[r.waveCountToDefeat,r.lastGameSubState,r.gameSubState,i]),o.a.useEffect((function(){(console.log("Game state has changed"),r.gameState===S.SHOP_MENU||r.gameState===S.BUILD_MENU)&&t.getKeyValue("screen-ui").pause();r.gameState===S.MAIN_MENU||r.gameState===S.GAMEPLAY?document.getElementsByClassName("App")[0].style.pointerEvents="none":document.getElementsByClassName("App")[0].style.pointerEvents="all",r.gameState===S.GAMEPLAY&&null===r.player.weapons.equipped&&i(ze("pistol weapon"))}),[r.gameState,r.player.weapons.equipped,t,i]),o.a.useEffect((function(){r.gameState!==S.MAIN_MENU&&null!==r.purchases&&r.lastPurchase&&null!==r.lastPurchase.item&&r.lastPurchase.amount>0&&(window.gameObjects.getKeyValue("purchase-sound").play(),window.gameObjects.getKeyValue("confirm-sound").play(),d.b.dark("You bought ".concat(r.lastPurchase.item," for $").concat(r.lastPurchase.amount),{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),_n())}),[r.purchases,r.lastPurchase]),o.a.useEffect((function(){null!==r.lastAchievementEarned&&r.gameState!==S.MAIN_MENU&&(window.gameObjects.getKeyValue("achievement2-sound").play(),d.b.warning("Achievement Earned: ".concat(r.lastAchievementEarned),{position:"top-left",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),i($e(500)),_n())}),[r.achievements,r.lastAchievementEarned]),o.a.useEffect((function(){var e;r.gameState===S.SCORES_VIEW&&jn.a.get("http://localhost:8080/scores").catch((function(t){console.log(t),e=!0})).then((function(t){e?console.log("api is on a different port, use yarn build to view working scores"):k(t.data)}))}),[r.gameState]),o.a.useEffect((function(){K(!0),a(.1,(function(){K(!1)}))}),[r.scoreToggle]),o.a.useEffect((function(){T(!0),a(.25,(function(){T(!1)}))}),[r.player.upgradeTiers.run.current]),o.a.useEffect((function(){P(!0),a(.25,(function(){P(!1)}))}),[r.player.upgradeTiers.reload.current]),o.a.useEffect((function(){z(!0),a(.25,(function(){z(!1)}))}),[r.player.upgradeTiers.jump.current]),o.a.useEffect((function(){N(!0),a(.25,(function(){N(!1)}))}),[r.player.upgradeTiers.melee.current]),o.a.useEffect((function(){Y(!0),a(.25,(function(){Y(!1)}))}),[r.player.upgradeTiers.defense.current]),o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,null),o.a.createElement(o.a.Fragment,null,r.gameState===S.SCORES_VIEW?o.a.createElement(pl,{scores:w}):null),o.a.createElement(o.a.Fragment,null,r.gameState===S.MAIN_MENU&&window.gameObjects?o.a.createElement(o.a.Fragment,null,o.a.createElement(Pa,{margintop:!0,hidetitle:!0,hidebg:!1,bgcolor:"#222",playbtn:!0})):null),o.a.createElement(o.a.Fragment,null,r.gameSubState===x&&r.gameState===S.GAMEPLAY?o.a.createElement(o.a.Fragment,null,o.a.createElement(dl,null)):null),o.a.createElement(o.a.Fragment,null,t&&r.gameState===S.PAUSE?o.a.createElement(Pa,{"shop-query-visibility":r.gameSubState===v||r.gameSubState===E}):o.a.createElement(o.a.Fragment,null)),o.a.createElement(o.a.Fragment,null,r.gameState===S.SHOP_MENU?o.a.createElement(ga,null):o.a.createElement(o.a.Fragment,null)),o.a.createElement(o.a.Fragment,null,r.gameState===S.BUILD_MENU?o.a.createElement(tl,null):o.a.createElement(o.a.Fragment,null)),o.a.createElement(o.a.Fragment,null,r.gameSubState===v||r.gameSubState===E?o.a.createElement(Wn,null):o.a.createElement(o.a.Fragment,null)),o.a.createElement(o.a.Fragment,null,r.gameSubState===b?o.a.createElement(el,null):null),o.a.createElement(o.a.Fragment,null,r.gameState!==S.MAIN_MENU&&r.gameState!==S.SCORES_VIEW?o.a.createElement("div",{style:{backgroundColor:"#333",position:"absolute",margin:"auto",width:"50%",height:"30px",lineHeight:"30px",top:"4px",left:0,right:0,textAlign:"center",borderRadius:"2px"}},o.a.createElement("div",{style:{display:"inline-block"},className:"debug-ui"},"wave no: ",r.waveNum),o.a.createElement("div",{style:{marginLeft:"100px",display:"inline-block"},className:"debug-ui"},"enemies to defeat: ",r.waveCountToDefeat)):null,r.gameState!==S.MAIN_MENU&&r.gameState!==S.SCORES_VIEW?o.a.createElement(cl.a.div,{className:"game-score",animate:{scale:B?[1.35,1]:1},transition:{duration:.35}},o.a.createElement("span",{style:{color:r.score<r.prevScore?"red":r.score>r.prevScore?"#00FF61":"white"}},r.score)):null,o.a.createElement("div",{className:r.gameState!==S.MAIN_MENU&&r.gameState!==S.SCORES_VIEW?"player-attributes":""},r.gameState!==S.MAIN_MENU&&r.gameState!==S.SCORES_VIEW?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:M?"upgrade-gui-transition":"upgrade-gui"},"Reload Lvl. ",r.player.upgradeTiers.reload.current),o.a.createElement("div",{className:V?"upgrade-gui-transition":"upgrade-gui"},"Run Lvl. ",r.player.upgradeTiers.run.current),o.a.createElement("div",{className:R?"upgrade-gui-transition":"upgrade-gui"},"Jump Lvl. ",r.player.upgradeTiers.jump.current),o.a.createElement("div",{className:q?"upgrade-gui-transition":"upgrade-gui"},"Defense Lvl. ",r.player.upgradeTiers.defense.current),o.a.createElement("div",{className:H?"upgrade-gui-transition":"upgrade-gui"},"Melee Lvl. ",r.player.upgradeTiers.melee.current)):null),r.gameState!==S.MAIN_MENU&&r.gameState!==S.SCORES_VIEW?o.a.createElement("div",{className:"total-ammo-count-ui"},r.player.weapons.totalAmmo[r.player.weapons.equipped]):null,r.gameState!==S.MAIN_MENU&&r.gameState!==S.SCORES_VIEW?o.a.createElement("div",{className:"total-credits-ui"},"credits: ",o.a.createElement("span",{style:{color:"#71DD4D"}},"$",r.player.credits)):null,r.gameState!==S.MAIN_MENU&&r.gameState!==S.SCORES_VIEW&&c?o.a.createElement("div",{className:"weapon-stats"},o.a.createElement("div",{className:"weapon-stats-item"},"ROF: ",r.player.modTiers.rof[c].current),o.a.createElement("div",{className:"weapon-stats-item"},"PWR: ",r.player.modTiers.powder[c].current),o.a.createElement("div",{className:"weapon-stats-item"},"ACC: ",r.player.modTiers.sight[c].current),o.a.createElement("div",{className:"weapon-stats-item"},"CAP: ",r.player.modTiers.mag[c].current)):null))}var hl=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement(ul,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(l.a,{store:xt},o.a.createElement(hl,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},63:function(e,t,a){e.exports=a.p+"static/media/pistol-icon.7f31cd11.png"},64:function(e,t,a){e.exports=a.p+"static/media/smg-icon.3a3ac587.png"},65:function(e,t,a){e.exports=a.p+"static/media/shotgun-icon.0cd5d683.png"},66:function(e,t,a){e.exports=a.p+"static/media/GroundTexture_Optimized.b017db2f.png"},67:function(e,t,a){e.exports=a.p+"static/media/wallTile.c21abdef.png"},68:function(e,t,a){e.exports=a.p+"static/media/gradient-layer-mask.2be09341.png"},69:function(e,t,a){e.exports=a.p+"static/media/explosiveBarrier.4f1da0f2.png"},70:function(e,t,a){e.exports=a.p+"static/media/head-sprite.0a5881b1.png"},71:function(e,t,a){e.exports=a.p+"static/media/bodyBulletImpact.94466266.wav"}},[[147,1,2]]]);
//# sourceMappingURL=main.84196f42.chunk.js.map