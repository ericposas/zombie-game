(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],Array(55).concat([function(e,t,a){e.exports=a.p+"static/media/pistol-icon.7f31cd11.png"},function(e,t,a){e.exports=a.p+"static/media/smg-icon.3a3ac587.png"},function(e,t,a){e.exports=a.p+"static/media/shotgun-icon.0cd5d683.png"},function(e,t,a){e.exports=a.p+"static/media/GroundTexture_Optimized.b017db2f.png"},function(e,t,a){e.exports=a.p+"static/media/wallTile.c21abdef.png"},function(e,t,a){e.exports=a.p+"static/media/gradient-layer-mask.2be09341.png"},function(e,t,a){e.exports=a.p+"static/media/explosiveBarrier.4f1da0f2.png"},function(e,t,a){e.exports=a.p+"static/media/head-sprite.0a5881b1.png"},function(e,t,a){e.exports=a.p+"static/media/bodyBulletImpact.94466266.wav"},,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/GameCover.82b711ae.png"},function(e,t,a){e.exports=a.p+"static/media/9mm1.604f7da7.wav"},function(e,t,a){e.exports=a.p+"static/media/9mm2.c11c6dad.mp3"},function(e,t,a){e.exports=a.p+"static/media/explosion1.9434e92f.wav"},function(e,t,a){e.exports=a.p+"static/media/explosion_distant.d9a90524.wav"},function(e,t,a){e.exports=a.p+"static/media/pistolReload.915ac0e1.wav"},function(e,t,a){e.exports=a.p+"static/media/grenadeClink.e7168e2c.wav"},function(e,t,a){e.exports=a.p+"static/media/throw.e7ed00d6.wav"},function(e,t,a){e.exports=a.p+"static/media/coinCollect.b65cb627.wav"},function(e,t,a){e.exports=a.p+"static/media/collectAmmo.b05c1059.wav"},function(e,t,a){e.exports=a.p+"static/media/collectItem.a7bd5386.wav"},function(e,t,a){e.exports=a.p+"static/media/bloodSquash.6c1046e0.flac"},function(e,t,a){e.exports=a.p+"static/media/bloodSquish.508e6483.wav"},function(e,t,a){e.exports=a.p+"static/media/bloodSmack.eb606367.wav"},function(e,t,a){e.exports=a.p+"static/media/deathRipSound.733ed512.wav"},function(e,t,a){e.exports=a.p+"static/media/jumpLanding.f703082d.wav"},function(e,t,a){e.exports=a.p+"static/media/dirtImpact.de2bbd17.wav"},function(e,t,a){e.exports=a.p+"static/media/zombieHurt.2e807e84.wav"},function(e,t,a){e.exports=a.p+"static/media/zombieDeath.0ac25f1f.wav"},function(e,t,a){e.exports=a.p+"static/media/pain1.e6646ac7.wav"},function(e,t,a){e.exports=a.p+"static/media/pain2.defb4bdf.wav"},function(e,t,a){e.exports=a.p+"static/media/playerDeath.e8c5712d.wav"},function(e,t,a){e.exports=a.p+"static/media/buttonAdd.8db1c8cf.wav"},function(e,t,a){e.exports=a.p+"static/media/buttonSubtract.b240a4d0.wav"},function(e,t,a){e.exports=a.p+"static/media/buttonClick.10d30b9f.wav"},function(e,t,a){e.exports=a.p+"static/media/buttonHover.e0064aca.wav"},function(e,t,a){e.exports=a.p+"static/media/placeObject.fa092176.flac"},function(e,t,a){e.exports=a.p+"static/media/cancelSound.0d1ffcde.wav"},function(e,t,a){e.exports=a.p+"static/media/moneySound.1bae50c5.wav"},function(e,t,a){e.exports=a.p+"static/media/purchase.4979dc37.wav"},function(e,t,a){e.exports=a.p+"static/media/shellImpact.8075d182.wav"},function(e,t,a){e.exports=a.p+"static/media/health.29ff687c.wav"},function(e,t,a){e.exports=a.p+"static/media/zombieGrowl.4792280f.wav"},function(e,t,a){e.exports=a.p+"static/media/smgFire.b1f03f38.wav"},function(e,t,a){e.exports=a.p+"static/media/magDrop.1547e6a9.wav"},function(e,t,a){e.exports=a.p+"static/media/shotShell.f90e6de6.wav"},function(e,t,a){e.exports=a.p+"static/media/shotgunBlast.4118af72.wav"},function(e,t,a){e.exports=a.p+"static/media/achievement1.dd62d37e.wav"},function(e,t,a){e.exports=a.p+"static/media/achievement2.7a014c29.mp3"},function(e,t,a){e.exports=a.p+"static/media/achievement3.23db76c0.wav"},function(e,t,a){e.exports=a.p+"static/media/jumpSound.ccaa05f0.wav"},function(e,t,a){e.exports=a.p+"static/media/grenadeCharge.31709a11.wav"},,,,function(e,t,a){e.exports=a(194)},,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(29),r=a.n(i),s=(a(131),a(16)),l=a(8),c=a(49),d=(a(136),a(2)),p=a(47),u=a(32),h=a(30),m="neutral",g="waiting",y="wave started",f="wave defeated",b="player death",w="player respawn",v="shop query sub-menu",x="build trap placement mode",E="score entry",S={MAIN_MENU:"main menu",GAMEPLAY:"gameplay",PAUSE:"pause",IN_GAME_MENU:"in-game menu",GAMEOVER:"gameover",SHOP_MENU:"in-game shop menu",BUILD_MENU:"build menu",SCORES_VIEW:"scores view"},k={width:1200,height:550,keys:[],score:0,prevScore:0,lvlToWin:30,scoreToggle:!1,scoreAmounts:{zombie:500,meleeConnect:100,zombieStreakBonus:250,zombieKnockedOffStage:500,headShot:100,collectCredit:10,collectHealth:10,collectAmmo:10,waveCompleted:1e3,achievement:5e3,penalties:{respawn:1e3,killed:500,damageTaken:20}},achievements:{SPARTA:{owned:!1,description:"Kicking a zombie off-stage"},Downtown:{owned:!1,description:"Throwing a grenade 2000 ft. and hitting a zombie"},Triplets:{owned:!1,description:"Killing 3 Zombies with one grenade"},Collector:{owned:!1,description:"Buying both the Shotgun and the SMG from the Shop"},"P.Modder":{owned:!1,description:"Purchasing all pistol modifications"},"SMG Modder":{owned:!1,description:"Purchasing all SMG modifications"},"S.Modder":{owned:!1,description:"Purchasing all Shotgun modifications"},Aficionado:{owned:!1,description:"Buying all mods in available"},Jumpshot:{owned:!1,description:"Jumping in the air and firing the final killshot"},Piledrive:{owned:!1,description:"Killing 5 zombies with melee attacks as the final strike"},Traphouse:{owned:!1,description:"Building and placing 3 different traps"},Barricade:{owned:!1,description:"Building and placing 3 different barrier types"},Miner:{owned:!1,description:"Killing at least 3 zombies with landmines"},Gunna:{owned:!1,description:"Killing at least 10 zombies with turrets"}},stats:{zombiesKilled:0,bulletsFired:0,timesReloaded:0,grenadesThrown:0,timesKilled:0,timesRespawned:0,itemsPickedUp:0,creditsEarned:0,storePurchases:0,trapsBuilt:0,barriersBuilt:0,meleeKills:0,mineKills:0,trapsPlaced:0,barriersPlaced:0,turretKills:0,damageTaken:0,damageDealt:0},scoreSubmissionName:"",scoreSubmissions:{},trapTypesPlaced:{},barrierTypesPlaced:{},lastAchievementEarned:null,lastMagDropped:null,consecutiveGrenadeKills:0,lastGrenadeKill:null,zombieLastKilled:null,filterEffects:!1,displayZombieHealth:!0,rightMouseDown:!1,mouseState:{x:"",y:"",btn:""},mousePosition:{x:0,y:0},mouseRelativeToPlayerPosition:{x:0,y:0},textures:{},gameState:S.MAIN_MENU,lastGameState:null,gameSubState:m,lastGameSubState:null,waveNum:0,waveCountToDefeat:null,zombiesOnStage:0,showingMessage:!1,respawnCost:300,respawnToShopCost:150,purchases:0,lastPurchase:{item:null,amount:null},player:{perks:{magnetism:{cost:750,owned:!1},magDmg:{cost:750,owned:!1},lastBullet:{cost:750,owned:!1},creditDropper:{cost:1250,owned:!1},ammoDropper:{cost:1250,owned:!1},healthDropper:{cost:1250,owned:!1},quickTurret:{cost:1e3,owned:!1},barrierPlus:{cost:1e3,owned:!1},cluck:{cost:1e3,owned:!1}},health:100,credits:500,position:{x:0,y:0},compositeId:"",composite:{headId:"",bodyId:"",armId:""},weapons:{list:["pistol weapon"],equipped:null,grenadeChargeRate:35e-5,grenadeUpperForceThreshold:.025,grenadeFuseTime:{default:3},grenadeExplosionSize:450,laser:{"pistol weapon":!1,"smg weapon":!1,"shotgun weapon":!1},meleeDamage:{"pistol weapon":10,"smg weapon":15,"shotgun weapon":20},damage:{"pistol weapon":{min:4,max:10},"smg weapon":{min:3,max:7},"shotgun weapon":{min:4,max:8},"turret weapon":{min:4,max:6}},shotLimiter:{"pistol weapon":300,"smg weapon":100,"shotgun weapon":500},ammoCapacity:{"pistol weapon":9,"smg weapon":19,"shotgun weapon":6,grenades:1},totalAmmo:{"pistol weapon":45,"smg weapon":95,"shotgun weapon":30,grenades:3},ammoCostPerBox:{"pistol weapon":10,"smg weapon":20,"shotgun weapon":20,grenades:80},lastShot:{"pistol weapon":null,"smg weapon":null,"shotgun weapon":null},reloadSpeed:{"pistol weapon":.4,"smg weapon":.4,"shotgun weapon":.4},reloadAnimationFrames:{"pistol weapon":55,"smg weapon":60,"shotgun weapon":80},bulletVariance:{"pistol weapon":4e-4,"smg weapon":.001,"shotgun weapon":.002},bulletForce:{"pistol weapon":.0075,"smg weapon":.0075,"shotgun weapon":.0075,turret:.01},shellEjectionForce:{"pistol weapon":{min:3e-4,max:7e-4},"smg weapon":{min:3e-4,max:.001},"shotgun weapon":{min:8e-4,max:.0012}},shellRemovalTimeout:{"pistol weapon":2e3,"smg weapon":2e3,"shotgun weapon":2e3},buyWeapons:{"smg weapon":1500,"shotgun weapon":2750}},constants:{width:50,height:180},variables:{magnetism:400,magnetismSpeed:1,currentDirection:"",lastDirection:"",jumping:!1,jumpForce:-.4,defense:0,acceleration:{min:2,max:5},deceleration:.5},upgradeTiers:{run:{min:1,current:1,max:4},jump:{min:1,current:1,max:4},reload:{min:1,current:1,max:4},defense:{min:1,current:1,max:4},melee:{min:1,current:1,max:4}},upgradeCosts:{run:200,jump:200,reload:300,defense:400,melee:400},upgradeAmounts:{run:1,jump:-.1,reload:.1,defense:7,melee:{"pistol weapon":5,"smg weapon":6,"shotgun weapon":8}},modTiers:{rof:{"pistol weapon":{min:1,current:1,max:4},"smg weapon":{min:1,current:1,max:4},"shotgun weapon":{min:1,current:1,max:4}},powder:{"pistol weapon":{min:1,current:1,max:4},"smg weapon":{min:1,current:1,max:4},"shotgun weapon":{min:1,current:1,max:4}},sight:{"pistol weapon":{min:1,current:1,max:4},"smg weapon":{min:1,current:1,max:4},"shotgun weapon":{min:1,current:1,max:4}},mag:{"pistol weapon":{min:1,current:1,max:4},"smg weapon":{min:1,current:1,max:4},"shotgun weapon":{min:1,current:1,max:4}}},modCosts:{rof:{"pistol weapon":300,"smg weapon":400,"shotgun weapon":500},powder:{"pistol weapon":400,"smg weapon":550,"shotgun weapon":750},sight:{"pistol weapon":200,"smg weapon":300,"shotgun weapon":300},mag:{"pistol weapon":350,"smg weapon":600,"shotgun weapon":600}},modAmounts:{rof:{"pistol weapon":20,"smg weapon":15,"shotgun weapon":25},powder:{"pistol weapon":3,"smg weapon":2,"shotgun weapon":3},sight:{"pistol weapon":1e-4,"smg weapon":2e-4,"shotgun weapon":3e-4},mag:{"pistol weapon":3,"smg weapon":5,"shotgun weapon":1}}},barriers:{selectedBarrier:null,costToBuild:{Wooden:150,Stone:250,Metal:350,"Explosive Barrel":400}},traps:{turret:{fireDistance:500,cooldown:.5},selectedTrap:null,costToBuild:{Landmine:250,"Remote Mine":400,"Machine Gun Turret":750,"Cluster Bomb":500}},enemies:{zombies:{attackDmg:20,attackDmgDefault:20,attackIncrementer:.25,walkSpeed:1.5,walkSpeedDefault:1.5,walkSpeedIncrementer:.015,zombieAttackLimiter:2e3,zombieAttackDefaultLimiter:2e3,zombieAttackLimiterDecrementer:15,zombieAttackDistance:150,defaultHealth:100,startingHealth:100,healthIncrementer:.5,onRight:0,onLeft:0}},consumables:{healthkit:{20:{cost:40},50:{cost:80},full:{cost:150}}}},C="Downtown",A="Collector",B="P.Modder",K="SMG Modder",V="S.Modder",O="Aficionado",_="Traphouse",T="Barricade",j="bulletsFired",M="timesReloaded",F="grenadesThrown",P="timesKilled",L="timesRespawned",D="trapsPlaced",R="damageTaken",z=Object(p.b)({name:"game",initialState:k,reducers:{loadLocalStorageState:function(e){return localStorage&&localStorage.getItem("ZombieChamber-GameSave")?JSON.parse(localStorage.getItem("ZombieChamber-GameSave")):e},setTrapTypePlaced:function(e,t){return Object(h.a)({},e,{trapTypesPlaced:Object(h.a)({},e.trapTypesPlaced,Object(u.a)({},t.payload,e.trapTypesPlaced[t.payload]?e.trapTypesPlaced[t.payload]+1:1))})},setBarrierTypePlaced:function(e,t){return Object(h.a)({},e,{barrierTypesPlaced:Object(h.a)({},e.barrierTypesPlaced,Object(u.a)({},t.payload,e.barrierTypesPlaced[t.payload]?e.barrierTypesPlaced[t.payload]+1:1))})},setLastMagDropped:function(e,t){e.lastMagDropped=t.payload},increaseStats:function(e,t){e.stats[t.payload]+=1},increaseStatsByAmount:{reducer:function(e,t){e.stats[t.payload.type]+=t.payload.amount},prepare:function(e,t){return{payload:{type:e,amount:t}}}},setLastGrenadeKill:function(e,t){e.lastGrenadeKill=t.payload,e.consecutiveGrenadeKills+=1},resetConsecutiveGrenadeKills:function(e){e.consecutiveGrenadeKills=0},setZombieLastKilled:function(e,t){e.zombieLastKilled=t.payload},flipScoreToggle:function(e){e.scoreToggle=!e.scoreToggle},increaseScore:function(e,t){e.score+=t.payload},decreaseScore:function(e,t){e.score-=t.payload},updatePrevScore:function(e){e.prevScore=e.score},addPurchase:{reducer:function(e,t){e.purchases+=1,e.lastPurchase=t.payload},prepare:function(e,t){return{payload:{item:e,amount:t}}}},setZombiesOnLeft:function(e,t){e.enemies.zombies.onLeft=t.payload},setZombiesOnRight:function(e,t){e.enemies.zombies.onRight=t.payload},setRightMouseDown:function(e,t){e.rightMouseDown=t.payload},attachMod:{reducer:function(e,t){var a=t.payload,n=a.modType,o=a.wepType;switch(n){case"rof":e.player.modTiers.rof[o].current+=1,e.player.weapons.shotLimiter[o]-=e.player.modAmounts.rof[o];break;case"powder":e.player.modTiers.powder[o].current+=1,e.player.weapons.damage[o].min+=Math.round(.5*e.player.modAmounts.powder[o]),e.player.weapons.damage[o].max+=Math.round(e.player.modAmounts.powder[o]);break;case"sight":e.player.modTiers.sight[o].current+=1,e.player.weapons.bulletVariance[o]-=e.player.modAmounts.sight[o];break;case"mag":e.player.modTiers.mag[o].current+=1,e.player.weapons.ammoCapacity[o]+=e.player.modAmounts.mag[o]}},prepare:function(e,t){return{payload:{modType:e,wepType:t}}}},setPlayerCompositeId:function(e,t){console.log(t.type),e.player.compositeId=t.payload},setKeyPress:function(e,t){e.keys.push(t.payload)},removeKeyPress:function(e,t){e.keys.splice(e.keys.indexOf(parseInt(t.payload)),1)},setLastDirection:function(e,t){e.player.variables.lastDirection=t.payload},setCurrentDirection:function(e,t){e.player.variables.currentDirection=t.payload},setJumping:function(e,t){e.player.variables.jumping=t.payload},setGroundId:function(e,t){e.groundId=t.payload},setMousePosition:function(e,t){e.mousePosition=t.payload},setMouseStateX:function(e,t){e.mouseState.x=t.payload},setMouseStateY:function(e,t){e.mouseState.y=t.payload},setMouseButtonState:function(e,t){e.mouseState.btn=t.payload},setWeaponEquipped:function(e,t){e.player.weapons.equipped=t.payload},setLastShot:{reducer:function(e,t){var a=e.player.weapons;a.lastShot[a.equipped]=t.payload.dateTimeObject},prepare:function(e,t){return{payload:{weapon:e,dateTimeObject:t}}}},setMouseRelativeToPlayerPosition:function(e,t){e.mouseRelativeToPlayerPosition=t.payload},setCompositeBodyIds:function(e,t){e.player.composite=t.payload},setStaticGunAngle:function(e,t){e.staticGunAngle=t.payload},setStaticGunAngleState:function(e,t){e.staticGun=t.payload},setTexturePath:{reducer:function(e,t){e.textures[t.payload.textureName]=t.payload.texturePath},prepare:function(e,t){return{payload:{textureName:e,texturePath:t}}}},gameStateTransition:{reducer:function(e,t){switch(t.payload.type){case"sub":e.lastGameSubState=t.payload.from,e.gameSubState=t.payload.to;break;case"main":e.lastGameState=t.payload.from,e.gameState=t.payload.to}},prepare:function(e,t,a){return{payload:{type:e,from:t,to:a}}}},incrementWave:function(e){e.waveNum+=1},decrementWave:function(e){e.waveNum-=1},setWaveCountToDefeat:function(e,t){e.waveCountToDefeat=t.payload},incrementWaveCountToDefeat:function(e,t){e.waveCountToDefeat+=1},decrementWaveCountToDefeat:function(e,t){e.waveCountToDefeat-=1,e.zombiesOnStage-=1},setWeaponsList:function(e,t){e.player.weapons.list=t.payload},setShowingMessage:function(e,t){e.showingMessage=t.payload},unsetAllKeys:function(e,t){e.keys=[]},resetPlayerVariables:function(e){e=Object.assign({variables:Object(h.a)({},e,{currentDirection:"",lastDirection:"",jumping:!1})},e)},decrementTotalAmmo:function(e,t){e.player.weapons.totalAmmo[t.payload]-=1},addToTotalAmmo:{reducer:function(e,t){e.player.weapons.totalAmmo[t.payload.wepType]+=t.payload.amount},prepare:function(e,t){return{payload:{wepType:e,amount:t}}}},updateAmmoCapacity:{reducer:function(e,t){e.player.weapons.ammoCapacity[t.payload.wepType]=t.payload.newCapacityAmount},prepare:function(e,t){return{payload:{wepType:e,newCapacityAmount:t}}}},setPlayerPosition:function(e,t){e.player.position=t.payload},addToTotalCredits:function(e,t){e.player.credits+=t.payload},subtractFromTotalCredits:function(e,t){e.player.credits-=t.payload},upgradeRunSpeed:function(e){e.player.upgradeTiers.run.current+=1,e.player.variables.acceleration.max=e.player.variables.acceleration.max+e.player.upgradeAmounts.run},upgradeReloadSpeed:function(e){e.player.upgradeTiers.reload.current+=1,e.player.weapons.reloadSpeed["pistol weapon"]=e.player.weapons.reloadSpeed["pistol weapon"]+e.player.upgradeAmounts.reload,e.player.weapons.reloadSpeed["smg weapon"]=e.player.weapons.reloadSpeed["smg weapon"]+e.player.upgradeAmounts.reload},upgradeJumpForce:function(e){e.player.upgradeTiers.jump.current+=1,e.player.variables.jumpForce=e.player.variables.jumpForce+e.player.upgradeAmounts.jump},upgradeDefense:function(e){e.player.upgradeTiers.defense.current+=1,e.player.variables.defense=e.player.variables.defense+e.player.upgradeAmounts.defense},upgradeMelee:function(e){e.player.upgradeTiers.melee.current+=1,e.player.weapons.meleeDamage["pistol weapon"]+=e.player.upgradeAmounts.melee["pistol weapon"],e.player.weapons.meleeDamage["smg weapon"]+=e.player.upgradeAmounts.melee["smg weapon"]},updatePlayerHealth:function(e,t){e.player.health=t.payload},decrementGrenadeCount:function(e){e.player.weapons.totalAmmo.grenades-=1},incrementGrenadeCount:function(e){e.player.weapons.totalAmmo.grenades+=1},updateZombieWalkSpeed:function(e,t){var a=e.enemies.zombies.walkSpeedDefault,n=e.enemies.zombies.walkSpeedIncrementer;e.enemies.zombies.walkSpeed=a+t.payload*n},updateZombieAttackDmg:function(e,t){e.enemies.zombies.attackDmg=Math.round(t.payload*e.enemies.zombies.attackIncrementer+e.enemies.zombies.attackDmgDefault)},decrementZombieAttackTimeLimit:function(e,t){e.enemies.zombies.zombieAttackLimiter=e.enemies.zombies.zombieAttackDefaultLimiter-t.payload*e.enemies.zombies.zombieAttackLimiterDecrementer,console.log(e.enemies.zombies.zombieAttackLimiter)},showLaserSight:function(e,t){e.player.weapons.laser[t.payload]=!0},incrementZombieHealth:function(e,t){e.enemies.zombies.startingHealth=Math.round(e.enemies.zombies.defaultHealth+e.enemies.zombies.healthIncrementer*t.payload)},setSelectedBarrierToBuild:function(e,t){e.barriers.selectedBarrier=t.payload},setSelectedTrapToBuild:function(e,t){e.traps.selectedTrap=t.payload},setLastWaveCountDefeated:function(e){e.lastWaveCountDefeated=e.waveCountToDefeat},incrementZombiesOnStage:function(e){e.zombiesOnStage+=1},setZombiesOnStage:function(e,t){e.zombiesOnStage=t.payload},updateWeaponsList:function(e,t){e.player.weapons.list.push(t.payload)},setPlayerMagnetism:{reducer:function(e,t){e.player.variables.magnetism=t.payload.range,e.player.variables.magnetismSpeed=t.payload.speed,e.player.perks.magnetism.owned=!0},prepare:function(e,t){return{payload:{range:e,speed:t}}}},setPlayerMagDamage:function(e){e.player.perks.magDmg.owned=!0},setPlayerLastBullet:function(e){e.player.perks.lastBullet.owned=!0},setPlayerCreditDropper:function(e){e.player.perks.creditDropper.owned=!0},setPlayerAmmoDropper:function(e){e.player.perks.ammoDropper.owned=!0},setPlayerHealthDropper:function(e){e.player.perks.healthDropper.owned=!0},setPlayerQuickTurret:function(e){e.player.perks.quickTurret.owned=!0,e.traps.turret.cooldown=.25,e.traps.turret.fireDistance=600},setPlayerBarrierPlus:function(e){e.player.perks.barrierPlus.owned=!0},setPlayerFusterCluck:function(e){e.player.perks.cluck.owned=!0},toggleFilterEffects:function(e,t){e.filterEffects=t.payload},toggleZombieHealthDisplay:function(e,t){e.displayZombieHealth=t.payload},setAchievementOwned:function(e,t){e.achievements[t.payload].owned=!0,e.lastAchievementEarned=t.payload},setSubmissionForWave:function(e,t){e.scoreSubmissions[t.payload]=1},setScoreSubmissionName:function(e,t){e.scoreSubmissionName=t.payload}}}),I=z.actions,W=I.setScoreSubmissionName,N=I.setSubmissionForWave,H=I.loadLocalStorageState,U=I.increaseStatsByAmount,G=I.setTrapTypePlaced,q=I.setBarrierTypePlaced,Y=I.setLastMagDropped,X=I.increaseStats,J=I.setAchievementOwned,Z=(I.resetConsecutiveGrenadeKills,I.setLastGrenadeKill,I.setZombieLastKilled,I.flipScoreToggle),$=I.updatePrevScore,Q=I.increaseScore,ee=I.decreaseScore,te=I.toggleZombieHealthDisplay,ae=I.toggleFilterEffects,ne=I.setPlayerFusterCluck,oe=I.setPlayerBarrierPlus,ie=I.setPlayerQuickTurret,re=I.setPlayerHealthDropper,se=I.setPlayerAmmoDropper,le=I.setPlayerCreditDropper,ce=I.setPlayerLastBullet,de=I.setPlayerMagDamage,pe=I.setPlayerMagnetism,ue=I.addPurchase,he=(I.setZombiesOnLeft,I.setZombiesOnRight,I.setRightMouseDown),me=I.resetPlayerVariables,ge=I.unsetAllKeys,ye=I.setPlayerCompositeId,fe=I.setKeyPress,be=I.removeKeyPress,we=I.setLastDirection,ve=I.setCurrentDirection,xe=I.setJumping,Ee=(I.setGroundId,I.setMousePosition),Se=I.setMouseStateX,ke=I.setMouseStateY,Ce=I.setMouseButtonState,Ae=I.setLastShot,Be=I.setWeaponEquipped,Ke=I.setMouseRelativeToPlayerPosition,Ve=I.setCompositeBodyIds,Oe=I.setTexturePath,_e=I.gameStateTransition,Te=I.incrementWave,je=I.decrementWave,Me=(I.incrementWaveCountToDefeat,I.setWaveCountToDefeat),Fe=(I.decrementWaveCountToDefeat,I.setWeaponsList,I.setShowingMessage),Pe=I.decrementTotalAmmo,Le=I.addToTotalAmmo,De=(I.updateAmmoCapacity,I.addToTotalCredits),Re=I.subtractFromTotalCredits,ze=I.setPlayerPosition,Ie=I.upgradeRunSpeed,We=I.upgradeReloadSpeed,Ne=I.upgradeJumpForce,He=I.upgradeDefense,Ue=I.upgradeMelee,Ge=I.updatePlayerHealth,qe=I.attachMod,Ye=(I.incrementGrenadeCount,I.decrementGrenadeCount),Xe=(I.updateZombieWalkSpeed,I.updateZombieAttackDmg,I.decrementZombieAttackTimeLimit,I.showLaserSight),Je=(I.incrementZombieHealth,I.setSelectedBarrierToBuild),Ze=I.setSelectedTrapToBuild,$e=(I.lastWaveCountDefeated,I.incrementZombiesOnStage,I.setZombiesOnStage),Qe=I.updateWeaponsList,et=z.reducer,tt=Object(p.a)({reducer:{game:et}});tt.subscribe((function(){}));var at=tt,nt=a(1),ot=a(7),it=a.n(ot),rt=at.getState,st=window.TweenLite.to,lt=function(e){return new d.h(d.j.from(rt().game.textures[e]))},ct=function(e){return e.bounds.max.x-e.bounds.min.x},dt=function(e){return e.bounds.max.y-e.bounds.min.y},pt=function(e,t){var a=rt().game.player.composite,n=a.headId,o=a.bodyId,i=a.armId,r=a.gunId,s=t.getKeyValue("world");return"head"===e?nt.Composite.get(s,n,"body"):"body"===e?nt.Composite.get(s,o,"body"):"arm"===e?nt.Composite.get(s,i,"body"):"gun"===e?nt.Composite.get(s,r,"body"):void 0},ut=function(e){var t=e.getKeyValue("world"),a=rt().game.player.composite.bodyId;return nt.Composite.get(t,a,"body")};var ht=a(14),mt=a(22),gt="greater than player x position",yt={group:-1,category:1,mask:1},ft={group:-1,category:2,mask:1},bt={category:1,mask:1},wt=a(17),vt=a(18);function xt(){var e=Object(wt.a)(["\npadding: ","px;\n"]);return xt=function(){return e},e}function Et(){var e=Object(wt.a)(["\nopacity: ","\ncolor: #fff;\nposition: relative;\nwidth: ","px;\nheight: ","px;\nline-height: ","px;\nbackground-color: ",";\nleft: 0; right: 0;\ncursor: pointer;\nmargin: auto;\nborder: 2px solid ",";\ntransform: scale(1.00);\n&:hover {\n  ",";\n  ",";\n  background-color: ",";\n  border: 2px solid ",";\n}\n"]);return Et=function(){return e},e}function St(){var e=Object(wt.a)(["\ntop: ","px;\nfont-size: 1.5em;\ntext-align: center;\nposition: absolute;\nwidth: 100%;\n"]);return St=function(){return e},e}function kt(){var e=Object(wt.a)(["\nleft: 0;\nright: 0;\ntop: 20px;\nwidth: 300px;\nmargin: auto;\ndisplay: block;\nfont-size: 2em;\ntext-align: center;\nposition: absolute;\n"]);return kt=function(){return e},e}function Ct(){var e=Object(wt.a)(["\nheight: ","px;\nwidth: ","px;\nopacity: ",";\nbackground-color: ",";\n"]);return Ct=function(){return e},e}function At(){var e=Object(wt.a)(["\ntop: 0;\nleft: 0;\nright: 0;\nbottom: 0;\nmargin: auto;\ndisplay: block;\nposition: absolute;\nheight: ","px;\nwidth: ","px;\nbackground-color: ",";\n"]);return At=function(){return e},e}var Bt={Container:vt.a.div(At(),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.bgcolor?e.bgcolor:"none"})),Backing:vt.a.div(Ct(),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.opacity?e.opacity:.5}),(function(e){return e.bgcolor?e.bgcolor:"#222"})),MenuTitle:vt.a.div(kt()),MenuButtonContainer:vt.a.div(St(),(function(e){return e["space-top"]?e["space-top"]:80})),MenuButton:vt.a.div(Et(),(function(e){return e.opacity?e.opacity:1}),(function(e){return e.width?e.width:200}),(function(e){return e.height?e.height:60}),(function(e){return e.height?e.height:60}),(function(e){return e.bgcolor?e.bgcolor:"#00589b"}),(function(e){return e.bordercolor?e.bordercolor:"rgba(0,0,0,0)"}),(function(e){return e&&!0===e.cancelTransition?"":"transition: all .35s"}),(function(e){return e&&!0===e.cancelTransition?"":"transform: scale(1.05)"}),(function(e){return e.hovercolor}),(function(e){return e.hoverborder?e.hoverborder:"rgba(0,0,0,0)"})),MenuButtonSpacer:vt.a.div(xt(),(function(e){return e.padding?e.padding:10}))},Kt=a(21),Vt=function(e){var t=at.dispatch,a=window.TweenLite.delayedCall;t(Q(e)),t(Z()),a(.25,(function(){t($())}))},Ot=function(e){var t=at.dispatch,a=window.TweenLite.delayedCall;t(ee(e)),t(Z()),a(.25,(function(){t($())}))};function _t(){var e=Object(wt.a)(["\ncolor: #FFF;\ntext-align: center;\n"]);return _t=function(){return e},e}function Tt(){var e=Object(wt.a)(["\ntop: 0;\nwidth: 30px;\nheight: 30px;\ncolor: darkgreen;\nline-height: 30px;\ntext-align: center;\nposition: absolute;\nbackground-color: #ccc;\nleft: ",";\nright: ",";\ntransform: scale(1.0);\n&:hover {\n  transition: all;\n  transform: scale(1.05);\n  background-color: #fff;\n}\n"]);return Tt=function(){return e},e}function jt(){var e=Object(wt.a)(["\ndisplay: inline-block;\nvertical-align: top;\nmargin-right: 4px;\n"]);return jt=function(){return e},e}var Mt=Bt.Container,Ft=Bt.Backing,Pt=Bt.MenuTitle,Lt=Bt.MenuButtonContainer,Dt=Bt.MenuButton,Rt=Bt.MenuButtonSpacer,zt=vt.a.div(jt()),It=vt.a.div(Tt(),(function(e){return e.left?0:"auto"}),(function(e){return e.right?0:"auto"})),Wt=vt.a.div(_t()),Nt=function(e){return o.a.createElement(Dt,{opacity:e&&e.opacity?e.opacity:1,bgcolor:e&&e.bgcolor?e.bgcolor:"#222",bordercolor:e&&e.bordercolor?e.bordercolor:"#333",hovercolor:e&&e.hovercolor?e.hovercolor:"#333",hoverborder:e&&e.hoverborder?e.hoverborder:"#fff",width:e.width,height:e.height,style:e.style,cancelTransition:!(!e||!e.cancelTransition)&&e.cancelTransition,onClick:function(){e.onClick&&(e.onClick(),window.gameObjects.getKeyValue("button-click-sound").play())},onMouseOver:function(){e.cancelTransition}},e.children)},Ht=function(e){return o.a.createElement(Nt,{width:e.width?e.width:120,height:40,style:{borderRadius:"10px"},bgcolor:"#444",hovercolor:"#189969",onClick:e.onClick},e.arrowOnly?o.a.createElement("span",{style:{fontSize:"18px"}},"\u21d0"):o.a.createElement("span",{style:{fontSize:"18px"}},"\u21d0 Back"))},Ut=function(e){return o.a.createElement("div",{style:{top:0,right:e.right?e.right:"20px",marginTop:e.marginTop?e.marginTop:"-40px",position:"absolute"}},e.children?e.children:o.a.createElement(Ht,{onClick:e.onClick,width:e.width?e.width:120,arrowOnly:!!e.arrowOnly&&e.arrowOnly}))};function Gt(e){var t=e.label,a=e.labelClr,n=e.width,i=e.height,r=e.clickConfirmHandler,s=e.clickCancelHandler;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Mt,{style:{top:"150px"},width:n||500,height:i||300},o.a.createElement(Ft,{width:n||500,height:i||300,bgcolor:"#222",opacity:1,style:{borderRadius:"2px",boxShadow:"5px 5px rgba(0, 0, 0, 0.2)"}}),o.a.createElement(Pt,{style:{fontSize:"1.2em"}},o.a.createElement("span",{style:{color:a}},t)),o.a.createElement(Lt,{"space-top":200},o.a.createElement(Dt,{bgcolor:"#222",bordercolor:"#333",hovercolor:"#333",hoverborder:"red",style:{display:"inline-block",fontSize:".8em",marginRight:"12px",borderRadius:"2px"},onClick:s},"Nope."),o.a.createElement(Dt,{bgcolor:"#222",bordercolor:"#333",hovercolor:"#333",hoverborder:"#189969",style:{display:"inline-block",fontSize:".8em",borderRadius:"2px"},onClick:r},"Confirm"))))}function qt(e){var t=e.type,a=e.toDefaultSubMenu,n=(e.toAmmoSubMenu,e.toStandardMenu,window.gameObjects),i=Object(l.c)(),r=Object(l.d)((function(e){return e.game.player.weapons.ammoCostPerBox})),c=Object(l.d)((function(e){return e.game.player.weapons.ammoCapacity})),d=Object(l.d)((function(e){return e.game.player.credits})),p=o.a.useReducer((function(e,t){switch(t.type){case"INCREASE":return Object(h.a)({},e,Object(u.a)({},t.wepType,e[t.wepType]+t.amount));case"DECREASE":return Object(h.a)({},e,Object(u.a)({},t.wepType,e[t.wepType]-t.amount));case"SET":return Object(h.a)({},e,Object(u.a)({},t.wepType,t.amount));default:return e}}),{"pistol weapon":0,"smg weapon":0,grenades:0,"shotgun weapon":0}),m=Object(s.a)(p,2),g=m[0],y=m[1],f=o.a.useState(0),b=Object(s.a)(f,2),w=b[0],v=b[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(Dt,{cancelTransition:!0,bgcolor:"#28934C",width:100,height:30,style:{borderRadius:"4px",fontWeight:"bold"}},"$".concat(w)),o.a.createElement(Dt,{cancelTransition:!0,width:150,height:30,bgcolor:"#444"},o.a.createElement(It,{onClick:function(){var e=(g[t]-c[t])/c[t]*r[t];g[t]>0&&(y({type:"DECREASE",wepType:t,amount:c[t]}),v(e),window.gameObjects.getKeyValue("button-subtract-sound").play())},left:!0},o.a.createElement("span",{style:{fontWeight:"bold"}},"-")),o.a.createElement(Wt,null,g[t]),o.a.createElement(It,{onClick:function(){var e=(g[t]+c[t])/c[t]*r[t];d>=e?(y({type:"INCREASE",wepType:t,amount:c[t]}),v(e),window.gameObjects.getKeyValue("button-add-sound").play()):window.gameObjects.getKeyValue("button-cancel-sound").play()},right:!0},o.a.createElement("span",{style:{fontWeight:"bold"}},"+"))),o.a.createElement(Dt,{cancelTransition:!0,bgcolor:"rgba(0,0,0,0)",height:30},o.a.createElement("div",{style:{display:"inline-block",marginRight:"4px"}},o.a.createElement(Nt,{onClick:function(){a(),y({type:"SET",wepType:t,amount:0}),v(0),window.gameObjects.getKeyValue("button-cancel-sound").play()},width:80,height:30,hoverborder:"#B00000"},"Cancel")),o.a.createElement("div",{style:{display:"inline-block"}},w>0?o.a.createElement(Nt,{onClick:function(){var e=n.getKeyValue("weapons-ui");Object(l.b)((function(){i(Re(w)),i(ue("grenades"!==t?"".concat(t," ammo"):w>r[t]?t:"a grenade",w)),i(Le(t,g[t]))})),y({type:"SET",wepType:t,amount:0}),"grenades"===t?e.updateGrenadeIcons():(e.select(t),i(Be(t)),e.reload(!0)),v(0),a()},width:100,height:30,hoverborder:"#189969"},"Buy"):null)))}var Yt=function(e){var t=e.type,a=e.toDefaultSubMenu,n=e.subMenuType,i=e.setSubMenuType,r=(e.toStandardMenu,Object(l.d)((function(e){return e.game.player.upgradeTiers}))),s=Object(l.d)((function(e){return e.game.player.upgradeCosts})),c=Object(l.d)((function(e){return e.game.player.credits})),d=Object(l.c)(),p={run:Ie,jump:Ne,reload:We,defense:He,melee:Ue},u=function(e){switch(e){case"run":return"Run Speed";case"jump":return"Jump Height";case"reload":return"Reload Speed";case"defense":return"Defense";case"melee":return"Melee Attack Power"}};return o.a.createElement(o.a.Fragment,null,n.indexOf(" upgrade sub menu")>-1?n===t+" upgrade sub menu"?o.a.createElement(Gt,{label:"Upgrade ".concat(u(t)," to lvl. ").concat(r[t].current+1,"?"),clickConfirmHandler:function(){d(Re(s[t])),d(ue("".concat(u(t)," Boost"),s[t])),d(p[t]()),a()},clickCancelHandler:function(){a()}}):null:o.a.createElement(o.a.Fragment,null,o.a.createElement(Nt,{width:u(t).length>14?340:240,onClick:function(){c>s[t]&&r[t].current<r[t].max?i(t+" upgrade sub menu"):window.gameObjects.getKeyValue("button-cancel-sound").play()}},u(t)," ",r[t].current!==r[t].max?"Lvl.":"",r[t].current!==r[t].max?r[t].current+1:""," - ",o.a.createElement("span",{style:{color:c>s[t]&&r[t].current<r[t].max?"#189969":"red"}},r[t].current<r[t].max?"$".concat(s[t]):"MAXED")),o.a.createElement("br",null)))};function Xt(e){var t=e.type,a=e.setSubMenuType,n=window.gameObjects,i=Object(l.c)(),r=Object(l.d)((function(e){return e.game.player.credits})),c=Object(l.d)((function(e){return e.game.player.modTiers})),d=Object(l.d)((function(e){return e.game.player.modCosts})),p=Object(l.d)((function(e){return e.game.player.weapons.ammoCapacity})),u=function(e){switch(e){case"pistol weapon":return"Pistol";case"smg weapon":return"SMG";case"shotgun weapon":return"SHOTGUN"}},h=u(t),m=function(e,t){switch(e){case"rof":return c[e][t].current===c[e][t].max?"RATE OF FIRE MAXED!":"Upgrade Rate-of-Fire";case"powder":return c[e][t].current===c[e][t].max?"FIREPOWER MAXED!":"Increase Firepower";case"sight":return c[e][t].current===c[e][t].max?"ACCURACY MAXED!":"Upgrade Accuracy";case"mag":return c[e][t].current===c[e][t].max?"AMMO CAP MAXED!":"Increase Ammo Capacity"}},g=o.a.useState(null),y=Object(s.a)(g,2),f=y[0],b=y[1],w=o.a.useState(null),v=Object(s.a)(w,2),x=v[0],E=v[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(zt,{style:{marginLeft:"40px"}},f&&x?o.a.createElement(o.a.Fragment,null,o.a.createElement(Gt,{label:"".concat(u(x)," ").concat(m(f,x)," lvl.").concat(c[f][x].current+1,"?"),labelClr:c[f][x].current===c[f][x].max?"red":"white",clickConfirmHandler:function(){(i(Re(d[f][x])),i(ue(function(e,t){switch(e){case"rof":return"Rate of fire boost for the ".concat(t);case"powder":return"Firepower boost for the ".concat(t);case"sight":return"Accuracy boost for the ".concat(t);case"mag":return"Magazine ammo capacity boost for the ".concat(t)}}(f,x),d[f][x])),i(qe(f,x)),"mag"===f)&&(i(Le(x,p[x])),n.getKeyValue("weapons-ui").updateWeaponMagazines(x));"sight"===f&&i(Xe(x)),b(null),E(null),a("none - default")},clickCancelHandler:function(){b(null),E(null),a("none - default")}})):["rof","powder","sight","mag"].map((function(e,a){return o.a.createElement(o.a.Fragment,{key:a},o.a.createElement(Nt,{onClick:function(){r>=d[e][t]&&c[e][t].current<c[e][t].max?(b(e),E(t)):window.gameObjects.getKeyValue("button-cancel-sound").play()},width:520},h,": ",m(e,t)," ",c[e][t].current===c[e][t].max?"":" - lvl."," ",c[e][t].current<c[e][t].max?c[e][t].current+1:"",c[e][t].current<c[e][t].max?"-":"",o.a.createElement("span",{style:{color:r>=d[e][t]&&c[e][t].current!==c[e][t].max?"#189969":"red"}},"\n                  ".concat(c[e][t].current===c[e][t].max?"":"$".concat(d[e][t])))),o.a.createElement("br",null))}))),f||x?null:o.a.createElement(zt,null,o.a.createElement(Nt,{onClick:function(){a("none - default")},width:80,height:30,hoverborder:"red",style:{marginLeft:"10px"}},"close")))}function Jt(){var e=o.a.useState("standard menu"),t=Object(s.a)(e,2),a=t[0],n=t[1],i=o.a.useState("none - default"),r=Object(s.a)(i,2),c=r[0],d=r[1],p=Object(l.c)(),u=Object(l.d)((function(e){return e.game})),h=Object(l.d)((function(e){return e.game.gameState})),m=Object(l.d)((function(e){return e.game.gameSubState})),g=Object(l.d)((function(e){return e.game.player.credits})),y=window.gameObjects,f=y.getKeyValue("game-width"),b=y.getKeyValue("game-height"),w=y.getKeyValue("screen-ui"),x=y.getKeyValue("player"),E=function(){d("none - default")},k=function(){n("ammo menu")},C=function(){n("standard menu"),d("none - default")},_=function(e){switch(e){case"pistol weapon":d("pistol ammunition submenu");break;case"smg weapon":d("smg ammunition submenu");break;case"shotgun weapon":d("shotgun ammunition submenu");break;case"grenades":d("grenades submenu")}},T=function(e){return{color:u.player.credits>u.consumables.healthkit[e].cost&&u.player.health<100?"#189969":"red"}};return o.a.useEffect((function(){"buy weapons menu"===a&&u.player.weapons.list.indexOf("shotgun weapon")>-1&&u.player.weapons.list.indexOf("smg weapon")>-1&&(p(J(A)),Vt(u.scoreAmounts.achievement),C())}),[u.player.weapons.list,a]),o.a.useEffect((function(){u.player.modTiers.rof["pistol weapon"].current===u.player.modTiers.rof["pistol weapon"].max&&u.player.modTiers.powder["pistol weapon"].current===u.player.modTiers.powder["pistol weapon"].max&&u.player.modTiers.sight["pistol weapon"].current===u.player.modTiers.sight["pistol weapon"].max&&u.player.modTiers.mag["pistol weapon"].current===u.player.modTiers.mag["pistol weapon"].max&&(p(J(B)),Vt(u.scoreAmounts.achievement)),u.player.modTiers.rof["smg weapon"].current===u.player.modTiers.rof["smg weapon"].max&&u.player.modTiers.powder["smg weapon"].current===u.player.modTiers.powder["smg weapon"].max&&u.player.modTiers.sight["smg weapon"].current===u.player.modTiers.sight["smg weapon"].max&&u.player.modTiers.mag["smg weapon"].current===u.player.modTiers.mag["smg weapon"].max&&(p(J(K)),Vt(u.scoreAmounts.achievement)),u.player.modTiers.rof["shotgun weapon"].current===u.player.modTiers.rof["shotgun weapon"].max&&u.player.modTiers.powder["shotgun weapon"].current===u.player.modTiers.powder["shotgun weapon"].max&&u.player.modTiers.sight["shotgun weapon"].current===u.player.modTiers.sight["shotgun weapon"].max&&u.player.modTiers.mag["shotgun weapon"].current===u.player.modTiers.mag["shotgun weapon"].max&&(p(J(V)),Vt(u.scoreAmounts.achievement)),u.achievements[B].owned&&u.achievements[K].owned&&u.achievements[V].owned&&(p(J(O)),Vt(u.scoreAmounts.achievement))}),[u.player.modTiers]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Mt,{width:.75*f,height:.75*b},o.a.createElement(Ft,{width:.75*f,height:.75*b}),o.a.createElement(Pt,null,"Shop"),o.a.createElement(Lt,{width:f},"standard menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(Rt,null,o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Nt,{width:350,onClick:function(){k()}},"Buy Ammo & Grenades"))),o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Nt,{onClick:function(){n("healthkit menu")}},"Buy Health Kits"))),o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Nt,{onClick:function(){n("perks menu")}},"Perks")))),o.a.createElement(Rt,null,o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Nt,{onClick:function(){n("player attributes menu")}},"Upgrade Player"))),o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Nt,{onClick:function(){n("weapon mods menu")}},"Weapon Mods"))),u.player.weapons.list.indexOf("shotgun weapon")>-1&&u.player.weapons.list.indexOf("smg weapon")>-1?null:o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Nt,{onClick:function(){n("buy weapons menu")}},"Buy New Weapons")))),o.a.createElement(Rt,null,o.a.createElement(Ht,{onClick:function(){w.unpause(),p(_e("main",h,S.GAMEPLAY)),p(_e("sub",m,v))}},"Back"))):null,"ammo menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(Rt,null,o.a.createElement(zt,null,o.a.createElement(Rt,null,"pistol ammunition submenu"===c?o.a.createElement(qt,{type:"pistol weapon",toDefaultSubMenu:E,toAmmoSubMenu:k,toStandardMenu:C}):o.a.createElement(Nt,{onClick:function(){_("pistol weapon")}},"Buy Pistol Ammo"))),u.player.weapons.list.indexOf("smg weapon")>-1?o.a.createElement(zt,null,o.a.createElement(Rt,null,"smg ammunition submenu"===c&&u.player.weapons.list.indexOf("smg weapon")>-1?o.a.createElement(qt,{type:"smg weapon",toDefaultSubMenu:E,toAmmoSubMenu:k,toStandardMenu:C}):o.a.createElement(Nt,{onClick:function(){_("smg weapon")}},"Buy SMG Ammo"))):null),o.a.createElement(Rt,null,o.a.createElement(zt,null,o.a.createElement(Rt,null,"grenades submenu"===c?o.a.createElement(qt,{type:"grenades",toDefaultSubMenu:E,toAmmoSubMenu:k,toStandardMenu:C}):o.a.createElement(Nt,{onClick:function(){_("grenades")}},"Buy Grenades"))),u.player.weapons.list.indexOf("shotgun weapon")>-1?o.a.createElement(zt,null,o.a.createElement(Rt,null,"shotgun ammunition submenu"===c&&u.player.weapons.list.indexOf("shotgun weapon")>-1?o.a.createElement(qt,{type:"shotgun weapon",toDefaultSubMenu:E,toAmmoSubMenu:k,toStandardMenu:C}):o.a.createElement(Nt,{onClick:function(){_("shotgun weapon")}},"Buy Shotgun Shells"))):null),o.a.createElement(Rt,null,o.a.createElement(Ht,{onClick:function(){C()}}))):null,"healthkit menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(Rt,null,o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Nt,{width:300,onClick:function(){var e;u.player.health<100?(e=u.player.health+20>100?100:u.player.health+20,x.acceptHealth(e),p(Re(u.consumables.healthkit[20].cost)),p(ue("+20 Healthkit",u.consumables.healthkit[20].cost)),y.getKeyValue("health-pickup-sound").play()):y.getKeyValue("button-cancel-sound").play()}},"+20 Healthkit - ",o.a.createElement("span",{style:T("20")},u.player.health<100?"".concat(u.consumables.healthkit[20].cost):"Health Full")))),o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Nt,{width:300,onClick:function(){var e;u.player.health<100?(e=u.player.health+50>100?100:u.player.health+50,x.acceptHealth(e),p(Re(u.consumables.healthkit[50].cost)),p(ue("+50 Healthkit",u.consumables.healthkit[50].cost)),y.getKeyValue("health-pickup-sound").play()):y.getKeyValue("button-cancel-sound").play()}},"+50 Healthkit - ",o.a.createElement("span",{style:T("50")},u.player.health<100?"".concat(u.consumables.healthkit[50].cost):"Health Full"))))),o.a.createElement(Rt,null,o.a.createElement(Nt,{width:300,onClick:function(){u.player.health<100?(x.acceptHealth(100),p(Re(u.consumables.healthkit.full.cost)),p(ue("Full Healthkit",u.consumables.healthkit.full.cost)),y.getKeyValue("health-pickup-sound").play()):y.getKeyValue("button-cancel-sound").play()}},"Full Healthkit - ",o.a.createElement("span",{style:T("full")},u.player.health<100?"".concat(u.consumables.healthkit.full.cost):"Health Full"))),o.a.createElement(Rt,null,o.a.createElement(Ht,{onClick:function(){C()}},"Back"))):null,"player attributes menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(Rt,null,o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Yt,{type:"run",toDefaultSubMenu:E,toStandardMenu:C,subMenuType:c,setSubMenuType:d}))),o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Yt,{type:"jump",toDefaultSubMenu:E,toStandardMenu:C,subMenuType:c,setSubMenuType:d}))),o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Yt,{type:"reload",toDefaultSubMenu:E,toStandardMenu:C,subMenuType:c,setSubMenuType:d})))),o.a.createElement(Rt,null,o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Yt,{type:"defense",toDefaultSubMenu:E,toStandardMenu:C,subMenuType:c,setSubMenuType:d}))),o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Yt,{type:"melee",toDefaultSubMenu:E,toStandardMenu:C,subMenuType:c,setSubMenuType:d}))),c.indexOf(" upgrade sub menu")>-1?null:o.a.createElement(Rt,null,o.a.createElement(Ht,{onClick:function(){C()}},"Back")))):null,"perks menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{onClick:function(){n("standard menu")},style:{top:0,right:"20px",marginTop:"-40px",position:"absolute"}},o.a.createElement(Ht,{width:50,arrowOnly:!0})),o.a.createElement(Rt,null,u.player.perks.magnetism.owned?null:o.a.createElement(zt,null,o.a.createElement(Rt,{"data-tip":!0,"data-for":"increase-magnetism"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.magnetism.cost?(p(Re(u.player.perks.magnetism.cost)),p(pe(1200,4)),p(ue("Magnetism perk",u.player.perks.magnetism.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Increase Magnetism",o.a.createElement("span",{style:{color:g>=u.player.perks.magnetism.cost?"green":"red"}},"\xa0$",u.player.perks.magnetism.cost))),o.a.createElement(Kt.a,{id:"increase-magnetism",type:"dark"},o.a.createElement("span",null,"Will increase the effect of items being drawn to you for easy pick up"))),u.player.perks.magDmg.owned?null:o.a.createElement(zt,null,o.a.createElement(Rt,{"data-tip":!0,"data-for":"mag-damage"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.magDmg.cost?(p(Re(u.player.perks.magDmg.cost)),p(de()),p(ue("Mag Damage perk",u.player.perks.magDmg.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Magazine Damage",o.a.createElement("span",{style:{color:g>=u.player.perks.magDmg.cost?"green":"red"}},"\xa0$",u.player.perks.magDmg.cost))),o.a.createElement(Kt.a,{id:"mag-damage",type:"dark"},o.a.createElement("span",null,"Ejected magazines will damage enemies"))),u.player.perks.lastBullet.owned?null:o.a.createElement(zt,null,o.a.createElement(Rt,{"data-tip":!0,"data-for":"last-bullet"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.lastBullet.cost?(p(Re(u.player.perks.lastBullet.cost)),p(ce()),p(ue("Last Bullet Extra Damage perk",u.player.perks.lastBullet.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Last Round",o.a.createElement("span",{style:{color:g>=u.player.perks.lastBullet.cost?"green":"red"}},"\xa0$",u.player.perks.lastBullet.cost))),o.a.createElement(Kt.a,{id:"last-bullet",type:"dark"},o.a.createElement("span",null,"Last bullet fired will cause greater damage to enemies")))),o.a.createElement(Rt,null,u.player.perks.creditDropper.owned?null:o.a.createElement(zt,null,o.a.createElement(Rt,{"data-tip":!0,"data-for":"credit-dropper"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.creditDropper.cost?(p(Re(u.player.perks.creditDropper.cost)),p(le()),p(ue("Credit Dropper perk",u.player.perks.creditDropper.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Credit Dropper",o.a.createElement("span",{style:{color:g>=u.player.perks.creditDropper.cost?"green":"red"}},"\xa0$",u.player.perks.creditDropper.cost))),o.a.createElement(Kt.a,{id:"credit-dropper",type:"dark"},o.a.createElement("span",null,"Enemies will drop more credits"))),u.player.perks.ammoDropper.owned?null:o.a.createElement(zt,null,o.a.createElement(Rt,{"data-tip":!0,"data-for":"ammo-dropper"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.ammoDropper.cost?(p(Re(u.player.perks.ammoDropper.cost)),p(se()),p(ue("Ammo Dropper perk",u.player.perks.ammoDropper.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Ammo Dropper",o.a.createElement("span",{style:{color:g>=u.player.perks.ammoDropper.cost?"green":"red"}},"\xa0$",u.player.perks.ammoDropper.cost))),o.a.createElement(Kt.a,{id:"ammo-dropper",type:"dark"},o.a.createElement("span",null,"Enemies will now drop ammunition"))),u.player.perks.healthDropper.owned?null:o.a.createElement(zt,null,o.a.createElement(Rt,{"data-tip":!0,"data-for":"health-dropper"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.healthDropper.cost?(p(Re(u.player.perks.healthDropper.cost)),p(re()),p(ue("Health Dropper perk",u.player.perks.healthDropper.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Health Dropper",o.a.createElement("span",{style:{color:g>=u.player.perks.healthDropper.cost?"green":"red"}},"\xa0$",u.player.perks.healthDropper.cost))),o.a.createElement(Kt.a,{id:"health-dropper",type:"dark"},o.a.createElement("span",null,"Enemies will now drop small health kits")))),o.a.createElement(Rt,null,u.player.perks.quickTurret.owned?null:o.a.createElement(zt,null,o.a.createElement(Rt,{"data-tip":!0,"data-for":"quick-turret"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.quickTurret.cost?(p(Re(u.player.perks.quickTurret.cost)),p(ie()),p(ue("Turret Upgrade perk",u.player.perks.quickTurret.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Quick Turrets",o.a.createElement("span",{style:{color:g>=u.player.perks.quickTurret.cost?"green":"red"}},"\xa0$",u.player.perks.quickTurret.cost))),o.a.createElement(Kt.a,{id:"quick-turret",type:"dark"},o.a.createElement("span",null,"Any placed machine gun turrets will now have less delay between fired shots and slightly more range"))),u.player.perks.barrierPlus.owned?null:o.a.createElement(zt,null,o.a.createElement(Rt,{"data-tip":!0,"data-for":"barrier-plus"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.barrierPlus.cost?(p(Re(u.player.perks.barrierPlus.cost)),p(oe()),p(ue("Barrier Plus+ perk",u.player.perks.barrierPlus.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Barrier Plus",o.a.createElement("span",{style:{color:g>=u.player.perks.barrierPlus.cost?"green":"red"}},"\xa0$",u.player.perks.barrierPlus.cost))),o.a.createElement(Kt.a,{id:"barrier-plus",type:"dark"},o.a.createElement("span",null,"Placed barriers will now have increased strength to ward of oncoming enemies"))),u.player.perks.cluck.owned?null:o.a.createElement(zt,null,o.a.createElement(Rt,{"data-tip":!0,"data-for":"big-cluster"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.cluck.cost?(p(Re(u.player.perks.cluck.cost)),p(ne()),p(ue("Fuster Cluck perk",u.player.perks.cluck.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Fuster Cluck",o.a.createElement("span",{style:{color:g>=u.player.perks.cluck.cost?"green":"red"}},"\xa0$",u.player.perks.cluck.cost))),o.a.createElement(Kt.a,{id:"big-cluster",type:"dark"},o.a.createElement("span",null,"Cluster bombs will now expel more explosives"))))):null,"buy weapons menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(Rt,null,u.player.weapons.list.indexOf("smg weapon")<0?o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Nt,{width:300,onClick:function(){g>=u.player.weapons.buyWeapons["smg weapon"]?Object(l.b)((function(){p(Re(u.player.weapons.buyWeapons["smg weapon"])),p(ue("Submachine Gun",u.player.weapons.buyWeapons["smg weapon"])),p(Qe("smg weapon"))})):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Buy Submachine Gun: ",o.a.createElement("span",{style:{color:g<=u.player.weapons.buyWeapons["smg weapon"]?"red":"green"}},"$",u.player.weapons.buyWeapons["smg weapon"])))):null,u.player.weapons.list.indexOf("shotgun weapon")<0?o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Nt,{width:300,onClick:function(){g>=u.player.weapons.buyWeapons["shotgun weapon"]?Object(l.b)((function(){p(Re(u.player.weapons.buyWeapons["shotgun weapon"])),p(ue("Shotgun",u.player.weapons.buyWeapons["shotgun weapon"])),p(Qe("shotgun weapon"))})):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Buy Shotgun: ",o.a.createElement("span",{style:{color:g<=u.player.weapons.buyWeapons["shotgun weapon"]?"red":"green"}},"$",u.player.weapons.buyWeapons["shotgun weapon"])))):null),o.a.createElement(Rt,null,o.a.createElement(Ht,{onClick:function(){C()}}))):null,"weapon mods menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(Rt,{style:{marginTop:"-15px"}},"pistol mods submenu"===c?o.a.createElement(zt,null,o.a.createElement(Xt,{type:"pistol weapon",setSubMenuType:d})):null,"smg mods submenu"===c?o.a.createElement(zt,null,o.a.createElement(Xt,{type:"smg weapon",setSubMenuType:d})):null,"shotgun mods submenu"===c?o.a.createElement(zt,null,o.a.createElement(Xt,{type:"shotgun weapon",setSubMenuType:d})):null,"none - default"===c?o.a.createElement(o.a.Fragment,null,o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Nt,{onClick:function(){d("pistol mods submenu")}},"Pistol Mods"))),u.player.weapons.list.indexOf("smg weapon")>-1?o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Nt,{onClick:function(){d("smg mods submenu")}},"SMG Mods"))):null,u.player.weapons.list.indexOf("shotgun weapon")>-1?o.a.createElement(zt,null,o.a.createElement(Rt,null,o.a.createElement(Nt,{onClick:function(){d("shotgun mods submenu")}},"Shotgun Mods"))):null,o.a.createElement(Rt,{style:{marginTop:"40px"}},o.a.createElement(Ht,{onClick:C},"Back"))):null)):null)))}var Zt=function(e){var t=e.backBtnFn,a=window.gameObjects,n=Object(l.d)((function(e){return e})),i=Object.keys(n.game.achievements);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Bt.Container,{width:a?.75*a.getKeyValue("game-width"):900,height:a?.75*a.getKeyValue("game-height"):412.5},o.a.createElement(Bt.Backing,{width:a?.75*a.getKeyValue("game-width"):900,height:a?.75*a.getKeyValue("game-height"):412.5}),o.a.createElement(Bt.MenuTitle,null,"Achievements"),o.a.createElement(Bt.MenuButtonContainer,null,i.map((function(e){if(n.game.achievements[e].owned)return o.a.createElement(o.a.Fragment,{key:e},o.a.createElement(zt,null,o.a.createElement(Bt.MenuButtonSpacer,{"data-tip":!0,"data-for":e+"-description"},o.a.createElement(Nt,null,e))),o.a.createElement(Kt.a,{id:e+"-description"},o.a.createElement("span",null,"Earned by: ",n.game.achievements[e].description)))})),o.a.createElement(Ut,{marginTop:"-60px",onClick:t}))))},$t=a(20),Qt=a(39),ea=a(64),ta=at.getState,aa=at.dispatch,na=window.TweenLite,oa=na.to,ia=na.from;function ra(){var e,t=this,a=window.gameObjects,n=a.getKeyValue("game-pixi-container"),o=a.getKeyValue("game-width"),i=a.getKeyValue("game-height"),r=lt("weapon-ui-icon-pistol"),s=lt("weapon-ui-icon-smg"),l=lt("weapon-ui-icon-shotgun"),c=[],p=(new ea.a({distance:3,alpha:1}),new ea.a({distance:1,alpha:2}),new d.f);p.beginFill(4345921),p.drawRect(0,0,120,90),p.alpha=.65,p.position.x=o-p.width-20,p.position.y=i-p.height-20,n.addChild(p),r.width=r.width/2,r.height=r.height/2,c.push(r),s.width=s.width/2,s.height=s.height/2,c.push(s),l.width=l.width/2,l.height=l.height/2,c.push(l),c.forEach((function(e){e.position.x=o-(e.width+20),e.position.y=i-(e.height+10),e.alpha=0,n.addChild(e)})),this.keepOnTop=function(){n.addChild(p),c.forEach((function(e){n.addChild(e)})),u["pistol weapon"].concat(u["smg weapon"]).concat(u["shotgun weapon"]).forEach((function(e){n.addChild(e)})),t.grenades.forEach((function(e){n.addChild(e)})),t.shaking&&!t.reloading&&n.addChild(t.emptyText)},setInterval(this.keepOnTop,1e3);var u={"pistol weapon":null,"smg weapon":null,"shotgun weapon":null},h=new d.f;h.beginFill(16777215),h.drawRect(r.position.x,r.position.y,r.width,r.height),n.addChild(h),window.gameObjects.getKeyValue("bullet-shell-bevel-ui")||window.gameObjects.setKeyValue("bullet-shell-bevel-ui",new $t.a({lightAlpha:.5,shadowAlpha:.5,thickness:.5}));var m=window.gameObjects.getKeyValue("bullet-shell-bevel-ui");this.checkFilters=function(){ta().game.filterEffects?(u["pistol weapon"].forEach((function(e){e.filters=[m]})),u["shotgun weapon"].forEach((function(e){e.filters=[m]})),t.grenades&&t.gbevel&&t.gnoise&&t.grenades.forEach((function(e){e.filters=[t.gbevel,t.gnoise]}))):(u["pistol weapon"].forEach((function(e){e.filters=[]})),u["shotgun weapon"].forEach((function(e){e.filters=[]})),t.grenades&&t.grenades.forEach((function(e){e.filters=[]})))};var g={"pistol weapon":function(){u["pistol weapon"]=u["pistol weapon"].map((function(e,t){var a=new d.f;return a.lineStyle(1,5656365),a.beginFill(12559650),a.drawRect(0,0,4,8),a.filters=ta().game.filterEffects?[m]:[],a.alpha=0,a.position.x=o-27-r.width/u["pistol weapon"].length*t,a.position.y=r.position.y+r.height-22,n.addChild(a),a.mask=h,a}))},"smg weapon":function(){u["smg weapon"]=u["smg weapon"].map((function(e,t){var a=new d.f;return a.lineStyle(1,5656365),a.beginFill(13549954),a.drawRect(0,0,2,8),a.alpha=0,a.position.x=o-24-s.width/u["smg weapon"].length*t,a.position.y=s.position.y+s.height-22,n.addChild(a),a.mask=h,a}))},"shotgun weapon":function(){u["shotgun weapon"]=u["shotgun weapon"].map((function(e,t){var a=new d.f;return a.lineStyle(1,4068115),a.beginFill(11534336),a.drawRect(0,0,4,8),a.beginFill(12363845),a.drawRect(0,8,4,3),a.filters=ta().game.filterEffects?[m]:[],a.alpha=0,a.position.x=o-32-l.width/u["shotgun weapon"].length*t,a.position.y=l.position.y+l.height-26,n.addChild(a),a.mask=h,a}))}},y={"pistol weapon":r,"smg weapon":s,"shotgun weapon":l};this.updateMagazine=function(e){var t=ta().game.player.weapons.ammoCapacity;u[e]&&(u[e].forEach((function(e){e.destroy()})),u[e]=null),u[e]=new Array(t[e]).fill(1),g[e]()},this.updateMagazine("pistol weapon"),this.updateMagazine("smg weapon"),this.updateMagazine("shotgun weapon"),e=[u["pistol weapon"],u["smg weapon"],u["shotgun weapon"]],this.swapSwap=function(e){var a=ta().game.player.weapons,n=a.list,o=a.equipped;f[e]=0;var i=n.indexOf(e);i>-1&&t.select(n[i+1]?n[i+1]:n[0]),window.TweenLite.delayedCall(.05,(function(){t.select(o)}))},this.updateWeaponMagazines=function(a){var o=ta().game.player.weapons.list;e.forEach((function(e){e.forEach((function(e){n.removeChild(e)}))})),o.forEach((function(e){t.updateMagazine(e)})),e=[u["pistol weapon"],u["smg weapon"],u["shotgun weapon"]],t.reload(!0),aa(Be(a)),t.swapSwap(a)};var f={"pistol weapon":0,"smg weapon":0,"shotgun weapon":0},b={"pistol weapon":!1,"smg weapon":!1,"shotgun weapon":!1};this.checkEmpty=function(e){return b[e]};var w=function(e,a,n){oa(e,.1,{x:a+10,onComplete:function(){oa(e,.1,{x:a-10,onComplete:function(){oa(e,.1,{x:a+5,onComplete:function(){oa(e,.1,{x:a-5,onComplete:function(){oa(e,.1,{x:a+3,onComplete:function(){oa(e,.1,{x:a-2,onComplete:function(){oa(e,.1,{x:a+1,onComplete:function(){oa(e,.1,{x:a,onComplete:function(){t.shaking=!1,n()}})}})}})}})}})}})}})}})};this.textForEmptyShake="RELOAD",this.changeTextForEmptyShake=function(e){t.textForEmptyShake=e,t.emptyText.text=e},this.emptyText=new d.i(this.textForEmptyShake,{fill:11534336,fontSize:"15px",fontWeight:"bold"}),this.emptyText.pivot.x=.5*this.emptyText.width,this.emptyText.pivot.y=.5*this.emptyText.height,this.emptyText.position.x=p.position.x+.5*p.width,this.emptyText.position.y=p.position.y+.8*p.height,this.removeEmptyText=function(){n.removeChild(t.emptyText)},this.shaking=!1,this.emptyMagShake=function(){n.addChild(t.emptyText),t.shaking||(t.shaking=!0,c.forEach((function(e){var a=e.position.x;w(e,a,t.removeEmptyText)})),w(p,p.position.x,t.removeEmptyText))},this.reloading=!1,this.reload=function(e){t.reloading&&!e||function(){var a=ta().game.player.weapons,n=a.reloadAnimationFrames,i=a.equipped,r=a.totalAmmo;if(t.removeEmptyText(),0!==f[i]&&0!==r[i]||e){e&&(f[i]=0),t.reloading=!0;var s=r[i]<u[i].length;u[i].forEach((function(e,t){e.alpha=0}));for(var l=function(a,s){var l=u[i][a];l.alpha=1,ia(l,n[i]/60,{x:o-l.width*a,onComplete:function(a){a===s-1&&(f[i]=0,b[i]=!1,t.lastBulletByWepType[i]=!1,e&&(t.reloading=!1)),0===r[i]&&(t.reloading=!1)},onCompleteParams:[a]})},c=0,d=s?r[i]:u[i].length;c<d;++c)l(c,d)}}()},this.select=function(t){var a=ta().game.player.weapons,n=a.totalAmmo,o=a.equipped;c.forEach((function(e){e.alpha=0})),e.forEach((function(e){e.forEach((function(e){e&&e.hasOwnProperty("alpha")&&(e.alpha=0)}))})),y[t||o].alpha=1;var i=n[t||o]<u[t||o].length;if(0!==n[t||o]){var r=i?n[t||o]:u[t||o].length-f[t||o],s=i?u[t||o].length-n[t||o]:0;i&&(f[t||o]=s);for(var l=0;l<r;++l)u[t||o][u[t||o].length-1-l].alpha=1}b[o]&&u[o].forEach((function(e){t||(e.alpha=0)}))},this.lastBulletByWepType={"pistol weapon":!1,"smg weapon":!1,"shotgun weapon":!1},this.fireBullet=function(e){u[e][f[e]]&&(u[e][f[e]].alpha=0,f[e]++,aa(Pe(e)),u[e].length===f[e]&&(t.lastBulletByWepType[e]=!0),u[e].length===f[e]&&(b[e]=!0))};var v=function(){t.gbevel=new $t.a,t.gnoise=new Qt.a,t.gbevel.shadowAlpha=.45,t.gbevel.lightAlpha=.35,t.gbevel.thickness=5,t.gbevel.shadowColor=0,t.gbevel.lightColor=2133060,t.gnoise.noise=.1,t.gnoise.seed=.5;var e=new d.f;return e.lineStyle(1,0),e.beginFill(2049836),e.drawCircle(0,0,6),e.filters=ta().game.filterEffects?[t.gbevel,t.gnoise]:[],n.addChild(e),e};return this.grenades=[],this.updateGrenadeIcons=function(){t.grenades&&t.grenades.forEach((function(e){e.destroy()})),t.grenades=[];for(var e=ta().game.player.weapons.totalAmmo.grenades,a=0;a<e;++a){var n=v();t.grenades.push(n)}t.grenades.forEach((function(e,t){e.position.x=ta().game.width-25-1.5*e.width*t,e.position.y=ta().game.height-110-e.height,ia(e,.1*t,{y:e.position.y-10,alpha:0})}))},this.updateGrenadeIcons(),this}var sa=function(){var e=window.gameObjects,t=ta().game.gameState;if(e){var a=e.getKeyValue("weapons-ui");!a||a.reloading&&t!==S.SHOP_MENU||(a.select(),e=null)}},la=Bt.Container,ca=Bt.Backing,da=Bt.MenuTitle,pa=Bt.MenuButtonContainer,ua=Bt.MenuButtonSpacer,ha=function(){for(var e=window.gameObjects.getKeyValue("screen-ui"),t=window.gameObjects.getKeyValue("player"),a=window.gameObjects.getKeyValue("zombies");a.length>0;)a.forEach((function(e){e.kill(null,!0)}));window.gameObjects.setKeyValue("zombies",[]),e.unpause(),t.dead&&e.respawn()},ma=function(){var e=at.dispatch;ha(),Object(l.b)((function(){e($e(0)),e(Me(null)),e(_e("sub",at.getState().game.gameSubState,m)),e(_e("main",at.getState().game.gameState,S.MAIN_MENU))}))},ga=function(e){var t=e.bgcolor,a=e.bordercolor,n=e.hoverborder,i=e.hovercolor,r=e.width,s=e.height,l=e.children;return o.a.createElement(Nt,{onMouseOver:null,width:r||"200px",height:s||"60px",hovercolor:i||"#222",hoverborder:n||"#333",bordercolor:a||"#333",bgcolor:t||"#222",cancelTransition:!0},l)},ya=function(e){var t=e.label,a=e.stat;return o.a.createElement(ua,{padding:1},o.a.createElement(zt,null,o.a.createElement(ga,{width:200,height:35,bgcolor:"rgba(0, 0, 0, 0.75)",hovercolor:"rgba(0, 0, 0, 0.75)",bordercolor:"rgba(0, 0, 0, 0)",hoverborder:"rgba(0, 0, 0, 0)"},t)),o.a.createElement(zt,null,o.a.createElement(ga,{width:400,height:35,bgcolor:"rgba(0, 0, 0, 0.4)",hovercolor:"rgba(0, 0, 0, 0.5)",bordercolor:"rgba(0, 0, 0, 0)",hoverborder:"rgba(0, 0, 0, 0)"},a)))};function fa(e){var t=window.gameObjects,a=Object(l.c)(),n=Object(l.d)((function(e){return e.game})),i=Object(l.d)((function(e){return e.game.gameState})),r=Object(l.d)((function(e){return e.game.gameSubState})),c=Object(l.d)((function(e){return e.game.stats})),d=t.getKeyValue("game-width"),p=t.getKeyValue("game-height"),u="Default",h="achievements",m="Controls",y="Options",f="Stats",b=function(){E(u)},w=o.a.useState(u),v=Object(s.a)(w,2),x=v[0],E=v[1],k=Object(l.d)((function(e){return e.game.filterEffects})),C=Object(l.d)((function(e){return e.game.displayZombieHealth}));return o.a.createElement(o.a.Fragment,null,t?o.a.createElement(la,{style:{top:e.margintop?"100px":0},width:.75*d,height:e["shop-query-visibility"]?.5*p:.75*p},e.hidebg?null:o.a.createElement(o.a.Fragment,null,o.a.createElement(ca,{bgcolor:"#222",opacity:i===S.MAIN_MENU?.35:.5,width:.75*d,height:e["shop-query-visibility"]?.5*p:.75*p})),x===u?o.a.createElement(o.a.Fragment,null,e.hidetitle?null:o.a.createElement(da,null,"Pause Menu"),o.a.createElement(pa,{width:d||0},o.a.createElement(ua,{padding:i===S.PAUSE?4:6},e.playbtn?o.a.createElement(Nt,{height:40,onClick:function(){a(_e("main",i,S.GAMEPLAY)),a(_e("sub",r,g)),setTimeout((function(){var e=window.gameObjects.getKeyValue("weapons-ui");e.updateGrenadeIcons(),sa(),e.updateWeaponMagazines(n.player.weapons.equipped),window.gameObjects.getKeyValue("screen-ui").unpause()}),100)}},"Play Game"):o.a.createElement(Nt,{height:40,onClick:function(){i===S.PAUSE&&window.gameObjects.getKeyValue("screen-ui").togglePause()}},"Resume Game")),i!==S.MAIN_MENU?o.a.createElement(ua,{padding:4},o.a.createElement(Nt,{height:40,onClick:ma},"Main Menu")):o.a.createElement(ua,{padding:2},o.a.createElement(Nt,{height:40,onClick:function(){a(_e("main",S.MAIN_MENU,S.SCORES_VIEW))}},"Scoreboard")),o.a.createElement(ua,{padding:4},o.a.createElement(Nt,{height:40,onClick:function(){E(m)}},"View Controls")),o.a.createElement(ua,{padding:4},o.a.createElement(Nt,{height:40,onClick:function(){E(y)}},"Options")),o.a.createElement(ua,{padding:i===S.PAUSE?1:4},o.a.createElement(Nt,{height:40,onClick:function(){E(f)}},"Stats")),o.a.createElement(ua,{padding:i===S.PAUSE?1:4},o.a.createElement(Nt,{height:40,onClick:function(){E(h)}},"Achievements")))):null,x===h?o.a.createElement(Zt,{backBtnFn:b}):null,x===m?o.a.createElement(o.a.Fragment,null,o.a.createElement(da,null,"Controls"),o.a.createElement(pa,{width:d},o.a.createElement(Ut,{marginTop:"-60px",onClick:b}),o.a.createElement(zt,null,o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Jump: W"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Run Left: A"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Run Right: D"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Melee Weapon Bash: F"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Aim: Mouse"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Shoot: Left Mouse")),o.a.createElement(zt,null,o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Pause Game: P / Esc"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Charge Grenade Throw: Hold G / Right Mouse"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Change Weapon: Space / Mouse Wheel"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Turn Turret: L/R Arrow (while placing)"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Detonate remote mines: Numpad  1 - 9")))):null,x===y?o.a.createElement(o.a.Fragment,null,o.a.createElement(da,null,"Options"),o.a.createElement(pa,null,o.a.createElement(Ut,{marginTop:"-60px",onClick:b}),o.a.createElement(ua,null,o.a.createElement(zt,null,o.a.createElement(ua,{padding:4},o.a.createElement(ga,{width:240,height:60},"Effect Filters?"))),o.a.createElement(zt,null,o.a.createElement(ua,{padding:4,"data-tip":!0,"data-for":"effects-filter"},o.a.createElement(Nt,{width:100,hoverborder:k?"white":"red",onClick:function(){a(ae(!k)),window.gameObjects.getKeyValue("zombies").forEach((function(e){return e.checkFilters()}));var e=window.gameObjects.getKeyValue("ammo-drops-by-type");e["smg weapon"].concat(e["pistol weapon"]).concat(e["shotgun weapon"]).forEach((function(e){return e.checkFilters()})),window.gameObjects.getKeyValue("currency-drops").forEach((function(e){return e.checkFilters()})),window.gameObjects.getKeyValue("health-drops").forEach((function(e){return e.checkFilters()})),window.gameObjects.getKeyValue("player").checkFilters(),window.gameObjects.getKeyValue("weapons-ui").checkFilters()}},o.a.createElement("span",{style:{color:k?"white":"red"}},k?"On":"Off"))),o.a.createElement(Kt.a,{id:"effects-filter"},o.a.createElement("span",null,"Adds filter effects like glow and motion blur to animations. Turning off could improve performance.")))),o.a.createElement(ua,null,o.a.createElement(zt,null,o.a.createElement(ua,{padding:4},o.a.createElement(ga,{width:240,height:60},"Display Zombie Health?"))),o.a.createElement(zt,null,o.a.createElement(ua,{padding:4,"data-tip":!0,"data-for":"display-zombie-health"},o.a.createElement(Nt,{width:100,hoverborder:C?"white":"red",onClick:function(){a(te(!C)),window.gameObjects.getKeyValue("zombies").forEach((function(e){e.displayHealth(!C)}))}},o.a.createElement("span",{style:{color:C?"white":"red"}},C?"On":"Off"))),o.a.createElement(Kt.a,{id:"display-zombie-health"},o.a.createElement("span",null,"Displays a yellow text box above each enemy zombie")))))):null,x===f?o.a.createElement(o.a.Fragment,null,o.a.createElement(da,null,"Stats"),o.a.createElement(pa,null,o.a.createElement(Ut,{marginTop:"-60px",onClick:b}),o.a.createElement(ya,{label:"Shots Fired",stat:c.bulletsFired}),o.a.createElement(ya,{label:"Mags Changed",stat:c.timesReloaded}),o.a.createElement(ya,{label:"Grenades Thrown",stat:c.grenadesThrown}),o.a.createElement(ya,{label:"Zombies Killed",stat:c.zombiesKilled}),o.a.createElement(ya,{label:"Deaths",stat:c.timesKilled}))):null):null)}var ba=at.getState,wa=at.dispatch,va=function(e,t,a,n){d.c.from("Arial",{fill:t,fontSize:40,fontWeight:"bold"});var o=window,i=o.gameObjects,r=o.TweenLite,s=r.from,l=r.to,c=o.Power1,p=i.getKeyValue("game-pixi-container"),u=i.getKeyValue("game-width"),h=i.getKeyValue("game-height"),m=new d.d(e,{font:"Arial"});m.pivot.x=m.width/2,m.pivot.y=m.height/2,m.position.x=u/2,m.position.y=h/2,p.addChild(m),s(m,a,{x:-100,alpha:0,onStart:function(){wa(Fe(!0))},onComplete:function(){l(m,a,{delay:n,x:1.5*u,ease:c.easeIn,onComplete:function(){wa(Fe(!1)),p.removeChild(m)}})}})},xa=function(e,t,a,n,o){var i=window,r=i.gameObjects,s=i.TweenLite,l=s.to,c=s.set,p=r.getKeyValue("game-pixi-container"),u=r.getKeyValue("text-messages"),h=r.getKeyValue("player").body,m=new d.i(e,{fill:t,fontSize:o||13,fontWeight:"bold"});m.pivot.x=.5*m.width,m.pivot.y=.5*m.height,p.addChild(m);var g=ba().game.player.position,y=g.y-.65*dt(h);u.push(m),c(m,{x:g.x,y:y-20*u.length}),l(m,a,{x:g.x,y:y-20*u.length-20,onComplete:function(){l(m,a,{delay:n,alpha:0,onComplete:function(){m.destroy();var e=u.indexOf(m);e>-1&&u.splice(e,1)}})}})},Ea=window.TweenLite,Sa=Ea.delayedCall,ka=Ea.to;function Ca(e,t,a){var n=this,o=e.position_x,i=e.position_y,r=t.force_x,s=t.force_y,l=window.gameObjects,c=l.getKeyValue("gibs"),p=l.getKeyValue("world"),u=l.getKeyValue("game-pixi-container"),h=nt.Bodies.circle(o,i,5,{collisionFilter:{category:2,mask:1}});h.label="gib",nt.World.add(p,h);var m=l.getKeyValue("player-parts-sheet"),g=new d.h(m.textures[function(){var e=["gib.png","gib2.png","gib3.png","gib4.png"];return e[Math.floor(Math.random()*e.length)]}()]);return u.addChild(g),c.push(this),g.pivot.x=.5*g.width,g.pivot.y=.475*g.height,nt.Body.applyForce(h,{x:o,y:i},{x:it.a.float(.25*r,r),y:it.a.float(.25*s,s)}),this.animate=function(e){var t=e(h),a=t.x,n=t.y,o=t.rotation;g.position={x:a,y:n},g.rotation=o},this.destroy=function(){g&&g.destroy(),h&&nt.World.remove(p,h);var e=c.indexOf(n);e>-1&&c.splice(e,1),p=null,h=null,u=null,c=null,l=null},Sa(a,(function(){ka(g,2,{alpha:0,onComplete:function(){n.destroy()}})})),this}function Aa(e,t,a,n){for(var o=t.x,i=t.y,r=a=a||{force_x:0,force_y:0},s=r.x,l=r.y,c=0;c<e;++c)new Ca({position_x:o,position_y:i},{force_x:s,force_y:l},n)}function Ba(e,t,a){var n=this,o=e.x,i=e.y,r=window.gameObjects,s=r.getKeyValue("world"),l=r.getKeyValue("game-pixi-container"),c=40,p=60,u=25,h=25,m=15,g=30,y=15,f=50,b=15,w=20,v=10,x=7,E=10,S=14,k=10,C=10,A=nt.Bodies.rectangle(o,i,c,p,{collisionFilter:ft}),B=nt.Bodies.rectangle(o,i,u,h,{}),K=nt.Bodies.rectangle(o,i,u,h,{}),V=nt.Bodies.rectangle(o,i,m,g,{collisionFilter:yt}),O=nt.Bodies.rectangle(o,i,m,g,{collisionFilter:yt}),_=nt.Bodies.rectangle(o,i,b,w,{}),T=nt.Bodies.rectangle(o,i,m,g,{}),j=nt.Bodies.rectangle(o,i,m,g,{}),M=nt.Bodies.rectangle(o,i,b,w,{}),F=nt.Bodies.rectangle(o,i,y,f,{collisionFilter:yt}),P=nt.Bodies.rectangle(o,i,y,f,{collisionFilter:yt}),L=nt.Bodies.rectangle(o,i,y,f,{}),D=nt.Bodies.rectangle(o,i,y,f,{}),R=nt.Bodies.rectangle(o,i,E,S,{}),z=nt.Bodies.rectangle(o,i,v,x,{}),I=nt.Constraint.create({bodyA:A,bodyB:B,pointA:{x:0,y:-p/2},pointB:{x:0,y:h/2},length:1}),W=nt.Constraint.create({bodyA:A,bodyB:V,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),N=nt.Constraint.create({bodyA:A,bodyB:O,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),H=nt.Constraint.create({bodyA:V,bodyB:T,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),U=nt.Constraint.create({bodyA:O,bodyB:j,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),G=nt.Constraint.create({bodyA:T,bodyB:_,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),q=nt.Constraint.create({bodyA:j,bodyB:M,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),Y=nt.Constraint.create({bodyA:A,bodyB:F,pointA:{x:0,y:p/2},pointB:{x:0,y:-f/2},length:2}),X=nt.Constraint.create({bodyA:A,bodyB:P,pointA:{x:0,y:p/2},pointB:{x:0,y:-f/2},length:1}),J=nt.Constraint.create({bodyA:F,bodyB:L,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),Z=nt.Constraint.create({bodyA:P,bodyB:D,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:2}),$=nt.Constraint.create({bodyA:L,bodyB:R,pointA:{x:0,y:f/2},pointB:{x:0,y:-S/2},length:1}),Q=nt.Constraint.create({bodyA:D,bodyB:z,pointA:{x:0,y:f/2},pointB:{x:0,y:-x/2},length:1}),ee=[],te=function(){for(var e=[],t=0;t<6;++t){var a=nt.Bodies.rectangle(A.position.x,A.position.y,k,C);e.push(a)}return{spineLinks:e,spineConstraints:[nt.Constraint.create({bodyA:e[0],bodyB:e[1],pointA:{x:0,y:C/2},pointB:{x:0,y:-C/2},length:4}),nt.Constraint.create({bodyA:e[1],bodyB:e[2],pointA:{x:0,y:C/2},pointB:{x:0,y:-C/2},length:4}),nt.Constraint.create({bodyA:e[2],bodyB:e[3],pointA:{x:0,y:C/2},pointB:{x:0,y:-C/2},length:4}),nt.Constraint.create({bodyA:e[3],bodyB:e[4],pointA:{x:0,y:C/2},pointB:{x:0,y:-C/2},length:4}),nt.Constraint.create({bodyA:e[4],bodyB:e[5],pointA:{x:0,y:C/2},pointB:{x:0,y:-C/2},length:4})]}}(),ae=te.spineLinks,ne=te.spineConstraints,oe=nt.Constraint.create({bodyA:B,bodyB:ae[0],pointA:{x:0,y:h/2},pointB:{x:0,y:-C/2},length:10});this.composite=nt.Composite.create(),nt.Composite.add(this.composite,[B,K,A,V,O,T,j,F,P,L,D,_,M,R,z,I,G,q,$,Q,W,N,H,U,Y,X,J,Z]),nt.Composite.add(this.composite,ae),nt.Composite.add(this.composite,ne),nt.Composite.add(this.composite,oe),nt.World.add(s,this.composite),nt.Body.applyForce(A,A.position,t);var ie=t.x<0?{x:-.002}:{x:.002};ie.y=-.002,new Aa(it.a.int(15,20),A.position,ie,5);var re=r.getKeyValue("player-parts-sheet"),se=[];console.log(a);var le=new d.h(re.textures["rear_leg_foot.png"]);le._id="foot 2",se.push(le);var ce=new d.h(re.textures["rear_leg_lower.png"]);ce._id="leg 2",se.push(ce);var de=new d.h(re.textures["rear_arm_hand.png"]);de._id="hand 2",se.push(de);var pe=new d.h(re.textures["rear_arm_forearm.png"]);pe._id="arm 2",se.push(pe);var ue=new d.h(re.textures["rear_arm_upper.png"]);ue._id="limb",se.push(ue);var he=new d.h(re.textures["front_leg_foot.png"]);he._id="foot 1",se.push(he);var me=new d.h(re.textures["rear_leg_upper.png"]);me._id="limb",se.push(me);var ge=new d.h(re.textures["head_gore.png"]);ge._id="skull",se.push(ge);var ye=new d.h(re.textures["mask.png"]);ye._id="mask",se.push(ye);var fe=new d.h(re.textures["front_leg_lower.png"]);fe._id="leg 1",se.push(fe);var be=new d.h(re.textures["front_leg_upper.png"]);be._id="limb",se.push(be),ae.forEach((function(e){var t=new d.h(re.textures["spine_link.png"]);ee.push(t),se.push(t)}));var we=new d.h(re.textures["torso_whole_headless.png"]);we._id="torso upper",se.push(we);var ve=new d.h(re.textures["front_arm_hand.png"]);ve._id="hand 1",se.push(ve);var xe=new d.h(re.textures["front_arm_forearm.png"]);xe._id="arm 1",se.push(xe);var Ee=new d.h(re.textures["front_arm_upper.png"]);return Ee._id="limb",se.push(Ee),se.forEach((function(e){e.updateAnchor=!0,"skull"===e._id?(e.pivot.x=.55*e.width,e.pivot.y=.475*e.height):"foot 1"===e._id||"foot 2"===e._id?(e.pivot.x=.525*e.width,e.pivot.y=.5*e.height):(e.pivot.x=.5*e.width,e.pivot.y=.5*e.height),l.addChild(e)})),this.head=B,this.mask=K,this.bodyUpper=A,this.armUpperL=V,this.armUpperR=O,this.armLowerL=T,this.armLowerR=j,this.legUpperL=F,this.legUpperR=P,this.legLowerL=L,this.legLowerR=D,this.handL=_,this.handR=M,this.footL=R,this.footR=z,this.destroy=function(){r.setKeyValue("player-ragdoll",null),se.forEach((function(e){e.destroy(),e=null})),nt.World.remove(s,n.composite),n.composite=null,s=null,l=null,r=null},this.animateRagParts=function(e){ae.forEach((function(t,a){var n=e(t);ee[a].position=n,ee[a].rotation=n.rotation}));var t=e(n.mask);ye.position=t,ye.rotation=t.rotation;var a=e(n.head);ge.position=a,ge.rotation=a.rotation;var o=e(n.bodyUpper);we.position=o,we.rotation=o.rotation;var i=e(n.armLowerL);xe.position=i,xe.rotation=i.rotation;var r=e(n.armUpperL);Ee.position=r,Ee.rotation=r.rotation;var s=e(n.handL);ve.position=s,ve.rotation=s.rotation;var l=e(n.legUpperL);be.position=l,be.rotation=l.rotation;var c=e(n.legLowerL);fe.position=c,fe.rotation=c.rotation;var d=e(n.footL);he.position=d,he.rotation=d.rotation;var p=e(n.armLowerR);pe.position=p,pe.rotation=p.rotation;var u=e(n.armUpperR);ue.position=u,ue.rotation=u.rotation;var h=e(n.handR);de.position=h,de.rotation=h.rotation;var m=e(n.legUpperR);me.position=m,me.rotation=m.rotation;var g=e(n.legLowerR);ce.position=g,ce.rotation=g.rotation;var y=e(n.footR);le.position=y,le.rotation=y.rotation},nt.Composite.remove(this.composite,I),nt.Body.applyForce(this.head,this.head.position,{x:0,y:-.1}),this}function Ka(e,t,a){var n=this,o=e.x,i=e.y,r=window.gameObjects,s=r.getKeyValue("world"),l=r.getKeyValue("game-pixi-container"),c=40,p=35,u=45,h=5,m=25,g=25,y=15,f=30,b=15,w=50,v=15,x=20,E=10,S=7,k=10,C=14,A=10,B=10,K=nt.Bodies.rectangle(o,i,u,h),V=nt.Bodies.rectangle(o,i,c,p,{collisionFilter:ft}),O=nt.Bodies.rectangle(o,i,m,g,{}),_=nt.Bodies.rectangle(o,i,y,f,{collisionFilter:yt}),T=nt.Bodies.rectangle(o,i,y,f,{collisionFilter:yt}),j=nt.Bodies.rectangle(o,i,v,x,{}),M=nt.Bodies.rectangle(o,i,y,f,{}),F=nt.Bodies.rectangle(o,i,y,f,{}),P=nt.Bodies.rectangle(o,i,v,x,{}),L=nt.Bodies.rectangle(o,i,b,w,{collisionFilter:yt}),D=nt.Bodies.rectangle(o,i,b,w,{collisionFilter:yt}),R=nt.Bodies.rectangle(o,i,b,w,{}),z=nt.Bodies.rectangle(o,i,b,w,{}),I=nt.Bodies.rectangle(o,i,k,C,{}),W=nt.Bodies.rectangle(o,i,E,S,{}),N=nt.Constraint.create({bodyA:V,bodyB:O,pointA:{x:0,y:-p/2},pointB:{x:0,y:g/2},length:1}),H=nt.Constraint.create({bodyA:V,bodyB:_,pointA:{x:0,y:-p/4},pointB:{x:0,y:-f/2},length:1}),U=nt.Constraint.create({bodyA:V,bodyB:T,pointA:{x:0,y:-p/4},pointB:{x:0,y:-f/2},length:1}),G=nt.Constraint.create({bodyA:_,bodyB:M,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),q=nt.Constraint.create({bodyA:T,bodyB:F,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),Y=nt.Constraint.create({bodyA:M,bodyB:j,pointA:{x:0,y:f/2},pointB:{x:0,y:-x/2},length:1}),X=nt.Constraint.create({bodyA:F,bodyB:P,pointA:{x:0,y:f/2},pointB:{x:0,y:-x/2},length:1}),J=nt.Constraint.create({bodyA:K,bodyB:L,pointA:{x:0,y:h/2},pointB:{x:0,y:-w/2},length:2}),Z=nt.Constraint.create({bodyA:K,bodyB:D,pointA:{x:0,y:h/2},pointB:{x:0,y:-w/2},length:1}),$=nt.Constraint.create({bodyA:L,bodyB:R,pointA:{x:0,y:w/2},pointB:{x:0,y:-w/2},length:1}),Q=nt.Constraint.create({bodyA:D,bodyB:z,pointA:{x:0,y:w/2},pointB:{x:0,y:-w/2},length:2}),ee=nt.Constraint.create({bodyA:R,bodyB:I,pointA:{x:0,y:w/2},pointB:{x:0,y:-C/2},length:1}),te=nt.Constraint.create({bodyA:z,bodyB:W,pointA:{x:0,y:w/2},pointB:{x:0,y:-S/2},length:1}),ae=[],ne=[],oe=function(){for(var e=[],t=0;t<6;++t){var a=nt.Bodies.rectangle(V.position.x,V.position.y,A,B);e.push(a)}return{spineLinks:e,spineConstraints:[nt.Constraint.create({bodyA:e[0],bodyB:e[1],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4}),nt.Constraint.create({bodyA:e[1],bodyB:e[2],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4}),nt.Constraint.create({bodyA:e[2],bodyB:e[3],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4}),nt.Constraint.create({bodyA:e[3],bodyB:e[4],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4}),nt.Constraint.create({bodyA:e[4],bodyB:e[5],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4})]}},ie=oe(),re=ie.spineLinks,se=ie.spineConstraints,le=oe(),ce=le.spineLinks,de=le.spineConstraints,pe=nt.Constraint.create({bodyA:V,bodyB:re[0],pointA:{x:0,y:p/2},pointB:{x:0,y:-B/2},length:10}),ue=nt.Constraint.create({bodyA:K,bodyB:ce[0],pointA:{x:0,y:-h/2},pointB:{x:0,y:-B/2},length:10});this.composite=nt.Composite.create(),nt.Composite.add(this.composite,[O,V,K,_,T,M,F,L,D,R,z,j,P,I,W,N,Y,X,ee,te,H,U,G,q,J,Z,$,Q]),nt.Composite.add(this.composite,re),nt.Composite.add(this.composite,se),nt.Composite.add(this.composite,pe),nt.Composite.add(this.composite,ce),nt.Composite.add(this.composite,de),nt.Composite.add(this.composite,ue),nt.World.add(s,this.composite),nt.Body.applyForce(V,V.position,t);var he=t.x<0?{x:-.002}:{x:.002};he.y=-.002,new Aa(it.a.int(15,20),V.position,he,5);var me=r.getKeyValue("player-parts-sheet"),ge=[];console.log(a);var ye=new d.h(me.textures["rear_leg_foot.png"]);ye._id="foot 2",ge.push(ye);var fe=new d.h(me.textures["rear_leg_lower.png"]);fe._id="leg 2",ge.push(fe);var be=new d.h(me.textures["rear_arm_hand.png"]);be._id="hand 2",ge.push(be);var we=new d.h(me.textures["rear_arm_forearm.png"]);we._id="arm 2",ge.push(we);var ve=new d.h(me.textures["rear_arm_upper.png"]);ve._id="limb",ge.push(ve);var xe=new d.h(me.textures["front_leg_foot.png"]);xe._id="foot 1",ge.push(xe);var Ee=new d.h(me.textures["rear_leg_upper.png"]);Ee._id="limb",ge.push(Ee);var Se=new d.h(me.textures["skull.png"]);Se._id="skull",ge.push(Se);var ke=new d.h(me.textures["front_leg_lower.png"]);ke._id="leg 1",ge.push(ke);var Ce=new d.h(me.textures["front_leg_upper.png"]);Ce._id="limb",ge.push(Ce),re.forEach((function(e){var t=new d.h(me.textures["spine_link.png"]);ae.push(t),ge.push(t)})),ce.forEach((function(e){var t=new d.h(me.textures["entrail_chunk.png"]);ne.push(t),ge.push(t)}));var Ae=new d.h(me.textures["torso_upper_gore.png"]);Ae._id="torso upper",ge.push(Ae);var Be=new d.h(me.textures["torso_lower_gore.png"]);Be._id="torso lower",ge.push(Be);var Ke=new d.h(me.textures["front_arm_hand.png"]);Ke._id="hand 1",ge.push(Ke);var Ve=new d.h(me.textures["front_arm_forearm.png"]);Ve._id="arm 1",ge.push(Ve);var Oe=new d.h(me.textures["front_arm_upper.png"]);return Oe._id="limb",ge.push(Oe),ge.forEach((function(e){e.updateAnchor=!0,"skull"===e._id?(e.pivot.x=.55*e.width,e.pivot.y=.475*e.height):"foot 1"===e._id||"foot 2"===e._id?(e.pivot.x=.525*e.width,e.pivot.y=.5*e.height):(e.pivot.x=.5*e.width,e.pivot.y=.5*e.height),l.addChild(e)})),this.head=O,this.bodyUpper=V,this.bodyLower=K,this.armUpperL=_,this.armUpperR=T,this.armLowerL=M,this.armLowerR=F,this.legUpperL=L,this.legUpperR=D,this.legLowerL=R,this.legLowerR=z,this.handL=j,this.handR=P,this.footL=I,this.footR=W,this.destroy=function(){r.setKeyValue("player-ragdoll",null),ge.forEach((function(e){e.destroy()})),nt.World.remove(s,n.composite)},this.animateRagParts=function(e){re.forEach((function(t,a){var n=e(t);ae[a].position=n,ae[a].rotation=n.rotation})),ce.forEach((function(t,a){var n=e(t);ne[a].position=n,ne[a].rotation=n.rotation}));var t=e(n.head);Se.position=t,Se.rotation=t.rotation;var a=e(n.bodyUpper);Ae.position=a,Ae.rotation=a.rotation;var o=e(n.bodyLower);Be.position=o,Be.rotation=o.rotation;var i=e(n.armLowerL);Ve.position=i,Ve.rotation=i.rotation;var r=e(n.armUpperL);Oe.position=r,Oe.rotation=r.rotation;var s=e(n.handL);Ke.position=s,Ke.rotation=s.rotation;var l=e(n.legUpperL);Ce.position=l,Ce.rotation=l.rotation;var c=e(n.legLowerL);ke.position=c,ke.rotation=c.rotation;var d=e(n.footL);xe.position=d,xe.rotation=d.rotation;var p=e(n.armLowerR);we.position=p,we.rotation=p.rotation;var u=e(n.armUpperR);ve.position=u,ve.rotation=u.rotation;var h=e(n.handR);be.position=h,be.rotation=h.rotation;var m=e(n.legUpperR);Ee.position=m,Ee.rotation=m.rotation;var g=e(n.legLowerR);fe.position=g,fe.rotation=g.rotation;var y=e(n.footR);ye.position=y,ye.rotation=y.rotation},this}function Va(e,t,a){var n=this,o=e.x,i=e.y,r=window.gameObjects,s=r.getKeyValue("world"),l=r.getKeyValue("game-pixi-container"),c=40,p=55,u=25,h=15,m=15,g=30,y=15,f=50,b=15,w=20,v=10,x=7,E=10,S=14,k=nt.Bodies.rectangle(o,i,c,p,{collisionFilter:ft}),C=nt.Bodies.rectangle(o,i,u,h,{}),A=nt.Bodies.rectangle(o,i,m,g,{collisionFilter:yt}),B=nt.Bodies.rectangle(o,i,m,g,{collisionFilter:yt}),K=nt.Bodies.rectangle(o,i,b,w,{}),V=nt.Bodies.rectangle(o,i,m,g,{}),O=nt.Bodies.rectangle(o,i,m,g,{}),_=nt.Bodies.rectangle(o,i,b,w,{}),T=nt.Bodies.rectangle(o,i,y,f,{collisionFilter:yt}),j=nt.Bodies.rectangle(o,i,y,f,{collisionFilter:yt}),M=nt.Bodies.rectangle(o,i,y,f,{}),F=nt.Bodies.rectangle(o,i,y,f,{}),P=nt.Bodies.rectangle(o,i,E,S,{}),L=nt.Bodies.rectangle(o,i,v,x,{}),D=nt.Constraint.create({bodyA:k,bodyB:C,pointA:{x:0,y:-p/2},pointB:{x:0,y:h/2},length:1}),R=nt.Constraint.create({bodyA:k,bodyB:A,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),z=nt.Constraint.create({bodyA:k,bodyB:B,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),I=nt.Constraint.create({bodyA:A,bodyB:V,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),W=nt.Constraint.create({bodyA:B,bodyB:O,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),N=nt.Constraint.create({bodyA:V,bodyB:K,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),H=nt.Constraint.create({bodyA:O,bodyB:_,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),U=nt.Constraint.create({bodyA:k,bodyB:T,pointA:{x:-c/4,y:p/2},pointB:{x:0,y:-f/2},length:2}),G=nt.Constraint.create({bodyA:k,bodyB:j,pointA:{x:0,y:p/2},pointB:{x:0,y:-f/2},length:1}),q=nt.Constraint.create({bodyA:T,bodyB:M,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),Y=nt.Constraint.create({bodyA:j,bodyB:F,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:2}),X=nt.Constraint.create({bodyA:M,bodyB:P,pointA:{x:0,y:f/2},pointB:{x:0,y:-S/2},length:1}),J=nt.Constraint.create({bodyA:F,bodyB:L,pointA:{x:0,y:f/2},pointB:{x:0,y:-x/2},length:1});this.composite=nt.Composite.create(),nt.Composite.add(this.composite,[C,k,A,B,V,O,T,j,M,F,K,_,P,L,D,N,H,X,J,R,z,I,W,U,G,q,Y]),nt.World.add(s,this.composite),nt.Body.applyForce(k,k.position,t);var Z=r.getKeyValue("player-parts-sheet"),$=[];console.log(a);var Q=t.x<0?{x:-.002}:{x:.002};Q.y=-.002,new Aa(it.a.int(15,20),k.position,Q,5);var ee=new d.h(Z.textures["rear_leg_foot.png"]);ee._id="foot 2",$.push(ee);var te=new d.h(Z.textures["rear_leg_lower.png"]);te._id="leg 2",$.push(te);var ae=new d.h(Z.textures["rear_arm_hand.png"]);ae._id="hand 2",$.push(ae);var ne=new d.h(Z.textures["rear_arm_forearm.png"]);ne._id="arm 2",$.push(ne);var oe=new d.h(Z.textures["rear_arm_upper_gore.png"]);oe._id="limb",$.push(oe);var ie=new d.h(Z.textures["front_leg_foot.png"]);ie._id="foot 1",$.push(ie);var re=new d.h(Z.textures["rear_leg_upper.png"]);re._id="limb",$.push(re);var se=new d.h(Z.textures["skull_gore.png"]);se._id="skull",$.push(se);var le=new d.h(Z.textures["front_leg_lower.png"]);le._id="leg 1",$.push(le);var ce=new d.h(Z.textures["front_leg_upper.png"]);ce._id="limb",$.push(ce);var de=new d.h(Z.textures["torso_whole_gore.png"]);de._id="torso",$.push(de);var pe=new d.h(Z.textures["front_arm_hand.png"]);pe._id="hand 1",$.push(pe);var ue=new d.h(Z.textures["front_arm_forearm.png"]);ue._id="arm 1",$.push(ue);var he=new d.h(Z.textures["front_arm_upper_gore.png"]);return he._id="limb",$.push(he),$.forEach((function(e){e.updateAnchor=!0,"skull"===e._id?(e.pivot.x=.55*e.width,e.pivot.y=.475*e.height):"foot 1"===e._id||"foot 2"===e._id?(e.pivot.x=.525*e.width,e.pivot.y=.5*e.height):(e.pivot.x=.5*e.width,e.pivot.y=.5*e.height),l.addChild(e)})),this.head=C,this.bodyUpper=k,this.armUpperL=A,this.armUpperR=B,this.armLowerL=V,this.armLowerR=O,this.legUpperL=T,this.legUpperR=j,this.legLowerL=M,this.legLowerR=F,this.handL=K,this.handR=_,this.footL=P,this.footR=L,this.destroy=function(){r.setKeyValue("player-ragdoll",null),$.forEach((function(e){e.destroy()})),nt.World.remove(s,n.composite)},this.animateRagParts=function(e){var t=e(n.head);se.position=t,se.rotation=t.rotation;var a=e(n.bodyUpper);de.position=a,de.rotation=a.rotation;var o=e(n.armLowerL);ue.position=o,ue.rotation=o.rotation;var i=e(n.armUpperL);he.position=i,he.rotation=i.rotation;var r=e(n.handL);pe.position=r,pe.rotation=r.rotation;var s=e(n.legUpperL);ce.position=s,ce.rotation=s.rotation;var l=e(n.legLowerL);le.position=l,le.rotation=l.rotation;var c=e(n.footL);ie.position=c,ie.rotation=c.rotation;var d=e(n.armLowerR);ne.position=d,ne.rotation=d.rotation;var p=e(n.armUpperR);oe.position=p,oe.rotation=p.rotation;var u=e(n.handR);ae.position=u,ae.rotation=u.rotation;var h=e(n.legUpperR);re.position=h,re.rotation=h.rotation;var m=e(n.legLowerR);te.position=m,te.rotation=m.rotation;var g=e(n.footR);ee.position=g,ee.rotation=g.rotation},nt.Composite.remove(this.composite,[R,z]),nt.Body.applyForce(this.armLowerL,this.armLowerL.position,{x:-.01,y:-.1}),nt.Body.applyForce(this.armLowerR,this.armUpperR.position,{x:.01,y:-.1}),this}function Oa(e,t,a){var n=this,o=e.x,i=e.y,r=window.gameObjects,s=r.getKeyValue("world"),l=r.getKeyValue("game-pixi-container"),c=40,p=55,u=25,h=15,m=15,g=30,y=15,f=50,b=15,w=20,v=10,x=7,E=10,S=14,k=nt.Bodies.rectangle(o,i,c,p,{collisionFilter:ft}),C=nt.Bodies.rectangle(o,i,u,h,{}),A=nt.Bodies.rectangle(o,i,m,g,{collisionFilter:yt}),B=nt.Bodies.rectangle(o,i,m,g,{collisionFilter:yt}),K=nt.Bodies.rectangle(o,i,b,w,{}),V=nt.Bodies.rectangle(o,i,m,g,{}),O=nt.Bodies.rectangle(o,i,m,g,{}),_=nt.Bodies.rectangle(o,i,b,w,{}),T=nt.Bodies.rectangle(o,i,y,f,{collisionFilter:yt}),j=nt.Bodies.rectangle(o,i,y,f,{collisionFilter:yt}),M=nt.Bodies.rectangle(o,i,y,f,{}),F=nt.Bodies.rectangle(o,i,y,f,{}),P=nt.Bodies.rectangle(o,i,E,S,{}),L=nt.Bodies.rectangle(o,i,v,x,{}),D=nt.Constraint.create({bodyA:k,bodyB:C,pointA:{x:0,y:-p/2},pointB:{x:0,y:h/2},length:1}),R=nt.Constraint.create({bodyA:k,bodyB:A,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),z=nt.Constraint.create({bodyA:k,bodyB:B,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),I=nt.Constraint.create({bodyA:A,bodyB:V,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),W=nt.Constraint.create({bodyA:B,bodyB:O,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),N=nt.Constraint.create({bodyA:V,bodyB:K,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),H=nt.Constraint.create({bodyA:O,bodyB:_,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),U=nt.Constraint.create({bodyA:k,bodyB:T,pointA:{x:-c/4,y:p/2},pointB:{x:0,y:-f/2},length:2}),G=nt.Constraint.create({bodyA:k,bodyB:j,pointA:{x:0,y:p/2},pointB:{x:0,y:-f/2},length:1}),q=nt.Constraint.create({bodyA:T,bodyB:M,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),Y=nt.Constraint.create({bodyA:j,bodyB:F,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:2}),X=nt.Constraint.create({bodyA:M,bodyB:P,pointA:{x:0,y:f/2},pointB:{x:0,y:-S/2},length:1}),J=nt.Constraint.create({bodyA:F,bodyB:L,pointA:{x:0,y:f/2},pointB:{x:0,y:-x/2},length:1});this.composite=nt.Composite.create(),nt.Composite.add(this.composite,[C,k,A,B,V,O,T,j,M,F,K,_,P,L,D,N,H,X,J,R,z,I,W,U,G,q,Y]),nt.World.add(s,this.composite),nt.Body.applyForce(k,k.position,t);var Z=r.getKeyValue("player-parts-sheet"),$=[];console.log(a);var Q=t.x<0?{x:-.002}:{x:.002};Q.y=-.002,new Aa(it.a.int(10,15),k.position,Q,5);var ee=new d.h(Z.textures["rear_leg_foot.png"]);ee._id="foot 2",$.push(ee);var te=new d.h(Z.textures["rear_leg_lower.png"]);te._id="leg 2",$.push(te);var ae=new d.h(Z.textures["rear_arm_hand.png"]);ae._id="hand 2",$.push(ae);var ne=new d.h(Z.textures["rear_arm_forearm.png"]);ne._id="arm 2",$.push(ne);var oe=new d.h(Z.textures["rear_arm_upper.png"]);oe._id="limb",$.push(oe);var ie=new d.h(Z.textures["front_leg_foot.png"]);ie._id="foot 1",$.push(ie);var re=new d.h(Z.textures["rear_leg_upper.png"]);re._id="limb",$.push(re);var se=new d.h(Z.textures["skull.png"]);se._id="skull",$.push(se);var le=new d.h(Z.textures["front_leg_lower.png"]);le._id="leg 1",$.push(le);var ce=new d.h(Z.textures["front_leg_upper.png"]);ce._id="limb",$.push(ce);var de=new d.h(Z.textures["torso_whole_gore.png"]);de._id="torso",$.push(de);var pe=new d.h(Z.textures["front_arm_hand.png"]);pe._id="hand 1",$.push(pe);var ue=new d.h(Z.textures["front_arm_forearm.png"]);ue._id="arm 1",$.push(ue);var he=new d.h(Z.textures["front_arm_upper.png"]);return he._id="limb",$.push(he),$.forEach((function(e){e.updateAnchor=!0,"skull"===e._id?(e.pivot.x=.55*e.width,e.pivot.y=.475*e.height):"foot 1"===e._id||"foot 2"===e._id?(e.pivot.x=.525*e.width,e.pivot.y=.5*e.height):(e.pivot.x=.5*e.width,e.pivot.y=.5*e.height),l.addChild(e)})),this.head=C,this.bodyUpper=k,this.armUpperL=A,this.armUpperR=B,this.armLowerL=V,this.armLowerR=O,this.legUpperL=T,this.legUpperR=j,this.legLowerL=M,this.legLowerR=F,this.handL=K,this.handR=_,this.footL=P,this.footR=L,this.destroy=function(){r.setKeyValue("player-ragdoll",null),$.forEach((function(e){e.destroy()})),nt.World.remove(s,n.composite)},this.animateRagParts=function(e){var t=e(n.head);se.position=t,se.rotation=t.rotation;var a=e(n.bodyUpper);de.position=a,de.rotation=a.rotation;var o=e(n.armLowerL);ue.position=o,ue.rotation=o.rotation;var i=e(n.armUpperL);he.position=i,he.rotation=i.rotation;var r=e(n.handL);pe.position=r,pe.rotation=r.rotation;var s=e(n.legUpperL);ce.position=s,ce.rotation=s.rotation;var l=e(n.legLowerL);le.position=l,le.rotation=l.rotation;var c=e(n.footL);ie.position=c,ie.rotation=c.rotation;var d=e(n.armLowerR);ne.position=d,ne.rotation=d.rotation;var p=e(n.armUpperR);oe.position=p,oe.rotation=p.rotation;var u=e(n.handR);ae.position=u,ae.rotation=u.rotation;var h=e(n.legUpperR);re.position=h,re.rotation=h.rotation;var m=e(n.legLowerR);te.position=m,te.rotation=m.rotation;var g=e(n.footR);ee.position=g,ee.rotation=g.rotation},this}var _a=window.TweenLite.set;function Ta(e,t,a,n){var o=window.gameObjects,i=o.getKeyValue("world"),r=o.getKeyValue("game-pixi-container"),s=null,l=o.getKeyValue("blood-spurt-1"),c=new d.a(l.animations.blood_spurt_1),p=o.getKeyValue("blood-spurt-2"),u=new d.a(p.animations.blood_spurt_2),h=o.getKeyValue("blood-spurt-3"),m=new d.a(h.animations.blood_spurt_3),g=["blood spurt type 1","blood spurt type 2","blood spurt type 3"],y=g[Math.floor(Math.random()*g.length)];return e||(e=y),(s="blood spurt type 1"===e?c:"blood spurt type 2"===e?u:m).onComplete=function(){s.destroy(),n&&nt.World.remove(i,n),i=null,r=null,o=null,s=null,c=null,l=null,u=null,p=null,m=null,h=null,g=null,y=null},s.animationSpeed=.5,s.pivot.x=.5*s.width,s.pivot.y=.5*s.height,_a(s.scale,a?{x:a,y:a}:{x:.5,y:.5}),s.position=t,s.loop=!1,s.updateAnchor=!0,s.play(),r.addChild(s),s}var ja="fell off of ledge",Ma=at.getState;function Fa(e){var t=this,a=window,n=a.gameObjects,o=a.TweenLite,i=o.to,r=o.delayedCall,s=n.getKeyValue("world"),l=n.getKeyValue("rocks"),c=n.getKeyValue("game-pixi-container"),p=n.getKeyValue("explosion-assets-sheet"),u=["rock-piece1.png","rock-piece2.png","rock-piece3.png"],h=new d.h(p.textures[u[Math.floor(Math.random()*u.length)]]),m=function(){return it.a.float(.45,.65)};h.pivot.x=.48*h.width,h.pivot.y=.48*h.height,h.scale.x=m(),h.scale.y=m(),c.addChild(h);var g=nt.Bodies.rectangle(e.x,e.y-50,10,10,{restitution:.25,collisionFilter:{category:2,mask:1}});return nt.Body.applyForce(g,g.position,{x:it.a.float(-.005,.005),y:it.a.float(-.001,-.0025)}),nt.World.add(s,g),this.animate=function(e){var t=e(g),a=t.x,n=t.y;h.position={x:a,y:n}},this.destroy=function(){var e=l.indexOf(t);nt.World.remove(s,g),c.removeChild(h),e>-1&&l.splice(e,1),s=null,l=null,c=null,g=null,h=null,n=null},r(Ma().game.lastWaveCountDefeated&&Ma().game.lastWaveCountDefeated<10?4:1,(function(){i(h,.5,{alpha:0,onComplete:function(){t.destroy()}})})),this}var Pa=a(15),La=function(){function e(t){var a=this;Object(ht.a)(this,e),this.gameObjects=window.gameObjects;var n=window.TweenLite,o=n.to,i=n.delayedCall,r=this.gameObjects.getKeyValue("game-pixi-container"),s=this.gameObjects.getKeyValue("world");this.woodPlanksSheet=this.gameObjects.getKeyValue("wood-planks-sheet"),this.woodPlanks=this.gameObjects.getKeyValue("wood-planks"),this.plankRange=["000.png","001.png","002.png"];var l=t.x,c=t.y;return this.gfc=this.getPlank(),this.gfc.width=50,this.gfc.height=15,this.gfcContainer=new d.e,this.gfcContainer.addChild(this.gfc),this.gfcContainer.pivot.x=.5*this.gfcContainer.width,this.gfcContainer.pivot.y=.5*this.gfcContainer.height,this.body=new nt.Bodies.rectangle(l,c,50,15,{collisionFilter:yt}),this.body.torque=it.a.float(-.5,.5),nt.Body.applyForce(this.body,this.body.position,{x:it.a.float(-.02,.02),y:it.a.float(-.01,-.02)}),nt.World.add(s,this.body),r.addChild(this.gfcContainer),this.destroy=function(){var e=a.woodPlanks.indexOf(a);nt.World.remove(s,a.body),r.removeChild(a.gfcContainer),e>-1&&a.woodPlanks.splice(e,1),s=null,r=null,a.gameObjects=null,a.woodPlanks=null,a.gfc=null},i(4,(function(){o(a.gfcContainer,2,{alpha:0,onComplete:function(){a.destroy()}})})),this}return Object(Pa.a)(e,[{key:"animate",value:function(e){var t=e(this.body),a=t.x,n=t.y,o=t.rotation;this.gfcContainer.position={x:a,y:n},this.gfcContainer.rotation=o}},{key:"getPlank",value:function(){return new d.h(this.woodPlanksSheet.textures[this.plankRange[Math.floor(Math.random()*this.plankRange.length)]])}}]),e}(),Da=(a(177),a(40)),Ra=a(42),za=a(27),Ia=function(){function e(t,a){var n=this;Object(ht.a)(this,e),this.gameObjects=window.gameObjects;var o=window.TweenLite.to;this.container=this.gameObjects.getKeyValue("game-pixi-container");var i=this.gameObjects.getKeyValue("explosion3d1-sheet"),r=this.gameObjects.getKeyValue("explosion3d2-sheet");this.explosion1=new d.a(i.animations.explosion3d),this.explosion2=new d.a(r.animations.explosion3d),this.explosions=[this.explosion1,this.explosion2],this.explosions.forEach((function(e){e.pivot.x=.5*e.width,e.pivot.y=.5*e.height,e.loop=!1,e.onComplete=function(){n.container.removeChild(e),n.container=null,n.gameObjects=null,i=null,r=null,n.explosions=null}})),1===t&&(this.explosion=this.explosion1,this.explosion.animationSpeed=1),2===t&&(this.explosion=this.explosion2,this.explosion.animationSpeed=1),this.renderBody=a;var s=new Da.a;s.brightness=20,s.saturation=3;var l=new Ra.a;l.blur=.5;var c=new za.a({outerStrength:3});this.filters=at.getState().game.filterEffects?[s,l,c]:[],this.explosion.filters=this.filters,o(this.explosion,.35,{alpha:0}),o(s,.5,{brightness:1,saturation:1.5,onUpdate:function(){at.getState().game.filterEffects&&(n.explosion.filters=n.filters)}}),this.explosion.play()}return Object(Pa.a)(e,[{key:"renderPosition",value:function(e){this.renderBody&&(this.explosion.position=e(this.renderBody),this.container&&-1===this.container.children.indexOf(this.explosion)&&this.container.addChild(this.explosion))}}]),e}(),Wa=a(10);function Na(e,t,a){var n=this,o=window,i=o.gameObjects,r=o.TweenLite.to,s=window.gameObjects.getKeyValue("explosion1"),l=new Wa.Howl({src:[s]}),c=window.gameObjects.getKeyValue("distant-explosion"),p=new Wa.Howl({src:[c]}),u=i.getKeyValue("world"),h=i.getKeyValue("rocks"),m=i.getKeyValue("game-pixi-container"),g=i.getKeyValue("explosions"),y=i.getKeyValue("explosion-assets-sheet"),f=["smoke1.png","smoke2.png","smoke3.png","smoke4.png"],b=nt.Bodies.rectangle(e.x,e.y,20,20,{restitution:0,collisionFilter:yt,isStatic:!0});nt.World.add(u,b),this.calcRenderedPosition=function(e){var t=e(b),a=t.x,o=t.y;n.calculatedPosition={x:a,y:o}},g.push(this);for(var w=it.a.int(5,10),v=function(e){var t=new d.h(y.textures[f[Math.floor(Math.random()*f.length)]]);t.pivot.x=.5*t.width,t.pivot.y=.5*t.height;r(t,2,{onStart:function(){m.addChild(t)},alpha:0,onComplete:function(){if(e===w-1){nt.World.remove(u,b);var t=g.indexOf(n);t>-1&&g.splice(t,1),u=null,g=null,y=null,f=null}}});var a=it.a.int(1,2);r(t.scale,.5,{x:a,y:a});var o={x:0,y:0};r(o,.5,{x:it.a.int(-100,100),y:it.a.int(-50,50)}),r(t.position,2,{onUpdate:function(){n.calculatedPosition&&(t.position.x=n.calculatedPosition.x+o.x,t.position.y=n.calculatedPosition.y+o.y)},onComplete:function(){t.destroy(),m=null,i=null}})},x=0;x<w;++x)v(x);var E=i.getKeyValue("wood-planks");if(e.y>300||t){for(var S=0;S<it.a.int(4,7);++S)a&&a.showWood?E.push(new La(e)):h.push(new Fa(e));E=null,h=null}if(!a||a.showExplosionSprite){var k=i.getKeyValue("explosion-sprites");l.seek(.5),l.play(),p.play(),k.push(new Ia(it.a.int(1,2),b)),k=null}}function Ha(e,t,a){var n=this,o=at.getState,i=window,r=i.gameObjects,s=i.TweenLite.delayedCall,l=r.getKeyValue("barriers-sheet"),c=r.getKeyValue("game-pixi-container"),p=r.getKeyValue("world"),u=r.getKeyValue("build-objects"),h=t.width,m=t.height,g=new d.h(l.textures["woodenBarrier.png"]),y=new d.h(l.textures["stoneBarrier.png"]),f=new d.h(l.textures["metalBarrier.png"]),b=lt("explosive-barrel");this.types={WOOD:"Wooden",STONE:"Stone",METAL:"Metal",EXPLOSIVE:"Explosive Barrel"};var w,v=e.x,x=e.y,E=nt.Bodies.rectangle(v,x,h,m,{inertia:1/0,label:a===this.types.EXPLOSIVE?"explosive barrier":"barrier"}),S=r.getKeyValue("ground"),k=nt.Constraint.create({bodyA:S,bodyB:E,pointA:{x:-ct(S)/2+e.x,y:-dt(S)/2},pointB:{x:0,y:dt(E)/2},length:0});if(a)switch(a){case this.types.WOOD:E.strength=o().game.player.perks.barrierPlus.owned?300:100;break;case this.types.STONE:E.strength=o().game.player.perks.barrierPlus.owned?500:250;break;case this.types.METAL:E.strength=o().game.player.perks.barrierPlus.owned?800:400;break;case this.types.EXPLOSIVE:E.strength=o().game.player.perks.barrierPlus.owned?200:100;break;default:E.strength=o().game.player.perks.barrierPlus.owned?300:100}E.main=this,this.destroyed=!1,this.getBody=function(){return E},nt.World.add(p,[k,E]);var C=new d.i(E.strength,{fill:"#ffffff",fontSize:12});if(C.pivot.x=.5*C.width,C.pivot.y=.5*C.height,a)switch(a){case this.types.WOOD:w=g;break;case this.types.STONE:w=y;break;case this.types.METAL:w=f;break;case this.types.EXPLOSIVE:w=b}w.width=h,w.height=m;var A=new d.e;return A.addChild(w),A.pivot.x=.5*A.width,A.pivot.y=.5*A.height,c.addChild(A),c.addChild(C),r.getKeyValue("player").sprites.forEach((function(e){c.addChild(e)})),this.takeDamage=function(e){E.strength-=e,C.text=E.strength},this.displayBarrierStrength=function(e){C.position=e(E),w.position=e(E)},E.removeSelf=function(){if(n.destroyed=!0,new Na(E.position,!0,{showWood:a===n.types.WOOD,showExplosionSprite:a===n.types.EXPLOSIVE}),a===n.types.EXPLOSIVE){var e=E.position,t=e.x,o=e.y,i=nt.Bodies.rectangle(t,o,400,300);i.label="barrel explosion",nt.World.add(p,i),s(2,(function(){i&&nt.World.remove(p,i)})),i.removeSelf=function(){nt.World.remove(p,i)}}nt.World.remove(p,[k,E]),c.removeChild(C),c.removeChild(A);var r=u.indexOf(n);r>-1&&u.splice(r,1)},this}var Ua=function(){function e(t){var a=this;Object(ht.a)(this,e);var n=t.x,o=t.y,i=window.gameObjects;this.world=i.getKeyValue("world"),this.container=i.getKeyValue("game-pixi-container"),this.landmines=i.getKeyValue("build-objects");var r=i.getKeyValue("landmine-sheet");this.body=nt.Bodies.rectangle(n,o,100,5),this.body.label="landmine trap",this.body.destroy=function(){a.destroy()};var s=i.getKeyValue("ground");return this.constraint=nt.Constraint.create({bodyA:s,bodyB:this.body,pointA:{x:-ct(s)/2+t.x,y:-dt(s)/2},pointB:{x:0,y:dt(this.body)/2},length:0}),nt.World.add(this.world,[this.body,this.constraint]),this.gfc=new d.a(r.animations.landmine),this.gfc.updateAnchor=!0,this.gfc.loop=!0,this.gfc.animationSpeed=.75,this.gfc.play(),this.gfc.width=100,this.gfc.height=100,this.gfcContainer=new d.e,this.gfcContainer.addChild(this.gfc),this.gfcContainer.pivot.x=0,this.gfcContainer.pivot.y=0,this.container.addChild(this.gfcContainer),console.log(this.gfcContainer.position),this.destroyed=!1,this}return Object(Pa.a)(e,[{key:"getBody",value:function(){return this.body}},{key:"updatePosition",value:function(e){var t=e(this.body),a=t.x,n=t.y;this.gfcContainer.position={x:a,y:n}}},{key:"destroy",value:function(){var e=this;new Na(this.body.position,!0);var t=window.TweenLite.delayedCall,a=this.body.position,n=a.x,o=a.y;if(this.hitbox=nt.Bodies.rectangle(n,o,500,300),this.hitbox.label="landmine explosion",this.hitbox.removeSelf=function(){nt.World.remove(e.world,e.hitbox)},nt.World.add(this.world,this.hitbox),t(.1,(function(){e.hitbox.removeSelf()})),!this.destroyed){this.destroyed=!0,nt.World.remove(this.world,[this.body,this.constraint]),this.container.removeChild(this.gfcContainer);var i=this.landmines.indexOf(this);i>-1&&this.landmines.splice(i,1)}}}]),e}(),Ga=a(35);function qa(e,t,a,n,o){var i=this;this.grenadeDistance={start:e,end:null};var r=at.getState,s=window,l=s.gameObjects,c=s.TweenLite,p=c.delayedCall,u=c.from,h=l.getKeyValue("world"),m=l.getKeyValue("game-pixi-container"),g=l.getKeyValue("grenades"),y=nt.Bodies.circle(e,t,a,{restitution:.8,collisionFilter:{category:3}});y.label="grenade",y.main=this,nt.World.add(h,y),nt.Body.applyForce(y,y.position,n),y.torque=.01;var f=new d.f;f.beginFill(2049836),f.drawCircle(0,0,a),this.grenadeBody=y;var b=new $t.a;b.shadowAlpha=.45,b.lightAlpha=.35,b.thickness=5,b.shadowColor=0,b.lightColor=2133060;var w=new Qt.a;w.noise=.1,w.seed=.5,f.filters=at.getState().game.filterEffects?[b,w]:[];var v=new Ga.a({velocity:{x:0,y:0}});u(v.velocity,.75,{x:100,y:10}),m.addChild(f),this.animate=function(e){if(y&&f){var t=e(y),a=t.x,n=t.y,o=t.rotation;f.position.x=a,f.position.y=n,f.rotation=o,b.rotation=Object(mt.radians)(o),f.filters=at.getState().game.filterEffects?[b,w,v]:[]}},p(o||r().game.player.weapons.grenadeFuseTime.default,(function(){i.exploded||i.explode()})),this.exploded=!1,this.explode=function(e){i.grenadeDistance.end=i.grenadeBody.position.x,i.exploded=!0,new Na(y.position,e||null);var t=r().game.player.weapons.grenadeExplosionSize;i.explosionHitbox=nt.Bodies.rectangle(y.position.x,y.position.y,t,t,{}),y.distance=i.grenadeDistance,i.explosionHitbox.label="grenade explosion",nt.World.remove(h,y),nt.World.add(h,i.explosionHitbox),m.removeChild(f),p(.01,(function(){i.destroy()}))},this.destroy=function(){nt.World.remove(h,i.explosionHitbox);var e=g.indexOf(i);e>-1&&g.splice(e,1)}}var Ya=function(){function e(t){var a=this;Object(ht.a)(this,e);var n=t.x,o=t.y,i=window.gameObjects;this.world=i.getKeyValue("world"),this.container=i.getKeyValue("game-pixi-container"),this.landmines=i.getKeyValue("build-objects");var r=i.getKeyValue("clustermine-sheet");this.body=nt.Bodies.rectangle(n,o,100,5),this.body.label="clustermine trap",this.body.destroy=function(){a.destroy()};var s=i.getKeyValue("ground");return this.constraint=nt.Constraint.create({bodyA:s,bodyB:this.body,pointA:{x:-ct(s)/2+t.x,y:-dt(s)/2},pointB:{x:0,y:dt(this.body)/2},length:0}),nt.World.add(this.world,[this.body,this.constraint]),this.gfc=new d.a(r.animations.clustermine),this.gfc.updateAnchor=!0,this.gfc.loop=!0,this.gfc.animationSpeed=.75,this.gfc.play(),this.gfc.width=100,this.gfc.height=100,this.gfcContainer=new d.e,this.gfcContainer.addChild(this.gfc),this.gfcContainer.pivot.x=0,this.gfcContainer.pivot.y=0,this.container.addChild(this.gfcContainer),console.log(this.gfcContainer.position),this.destroyed=!1,this}return Object(Pa.a)(e,[{key:"getBody",value:function(){return this.body}},{key:"updatePosition",value:function(e){var t=e(this.body),a=t.x,n=t.y;this.gfcContainer.position={x:a,y:n}}},{key:"destroy",value:function(){var e=this,t=window.TweenLite.delayedCall,a=window.gameObjects.getKeyValue("grenades");t(.25,(function(){for(var n=at.getState,o=n().game.player.perks.cluck.owned?8:4,i=n().game.player.perks.cluck.owned?it.a.float(-.02,.02):it.a.float(-.01,.01),r=n().game.player.perks.cluck?it.a.float(-.025,-.075):it.a.float(-.01,-.05),s=0;s<o;++s)t(.1*s,(function(){var t=new qa(e.body.position.x,e.body.position.y-50,10,{x:i,y:r},4);a.push(t)}))})),new Na(this.body.position,!0);var n=this.body.position,o=n.x,i=n.y;if(this.hitbox=nt.Bodies.rectangle(o,i,500,300),this.hitbox.label="clustermine explosion",this.hitbox.removeSelf=function(){nt.World.remove(e.world,e.hitbox)},nt.World.add(this.world,this.hitbox),t(.1,(function(){e.hitbox.removeSelf()})),!this.destroyed){this.destroyed=!0,nt.World.remove(this.world,[this.body,this.constraint]),this.container.removeChild(this.gfcContainer);var r=this.landmines.indexOf(this);r>-1&&this.landmines.splice(r,1)}}}]),e}(),Xa={WOOD:"Wooden",STONE:"Stone",METAL:"Metal",EXPLOSIVE:"Explosive Barrel"},Ja={LANDMINE:"Landmine",CLUSTER_BOMB:"Cluster Bomb",REMOTE_MINE:"Remote Mine",TURRET:"Machine Gun Turret"},Za=function(){function e(t,a){var n=this;Object(ht.a)(this,e);var o=t.x,i=t.y,r=window.gameObjects;this.world=r.getKeyValue("world"),this.container=r.getKeyValue("game-pixi-container"),this.buildObjects=r.getKeyValue("build-objects"),this.remoteMines=r.getKeyValue("remote-mines"),this.remoteMinesArr=r.getKeyValue("remote-mines-array");var s=r.getKeyValue("remote-mine-sheet");this.body=nt.Bodies.rectangle(o,i,100,5,{collisionFilter:yt}),this.body.label="remote mine trap",this.body.destroy=function(){n.destroy()};var l=r.getKeyValue("ground");this.constraint=nt.Constraint.create({bodyA:l,bodyB:this.body,pointA:{x:-ct(l)/2+t.x,y:-dt(l)/2},pointB:{x:0,y:dt(this.body)/2},length:0}),nt.World.add(this.world,[this.body,this.constraint]),this.gfc=new d.a(s.animations["remote-mine"]),this.gfc.updateAnchor=!0,this.gfc.loop=!0,this.gfc.animationSpeed=.75,this.gfc.play(),this.gfc.width=100,this.gfc.height=100,this.gfcContainer=new d.e,this.gfcContainer.addChild(this.gfc),this.gfcContainer.pivot.x=0,this.gfcContainer.pivot.y=0,this.container.addChild(this.gfcContainer),console.log(this.gfcContainer.position);return this.num=new d.i("[ ".concat(a," ]: detonate"),{fill:"#00FFFF",fontSize:12}),this.num.pivot.x=.5*this.num.width,this.num.pivot.y=.5*this.num.height,this.container.addChild(this.num),this.destroyed=!1,this}return Object(Pa.a)(e,[{key:"getBody",value:function(){return this.body}},{key:"updatePosition",value:function(e){var t=e(this.body),a=t.x,n=t.y;this.gfcContainer.position={x:a,y:n},this.num.position={x:a,y:n-50}}},{key:"detonate",value:function(){this.destroy()}},{key:"updateNumber",value:function(e){this.num.text="[ ".concat(e," ]: detonate")}},{key:"destroy",value:function(){var e=this,t=window.TweenLite.delayedCall;new Na(this.body.position,!0);var a=this.body.position,n=a.x,o=a.y;if(this.hitbox=nt.Bodies.rectangle(n,o,500,300),this.hitbox.label="landmine explosion",this.hitbox.removeSelf=function(){nt.World.remove(e.world,e.hitbox)},nt.World.add(this.world,this.hitbox),t(.1,(function(){e.hitbox.removeSelf()})),!this.destroyed){this.destroyed=!0,nt.World.remove(this.world,[this.body,this.constraint]),this.container.removeChild(this.gfcContainer),this.container.removeChild(this.num);var i=this.buildObjects.indexOf(this);i>-1&&this.buildObjects.splice(i,1),this.remoteMinesArr.indexOf(this)>-1&&this.remoteMinesArr.splice(i,1)}}}]),e}(),$a=at.getState,Qa=at.dispatch,en=function(e){var t=$a().game.player.weapons.damage["pistol weapon"],a=t.min,n=t.max;return e.label.indexOf("body")>-1?{part:"torso",dmg:a}:e.label.indexOf("head")>-1?{part:"head",dmg:n}:void 0};function tn(e,t,a){var n=this,o=t.x,i=t.y,r=window,s=r.gameObjects,l=r.TweenLite,c=l.to,p=l.set,u=(l.from,s.getKeyValue("world")),h=s.getKeyValue("game-pixi-container"),m=nt.Bodies.rectangle(o,i,10,10,{isStatic:!0,collisionFilter:yt});nt.World.add(u,m);for(var g=s.getKeyValue("explosion-assets-sheet"),y=["smoke1.png","smoke2.png","smoke3.png","smoke4.png"],f=function(t){var o=new d.h(g.textures[y[Math.floor(Math.random()*y.length)]]);"enemy"===e&&(o.tint=16711680),o.pivot.x=.5*o.width,o.pivot.y=.5*o.height,c(o,a&&a.alphaDuration?a.alphaDuration:.5,{alpha:0,onComplete:function(){1===t&&(nt.World.remove(u,m),u=null)}});var i=void 0;i=a&&a.rand&&a.rand.min&&a.rand.max?it.a.float(a.rand.min,a.rand.max):it.a.float(.25,.5),p(o.scale,{x:a&&a.set?a.set:.1,y:a&&a.set?a.set:.1}),c(o.scale,a&&a.duration?a.duration:.25,{x:i,y:i});var r={x:0,y:0};c(r,a&&a.duration?a.duration:.25,{x:"enemy"===e?it.a.int(-20,20):it.a.int(-10,10),y:"enemy"===e?it.a.int(-20,20):it.a.int(-50,0)}),c(o.position,3,{onUpdate:function(){n.calculatedPosition&&(o.position.x=n.calculatedPosition.x+r.x,o.position.y=n.calculatedPosition.y+r.y,h&&h.children.indexOf(o)<0&&h.addChild(o))},onComplete:function(){o.destroy(),h=null,s=null}})},b=0;b<2;++b)f(b);return this.renderPosition=function(e){n.calculatedPosition=e(m)},this}function an(e,t,a,n,o){var i,r,s,l=$a().game,c=l.mouseState,p=l.player.weapons,u=p.equipped,h=p.shellEjectionForce,m=p.shellRemovalTimeout;r||(r=a.getKeyValue("game-pixi-container")),i||(i=a.getKeyValue("world")),s||(s=a.getKeyValue("pistol-shells")),this.body=o&&o.body?o.body:nt.Bodies.rectangle("greater than player y position"===c.y||"less than player y position"===c.y?e:c.x===gt?e+30:e-30,"less than player y position"===c.y?t-40:t-20,7,4,{restitution:.75,collisionFilter:yt}),this.body.label=void 0!==n?"player ".concat(n," shell"):"player pistol shell","shotgun weapon"===u&&(this.body.label="shotgun shell"),nt.World.add(i,this.body),nt.Body.applyForce(this.body,this.body.position,o&&o.force?o.force:{x:c.x===gt?it.a.float(-h[u].min,-h[u].max):it.a.float(h[u].min,h[u].max),y:it.a.float(-h[u].min,-h[u].max)}),nt.Body.setAngularVelocity(this.body,it.a.float(-.5,-1)),this.gfc=new d.f,this.gfc.beginFill("shotgun weapon"===u?11534336:11244318);var g=ct(this.body),y=dt(this.body);"shotgun weapon"===u?this.gfc.drawRect(0,0,y,g+1):"smg weapon"===u?this.gfc.drawRect(0,0,y,g+2):this.gfc.drawRect(0,0,g,y),this.gfc.endFill(),"shotgun weapon"===u&&(this.gfc.beginFill(13416013),this.gfc.drawRect(0,g+1,y,3)),window.gameObjects.getKeyValue("bullet-shell-bevel")||window.gameObjects.setKeyValue("bullet-shell-bevel",new $t.a({lightAlpha:.5,shadowAlpha:.5}));var f=[window.gameObjects.getKeyValue("bullet-shell-bevel")];return this.gfc.filters=$a().game.filterEffects?f:[],this.gfc.pivot.x=this.gfc.width/2,this.gfc.pivot.y=this.gfc.height/2,r.addChild(this.gfc),s.push(this),this.destroy=function(){r.removeChild(this.gfc),nt.World.remove(i,this.body),this.body=null,this.gfc=null,s.splice(s.indexOf(this),1),i=null,r=null,a=null,s=null},setTimeout(this.destroy.bind(this),m[u]),this}function nn(e,t,a,n,o,i){var r,s,l,c,p;l=pt("arm",a);var u=$a().game,h=u.mouseRelativeToPlayerPosition,m=u.mouseState;return s||(s=a.getKeyValue("game-pixi-container")),r||(r=a.getKeyValue("world")),c||(c=a.getKeyValue("pistol-bullets")),this.body=o&&o.overrideBody?o.overrideBody:nt.Bodies.circle("greater than player y position"===m.y||"less than player y position"===m.y?e:m.x===gt?e+50:e-50,t,4,{restitution:.3}),this.body.label=i?"extra damage bullet":void 0!==n&&null!==n?"player ".concat(n," bullet"):"player pistol bullet",this.body.main=this,nt.World.add(r,this.body),nt.Body.setAngle(this.body,o&&o.overrideAngle?o.overrideAngle:nt.Vector.angle(this.body.position,h)),nt.Body.applyForce(this.body,this.body.position,o&&o.overrideForce?o.overrideForce:function(e,t){var a=rt().game.player.weapons,n=a.bulletVariance,o=a.equipped,i=a.bulletForce,r=nt.Vector.angle(e,t);return{x:Math.cos(r)*i[o],y:Math.sin(r)*i[o]+it.a.float(-n[o],n[o])}}(l.position,h)),this.gfc=new d.f,this.gfc.beginFill(16777215),p||(p=ct(this.body)),this.gfc.drawRect(0,0,p,p/3),this.gfc.endFill(),this.gfc.pivot.x=this.gfc.width/2,this.gfc.pivot.y=this.gfc.height/2,s.addChild(this.gfc),c.push(this),this.addImpactEffect=function(e,t){var n=a.getKeyValue("bullet-impacts"),o=new tn(e,t);n.push(o)},this.destroyed=!1,this.destroy=function(e){if(!this.destroyed){var t=this.body.position;this.destroyed=!0,s.removeChild(this.gfc),s.removeChild(this.bulletTrail),nt.World.remove(r,this.body),this.linePoints=null,this.body=null,this.gfc=null,c.indexOf(this)>-1&&c.splice(c.indexOf(this),1),e&&this.addImpactEffect(e,t),r=null,s=null,a=null}},setTimeout(this.destroy.bind(this),500),this}var on=function(e){var t,a,n,o,i,r,s;t||(t=e.getKeyValue("world")),a||(a=e.getKeyValue("weapons-ui")),n||(n=e.getKeyValue("player"));var l=$a().game.player.weapons,c=l.lastShot,d=l.totalAmmo,p=l.equipped,u=l.shotLimiter;if(JSON.parse(c[p])+u[p]<Date.now()&&!a.checkEmpty(p)&&!a.reloading&&d[p]>0){Qa(Ae(p,JSON.stringify(Date.now()))),Qa(X(j)),a.fireBullet(p),n.fireWeaponAnimation(),o||(o=ut(e)),i||(i=ct(o)),r||(r=dt(o)),s||(s=pt("arm",e));var h=!(!a.lastBulletByWepType[p]||!$a().game.player.perks.lastBullet.owned);if("shotgun weapon"===p?new an(0,0,e,null,{body:nt.Bodies.rectangle(o.position.x,s.position.y,10,4,{collisionFilter:yt})}):new an(o.position.x,s.position.y,e,"pistol weapon"!==p?p.split(" ")[0]:void 0),"shotgun weapon"===p)for(var m=0;m<10;++m)new nn(s.position.x,s.position.y,e,"shotgun",h);else new nn(s.position.x,s.position.y,e,"pistol weapon"!==p?p.split(" ")[0]:void 0,null,h);t=null,a=null,n=null,o=null,i=null,r=null,s=null}else 0===d[p]&&!1===$a().game.showingMessage?a.shaking||(a.changeTextForEmptyShake("EMPTY"),a.emptyMagShake()):a.checkEmpty(p)&&!1===$a().game.showingMessage&&(a.reloading||a.shaking||(a.changeTextForEmptyShake("RELOAD"),a.emptyMagShake()))},rn=function(){function e(){var t=this;Object(ht.a)(this,e);var a=window.gameObjects;this.to=window.TweenLite.to,this.set=window.TweenLite.set;var n=a.getKeyValue("game-pixi-container");this.container=n;var o=a.getKeyValue("muzzle-flashes-sheet"),i=new d.h(o.textures["muzzle-flash1.png"]),r=new d.h(o.textures["muzzle-flash2.png"]),s=new d.h(o.textures["muzzle-flash3.png"]),l=new d.h(o.textures["muzzle-flash4.png"]),c=new d.h(o.textures["muzzle-flash5.png"]),p=[i,r,s,l,c];n.addChild(i),n.addChild(r),n.addChild(s),n.addChild(l),n.addChild(c),i.visible=!1,r.visible=!1,s.visible=!1,l.visible=!1,c.visible=!1,this.muzzleScale=.65,this.blurFilter=new d.k.BlurFilter,this.blurFilter.blur=this.getRandomBlur(),this.blurFilter.quality=5,this.glowFilter=new za.a,this.glowFilter.innerStrength=.1,this.glowFilter.outerStrength=it.a.float(1,1.5),this.adjustmentFilter=new Da.a,this.adjustmentFilter.brightness=2,this.adjustmentFilter.saturation=2,this.flashes=[],p.forEach((function(e){e.updateAnchor=!0,e.scale={x:t.muzzleScale,y:t.muzzleScale},e.filters=at.getState().game.filterEffects?[t.blurFilter,t.adjustmentFilter,t.glowFilter]:[],t.flashes.push(e)}))}return Object(Pa.a)(e,[{key:"fireEffect",value:function(e){var t=at.getState().game.player.weapons.equipped,a=at.getState().game.player.modTiers.powder[t].current,n=this.getRandomFlash();n.visible=!0,e&&(n.position=e),at.getState().game.filterEffects&&(this.adjustmentFilter.saturation=1===a?1:2===a?2:3===a?3:4===a?5:1,this.glowFilter.color=1===a?16774400:2===a?16765184:3===a?16739584:4===a?16726016:16777215),n.filters=at.getState().game.filterEffects?[this.glowFilter,this.adjustmentFilter,this.blurFilter]:[],this.container.addChild(n),this.set(n,{alpha:1}),this.set(n.scale,{x:this.muzzleScale}),this.to(n,.1,{alpha:0}),this.to(n.scale,.1,{x:2*this.muzzleScale,onComplete:function(){n.visible=!1}})}},{key:"setMuzzleRotations",value:function(e){this.flashes.forEach((function(t){t.rotation=e})),this.rotation=e}},{key:"getRandomBlur",value:function(){return it.a.float(.5,4)}},{key:"changeBlurAmount",value:function(){this.blurFilter.blur=this.getRandomBlur()}},{key:"getFlashes",value:function(){return this.flashes}},{key:"getRandomFlash",value:function(){return this.flashes[Math.floor(Math.random()*this.flashes.length)]}},{key:"muzzleScale",get:function(){return this._muzzleScale},set:function(e){this._muzzleScale=e}}]),e}(),sn=function(){function e(t){var a=this;Object(ht.a)(this,e);var n=t.x,o=t.y;this.delayedCall=window.TweenLite.delayedCall,this.gameObjects=window.gameObjects,this.world=this.gameObjects.getKeyValue("world"),this.buildObjects=this.gameObjects.getKeyValue("build-objects"),this.container=this.gameObjects.getKeyValue("game-pixi-container"),this.scanAnim=new d.a(this.gameObjects.getKeyValue("turret-scan-sheet").animations.turretScan),this.scanAnim.visible=!0,this.scanAnim.loop=!0,this.scanAnim.play(),this.shootAnim=new d.a(this.gameObjects.getKeyValue("turret-shoot-sheet").animations.turretShoot),this.shootAnim.loop=!1,this.shootAnim.onFrameChange=function(){},this.shootAnim.onComplete=function(){a.shootAnim.gotoAndStop(0),a.scanAnim.play(),a.scanAnim.visible=!0,a.shootAnim.visible=!1},this.shootAnim.visible=!1,this.scanAnim.width=150,this.scanAnim.height=150,this.scanAnim.pivot.x=.5*this.scanAnim.width,this.scanAnim.pivot.y=this.scanAnim.height,this.shootAnim.width=150,this.shootAnim.height=150,this.shootAnim.pivot.x=.5*this.shootAnim.width,this.shootAnim.pivot.y=this.shootAnim.height,this.turret=new d.e,this.turret.addChild(this.scanAnim,this.shootAnim),this.container.addChild(this.turret),this.turret.children.forEach((function(e){})),this.body=nt.Bodies.rectangle(n,o,50,50,{label:"turret barrier",main:this}),this.body.removeSelf=function(){a.destroy()};var i=this.gameObjects.getKeyValue("ground");this.constraint=nt.Constraint.create({bodyA:i,bodyB:this.body,pointA:{x:-ct(i)/2+t.x,y:-dt(i)/2},pointB:{x:0,y:dt(this.body)/2},length:0}),nt.World.add(this.world,[this.body,this.constraint]),this.body.strength=250,this.healthDisplay=new d.i("health: ".concat(this.body.strength),{fontSize:12,fill:16777215}),this.healthDisplay.pivot.x=.5*this.healthDisplay.width,this.container.addChild(this.healthDisplay),this.direction="right";var r=this.gameObjects.getKeyValue("player");return r.dead||r.sprites.forEach((function(e){a.container.addChild(e)})),this.destroyed=!1,this}return Object(Pa.a)(e,[{key:"takeDamage",value:function(e){this.body.strength-=e,this.healthDisplay.text="health: ".concat(this.body.strength)}},{key:"displayBarrierStrength",value:function(e){var t=e(this.body),a=t.x,n=t.y;this.healthDisplay.position={x:a,y:n-100},this.turret.position={x:a,y:n}}},{key:"updateDirection",value:function(e){this.turret.scale.x="left"===e?-1:1,this.direction=e}},{key:"getBody",value:function(){return this.body}},{key:"resumeScan",value:function(){this.scanning||(this.scanning=!0,this.scanAnim.play(),this.scanAnim.visible=!0,this.shootAnim.visible=!1)}},{key:"fireBullet",value:function(){if(!this.destroyed){this.muzzleFlashFX||(this.muzzleFlashFX=new rn,this.muzzleFlashFX.setMuzzleRotations("left"===this.direction?Object(mt.degrees)(-92):Object(mt.degrees)(92)));at.getState().game.player.weapons.bulletForce;var e=this.body.position,t=e.x,a=e.y;this.muzzleFlashFX.fireEffect("left"==this.direction?{x:this.turret.position.x-100,y:this.turret.position.y-25}:{x:this.turret.position.x+100,y:this.turret.position.y-25});var n=nt.Bodies.circle(t,a-25,5),o=it.a.float(-5e-4,-75e-5);new an(0,0,this.gameObjects,null,{body:nt.Bodies.rectangle(t,a-50,7,4,{collisionFilter:yt}),force:"right"===this.direction?{x:it.a.float(-35e-5,-75e-5),y:o}:{x:it.a.float(35e-5,75e-5),y:o}}),new nn(0,0,this.gameObjects,"turret",{overrideBody:n,overrideForce:"left"===this.direction?{x:-.01,y:-75e-5}:{x:.01,y:-75e-5},overrideAngle:"left"===this.direction?-3:.1})}}},{key:"shoot",value:function(){var e=this;if(!this.shooting&&!this.destroyed){var t=at.getState().game.traps.turret.cooldown;this.fireBullet(),this.shooting=!0,this.scanAnim.visible=!1,this.shootAnim.visible=!0,this.shootAnim.play(),this.delayedCall(t,(function(){e.shooting=!1}))}}},{key:"destroy",value:function(){if(!this.destroyed){this.destroyed=!0,new Na(this.body.position,!0),this.container.removeChild(this.turret,this.healthDisplay),nt.World.remove(this.world,[this.body,this.constraint]);var e=this.buildObjects.indexOf(this,1);e>-1&&this.buildObjects.splice(e,1)}}}]),e}(),ln=function(){function e(t,a,n){var o=this;Object(ht.a)(this,e);var i=new d.a(window.gameObjects.getKeyValue("sparks-sheet").animations["spark-particle"]),r=new d.a(window.gameObjects.getKeyValue("muzzle-sparks-sheet").animations.muzzleSparks),s=[i,r];switch(s.forEach((function(e){var t=n&&n.scale?n.scale:1;1!==t&&(e.scale.x=t,e.scale.y=t),e.pivot.x=.5*e.width,e.pivot.y=.5*e.height,e.loop=!1,e.animationSpeed=n&&n.animationSpeed?n.animationSpeed:1,e.onComplete=function(){o.container.removeChild(e),o.container=null,e=null,i=null,r=null,s=null}})),this.container=window.gameObjects.getKeyValue("game-pixi-container"),t){case 1:this.spark=i,n&&n.tint&&(this.spark.tint=n.tint);break;case 2:this.spark=r,this.blurFilter=new d.k.BlurFilter(it.a.float(.5,.75),5),this.adjFilter=new Da.a,this.glowFilter=new za.a,this.adjFilter.saturation=2,this.adjFilter.brightness=1.5,this.glowFilter.color=16777215,this.filters=at.getState().game.filterEffects?[this.blurFilter,this.adjFilter,this.glowFilter]:[],this.spark.filters=this.filters}if(n&&n.scale){var l=new d.e;this.spark.scale.x=n.scale,this.spark.scale.y=n.scale,l.addChild(this.spark),l.pivot.x=l.width*(.5*n.scale),l.pivot.y=l.height*(.5*n.scale),this.spark=l}return this.renderBody=a,(!n||n&&!n.stop)&&(this.spark.play&&this.spark.play(),this.spark.children&&this.spark.children[0]&&this.spark.children[0].play()),this}return Object(Pa.a)(e,[{key:"getFilters",value:function(){return{glow:this.glowFilter,adjust:this.adjFilter,blur:this.blurFilter}}},{key:"updateFilters",value:function(e){this.filters=e,this.spark.filters=this.filters}},{key:"renderPosition",value:function(e){this.renderBody&&(this.spark.position=e(this.renderBody),this.container&&-1===this.container.children.indexOf(this.spark)&&this.container.addChild(this.spark))}}]),e}(),cn=at.dispatch,dn=function(){cn(ge()),cn(Ce("mouse up")),localStorage&&localStorage.setItem("ZombieChamber-GameSave",JSON.stringify(at.getState().game))},pn=a(46),un=a.n(pn);function hn(){var e=Object(wt.a)(["\nheight: 140px;\nwidth: 100%;\nbackground-color: #222;\nopacity: .5;\n"]);return hn=function(){return e},e}function mn(){var e=Object(wt.a)(["\nheight: 140px;\nwidth: 100%;\nposition: absolute;\nmargin: auto;\ntop: 40px;\n"]);return mn=function(){return e},e}var gn=Bt.MenuButtonContainer,yn=Bt.MenuButtonSpacer,fn=vt.a.div(mn()),bn=vt.a.div(hn()),wn=function(){var e=at.dispatch,t=(0,at.getState)().game,a=t.waveNum,n=t.lvlToWin,o=t.gameState,i=t.gameSubState,r=window.gameObjects.getKeyValue("screen-ui");a<n?(dn(),r.unpause(),e(_e("main",o,S.GAMEPLAY)),e(_e("sub",i,g))):alert("You win!")};function vn(){window.gameObjects;var e=Object(l.c)(),t=Object(l.d)((function(e){return e.game.waveNum})),a=Object(l.d)((function(e){return e.game.lvlToWin})),n=Object(l.d)((function(e){return e.game.gameState})),i=Object(l.d)((function(e){return e.game.gameSubState})),r=Object(l.d)((function(e){return e.game.scoreSubmissions})),s=Object(l.d)((function(e){return e.scoreSubmissionName})),c=function(){e(_e("sub",i,E))};return o.a.createElement(o.a.Fragment,null,o.a.createElement(fn,{className:"shop-query-menu"},o.a.createElement(bn,null),o.a.createElement(gn,{"space-top":2},o.a.createElement(yn,null,o.a.createElement(zt,null,o.a.createElement(yn,{padding:4},o.a.createElement(Nt,{width:300,height:40,onClick:function(){e(_e("main",n,S.SHOP_MENU)),e(_e("sub",i,m))}},"Shop"))),o.a.createElement(zt,null,o.a.createElement(yn,{padding:4},o.a.createElement(Nt,{width:300,height:40,onClick:function(){e(_e("main",n,S.BUILD_MENU)),e(_e("sub",i,m))}},"Build Barriers/Traps")))),i===E?o.a.createElement(yn,null,o.a.createElement(zt,null,o.a.createElement(yn,{padding:2},o.a.createElement("input",{value:s,onChange:function(t){t.preventDefault(),e(W(t.target.value))},style:{width:"200px",height:"30px",borderRadius:"2px",border:"2px solid rgba(0, 0, 0, 0.5)"}}))),o.a.createElement(zt,null,o.a.createElement(yn,{padding:2},o.a.createElement(Nt,{width:300,height:40,onClick:function(){!function(e){var t=at.getState,a=at.dispatch;un.a.post("http://localhost:8080/scores",{name:t().game.scoreSubmissionName,score:t().game.score}).catch((function(e){return console.log(e)})).then((function(n){console.log(n),a(N(t().game.waveNum)),e()}))}((function(){e(_e("sub",i,v))}))}},"Submit")))):o.a.createElement(yn,null,o.a.createElement(zt,null,o.a.createElement(yn,{padding:2},o.a.createElement(Nt,{width:300,height:40,onClick:t<a||r[t]&&1===r[t]?wn:c},t<a||r[t]&&1===r[t]?"Next Wave":"Submit your score!"))),(!r[t]||1!==r[t])&&t<a?o.a.createElement(zt,null,o.a.createElement(yn,{padding:2},o.a.createElement(Nt,{width:300,height:40,onClick:c},"Submit your score"))):o.a.createElement(o.a.Fragment,null)))))}var xn=function e(t){Object(ht.a)(this,e);var a=at.getState().game.player.weapons.equipped,n=at.getState().game.player.modTiers.powder[a].current,o=window.TweenLite.to,i=window.gameObjects,r=new ln(2,t),s=i.getKeyValue("spark-sprites");if(r.spark.scale.x=.5,r.spark.scale.y=.5,s.push(r),r.spark.gotoAndPlay(it.a.int(10,15)),at.getState().game.filterEffects){var l=r.getFilters(),c=l.adjust,d=l.glow,p=l.blur;c.brightness=1===n?1:2===n?2:3===n?3:4===n?3.5:1,c.saturation=1===n?1:2===n?2:3===n?3:4===n?5:1,d.color=1===n?16777215:2===n?16774400:3===n||4===n?16739584:16777215,r.updateFilters([d,p,c])}return o(r.spark.scale,.1,{x:.55,y:.55}),r};function En(){var e=this,t=window.gameObjects,a=t.getKeyValue("world"),n=t.getKeyValue("engine"),o=t.getKeyValue("weapons-ui"),i=t.getKeyValue("game-pixi-container"),r=at.getState,s=at.dispatch,c=r().game,p=c.width,u=c.height,h=c.player.constants,g=h.width,y=h.height,f=window.TweenLite,k=f.delayedCall,C=f.to,A=f.from;f.set;this.body=nt.Bodies.rectangle(400,200,g,y,{inertia:1/0,collisionFilter:yt}),this.arm=nt.Bodies.rectangle(400,200,30,15,{friction:0,inertia:1/0,collisionFilter:yt}),this.armAttach=nt.Constraint.create({bodyA:this.arm,bodyB:this.body,pointA:{x:12,y:0},pointB:{x:0,y:-80},length:0}),this.head=nt.Bodies.rectangle(400,200,20,24,{inertia:1/0,collisionFilter:yt}),this.headAttach=nt.Constraint.create({bodyA:this.head,bodyB:this.body,pointA:{x:0,y:10},pointB:{x:0,y:-(y/2+5)},length:0}),this.composite=nt.Composite.create(),nt.Composite.add(this.composite,[this.body,this.arm,this.head,this.armAttach,this.headAttach]),this.composite.bodies.forEach((function(t){t.label="player character",t.main=e})),s(ye(this.composite.id)),s(Ve({bodyId:this.body.id,headId:this.head.id,armId:this.arm.id})),s(Y(JSON.stringify(Date.now()))),this.composite.body=this.body,this.composite.arm=this.arm,nt.World.add(a,this.composite),s(Ae("pistol weapon",JSON.stringify(Date.now()))),s(Ae("smg weapon",JSON.stringify(Date.now()))),s(Ae("shotgun weapon",JSON.stringify(Date.now()))),this.life=100;var B=new d.f;B.lineStyle(1,2108682),B.drawRect(0,0,.75*p,12),i.addChild(B);var K=new d.f;K.beginFill(16777215),K.tint=64154,K.drawRect(0,0,.75*p-2,10);var V=new $t.a({thickness:5,lightAlpha:.5,lightColor:16777215,shadowAlpha:.4,shadowColor:0});K.filters=r().game.filterEffects?[V]:[],i.addChild(K),this.initialLifebarWidth=K.width,B.position.x=50,B.position.y=u-60,K.position.x=B.position.x+1,K.position.y=B.position.y+1;K.position;var O=t.getKeyValue("char-reload-pistol-sheet"),j=new d.a(O.animations.char_reload_pistol);j.loop=!1,j.animationSpeed=.5,j.updateAnchor=!0,j.pivot.x=.52*j.width,j.pivot.y=.5*j.height,j.visible=!1,j.onComplete=function(){j.gotoAndStop(0),o.reloading=!1},i.addChild(j);var z=t.getKeyValue("char-reload-smg-sheet"),I=new d.a(z.animations.char_reload_smg);I.loop=!1,I.animationSpeed=.5,I.updateAnchor=!0,I.pivot.x=.52*j.width,I.pivot.y=.5*j.height,I.visible=!1,I.onComplete=function(){I.gotoAndStop(0),o.reloading=!1},i.addChild(I);var W=t.getKeyValue("char-reload-shotgun-sheet"),N=new d.a(W.animations.shotgunReload);N.loop=!1,N.animationSpeed=.5,N.updateAnchor=!0,N.pivot.x=.725*N.width,N.pivot.y=.5*N.height,N.visible=!1,this.shotgunShellLoadIterations=0,this.gotoToEndOfShotgunReload=!0,N.onComplete=function(){N.gotoAndStop(0),o.reloading=!1,e.shotgunShellLoadIterations=0,e.gotoToEndOfShotgunReload=!0},i.addChild(N),this.reloadAnimsByType={"pistol weapon":j,"smg weapon":I,"shotgun weapon":N},this.reloadAnims=[j,I,N];var H=new Ga.a;H.kernelSize=5,H.velocity.x=30,H.velocity.y=40;var Z=t.getKeyValue("melee-pistol-sheet"),$=new d.a(Z.animations.melee_pistol);$.loop=!1,$.animationSpeed=.75,$.updateAnchor=!0,$.pivot.x=.5*$.width,$.pivot.y=.5*$.height,$.visible=!1,$.onComplete=function(){$.gotoAndStop(0),$.visible=!1,e.meleeAttackInProgress=!1,e.removeMeleeHitbox()},$.onFrameChange=function(){e.meleeAttackInProgress=!0,r().game.filterEffects&&$.currentFrame>12&&$.currentFrame<15?$.filters=[H]:$.filters=[]},i.addChild($);var Q=t.getKeyValue("melee-ump-sheet"),ee=new d.a(Q.animations.melee_ump);ee.loop=!1,ee.animationSpeed=.75,ee.updateAnchor=!0,ee.pivot.x=.5*ee.width,ee.pivot.y=.5*ee.height,ee.visible=!1,ee.onComplete=function(){ee.gotoAndStop(0),ee.visible=!1,e.meleeAttackInProgress=!1,e.removeMeleeHitbox()},ee.onFrameChange=function(){e.meleeAttackInProgress=!0,r().game.filterEffects&&ee.currentFrame>11&&ee.currentFrame<14?ee.filters=[H]:ee.filters=[]},i.addChild(ee);var te=t.getKeyValue("melee-shotgun-sheet"),ae=new d.a(te.animations.meleeShotgun);ae.loop=!1,ae.animationSpeed=.5,ae.updateAnchor=!0,ae.pivot.x=.75*ae.width,ae.pivot.y=.5*ae.height,ae.visible=!1,ae.onComplete=function(){ae.gotoAndStop(0),ae.visible=!1,e.meleeAttackInProgress=!1,e.removeMeleeHitbox()},ae.onFrameChange=function(){e.meleeAttackInProgress=!0,r().game.filterEffects&&ae.currentFrame>6&&ae.currentFrame<9?ae.filters=[H]:ae.filters=[]},i.addChild(ae),this.meleeSprites=[$,ee,ae],this.grenadeThrowInProgress=!1,this.grenadeForce={x:.001,y:.001},this.chargingGrenade=!1,this.chargeGrenade=function(){e.chargeGrenadeSound=t.getKeyValue("charging-grenade-sound"),e.chargeGrenadeSound&&!e.chargingGrenade&&e.chargeGrenadeSound.play(),i.addChild(e.meter),e.grenadeChargeRate=r().game.player.weapons.grenadeChargeRate,e.chargingGrenade=!0,e.grenadeForce.x<=e.grenadeUpperForceThreshold&&(e.grenadeForce.x+=e.grenadeChargeRate,e.grenadeForce.y+=e.grenadeChargeRate)};e.meter=new d.f,e.meter.beginFill(16753215),e.meter.drawRect(0,0,100,10),i.addChild(e.meter),this.renderGrenadeChargeMeter=function(t){var a=t(e.body),n=a.x,o=a.y;e.grenadeUpperForceThreshold=r().game.player.weapons.grenadeUpperForceThreshold,e.meter&&e.chargingGrenade?(e.meter.position.x=n-e.meter.width/2,e.meter.position.y=o-.75*dt(e.body),e.meter.width=e.grenadeForce.x/e.grenadeUpperForceThreshold*100):e.meter.width=0},this.createGrenade=function(){t.getKeyValue("weapons-ui").updateGrenadeIcons();var a=t.getKeyValue("grenades");e.grenadeChargeRate=r().game.player.weapons.grenadeChargeRate,e.calculatedGrenadeForce=function(e,t,a){var n=nt.Vector.angle(e,t);return{x:Math.cos(n)*a.x,y:Math.sin(n)*a.y}}(e.arm.position,r().game.mouseRelativeToPlayerPosition,e.grenadeForce),a.push(new qa(r().game.mouseState.x===gt?e.body.position.x+ct(e.body):e.body.position.x-ct(e.body),e.body.position.y-dt(e.body)/2,8,e.calculatedGrenadeForce)),e.grenadeForce={x:.001,y:.001},e.chargingGrenade=!1},this.throwGrenade=function(){var t=r().game.player.weapons.equipped,a={"pistol weapon":function(){oe.currentFrame<1&&(oe.visible=!0,oe.gotoAndPlay(8))},"smg weapon":function(){re.currentFrame<1&&(re.visible=!0,re.gotoAndPlay(8))},"shotgun weapon":function(){le.currentFrame<1&&(le.visible=!0,le.gotoAndPlay(8))}};e.grenadeThrowInProgress||(e.chargeGrenadeSound&&e.chargeGrenadeSound.stop(),k(.2,(function(){window.gameObjects.getKeyValue("throw-sound").play(),e.createGrenade()})),e.chargingGrenade=!1,e.grenadeThrowInProgress=!0,a[t]&&(a[t](),Object(l.b)((function(){s(Ye()),s(X(F))}))))};var ne=t.getKeyValue("grenade-pistol-sheet"),oe=new d.a(ne.animations.grenade_throw_pistol);oe.loop=!1,oe.animationSpeed=1,oe.updateAnchor=!0,oe.pivot.x=.5*oe.width,oe.pivot.y=.5*oe.height,oe.visible=!1,oe.onComplete=function(){oe.gotoAndStop(0),oe.visible=!1,e.grenadeThrowInProgress=!1},oe.onFrameChange=function(){e.grenadeThrowInProgress=!0,oe.currentFrame>22&&(e.grenadeThrown||(e.grenadeThrown=!0,k(.5,(function(){e.grenadeThrown=!1})))),oe.currentFrame>27&&(oe.gotoAndStop(0),oe.visible=!1,e.grenadeThrowInProgress=!1)},i.addChild(oe);var ie=t.getKeyValue("grenade-ump-sheet"),re=new d.a(ie.animations.grenade_throw_ump);re.loop=!1,re.animationSpeed=1,re.updateAnchor=!0,re.pivot.x=.5*re.width,re.pivot.y=.5*re.height,re.visible=!1,re.onComplete=function(){re.gotoAndStop(0),re.visible=!1,e.grenadeThrowInProgress=!1},re.onFrameChange=function(){e.grenadeThrowInProgress=!0,22===re.currentFrame&&(e.grenadeThrown=!0,k(.5,(function(){e.grenadeThrown=!1}))),re.currentFrame>27&&(re.gotoAndStop(0),re.visible=!1,e.grenadeThrowInProgress=!1)},i.addChild(re);var se=t.getKeyValue("grenade-shotgun-sheet"),le=new d.a(se.animations.shotgunGrenadeThrow);le.loop=!1,le.animationSpeed=1,le.updateAnchor=!0,le.pivot.x=.5*le.width,le.pivot.y=.5*le.height,le.visible=!1,le.onComplete=function(){le.gotoAndStop(0),le.visible=!1,e.grenadeThrowInProgress=!1},le.onFrameChange=function(){22===le.currentFrame&&(e.grenadeThrown=!0,k(.5,(function(){e.grenadeThrown=!1}))),le.currentFrame>27&&(le.gotoAndStop(0),le.visible=!1,e.grenadeThrowInProgress=!1)},i.addChild(le),this.grenadeSprites=[oe,re,le],this.grenadeSpritesByEquipped={"pistol weapon":oe,"smg weapon":re,"shotgun weapon":le},this.ejectedMags=[],this.reloadMagazineActionsByType={"pistol weapon":function(){var t=r().game,n=t.player,o=n.weapons,s=(o.equipped,o.reloadSpeed,n.perks.magDmg.owned),l=t.mouseState.x;Qe.play(),Qe.fade(1,0,300);var c=l===gt?"left":"right",p=nt.Bodies.rectangle(e.body.position.x+("left"===c?20:-20),e.body.position.y,7,20,{collisionFilter:s?{}:bt});p.label="magazine",nt.World.add(a,p),nt.Body.applyForce(p,e.body.position,{x:+("left"===c?it.a.float(.0025,.005):it.a.float(-.0025,-.005)),y:it.a.float(-.0025,-.005)});var u=new d.f;u.beginFill(3355443),u.drawRect(0,0,7,20),u.pivot.x=u.width/2,u.pivot.y=u.height/2;var h={gfx:u,body:p};e.ejectedMags.unshift(h),i.addChild(u),k(2,(function(){nt.World.remove(a,p),u.destroy(),e.ejectedMags.pop()}))},"smg weapon":function(){var t=r().game,n=t.player.perks.magDmg.owned,o=t.mouseState.x;Qe.play(),Qe.fade(1,0,300);var s=o===gt?"left":"right",l=nt.Bodies.rectangle(e.body.position.x+("left"===s?20:-20),e.body.position.y-dt(e.body)/2,7,42,{collisionFilter:n?{}:bt});l.label="magazine",nt.World.add(a,l),nt.Body.applyForce(l,e.body.position,{x:+("left"===s?it.a.float(.004,.01):it.a.float(-.004,-.01)),y:it.a.float(-.0015,-.01)});var c=new d.f;c.beginFill(3355443),c.drawRect(0,0,7,42),c.pivot.x=c.width/2,c.pivot.y=c.height/2;var p={gfx:c,body:l};e.ejectedMags.unshift(p),i.addChild(c),k(2,(function(){nt.World.remove(a,l),c.destroy(),e.ejectedMags.pop()}))},"shotgun weapon":function(){!function t(){k(.3,(function(){e.shotgunShellLoadIterations>5?N.gotoAndPlay(21):(N.gotoAndPlay(10),e.shotgunShellLoadIterations++,t())}))}()}},this.updateEjectedMagPositions=function(t){e.ejectedMags.forEach((function(e){var a=t(e.body),n=a.x,o=a.y,i=a.rotation;e.gfx.position={x:n,y:o},e.gfx.rotation=i}))},this.reloadWeapon=function(){var t=r().game.player.weapons,a=t.reloadSpeed,n=(t.reloadAnimationFrames,t.equipped);e.reloadAnimsByType[n].animationSpeed=a[n],e.reloadAnimsByType[n].gotoAndPlay(1),k("pistol weapon"===n?a[n]/4:"smg weapon"===n?2*a[n]+a[n]/2:"shotgun weapon"===n?a[n]+a[n]/4:0,(function(){!0===e.reloadAnimsByType[n].visible&&(s(X(M)),e.reloadMagazineActionsByType[n]())}))};var ce=t.getKeyValue("right-arm-pistol-fire-sheet"),de=new d.a(ce.animations.right_char_arm_pistol_fire);de.play(),de.loop=!1,de.animationSpeed=.35,de.updateAnchor=!0,de.pivot.x=.6*de.width,de.pivot.y=.4*de.height,de.onComplete=function(){de.stop()},i.addChild(de);var pe=t.getKeyValue("right-arm-smg-fire-sheet"),ue=new d.a(pe.animations.char_right_arm_smg_fire);ue.play(),ue.loop=!1,ue.animationSpeed=.35,ue.updateAnchor=!0,ue.pivot.x=.6*ue.width,ue.pivot.y=.4*ue.height,ue.onComplete=function(){ue.stop()},i.addChild(ue);var we=t.getKeyValue("arms-fire-shotgun-sheet"),ve=new d.a(we.animations.rightArmFireShotgun);ve.play(),ve.loop=!1,ve.animationSpeed=.5,ve.updateAnchor=!0,ve.pivot.x=.6*ve.width,ve.pivot.y=.4*ve.height,ve.onComplete=function(){ve.stop()},i.addChild(ve);var Ke=lt("char-head");i.addChild(Ke),this.positionHeadSprite=function(t){var a=r().game,n=a.keys,o=a.mouseState.x,i=a.mousePosition,s=a.player,l=s.variables,c=l.jumping,d=l.currentDirection,p=s.weapons.equipped,u=t.mx,h=t.my,m=(0,t.fn)(e.head),g=m.x,y=m.y;(n.indexOf(68)>-1||n.indexOf(65)>-1)&&!c?"right"===d?Ke.position.x=o===gt?g+5:g:"left"===d&&(Ke.position.x="less than player x position"===o?g-5:g):Ke.position.x=g,Ke.position.y=y+12,c?e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.6*e.width,e.pivot.y=.47*e.height})):"less than player y position"===h?(e.armsSpritesByType[p].forEach((function(e){e.pivot.y=.45*e.height})),Ke.rotation=u===gt?2.5:.957):"greater than player y position"===h?(e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.65*e.width,e.pivot.y=.45*e.height})),Ke.rotation=u===gt?-2.723:-.5532):i.x>550&&i.x<650?(e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.62*e.width,e.pivot.y=.42*e.height})),Ke.rotation=u===gt?-2.723:-.5532):i.x<750&&i.y>250&&u===gt?(e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.62*e.width,e.pivot.y=.42*e.height})),Ke.rotation=-2.723):i.x>450&&i.y>250&&"less than player x position"===u?(e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.62*e.width,e.pivot.y=.42*e.height})),Ke.rotation=-.5532):(e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.6*e.width,e.pivot.y=.42*e.height})),Ke.rotation=We.rotation)},Ke.pivot.x=.52*Ke.width,Ke.pivot.y=.17*Ke.height,this.headSprite=Ke;var Oe=t.getKeyValue("char-run-sheet"),Te=new d.a(Oe.animations.char_run);Te.loop=!0,Te.animationSpeed=1,Te.updateAnchor=!0,Te.pivot.x=.52*Te.width,Te.pivot.y=.5*Te.height,i.addChild(Te);var je=t.getKeyValue("char-idle-sheet"),Me=new d.a(je.animations.char_idle);Me.play(),Me.loop=!0,Me.animationSpeed=.1,Me.updateAnchor=!0,Me.pivot.x=.52*Me.width,Me.pivot.y=.5*Me.height,i.addChild(Me);var Fe=t.getKeyValue("char-jump-sheet"),Pe=new d.a(Fe.animations.char_jump);Pe.loop=!1,Pe.animationSpeed=.35,Pe.updateAnchor=!0,Pe.pivot.x=.52*Pe.width,Pe.pivot.y=.5*Pe.height,Pe.visible=!1,i.addChild(Pe),this.stopJumpAnimation=function(){Pe.gotoAndStop(0),Pe.visible=!1},Pe.onComplete=function(){r().game.player.variables.jumping?e.resumeJumpAnimation():e.stopJumpAnimation()};var ze=new Ga.a({velocity:{y:0}});this.resumeJumpAnimation=function(){Pe.gotoAndPlay(3),Pe.visible=!0,Te.visible=!1,Me.visible=!1},this.playJumpAnimation=function(){r().game.filterEffects&&(Pe.filters=[ze],A(ze.velocity,.35,{y:50,onUpdate:function(){Pe.filters=[ze]}})),Pe.gotoAndPlay(0),Pe.visible=!0,Te.visible=!1,Me.visible=!1};var Ie=t.getKeyValue("left-arm-pistol-fire-sheet"),We=new d.a(Ie.animations.left_char_arm_pistol_fire);We.play(),We.loop=!1,We.animationSpeed=.35,We.updateAnchor=!0,We.pivot.x=.6*We.width,We.pivot.y=.4*We.height,We.onComplete=function(){We.gotoAndStop(0)},i.addChild(We);var Ne=t.getKeyValue("left-arm-smg-fire-sheet"),He=new d.a(Ne.animations.char_left_arm_smg_fire);He.play(),He.loop=!1,He.animationSpeed=.35,He.updateAnchor=!0,He.pivot.x=.6*He.width,He.pivot.y=.4*He.height,He.onComplete=function(){He.gotoAndStop(0)},i.addChild(He);var Ue=new d.a(we.animations.leftArmFireShotgun);Ue.play(),Ue.loop=!1,Ue.animationSpeed=.5,Ue.updateAnchor=!0,Ue.pivot.x=.6*Ue.width,Ue.pivot.y=.4*Ue.height,Ue.onComplete=function(){Ue.stop()},i.addChild(Ue);new Ga.a({velocity:{y:0}});this.armsSprites=[We,de,He,ue,Ue,ve],this.armsSpritesByType={"pistol weapon":[We,de],"smg weapon":[He,ue],"shotgun weapon":[Ue,ve]};var qe=new rn,Xe=window.gameObjects.getKeyValue("9mm-sound1"),Je=window.gameObjects.getKeyValue("9mm-sound2"),Ze=new Wa.Howl({src:[Xe]}),$e=(new Wa.Howl({src:[Je],sprite:{_1:[500,1e3]}}),window.gameObjects.getKeyValue("pistol-reload-sound")),Qe=new Wa.Howl({src:[$e],volume:.25}),et=t.getKeyValue("jump-sound"),tt=t.getKeyValue("pain1-sound"),ot=t.getKeyValue("pain2-sound"),st=t.getKeyValue("death-rip-sound"),pt=t.getKeyValue("player-death-sound"),ht=t.getKeyValue("bullet-impact-body-sound"),ft=t.getKeyValue("smg-fire-sound"),wt=t.getKeyValue("shotgun-blast-sound");this.fireWeaponAnimation=function(){var t=r().game,a=(t.mouseState,t.player.weapons.equipped);e.armsSpritesByType[a].forEach((function(e){e.visible=!0})),e.armsSpritesByType[a].forEach((function(e){e.gotoAndPlay(0)})),qe.fireEffect();var n=new xn(e.arm);e.currentMuzzleSpark=n,"pistol weapon"===a&&Ze.play(),"smg weapon"===a&&ft.play(),"shotgun weapon"===a&&wt.play()},this.charRunSprite=Te,this.charIdleSprite=Me,this.charJumpSprite=Pe,this.charReloadPistolSprite=j,this.charReloadSMGSprite=I,this.charReloadShotgunSprite=N,this.bodySprites=[Te,Me,Pe,j,I,N,$,ee,ae,oe,re,le],this.sprites=[de,ue,ve,Te,Me,Pe,j,I,N,$,ee,oe,re,le,We,He,Ue],this.shadow=new d.f,this.shadow.beginFill(0,.35),this.shadow.drawEllipse(0,0,60,10);var vt=new d.k.BlurFilter;vt.blur=8,this.shadow.filters=r().game.filterEffects?[vt]:[],this.checkFilters=function(){r().game.filterEffects?(e.shadow.alpha=.85,e.shadow.filters=[vt],K.filters=[V]):(e.shadow.alpha=.45,e.shadow.filters=[],K.filters=[])},this.setBodySpritesPositions=function(t){var a=(0,t.fn)(e.body),n=a.x,o=a.y;e.bodySprites.forEach((function(e){e.position.x=n,e.position.y=o-15})),i&&-1===i.children.indexOf(e.shadow)&&i.addChild(e.shadow),e.shadow.position.x=n,e.shadow.position.y=e.bodySprites[0].position.y+e.bodySprites[0].height/2-5},this.setArmsSpritePosition=function(t){var a,n=r().game,o=n.keys,i=n.mouseState,s=i.x,l=i.y,c=n.player.variables,d=c.jumping,p=c.currentDirection,u=(0,t.fn)(e.arm),h=u.x,m=u.y,g=u.rotation;e.armsSprites.forEach((function(e){(o.indexOf(68)>-1||o.indexOf(65)>-1)&&!d?"right"===p?e.x=s===gt?h+5:h:"left"===p&&(e.x="less than player x position"===s?h-5:h):e.x=h,e.y=d&&"less than player y position"===l?m-10:m,e.rotation=g})),qe.getFlashes().forEach((function(e){e.position=de.position,e.rotation=g-Object(mt.degrees)(90),e.pivot.x=.05*-e.width,e.pivot.y="shotgun weapon"===r().game.player.weapons.equipped?3.25*e.height:2.25*e.height,a=e.position,e.rotation})),e.currentMuzzleSpark&&(e.currentMuzzleSpark.spark.pivot.x=-e.currentMuzzleSpark.spark.width,e.currentMuzzleSpark.spark.position=a,e.currentMuzzleSpark.spark.rotation=g-Object(mt.degrees)(180))},this.meleeAttackInProgress=!1,this.createMeleeHitbox=function(){var t=r().game,n=t.mouseState,o=t.player.weapons.equipped;window.gameObjects.getKeyValue("throw-sound").play(),e.meleeHitbox=nt.Bodies.rectangle(n.x===gt?e.body.position.x+1.75*ct(e.body):e.body.position.x-1.75*ct(e.body),e.body.position.y-dt(e.body)/2,2*ct(e.body),dt(e.body),{isStatic:!0}),e.meleeHitbox.main=e,e.meleeHitbox.label="melee hitbox ".concat(o),nt.World.add(a,e.meleeHitbox)},this.removeMeleeHitbox=function(){e.meleeHitbox&&nt.World.remove(a,e.meleeHitbox)},this.meleeAttack=function(){var t=r().game.player.weapons.equipped,a={"pistol weapon":function(){$.currentFrame<1&&($.visible=!0,$.gotoAndPlay(1))},"smg weapon":function(){ee.currentFrame<1&&(ee.visible=!0,ee.gotoAndPlay(1))},"shotgun weapon":function(){ae.currentFrame<1&&(ae.visible=!0,ae.gotoAndPlay(1))}};e.meleeAttackInProgress||(e.meleeAttackInProgress=!0,k(.35,(function(){e.dead||e.createMeleeHitbox(),k(.1,(function(){e.removeMeleeHitbox()}))})),a[t]())},this.collectHealth=function(t){e.life+=t,e.life>100&&(e.life=100),s(Ge(e.life)),Vt(r().game.scoreAmounts.collectHealth),C(K,.5,{width:e.life/100*e.initialLifebarWidth})},this.collectCredits=function(e){s(De(e)),Vt(r().game.scoreAmounts.collectCredit)},this.collectAmmo=function(e,t){xa("+".concat(t," ").concat(e," ammo"),"#32BD6A",.35,1),s(Le(e,t)),Vt(r().game.scoreAmounts.collectAmmo)},this.playerHit=!1,this.resetPlayerHit=function(){e.playerHit=!0,k(1,(function(){e.playerHit=!1}))},this.blinkAlpha=function(){e.headSprite.alpha=.25,e.armsSprites.forEach((function(e){e.alpha=.25})),e.bodySprites.forEach((function(e){e.alpha=.25})),k(.1,(function(){e.headSprite.alpha=1,e.armsSprites.forEach((function(e){e.alpha=1})),e.bodySprites.forEach((function(e){e.alpha=1}))})),k(.2,(function(){e.headSprite.alpha=.25,e.armsSprites.forEach((function(e){e.alpha=.25})),e.bodySprites.forEach((function(e){e.alpha=.25}))})),k(.3,(function(){e.headSprite.alpha=1,e.armsSprites.forEach((function(e){e.alpha=1})),e.bodySprites.forEach((function(e){e.alpha=1}))})),k(.35,(function(){e.headSprite.alpha=.25,e.armsSprites.forEach((function(e){e.alpha=.25})),e.bodySprites.forEach((function(e){e.alpha=.25}))})),k(.4,(function(){e.headSprite.alpha=1,e.armsSprites.forEach((function(e){e.alpha=1})),e.bodySprites.forEach((function(e){e.alpha=1}))})),k(.45,(function(){e.headSprite.alpha=.25,e.armsSprites.forEach((function(e){e.alpha=.25})),e.bodySprites.forEach((function(e){e.alpha=.25}))})),k(.5,(function(){e.headSprite.alpha=1,e.armsSprites.forEach((function(e){e.alpha=1})),e.bodySprites.forEach((function(e){e.alpha=1}))}))},this.takeDamage=function(t){var a=r().game.player.variables.defense;e.life-=t-a,Ot(r().game.scoreAmounts.penalties.damageTaken),Object(l.b)((function(){s(Ge(e.life)),s(U(R,t))})),1===[1,2][Math.floor(2*Math.random())]?tt.play():ot.play(),ht.play(),K.tint=14487054,C(K,.2,{width:e.life/100*e.initialLifebarWidth}),C(K,.1,{y:K.position.y+2,onComplete:function(){C(K,.1,{y:K.position.y-3,onComplete:function(){C(K,.1,{y:K.position.y+1,onComplete:function(){K.tint=64154}})}})}});var n={x:it.a.float(e.bodySprites[0].position.x-5,e.bodySprites[0].position.x+20),y:it.a.float(e.bodySprites[0].position.y,e.bodySprites[0].position.y-60)};xa("-".concat(t),"#FF0000",.35,1,12),new Ta(null,n,.75),e.blinkAlpha(),e.resetPlayerHit(),e.life<=0&&e.kill()},this.acceptHealth=function(t){e.life=t,s(Ge(e.life)),C(K,.5,{width:e.life/100*e.initialLifebarWidth})},this.addSpritesInOrder=function(){i.addChild(e.headSprite),e.armsSprites.forEach((function(e){return i.addChild(e)})),e.bodySprites.forEach((function(e){return i.addChild(e)})),i.addChild(We),i.addChild(He),i.addChild(Ue),i.addChild(K)},this.respawn=function(){if(n.timing.timeScale=1,e.playerRagdoll&&(e.playerRagdoll.destroy(),e.playerRagdoll=null),s(X(L)),Ot(r().game.scoreAmounts.penalties.respawn),e.addSpritesInOrder(),e.life=100,K.width=e.initialLifebarWidth,e.dead=!1,K.visible=B.visible=!0,e.lastDeathType===ja)if(e.lastBodyPosition.x<0)for(;e.body.position.x<200&&e.body.position.y>0;)nt.Composite.translate(e.composite,{x:100,y:-100});else for(;e.body.position.x>r().game.width&&e.body.position.y>0;)nt.Composite.translate(e.composite,{x:-100,y:-100});nt.World.add(a,e.composite),r().game.lastGameSubState===v?s(_e("sub",r().game.gameSubState,v)):s(_e("sub",r().game.gameSubState,w))},this.dead=!1,this.kill=function(o){if(!1===e.dead){o?e.lastDeathType=o:(st.play(),e.lastDeathType="killed by zombie"),s(X(P)),Ot(r().game.scoreAmounts.penalties.killed),pt.play(),n.timing.timeScale=.5,K.visible=B.visible=!1,e.life=0,e.dead=!0,e.removeMeleeHitbox(),e.lastBodyPosition=e.body.position,nt.World.remove(a,e.composite),e.bodySprites&&e.armsSprites&&(i.removeChild(e.headSprite),e.bodySprites.forEach((function(e){return i.removeChild(e)})),e.armsSprites.forEach((function(e){return i.removeChild(e)})));var c={x:1===n.timing.timeScale?1===Me.scale.x?.1:-.1:1===Me.scale.x?.25:-.25,y:1===n.timing.timeScale?-.25:-.75},d=["head","body","limb","none"],p=d[Math.floor(Math.random()*d.length)];e.playerRagdoll="head"===p?t.setKeyValue("player-ragdoll",new Ba({x:e.body.position.x,y:e.body.position.y},c,p)):"body"===p?t.setKeyValue("player-ragdoll",new Ka({x:e.body.position.x,y:e.body.position.y},c,p)):"limb"===p?t.setKeyValue("player-ragdoll",new Va({x:e.body.position.x,y:e.body.position.y},c,p)):t.setKeyValue("player-ragdoll",new Oa({x:e.body.position.x,y:e.body.position.y},c,p)),Object(l.b)((function(){s(ge()),s(me()),s(Ce("mouse up")),s(_e("sub",r().game.gameSubState,b))}))}};var xt=ut(t),Et=function(e){var t=e.getKeyValue("world"),a=rt().game.player.compositeId;return nt.Composite.get(t,a,"composite")}(t).bodies[1],St=dt(this.body);return window.keydownListenersAdded||(window.addEventListener("keydown",(function(a){var n=r().game,i=n.keys,l=n.gameState,c=n.gameSubState,d=n.player.variables,p=d.jumpForce,u=d.jumping;if(c!==E){if(l===S.GAMEPLAY&&(e.dead||o.reloading||e.meleeAttackInProgress||e.grenadeThrowInProgress||(87!==a.keyCode||u||e.chargingGrenade?i.indexOf(a.keyCode)<0&&s(fe(a.keyCode)):(s(xe(!0)),et.play(),e.playJumpAnimation(),nt.Body.applyForce(e.body,e.body.position,{x:0,y:p})))),l===S.GAMEPLAY&&c!==v&&c!==x&&(e.dead||o.reloading||e.meleeAttackInProgress||u||e.grenadeThrowInProgress||"f"!==a.key&&"F"!==a.key||e.meleeAttack()),l!==S.SHOP_MENU&&c===x)if("b"===a.key||"B"===a.key)t.getKeyValue("object-placement-arrow").changeBack=!0,s(_e("main",l,S.BUILD_MENU)),s(_e("sub",c,m));if((l===S.GAMEPLAY||l===S.SHOP_MENU)&&32===a.keyCode&&(!o.reloading||l===S.SHOP_MENU)&&!e.meleeAttackInProgress&&!e.grenadeThrowInProgress){var h=r().game.player.weapons,g=h.equipped,y=h.list;if(y[y.indexOf(g)+1]){var f=y.indexOf(g);s(Be(y[f+1]))}else s(Be(y[0]))}if(l===S.GAMEPLAY&&c!==v&&c!==x){var b=t.getKeyValue("remote-mines"),w=["1","2","3","4","5","6","7","8","9"].indexOf(a.key.toString());console.log(a.key),w>-1&&b[a.key.toString()]&&(b[a.key.toString()].detonate(),delete b[a.key.toString()])}if(l===S.GAMEPLAY&&c===x&&r().game.traps.selectedTrap===Ja.TURRET){var k=t.getKeyValue("current-turret");k&&("ArrowLeft"===a.key&&k.updateDirection("left"),"ArrowRight"===a.key&&k.updateDirection("right"))}if(l===S.GAMEPLAY&&82===a.keyCode&&!e.meleeAttackInProgress){var C=r().game,A=C.showingMessage,B=C.player.weapons,K=B.equipped;0===B.totalAmmo[K]&&!1===A?xa("Out of ammo!","#FF0000",.25,.75):o.reloading||u||e.dead||(e.reloadWeapon(),o.reload())}}})),window.addEventListener("keyup",(function(t){var a=r().game,n=a.keys,i=a.gameState,l=a.gameSubState,c=a.player.variables.jumping;i===S.GAMEPLAY&&(e.dead||(n.indexOf(t.keyCode)>-1&&s(be(t.keyCode)),"g"!==t.key&&"G"!==t.key||!(r().game.player.weapons.totalAmmo.grenades>0)||e.meleeAttackInProgress||o.reloading||c||i===S.GAMEPLAY&&l!==x&&l!==v&&e.throwGrenade()))})),window.addEventListener("mousemove",(function(e){var t=r().game,a=t.gameState;t.gameSubState;if(a===S.GAMEPLAY&&e.target&&e.target===document.getElementsByTagName("canvas")[1]&&e.target.getBoundingClientRect){var n,o,i,l=e.target.getBoundingClientRect(),c=e.clientX-l.left,d=e.clientY-l.top,p=r().game.mouseRelativeToPlayerPosition;s(Ee({x:c,y:d})),p.x>xt.position.x&&(o=gt),p.x<xt.position.x&&(o="less than player x position"),p.y>xt.position.y+St/2&&(i="greater than player y position"),p.y<xt.position.y-St&&(i="less than player y position"),n=nt.Vector.angle(p,Et.position),nt.Body.setAngle(Et,n),s(Se(o)),s(ke(i))}})),window.addEventListener("mousedown",(function(t){console.log(t);var a=r().game,n=a.gameState,o=a.gameSubState;n===S.GAMEPLAY&&o!==x&&o!==v&&o!==E&&(e.dead||e.meleeAttackInProgress||e.grenadeThrowInProgress||(1===t.buttons?s(Ce("mouse down")):2===t.buttons&&(s(he(!0)),console.log("should charge"))))})),window.addEventListener("mouseup",(function(e){r().game.gameState===S.GAMEPLAY&&(console.log(e),s(Ce("mouse up")),r().game.rightMouseDown&&s(he(!1)))})),window.addEventListener("click",(function(e){var a=r().game,n=a.player.credits,o=a.mouseRelativeToPlayerPosition,i=a.gameSubState,c=a.traps,d=c.selectedTrap,p=c.costToBuild,u=a.barriers,h=u.selectedBarrier,m=u.costToBuild;if(i===x){var g,y,f={x:o.x,y:360},b=!0,w=(t.getKeyValue("remote-mines"),t.getKeyValue("build-objects")),v=t.getKeyValue("place-object-sound"),E=t.getKeyValue("button-cancel-sound"),S=w.map((function(e){return function(e){return f.x+25<e.getBody().position.x-ct(e.getBody())/2||e.getBody().position.x+ct(e.getBody())/2<f.x-25}(e)?"allow placement":"place next to"}));if(w.length>0)g=w.map((function(e){return e.getBody().position.x})).reduce((function(e,t){return Math.abs(t-f.x)<Math.abs(e-f.x)?t:e})),console.log(g);if(S.indexOf("place next to")>-1&&(b=!1),h)n>=m[h]?(y=b||0===w.length?new Ha(f,{width:50,height:100},h):new Ha(f.x<g?{x:g-50,y:f.y}:{x:g+50,y:f.y},{width:50,height:100},h))&&(Object(l.b)((function(){s(q(h)),s(X(D)),s(Re(m[h]))})),setTimeout((function(){r().game.barrierTypesPlaced&&Object.keys(r().game.barrierTypesPlaced).length>2&&!r().game.achievements[T].owned&&s(J(T))}),0),xa("- $".concat(m[h]),16711680,.5,.75),w.push(y),v.play()):(E.play(),xa("insufficient credits",16711680,.5,.75));var k,C=function(e){switch(d){case Ja.LANDMINE:return new Ua(e);case Ja.CLUSTER_BOMB:return new Ya(e);case Ja.REMOTE_MINE:var a=t.getKeyValue("remote-mines-array");return new Za(e,a.length+1);case Ja.TURRET:return new sn(e)}};if(d)if(n>=p[d]){if(k=b||0===w.length?C(f):C(f.x<g?{x:g-50,y:f.y}:{x:g+50,y:f.y})){Object(l.b)((function(){s(G(d)),s(X(D)),s(Re(p[d]))})),setTimeout((function(){r().game.trapTypesPlaced&&Object.keys(r().game.trapTypesPlaced).length>2&&!r().game.achievements[_].owned&&s(J(_))}),0),xa("- $".concat(p[d]),16711680,.5,.75),v.play(),w.push(k);var A=t.getKeyValue("remote-mines-array");if(d===Ja.REMOTE_MINE)if(A.length<10){var B=t.getKeyValue("remote-mines");A.push(k),A.forEach((function(e,t){B[t+1]=e,e.updateNumber(t+1)}))}else E.play(),xa("can hold up to 9 remote mines at a time",16711680,.5,.75);d===Ja.TURRET&&(xa("Press Left or Right arrow to change turret direction",16777215,.75,2),t.setKeyValue("current-turret",k))}}else E.play(),xa("insufficient credits",16711680,.5,.75)}})),window.addEventListener("contextmenu",(function(t){t.preventDefault();var a=r().game,n=a.gameState,i=a.gameSubState,s=a.player,l=s.variables.jumping,c=s.weapons.totalAmmo.grenades;n===S.GAMEPLAY&&c>0&&!e.meleeAttackInProgress&&!o.reloading&&!l&&i!==x&&i!==v&&(e.throwGrenade(),console.log("throw!"))})),window.addEventListener("wheel",(function(t){var a=r().game.gameState;if(a===S.MAIN_MENU&&a===S.SCORES_VIEW||t.preventDefault(),(a===S.GAMEPLAY||a===S.SHOP_MENU)&&(!o.reloading||a===S.SHOP_MENU)&&!e.meleeAttackInProgress&&!e.grenadeThrowInProgress){var n=r().game.player.weapons,i=n.equipped,l=n.list;if(t.deltaY<0)if(l[l.indexOf(i)-1]){var c=l.indexOf(i);s(Be(l[c-1]))}else s(Be(l[l.length-1]));else if(t.deltaY>0)if(l[l.indexOf(i)+1]){var d=l.indexOf(i);s(Be(l[d+1]))}else s(Be(l[0]))}})),window.keydownListenersAdded=!0),this.pause=function(){0!==e.charRunSprite.currentFrame&&e.charRunSprite.play(),0!==e.charReloadPistolSprite.currentFrame&&e.charReloadPistolSprite.play(),0!==e.charReloadSMGSprite.currentFrame&&e.charReloadSMGSprite.play(),0!==Pe.currentFrame&&Pe.play()},this.unpause=function(){e.charRunSprite.stop(),e.charReloadPistolSprite.stop(),e.charReloadSMGSprite.stop(),Pe.stop(),s(xe(!1))},this}var Sn=window.TweenLite,kn=Sn.to;Sn.from,Sn.kill;function Cn(e){var t=this,a=e.getKeyValue("game-pixi-container");return this.crosshair=new d.e,this.cross=new d.f,this.cross.lineStyle(2,11534336,.75),this.cross.moveTo(0,-15),this.cross.lineTo(0,15),this.cross.moveTo(-15,0),this.cross.lineTo(15,0),this.crosshair.addChild(this.cross),this.circle=new d.f,this.circle.lineStyle(1,11534336,.75),this.circle.drawCircle(0,0,10),this.crosshair.addChild(this.circle),this.changed=!1,this.changeBack=!1,this._new=null,a.addChild(this.crosshair),this.crosshair.buildArrow=function(n){var o=e.getKeyValue("crosshair");a.removeChild(o);var i=new d.f;return i.lineStyle(2,n,1),i.beginFill(7829367,0),i.moveTo(0,0),i.lineTo(20,0),i.lineTo(20,30),i.lineTo(30,30),i.lineTo(10,45),i.lineTo(-10,30),i.lineTo(0,30),i.lineTo(0,0),i.endFill(),i.pivot.x=.5*i.width,i.pivot.y=.5*i.height,a.addChild(i),t._new=i,o._new=i,o.changed=!0,e.setKeyValue("object-placement-arrow",i),t.animationLoop=function(){kn(i.scale,.5,{x:1.2,y:.75,onComplete:function(){kn(i.scale,.5,{x:.9,y:1.2,onComplete:t.animationLoop})}})},t.animationLoop(),i},this}function An(e,t,a){var n,o=this,i=e.x,r=e.y,s=window,l=s.gameObjects,c=s.TweenLite,p=c.to,u=c.delayedCall,h=l.getKeyValue("world"),m=l.getKeyValue("game-pixi-container"),g=l.getKeyValue("static-ground-effects"),y=l.getKeyValue("ground-fx-sheet"),f=["bullet-impact1.png","bullet-impact2.png"],b=["ground-blood-spatter1.png","ground-blood-spatter2.png","ground-blood-spatter3.png"];"bullet impact"===t&&(n=new d.h(y.textures[f[Math.floor(Math.random()*f.length)]])),"blood spatter"===t&&(n=new d.h(y.textures[b[Math.floor(Math.random()*b.length)]])),n.pivot.x=.5*n.width,n.pivot.y=n.height*(a?.2:.5);var w=l.getKeyValue("ground");n.position.x-n.width>w.bounds.min.x||(n.position.x,n.width,w.bounds.max.x);var v=l.getKeyValue("player");v.dead||v.sprites.forEach((function(e){m.addChild(e)}));var x=nt.Bodies.rectangle(i,r,10,10,{isStatic:!0,collisionFilter:yt});nt.World.add(h,x),this.renderPosition=function(e){n.position=e(x),m&&-1===m.children.indexOf(n)&&m.addChild(n)},this.destroy=function(){nt.World.remove(h,x),m.removeChild(n);var e=g.indexOf(o);e>-1&&g.splice(e,1),h=null,m=null,l=null,g=null,y=null,f=null,b=null,x=null};return u(1,(function(){p(n,.5,{alpha:0,onComplete:function(){o.destroy()}})})),this}var Bn,Kn,Vn,On,_n,Tn,jn,Mn,Fn,Pn,Ln,Dn,Rn,zn,In,Wn,Nn,Hn,Un,Gn,qn,Yn,Xn,Jn,Zn,$n,Qn,eo,to,ao,no,oo,io,ro,so,lo,co,po,uo,ho,mo=a(124),go=a(125),yo=a(6),fo=function(e){Object(go.a)(a,e);var t=Object(mo.a)(a);function a(){var e;Object(ht.a)(this,a);var n=yo.p.from(window.gameObjects.getKeyValue("wall-tile"));return(e=t.call(this,n,1,n.height)).width=window.gameObjects.getKeyValue("game-width"),e.height=window.gameObjects.getKeyValue("game-height"),e.alpha=.2,e}return Object(Pa.a)(a,[{key:"onResize",value:function(e,t){}},{key:"onUpdate",value:function(e){this.tilePosition.x-=4*e}},{key:"renderPosition",value:function(e,t,a){var n=e(t),o=(n.x,n.y,(0,at.getState)().game),i=o.keys,r=o.player.variables,s=r.currentDirection,l=r.jumping;"right"===s&&i.indexOf(68)>-1&&(this.tilePosition.x-=.35),"left"===s&&i.indexOf(65)>-1&&(this.tilePosition.x+=.35),l&&(this.tilePosition.y+=.25)}}]),a}(a(37).a),bo=at.getState,wo=at.dispatch,vo=bo().game,xo=vo.width,Eo=vo.height,So=window.TweenLite.delayedCall,ko=function(e,t,a){var n=a.body1_label,o=a.body2_label,i=a.callback,r={};e.pairs[t].bodyA.label.indexOf(n)>-1&&e.pairs[t].bodyB.label.indexOf(o)>-1?(r.body1=e.pairs[t].bodyA,r.body2=e.pairs[t].bodyB,i(r)):e.pairs[t].bodyB.label.indexOf(n)>-1&&e.pairs[t].bodyA.label.indexOf(o)>-1&&(r.body1=e.pairs[t].bodyB,r.body2=e.pairs[t].bodyA,i(r))},Co=function(e,t){return"pistol weapon"===e?en(t):"smg weapon"===e?function(e){var t=$a().game.player.weapons.damage["smg weapon"],a=t.min,n=t.max;return e.label.indexOf("body")>-1?{part:"torso",dmg:a}:e.label.indexOf("head")>-1?{part:"head",dmg:n}:void 0}(t):"shotgun weapon"===e?function(e){var t=$a().game.player.weapons.damage["shotgun weapon"],a=t.min,n=t.max;return e.label.indexOf("body")>-1?{part:"torso",dmg:a}:e.label.indexOf("head")>-1?{part:"head",dmg:n}:void 0}(t):"turret weapon"===e?function(e){var t=$a().game.player.weapons.damage["turret weapon"],a=t.min,n=t.max;return e.label.indexOf("body")>-1?{part:"torso",dmg:a}:e.label.indexOf("head")>-1?{part:"head",dmg:n}:void 0}(t):en(t)},Ao=function(e,t,a){ko(e,t,{body1_label:"player character",body2_label:"ground",callback:function(){wo(xe(!1));var e=a.getKeyValue("jump-landing-sound");e.seek(.1),e.play()}}),ko(e,t,{body1_label:"player character",body2_label:"barrier",callback:function(){wo(xe(!1));var e=a.getKeyValue("jump-landing-sound");e.seek(.1),e.play()}}),ko(e,t,{body1_label:"gib",body2_label:"ground",callback:function(e){a.getKeyValue("static-ground-effects").push(new An(e.body1.position,"blood spatter"))}}),ko(e,t,{body1_label:"zombie body part",body2_label:"ground",callback:function(e){a.getKeyValue("static-ground-effects").push(new An(e.body1.position,"blood spatter",!0))}}),ko(e,t,{body1_label:"bullet",body2_label:"ground",callback:function(e){e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("ground")}}),ko(e,t,{body1_label:"pistol shell",body2_label:"ground",callback:function(e){e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("ground"),a.getKeyValue("shell-impact-sound").play()}}),ko(e,t,{body1_label:"smg shell",body2_label:"ground",callback:function(e){e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("ground"),a.getKeyValue("shell-impact-sound").play()}}),ko(e,t,{body1_label:"bullet",body2_label:"player character",callback:function(e){e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy()}}),ko(e,t,{body1_label:"grenade explosion",body2_label:"ground",callback:function(e){var t=a.getKeyValue("world");nt.World.remove(t,e.body1)}}),ko(e,t,{body1_label:"turret bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=Co("turret weapon",e.body2),a=t.part,n=t.dmg;e.body2.main.takeDamage(n,a,null,null,"turret")}}}),ko(e,t,{body1_label:"pistol bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=Co("pistol weapon",e.body2),n=t.part,o=t.dmg;e.body2.main.takeDamage(o,n)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),ko(e,t,{body1_label:"smg bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=Co("smg weapon",e.body2),n=t.part,o=t.dmg;e.body2.main.takeDamage(o,n)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),ko(e,t,{body1_label:"shotgun bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=Co("shotgun weapon",e.body2),n=t.part,o=t.dmg;e.body2.main.takeDamage(o,n)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),ko(e,t,{body1_label:"extra damage bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=bo().game.player.weapons.damage[bo().game.player.weapons.equipped].max;e.body2.main.takeDamage(3*t,"head","critical")}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),ko(e,t,{body1_label:"magazine",body2_label:"ground",callback:function(e){bo().game.lastMagDropped&&JSON.parse(bo().game.lastMagDropped)+200<Date.now()&&a.getKeyValue("mag-drop-sound").play();wo(Y(JSON.stringify(Date.now())))}}),ko(e,t,{body1_label:"magazine",body2_label:"enemy",callback:function(e){e.body2.main&&e.body2.main.takeDamage&&e.body2.main.takeDamage(20,"head"),a.getKeyValue("spark-sprites").push(new ln(1,e.body2,{tint:16741632})),a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),ko(e,t,{body1_label:"melee hitbox",body2_label:"enemy zombie body",callback:function(e){a.getKeyValue("spark-sprites").push(new ln(1,e.body2,{tint:16711680})),a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play();for(var t=bo().game.player.variables.currentDirection,n=0,o=3*bo().game.player.upgradeTiers.melee.current;n<10;)n++,nt.Body.translate(e.body2,{x:"right"===t?-o:o,y:-.25});Vt(bo().game.scoreAmounts.meleeConnect)}}),ko(e,t,{body1_label:"melee hitbox pistol",body2_label:"enemy",callback:function(e){if(e.body2.main&&e.body2.main.takeDamage){var t=bo().game.player.weapons.meleeDamage["pistol weapon"];e.body1.main.removeMeleeHitbox(),e.body2.main.takeDamage(t,null,null,!0)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),ko(e,t,{body1_label:"melee hitbox smg",body2_label:"enemy",callback:function(e){if(e.body2.main&&e.body2.main.takeDamage){var t=bo().game.player.weapons.meleeDamage["smg weapon"];e.body1.main.removeMeleeHitbox(),e.body2.main.takeDamage(t,null,null,!0)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),ko(e,t,{body1_label:"melee hitbox shotgun",body2_label:"enemy",callback:function(e){if(e.body2.main&&e.body2.main.takeDamage){var t=bo().game.player.weapons.meleeDamage["shotgun weapon"];e.body1.main.removeMeleeHitbox(),e.body2.main.takeDamage(t,null,null,!0)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),ko(e,t,{body1_label:"clustermine trap",body2_label:"enemy",callback:function(e){e.body1.destroy&&e.body1.destroy(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill()}}),ko(e,t,{body1_label:"clustermine explosion",body2_label:"enemy",callback:function(e){e.body1.removeSelf(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill(null,null,"clustermine explosion")}}),ko(e,t,{body1_label:"landmine trap",body2_label:"enemy",callback:function(e){e.body1.destroy&&e.body1.destroy(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill(null,null,"landmine")}}),ko(e,t,{body1_label:"landmine explosion",body2_label:"enemy",callback:function(e){e.body1.removeSelf(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill(null,null,"landmine")}}),ko(e,t,{body1_label:"barrel explosion",body2_label:"enemy",callback:function(e){e.body1.removeSelf(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill(null,null,"barrel explosion")}}),ko(e,t,{body1_label:"grenade explosion",body2_label:"enemy",callback:function(e){e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill(null,null,"grenade explosion")}}),ko(e,t,{body1_label:"pistol bullet",body2_label:"grenade",callback:function(e){e.body2.main&&e.body2.main.explode&&e.body2.main.explode()}}),ko(e,t,{body1_label:"smg bullet",body2_label:"grenade",callback:function(e){e.body2.main&&e.body2.main.explode&&e.body2.main.explode()}}),ko(e,t,{body1_label:"shotgun bullet",body2_label:"grenade",callback:function(e){e.body2.main&&e.body2.main.explode&&e.body2.main.explode()}}),ko(e,t,{body1_label:"enemy",body2_label:"grenade",callback:function(e){e.body2.main&&e.body2.main.explode&&So(.1,(function(){e.body2.main.explode(),(e.body2.distance.start-e.body2.distance.end>2e3||e.body2.distance.end-e.body2.distance.start>2e3)&&(wo(J(C)),Vt(bo().game.scoreAmounts.achievement))}))}}),ko(e,t,{body1_label:"player character",body2_label:"attack",callback:function(e){if(e.body1.main&&e.body1.main.takeDamage){var t=bo().game.enemies.zombies.attackDmg,a=e.body1.main;a.playerHit||a.takeDamage(t)}}}),ko(e,t,{body1_label:"explosive barrier",body2_label:"bullet",callback:function(e){var t=bo().game.enemies.zombies.attackDmg;e.body1.main&&e.body1.main.takeDamage(t),e.body1.strength<0&&e.body1.removeSelf(),a.getKeyValue("spark-sprites").push(new ln(1,e.body2,{scale:.5,animationSpeed:2}))}}),ko(e,t,{body1_label:"barrier",body2_label:"attack",callback:function(e){var t=bo().game.enemies.zombies.attackDmg;e.body1.main&&e.body1.main.takeDamage(t),e.body1.strength<0&&e.body1.removeSelf()}}),ko(e,t,{body1_label:"player character",body2_label:"health drop",callback:function(e){(e.body2.main.destroy&&e.body2.main.destroy(),e.body1.main&&e.body1.main.collectHealth)&&(Tn.collectHealth(e.body2.amount),a.getKeyValue("spark-sprites").push(new ln(1,e.body2,{scale:.5,animationSpeed:.75})),a.getKeyValue("health-pickup-sound").play())}}),ko(e,t,{body1_label:"player character",body2_label:"ammo drop",callback:function(e){(e.body2.main.destroy&&e.body2.main.destroy(),e.body1.main&&e.body1.main.collectAmmo)&&(Tn.collectAmmo(e.body2.ammo_type,e.body2.amount),a.getKeyValue("spark-sprites").push(new ln(1,e.body2,{scale:.5,animationSpeed:.75})),a.getKeyValue("ammo-collect-sound").play())}}),ko(e,t,{body1_label:"player character",body2_label:"currency drop",callback:function(e){(e.body2.main.destroy&&e.body2.main.destroy(),e.body1.main&&e.body1.main.collectCredits)&&(Tn.collectCredits(e.body2.amount),a.getKeyValue("spark-sprites").push(new ln(1,e.body2,{scale:.5,animationSpeed:.75})),a.getKeyValue("coin-collect-sound").play())}}),ko(e,t,{body1_label:"ground",body2_label:"shotgun shell",callback:function(e){var t=a.getKeyValue("shot-shell-sound");t.play(),t.fade(1,0,200)}}),ko(e,t,{body1_label:"ground",body2_label:"grenade",callback:function(e){var t=a.getKeyValue("grenade-clink-sound");t.play(),t.fade(1,0,500)}})},Bo=!1,Ko=function(e){return{fill:0===e?"#00e595":"#FF0000",fontSize:12}},Vo=function(e,t){if(!Bo){Kn=t.getKeyValue("render"),no=t.getKeyValue("container"),oo=t.getKeyValue("game-width"),Bn=t.getKeyValue("weapons-ui"),Vn=t.getKeyValue("ground-texture"),On=t.getKeyValue("ground"),_n=t.getKeyValue("static-ground-effects"),Mn=bo().game.player.variables.acceleration.min,(so=new d.i("")).position={x:10,y:5},(lo=new d.i("zombies on right: 0")).pivot.x=.075*lo.width,lo.position={x:oo,y:5},Tn=t.getKeyValue("player"),jn=pt("body",t),Yn=new Cn(t),qn=Yn.crosshair,t.setKeyValue("crosshair-shape",Yn.crosshair),t.setKeyValue("crosshair",qn),$n=t.getKeyValue("gibs"),Qn=t.getKeyValue("grenades"),eo=t.getKeyValue("explosions"),to=t.getKeyValue("rocks"),ao=t.getKeyValue("wood-planks"),Zn=t.getKeyValue("build-objects"),co=t.getKeyValue("explosion-sprites"),po=t.getKeyValue("spark-sprites"),no=t.getKeyValue("game-pixi-container"),ho=new fo;var a=t.getKeyValue("gradient-alpha");a.alpha=.75,no.addChild(ho,a,Vn),Tn.addSpritesInOrder(),no.addChild(so),no.addChild(lo),Bo=!0}Xn=t.getKeyValue("zombies"),Jn=t.getKeyValue("zombie-ragdolls"),Rn=t.getKeyValue("pistol-shells"),Fn=t.getKeyValue("pistol-bullets"),Dn=t.getKeyValue("bullet-impacts"),Wn=t.getKeyValue("ammo-drops-by-type"),Gn=t.getKeyValue("currency-drops"),uo=t.getKeyValue("health-drops"),Nn=Wn["pistol weapon"],Hn=Wn["smg weapon"],Un=Wn["shotgun weapon"];var n=bo().game,o=n.keys,i=n.gameState,r=n.gameSubState,s=n.mouseState,l=n.mousePosition,c=n.player,p=c.variables,u=p.magnetism,h=p.magnetismSpeed,m=p.currentDirection,g=p.jumping,y=p.acceleration.max,f=p.deceleration,w=c.weapons,E=(w.laser,w.equipped),k=w.totalAmmo.grenades,C=n.enemies.zombies,A=C.zombieAttackLimiter,B=C.zombieAttackDistance,K=n.traps.turret.fireDistance,V=n.mouseState,O=V.x,_=V.y,T=V.btn,j={x:l.x+jn.position.x-xo/2,y:l.y+jn.position.y-Eo/2};wo(Ke({x:j.x,y:j.y}));var M=function(e){return{x:e.position.x-jn.position.x+xo/2+("right"===m?Mn:-Mn),y:e.position.y-jn.position.y+Eo/2,rotation:e.angle}};if(i===S.GAMEPLAY){ho.renderPosition(M,jn,Mn),"mouse down"!==T||Tn.meleeAttackInProgress||Tn.grenadeThrowInProgress||("pistol weapon"===E&&function(e){on(e)}(t),"smg weapon"===E&&function(e){on(e)}(t),"shotgun weapon"===E&&function(e){on(e)}(t)),nt.Render.lookAt(Kn,{min:{x:jn.position.x+xo/2,y:jn.position.y-Eo/2},max:{x:jn.position.x-xo/2,y:jn.position.y+Eo/2}}),nt.Body.setAngle(jn,0),Bn.reloading||Tn.meleeAttackInProgress||Tn.grenadeThrowInProgress||(o.indexOf(68)>-1||o.indexOf(65)>-1?Mn<y&&(Mn+=.25):(wo(we(m)),Mn>0&&(Mn-=f)),o.indexOf(68)>-1&&o.indexOf(65)>-1&&Mn>0&&(Mn-=f),o.indexOf(68)>-1&&(wo(ve("right")),nt.Body.translate(jn,{x:Mn,y:0})),o.indexOf(65)>-1&&(wo(ve("left")),nt.Body.translate(jn,{x:-Mn,y:0})),o.indexOf(71)>-1&&k>0&&Tn&&!Tn.meleeAttackInProgress&&!Bn.reloading&&!g&&r!==v&&r!==x&&Tn.chargeGrenade(),bo().game.rightMouseDown&&k>0&&Tn&&!Tn.meleeAttackInProgress&&!Bn.reloading&&!g&&r!==v&&r!==x&&(Tn.chargeGrenade(),console.log("should charge grenade from engineHandlers")));var F=M(jn),P=F.x,L=F.y;if(wo(ze({x:P,y:L})),uo.forEach((function(e){e.renderPosition(M)})),Nn.concat(Hn).concat(Un).forEach((function(e){e.positionAmmoBox(M),e.body&&e.body.position.y>500&&e.destroy(),e.body&&(jn.position.x>e.body.position.x&&jn.position.x-e.body.position.x<u&&nt.Body.translate(e.body,{x:h,y:0}),jn.position.x<e.body.position.x&&e.body.position.x-jn.position.x<u&&nt.Body.translate(e.body,{x:-h,y:0}))})),Gn.forEach((function(e){e.positionCreditGfx(M),e.creditBody&&e.creditBody.position.y>500&&e.destroy(),e.creditBody&&(jn.position.x>e.creditBody.position.x&&jn.position.x-e.creditBody.position.x<u&&(jn.position.x>e.creditBody.position.x&&jn.position.x-e.creditBody.position.x<u/2?nt.Body.translate(e.creditBody,{x:2*h,y:0}):nt.Body.translate(e.creditBody,{x:h,y:0})),jn.position.x<e.creditBody.position.x&&e.creditBody.position.x-jn.position.x<u&&(jn.position.x<e.creditBody.position.x&&e.creditBody.position.x-jn.position.x<u/2?nt.Body.translate(e.creditBody,{x:-2*h,y:0}):nt.Body.translate(e.creditBody,{x:-h,y:0})))})),Tn.setBodySpritesPositions({mx:O,fn:M}),Tn.setArmsSpritePosition({mx:O,my:_,fn:M}),Tn.positionHeadSprite({mx:O,my:_,fn:M}),Tn.renderGrenadeChargeMeter(M),Tn.charRunSprite&&Tn.charIdleSprite&&Tn.charJumpSprite&&(o.indexOf(65)>-1||o.indexOf(68)>-1?g||(Tn.charRunSprite.play(),Tn.charRunSprite.visible=!0,Tn.charIdleSprite.visible=!1,Tn.stopJumpAnimation()):(Tn.charRunSprite.stop(),Tn.charRunSprite.visible=!1,Tn.charIdleSprite.visible=!0,Tn.armsSprites.forEach((function(e){e.visible=!1})),Tn.reloadAnims.forEach((function(e){e.visible=!1}))),o.indexOf(65)>-1&&s.x===gt||o.indexOf(68)>-1&&"less than player x position"===s.x?Tn.charRunSprite.animationSpeed=-1:Tn.charRunSprite.animationSpeed=1,s.x===gt?(Tn.bodySprites.forEach((function(e){e.scale.x=-1})),Tn.armsSprites.forEach((function(e){e.scale.y=-1})),Tn.headSprite.scale.y=-1):(Tn.bodySprites.forEach((function(e){e.scale.x=1})),Tn.armsSprites.forEach((function(e){e.scale.y=1})),Tn.headSprite.scale.y=1),Bn.reloading?(Tn.bodySprites.forEach((function(e){e.visible=!1})),Tn.armsSprites.forEach((function(e){e.visible=!1})),Tn.reloadAnimsByType[E].visible=!0,Tn.charIdleSprite.visible=!1):Tn.armsSpritesByType[E]&&(Tn.armsSprites.forEach((function(e){e.visible=!1})),Tn.armsSpritesByType[E].forEach((function(e){e.visible=!0})),Tn.reloadAnimsByType[E].visible=!1),g||Bn.reloading||Tn.meleeAttackInProgress||Tn.grenadeThrowInProgress?Tn.headSprite.visible=!1:Tn.headSprite.visible=!0,g?(Tn.charIdleSprite.visible=!1,Tn.charJumpSprite.currentFrame<2&&Tn.armsSpritesByType[E].forEach((function(e){e.y+=80}))):Tn.stopJumpAnimation(),Tn.meleeAttackInProgress&&(Tn.armsSprites.forEach((function(e){e.visible=!1})),Tn.bodySprites.forEach((function(e){Tn.meleeSprites.indexOf(e)<0&&(e.visible=!1)}))),Tn.grenadeThrowInProgress&&(Tn.armsSprites.forEach((function(e){e.visible=!1})),Tn.bodySprites.forEach((function(e){Tn.grenadeSprites.indexOf(e)<0&&(e.visible=!1)})))),null!==t.getKeyValue("player-ragdoll")){var D=t.getKeyValue("player-ragdoll");D&&D.animateRagParts&&D.animateRagParts(M)}}Tn.body.position.y>500&&Tn.kill(ja);for(var R=0;R<Rn.length;++R)zn||(zn=ct(Rn[R].body)),In||(In=dt(Rn[R].body)),Rn[R].gfc.position.x=Rn[R].body.position.x-jn.position.x+xo/2+("right"===m?Mn:-Mn),Rn[R].gfc.position.y=Rn[R].body.position.y-jn.position.y+Eo/2,Rn[R].gfc.rotation="shotgun weapon"===E?Rn[R].body.angle+Object(mt.degrees)(90):Rn[R].body.angle;for(var z=0;z<Fn.length;++z)Pn||(Pn=ct(Fn[z].body)),Ln||(Ln=dt(Fn[z].body)),Fn[z].gfc.position.x=Fn[z].body.position.x-jn.position.x+xo/2+("right"===m?Mn:-Mn),Fn[z].gfc.position.y=Fn[z].body.position.y-jn.position.y+Eo/2,Fn[z].gfc.rotation=Fn[z].body.angle;Qn.forEach((function(e){e.animate(M)})),eo.forEach((function(e){e.calcRenderedPosition(M)})),to.forEach((function(e){e.animate(M)})),ao.forEach((function(e){e.animate(M)})),Tn.updateEjectedMagPositions(M),$n.forEach((function(e){e.animate(M)})),io=0,ro=0,Xn.forEach((function(e){if(e.setPlayerVars({player:Tn,playerDirection:m,playerBody:jn}),e.paused||e.walk(),nt.Body.setAngle(e.body,0),e.setSpritesPositions(M),e.body.position.y>500){e.kill(null,null,"fell off")}(jn.position.x>e.body.position.x&&jn.position.x-e.body.position.x<B||jn.position.x<e.body.position.x&&e.body.position.x-jn.position.x<B)&&e.timeSinceLastAttack+A<Date.now()&&e.attack(),Zn.forEach((function(t){t&&!t.destroyed&&"remote mine trap"!==t.getBody().label&&((t.getBody().position.x>e.body.position.x&&t.getBody().position.x-e.body.position.x<B||t.getBody().position.x<e.body.position.x&&e.body.position.x-t.getBody().position.x<B)&&e.timeSinceLastAttack+A<Date.now()&&"landmine trap"!==t.getBody().label&&e.attack(),(t.direction&&"right"===t.direction&&e.body.position.x>t.getBody().position.x-10&&e.body.position.x-t.getBody().position.x<K||t.direction&&"left"===t.direction&&e.body.position.x<t.getBody().position.x-10&&t.getBody().position.x-e.body.position.x<K)&&t.shoot())})),e.dead||(e.body.position.x<jn.position.x&&(io+=1),e.body.position.x>jn.position.x&&(ro+=1))})),Zn.forEach((function(e){e&&!e.destroyed&&e.displayBarrierStrength&&e.displayBarrierStrength(M),e.updatePosition&&e.updatePosition(M)})),0!==bo().game.waveCountToDefeat&&null!==bo().game.waveCountToDefeat||(io=0,ro=0),so.text="".concat(io),so.style=Ko(io),lo.text="".concat(ro),lo.style=Ko(ro),Jn.forEach((function(e){e.animateRagParts(M)})),r!==b&&(qn.position=l),qn.changed&&((qn=qn._new).changed=!1),qn.changeBack&&(no.removeChild(qn),qn=Yn.crosshair,no.addChild(Yn.crosshair),qn.changeBack=!1),Vn.position=M(On),Dn.forEach((function(e){e.renderPosition(M)})),_n.forEach((function(e){e.renderPosition(M)})),co.forEach((function(e){e.renderPosition(M)})),po.forEach((function(e){e.renderPosition(M)})),no.addChild(Yn.crosshair)};function Oo(e,t,a){var n=this,o=d.k.BlurFilter,i=window.gameObjects,r=i.getKeyValue("game-pixi-container"),s=i.getKeyValue("ammo-drops-by-type"),l={"pistol weapon":152831,"smg weapon":16751874,"shotgun weapon":10821921},c={x:e.x,y:e.y,w:50,h:20},p=nt.Bodies.rectangle(c.x,c.y,c.w,c.h,{collisionFilter:bt});p.label="ammo drop",p.ammo_type=t,p.amount=a;var u=i.getKeyValue("world");nt.World.add(u,p),p.main=this;var h=new d.e,m=new d.f;m.beginFill(l[t]),m.drawRect(0,0,c.w,c.h),m.pivot.x=.5*m.width,m.pivot.y=.5*m.height;var g,y,f=new $t.a;f.thickness=5,f.lightColor=16777215,f.lightAlpha=.25,f.shadowColor=0,f.shadowAlpha=.25,m.filters=at.getState().game.filterEffects?[f]:[],(g=new d.f).beginFill(0),g.drawRect(0,c.h/2,c.w,c.h/2),g.pivot.x=.5*g.width,g.pivot.y=.5*g.height,y=new o(5,3),g.alpha=.85,g.filters=at.getState().game.filterEffects?[y]:[];var b=new d.f;b.beginFill(l[t]),b.drawRect(0,0,c.w,c.h),b.pivot.x=.5*b.width,b.pivot.y=.5*b.height,g.mask=b,at.getState().game.filterEffects?h.addChild(m,g,b):h.addChild(m,b);var w=new d.i({"pistol weapon":"PISTOL","smg weapon":"SMG","shotgun weapon":"SHOTGUN"}[t],{fontSize:"9px",fill:"#FFF",fontWeight:"bold"});w.pivot.x=.5*w.width,w.pivot.y=.5*w.height;var v=new za.a;return v.color=0,v.outerStrength=1,w.filters=at.getState().game.filterEffects?[v]:[],h.addChild(w),this.gfc=h,this.body=p,this.checkFilters=function(){at.getState().game.filterEffects?(h.addChild(g,w),m.filters=[f],g.filters=[y],w.filters=[v]):(h.children.indexOf(g)>-1&&h.removeChild(g),m.filters=[],g.filters=[],w.filters=[])},this.destroy=function(){var e=s[t].indexOf(n);e>-1&&(s[t].splice(e,1),h.destroy(),nt.World.remove(u,p))},setTimeout((function(){n.destroy()}),2e4),s[t].push(this),this.positionAmmoBox=function(e){var t=e(p),a=t.x,o=t.y,i=t.rotation;h.position={x:a,y:o},h.rotation=i,r&&-1===r.children.indexOf(n.gfc)&&r.addChild(h)},this}function _o(e,t){var a=this,n=window.gameObjects,o=n.getKeyValue("world"),i=n.getKeyValue("game-pixi-container"),r=n.getKeyValue("currency-drops"),s=e.x,l=e.y,c=nt.Bodies.circle(s,l,.25*t,{restitution:.5,collisionFilter:bt});c.label="currency drop",c.amount=t,nt.World.add(o,c);var p=new d.e,u=new d.f;u.beginFill(977624),u.drawCircle(0,0,.25*t);var h=new d.k.BlurFilter;h.blur=3,u.filters=at.getState().game.filterEffects?[h]:[],u.pivot.x=.25*u.width*.5,u.pivot.y=.25*u.height*.5,u.scale.x=1.1,u.scale.y=1.1,p.addChild(u);var m=new d.f;m.beginFill(977624),m.drawCircle(0,0,.25*t),m.pivot.x=.25*m.width*.5,m.pivot.y=.25*m.height*.5,p.addChild(m);var g=new $t.a;return g.lightColor=16777215,g.lightAlpha=.3,g.shadowColor=0,g.shadowAlpha=.3,p.filters=at.getState().game.filterEffects?[g]:[],i.addChild(p),r.push(this),c.main=this,this.creditBody=c,this.checkFilters=function(){at.getState().game.filterEffects?(p.filters=[g],u.filters=[h]):(p.filters=[],u.filters=[])},this.destroyed=!1,this.destroy=function(){if(!a.destroyed){a.destroyed=!0;var e=r.indexOf(a);e>-1&&(r.splice(e,1),p.destroy(),nt.World.remove(o,c),o=null,i=null,r=null,n=null,c=null,a.creditBody=null,p=null)}},setTimeout((function(){a.destroy()}),2e4),this.positionCreditGfx=function(e){var t=e(c),a=t.x,n=t.y,o=t.rotation;p.position={x:a,y:n},p.rotation=o},this}var To=at.getState,jo=(window.TweenLite.delayedCall,To().game.height,function(e,t){for(var a=window.gameObjects.getKeyValue("world-width"),n=To().game.player.perks.creditDropper.owned?it.a.int(5,8):it.a.int(4,5),o=0;o<n;++o)new _o(e?{x:e.x,y:e.y-it.a.int(0,75)}:{x:it.a.int(150,a-150),y:200-it.a.int(0,75)},t?it.a.int(t.min,t.max):To().game.player.perks.creditDropper.owned?it.a.int(15,30):it.a.int(5,20))}),Mo=at.dispatch,Fo=at.getState;function Po(){var e=new d.e,t=new d.f;t.beginFill(5592405),t.drawRect(0,0,150,50),e.addChild(t);var a=new d.i("Respawn?",{font:"Arial",fill:"#FFFFFF",fontSize:20,fontWeight:"bold"});return a.position.x=t.width/2-a.width/2,a.position.y=t.height/2-a.height/2,e.addChild(a),e}function Lo(){var e,t=this,a=window,n=a.gameObjects,o=a.TweenLite.from,i=a.Bounce,r=n.getKeyValue("game-pixi-container"),s=n.getKeyValue("engine");this.respawnButton=new Po,r.addChild(this.respawnButton),this.respawnButton.visible=!1,this.respawnButton.interactive=!0,this.respawnButton.pivot.x=this.respawnButton.width/2,this.respawnButton.pivot.y=this.respawnButton.height/2,this.respawnButton.position.x=this.respawnButton.width/2+20,this.respawnButton.position.y=this.respawnButton.height/2+20,this.respawn=function(){var e=n.getKeyValue("player");e.respawn(),va("Still alive!",16777215,.5,.75),e.lastDeathType!==ja&&(!function(e,t,a){for(var n=window.gameObjects.getKeyValue("world-width"),o=To().game.player.weapons,i=o.list,r=o.ammoCapacity,s=a||it.a.int(1,2),l=i[Math.floor(Math.random()*i.length)],c=0;c<s;++c)new Oo(e||{x:it.a.int(150,n-150),y:200},l,t?it.a.int(t.min,t.max):it.a.int(5,r[l]))}({x:it.a.float(e.body.position.x-100,e.body.position.x+100),y:e.body.position.y-200},{min:10,max:2*Fo().game.player.weapons.ammoCapacity[Fo().game.player.weapons.equipped]},it.a.int(1,2)),jo({x:it.a.float(e.body.position.x-100,e.body.position.x+100),y:e.body.position.y-200}))},this.respawnButton.on("click",(function(){t.respawn(),t.respawnButton.visible=!1})),(e=this.respawnButton).on("mouseover",(function(){st(e.scale,.35,{x:1.05,y:1.05})})),e.on("mouseout",(function(){st(e.scale,.35,{x:1,y:1})})),this.showRespawnButton=function(){t.respawnButton.visible=!0,o(t.respawnButton.scale,1.5,{x:.5,y:.5,ease:i.easeOut})};var l=function(){var e=n.getKeyValue("zombies");n.getKeyValue("player").pause(),e.forEach((function(e){e.unpause()})),s.timing.timeScale=1},c=function(){var e=n.getKeyValue("zombies");Mo(ge()),n.getKeyValue("player").unpause(),e.forEach((function(e){e.pause()})),s.timing.timeScale=.05};return this.unpause=l,this.pause=c,this.togglePause=function(){var e=Fo().game,t=e.gameState,a=e.gameSubState;t!==S.MAIN_MENU&&t!==S.SHOP_MENU&&a!==x&&t!==S.BUILD_MENU&&a!==v&&a!==E&&a!==f&&(n.getKeyValue("player").dead||(t!==S.PAUSE&&a!==g?(Mo(_e("main",t,S.PAUSE)),c()):(Mo(_e("main",t,S.GAMEPLAY)),a===y?Mo(_e("sub",a,y)):a===m&&Mo(_e("sub",a,g)),l())))},document.body.addEventListener("keydown",(function(e){"p"!==e.key&&"P"!==e.key&&"Escape"!==e.key||(console.log("pause key was pressed"),t.togglePause())})),this}var Do=a(55),Ro=a.n(Do),zo=a(56),Io=a.n(zo),Wo=a(57),No=a.n(Wo),Ho=a(58),Uo=a.n(Ho),Go=a(59),qo=a.n(Go),Yo=a(60),Xo=a.n(Yo),Jo=a(81),Zo=a.n(Jo),$o=a(61),Qo=a.n($o),ei=a(62),ti=a.n(ei),ai=a(82),ni=a.n(ai),oi=a(83),ii=a.n(oi),ri=a(84),si=a.n(ri),li=a(85),ci=a.n(li),di=a(86),pi=a.n(di),ui=a(63),hi=a.n(ui),mi=a(87),gi=a.n(mi),yi=a(88),fi=a.n(yi),bi=a(89),wi=a.n(bi),vi=a(90),xi=a.n(vi),Ei=a(91),Si=a.n(Ei),ki=a(92),Ci=a.n(ki),Ai=a(93),Bi=a.n(Ai),Ki=a(94),Vi=a.n(Ki),Oi=a(95),_i=a.n(Oi),Ti=a(96),ji=a.n(Ti),Mi=a(97),Fi=a.n(Mi),Pi=a(98),Li=a.n(Pi),Di=a(99),Ri=a.n(Di),zi=a(100),Ii=a.n(zi),Wi=a(101),Ni=a.n(Wi),Hi=a(102),Ui=a.n(Hi),Gi=a(103),qi=a.n(Gi),Yi=a(104),Xi=a.n(Yi),Ji=a(105),Zi=a.n(Ji),$i=a(106),Qi=a.n($i),er=a(107),tr=a.n(er),ar=a(108),nr=a.n(ar),or=a(109),ir=a.n(or),rr=a(110),sr=a.n(rr),lr=a(111),cr=a.n(lr),dr=a(112),pr=a.n(dr),ur=a(113),hr=a.n(ur),mr=a(114),gr=a.n(mr),yr=a(115),fr=a.n(yr),br=a(116),wr=a.n(br),vr=a(117),xr=a.n(vr),Er=a(118),Sr=a.n(Er),kr=a(119),Cr=a.n(kr),Ar=a(120),Br=a.n(Ar),Kr=a(121),Vr=a.n(Kr),Or=a(122),_r=a.n(Or),Tr="./spritesheet-assets/FX/muzzle_flashes/muzzle-flashes.json",jr="./spritesheet-assets/enemy-spritesheets/zombie/idle/idle.json",Mr="./spritesheet-assets/enemy-spritesheets/zombie/walkcycle/walkcycle.json",Fr="./spritesheet-assets/enemy-spritesheets/zombie/attack1/attack1.json",Pr="./spritesheet-assets/enemy-spritesheets/zombie/attack2/attack2.json",Lr="./spritesheet-assets/enemy-spritesheets/zombie/parts/zombie_parts.json",Dr="./spritesheet-assets/enemy-spritesheets/zombie/parts/zombie_parts_gored.json",Rr="./spritesheet-assets/enemy-spritesheets/zombie/slash_fx/slash_fx.json",zr="./spritesheet-assets/barriers/barriers.json",Ir="./spritesheet-assets/character-spritesheets/parts/player_parts.json",Wr="./spritesheet-assets/character-spritesheets/idle/char_idle_anim.json",Nr="./spritesheet-assets/character-spritesheets/run/char_run_anim.json",Hr="./spritesheet-assets/character-spritesheets/jump/char_jump_anim.json",Ur="./spritesheet-assets/character-spritesheets/reloadPistol/char_reload_pistol_anim.json",Gr="./spritesheet-assets/character-spritesheets/reloadSMG/char_reload_smg_anim.json",qr="./spritesheet-assets/character-spritesheets/leftArmPistolFire/char_left_arm_pistol_fire.json",Yr="./spritesheet-assets/character-spritesheets/rightArmPistolFire/char_right_arm_pistol_fire.json",Xr="./spritesheet-assets/character-spritesheets/leftArmSMGFire/char_left_arm_smg_fire.json",Jr="./spritesheet-assets/character-spritesheets/rightArmSMGFire/char_right_arm_smg_fire.json",Zr="./spritesheet-assets/character-spritesheets/melee/melee_pistol/melee_pistol.json",$r="./spritesheet-assets/character-spritesheets/melee/melee_ump/melee_ump.json",Qr="./spritesheet-assets/character-spritesheets/melee/melee_shotgun/melee_shotgun.json",es="./spritesheet-assets/character-spritesheets/grenadeThrow/pistolEquipped/grenade_throw_pistol.json",ts="./spritesheet-assets/character-spritesheets/grenadeThrow/umpEquipped/grenade_throw_ump.json",as="./spritesheet-assets/character-spritesheets/grenadeThrow/shotgunEquipped/grenade_throw_shotgun.json",ns="./spritesheet-assets/character-spritesheets/armsFireShotgun/arms_fire_shotgun_anim.json",os="./spritesheet-assets/character-spritesheets/reloadShotgun/reloadShotgun.json",is="./spritesheet-assets/FX/blood_fx/blood_spurt_1/blood_spurt_1.json",rs="./spritesheet-assets/FX/blood_fx/blood_spurt_2/blood_spurt_2.json",ss="./spritesheet-assets/FX/blood_fx/blood_spurt_3/blood_spurt_3.json",ls="./spritesheet-assets/landmine/landmine.json",cs="./spritesheet-assets/FX/wood_planks/wood_planks.json",ds="./spritesheet-assets/FX/spark-particle/spark_particle.json",ps=at.dispatch,us=at.getState,hs=window.TweenLite.to,ms=function(e,t){var a=nt.Engine.create(),n=a.world;n.bounds={min:{x:-6e3,y:-1100},max:{x:6e3,y:825}};var o=nt.Render.create({element:document.getElementById(e),engine:a,options:{width:1200,height:550,pixelRatio:.5}});nt.Render.run(o);var i=nt.Runner.create();if(nt.Runner.run(i,a),t){var r=nt.Mouse.create(o.canvas),s=nt.MouseConstraint.create(a,{mouse:r,constraint:{stiffness:.2,render:{visible:!1}}});nt.World.add(n,s),o.mouse=r}return{engine:a,render:o,runner:i,world:n,width:1200,height:550,worldWidth:6e3}}("app-container",!0),gs=ms.world,ys=ms.render,fs=ms.engine,bs=ms.width,ws=ms.height,vs=ms.worldWidth,xs=function(e){var t=new d.b({width:1200,height:550,antialias:!1,resolution:1});return d.l.ROUND_PIXELS=!0,document.getElementById(e).appendChild(t.view),{app:t,loader:new d.g}}("app-container"),Es=xs.app,Ss=xs.loader;function ks(){window.onload=function(){setTimeout((function(){ps(H()),us().game.gameState!==S.GAMEPLAY&&us().game.gameState!==S.SHOP_MENU&&us().game.gameSubState!==v&&us().game.gameSubState!==E||ma()}),1e3)},Ss.add(Xo.a).add(qo.a).add(os).add(ns).add(ds).add("./spritesheet-assets/FX/muzzle-sparks/muzzle_sparks.json").add("./spritesheet-assets/FX/explosion3d/explosion3d1.json").add("./spritesheet-assets/FX/explosion3d/explosion3d2.json").add("./spritesheet-assets/turret/sheets/turret_scan.json").add("./spritesheet-assets/turret/sheets/turret_shoot.json").add("./spritesheet-assets/remote-mine/remote-mine.json").add("./spritesheet-assets/clustermine/clustermine.json").add(ls).add(Qo.a).add(zr).add(Uo.a).add("./spritesheet-assets/zombie_walkcycle_test.json").add("./spritesheet-assets/z_walk/z_walk.json").add("./spritesheet-assets/z_attack/z_attack.json").add("./spritesheet-assets/z_parts/limbs.json").add(jr).add(Mr).add(Fr).add(Pr).add(Lr).add(Dr).add(Rr).add(Tr).add(is).add(rs).add(ss).add("./spritesheet-assets/FX/explosion_fx/explosion_assets.json").add(cs).add("./spritesheet-assets/FX/ground_fx/ground_fx.json").add(Ir).add(Wr).add(Nr).add(Hr).add(Ur).add(Gr).add(Zr).add($r).add(Qr).add(es).add(ts).add(as).add(qr).add(Yr).add(Xr).add(Jr).add(ti.a).add(Ro.a).add(Io.a).add(No.a).load((function(){window.gameObjects=new function(){var e=this;this.state={},this.getKeyValue=function(t){return!!e.state[t]&&e.state[t]},this.setKeyValue=function(t,a){return e.state[t]=a,e.state[t]},this.getFullState=function(){return e.state},this.setFullState=function(t){e.state=t}};var e=window.gameObjects;ps(Oe("game-cover",Zo.a)),ps(Oe("char-head",ti.a)),ps(Oe("gradient-alpha",Xo.a)),ps(Oe("weapon-ui-icon-pistol",Ro.a)),ps(Oe("weapon-ui-icon-smg",Io.a)),ps(Oe("weapon-ui-icon-shotgun",No.a)),ps(Oe("ground-texture",Uo.a)),ps(Oe("explosive-barrel",Qo.a));var t=lt("ground-texture");t.pivot.x=.5*t.width,t.pivot.y=.425*t.height;var a=lt("gradient-alpha");a.width=bs,a.height=ws,e.setKeyValue("gradient-alpha",a);var n=lt("game-cover");e.setKeyValue("game-cover-art",n),e.setKeyValue("9mm-sound1",ni.a),e.setKeyValue("9mm-sound2",ii.a),e.setKeyValue("explosion1",si.a),e.setKeyValue("distant-explosion",ci.a),e.setKeyValue("pistol-reload-sound",pi.a),e.setKeyValue("bullet-impact-body",hi.a),e.setKeyValue("bullet-impact-body-sound",new Wa.Howl({src:[hi.a]})),e.setKeyValue("grenade-clink-sound",new Wa.Howl({src:[gi.a]})),e.setKeyValue("throw-sound",new Wa.Howl({src:[fi.a]})),e.setKeyValue("confirm-sound",new Wa.Howl({src:[sr.a]})),e.setKeyValue("coin-collect-sound",new Wa.Howl({src:[wi.a]})),e.setKeyValue("ammo-collect-sound",new Wa.Howl({src:[xi.a]})),e.setKeyValue("item-collect-sound",new Wa.Howl({src:[Si.a]})),e.setKeyValue("blood-squish-sound",new Wa.Howl({src:[Bi.a]})),e.setKeyValue("blood-squash-sound",new Wa.Howl({src:[Ci.a]})),e.setKeyValue("blood-smack-sound",new Wa.Howl({src:[Vi.a]})),e.setKeyValue("death-rip-sound",new Wa.Howl({src:[_i.a]})),e.setKeyValue("jump-landing-sound",new Wa.Howl({src:[ji.a]})),e.setKeyValue("dirt-impact-sound",new Wa.Howl({src:[Fi.a]})),e.setKeyValue("zombie-hurt-sound",new Wa.Howl({src:[Li.a],volume:.5})),e.setKeyValue("zombie-death-sound",new Wa.Howl({src:[Ri.a],volume:.5})),e.setKeyValue("pain1-sound",new Wa.Howl({src:[Ii.a]})),e.setKeyValue("pain2-sound",new Wa.Howl({src:[Ni.a]})),e.setKeyValue("player-death-sound",new Wa.Howl({src:[Ui.a]})),e.setKeyValue("button-add-sound",new Wa.Howl({src:[qi.a]})),e.setKeyValue("button-subtract-sound",new Wa.Howl({src:[Xi.a]})),e.setKeyValue("button-hover-sound",new Wa.Howl({src:[Qi.a]})),e.setKeyValue("button-click-sound",new Wa.Howl({src:[Zi.a]})),e.setKeyValue("place-object-sound",new Wa.Howl({src:[tr.a]})),e.setKeyValue("button-cancel-sound",new Wa.Howl({src:[nr.a]})),e.setKeyValue("purchase-sound",new Wa.Howl({src:[ir.a]})),e.setKeyValue("shell-impact-sound",new Wa.Howl({src:[cr.a]})),e.setKeyValue("health-pickup-sound",new Wa.Howl({src:[pr.a]})),e.setKeyValue("zombie-growl-sound",new Wa.Howl({src:[hr.a]})),e.setKeyValue("smg-fire-sound",new Wa.Howl({src:[gr.a]})),e.setKeyValue("mag-drop-sound",new Wa.Howl({src:[fr.a]})),e.setKeyValue("shot-shell-sound",new Wa.Howl({src:[wr.a]})),e.setKeyValue("shotgun-blast-sound",new Wa.Howl({src:[xr.a]})),e.setKeyValue("achievement1-sound",new Wa.Howl({src:[Sr.a]})),e.setKeyValue("achievement2-sound",new Wa.Howl({src:[Cr.a]})),e.setKeyValue("achievement3-sound",new Wa.Howl({src:[Br.a]})),e.setKeyValue("charging-grenade-sound",new Wa.Howl({src:[_r.a]})),e.setKeyValue("jump-sound",new Wa.Howl({src:[Vr.a]})),e.setKeyValue("zombie-idle-sheet",Ss.resources[jr].spritesheet),e.setKeyValue("zombie-walk-sheet",Ss.resources[Mr].spritesheet),e.setKeyValue("zombie-attack1-sheet",Ss.resources[Fr].spritesheet),e.setKeyValue("zombie-attack2-sheet",Ss.resources[Pr].spritesheet),e.setKeyValue("zombie-parts-sheet",Ss.resources[Lr].spritesheet),e.setKeyValue("zombie-parts-gored-sheet",Ss.resources[Dr].spritesheet),e.setKeyValue("zombie-slash-fx-sheet",Ss.resources[Rr].spritesheet),e.setKeyValue("muzzle-flashes",Ss.resources[Tr].spritesheet),e.setKeyValue("sparks-sheet",Ss.resources[ds].spritesheet),e.setKeyValue("muzzle-sparks-sheet",Ss.resources["./spritesheet-assets/FX/muzzle-sparks/muzzle_sparks.json"].spritesheet),e.setKeyValue("explosion3d1-sheet",Ss.resources["./spritesheet-assets/FX/explosion3d/explosion3d1.json"].spritesheet),e.setKeyValue("explosion3d2-sheet",Ss.resources["./spritesheet-assets/FX/explosion3d/explosion3d2.json"].spritesheet),e.setKeyValue("blood-spurt-1",Ss.resources[is].spritesheet),e.setKeyValue("blood-spurt-2",Ss.resources[rs].spritesheet),e.setKeyValue("blood-spurt-3",Ss.resources[ss].spritesheet),e.setKeyValue("explosion-assets-sheet",Ss.resources["./spritesheet-assets/FX/explosion_fx/explosion_assets.json"].spritesheet),e.setKeyValue("wood-planks-sheet",Ss.resources[cs].spritesheet),e.setKeyValue("remote-mine-sheet",Ss.resources["./spritesheet-assets/remote-mine/remote-mine.json"].spritesheet),e.setKeyValue("landmine-sheet",Ss.resources[ls].spritesheet),e.setKeyValue("clustermine-sheet",Ss.resources["./spritesheet-assets/clustermine/clustermine.json"].spritesheet),e.setKeyValue("turret-scan-sheet",Ss.resources["./spritesheet-assets/turret/sheets/turret_scan.json"].spritesheet),e.setKeyValue("turret-shoot-sheet",Ss.resources["./spritesheet-assets/turret/sheets/turret_shoot.json"].spritesheet),e.setKeyValue("barriers-sheet",Ss.resources[zr].spritesheet),e.setKeyValue("ground-fx-sheet",Ss.resources["./spritesheet-assets/FX/ground_fx/ground_fx.json"].spritesheet),e.setKeyValue("player-parts-sheet",Ss.resources[Ir].spritesheet),e.setKeyValue("char-idle-sheet",Ss.resources[Wr].spritesheet),e.setKeyValue("char-run-sheet",Ss.resources[Nr].spritesheet),e.setKeyValue("char-jump-sheet",Ss.resources[Hr].spritesheet),e.setKeyValue("char-reload-pistol-sheet",Ss.resources[Ur].spritesheet),e.setKeyValue("char-reload-smg-sheet",Ss.resources[Gr].spritesheet),e.setKeyValue("char-reload-shotgun-sheet",Ss.resources[os].spritesheet),e.setKeyValue("left-arm-pistol-fire-sheet",Ss.resources[qr].spritesheet),e.setKeyValue("right-arm-pistol-fire-sheet",Ss.resources[Yr].spritesheet),e.setKeyValue("left-arm-smg-fire-sheet",Ss.resources[Xr].spritesheet),e.setKeyValue("right-arm-smg-fire-sheet",Ss.resources[Jr].spritesheet),e.setKeyValue("melee-pistol-sheet",Ss.resources[Zr].spritesheet),e.setKeyValue("melee-ump-sheet",Ss.resources[$r].spritesheet),e.setKeyValue("melee-shotgun-sheet",Ss.resources[Qr].spritesheet),e.setKeyValue("grenade-pistol-sheet",Ss.resources[es].spritesheet),e.setKeyValue("grenade-ump-sheet",Ss.resources[ts].spritesheet),e.setKeyValue("grenade-shotgun-sheet",Ss.resources[as].spritesheet),e.setKeyValue("arms-fire-shotgun-sheet",Ss.resources[ns].spritesheet);var o=new d.e;o.interactive=!0,o.width=bs,o.height=ws,e.setKeyValue("muzzle-flashes-sheet",Ss.resources[Tr].spritesheet);var i=function(){var e=nt.Bodies.rectangle(vs/2,ws,vs,ws/2,{isStatic:!0,collisionFilter:{mask:3}});return e.label="ground",nt.World.add(gs,e),e}();Es.stage.interactive=!0,Es.stage.addChild(o),o.addChild(t),e.setKeyValue("pixi-app",Es),e.setKeyValue("game-pixi-container",o),e.setKeyValue("ammo-drops-by-type",{"pistol weapon":[],"smg weapon":[],"shotgun weapon":[]}),e.setKeyValue("text-messages",[]),e.setKeyValue("reload-text-messages",[]),e.setKeyValue("gibs",[]),e.setKeyValue("grenades",[]),e.setKeyValue("explosions",[]),e.setKeyValue("rocks",[]),e.setKeyValue("currency-drops",[]),e.setKeyValue("pistol-shells",[]),e.setKeyValue("pistol-bullets",[]),e.setKeyValue("build-objects",[]),e.setKeyValue("bullet-impacts",[]),e.setKeyValue("wood-planks",[]),e.setKeyValue("spark-sprites",[]),e.setKeyValue("explosion-sprites",[]),e.setKeyValue("remote-mines",{}),e.setKeyValue("remote-mines-array",[]),e.setKeyValue("static-ground-effects",[]),e.setKeyValue("zombie-ragdolls",[]),e.setKeyValue("zombies",[]),e.setKeyValue("health-drops",[]),e.setKeyValue("wall-tile",qo.a),e.setKeyValue("ground",i),e.setKeyValue("ground-texture",t),e.setKeyValue("game-width",bs),e.setKeyValue("game-height",ws),e.setKeyValue("world-width",vs),e.setKeyValue("world",gs),e.setKeyValue("render",ys),e.setKeyValue("engine",fs);var r=new Lo,s=new ra;e.setKeyValue("screen-ui",r),e.setKeyValue("weapons-ui",s);var l=new En;e.setKeyValue("player",l);var c=function(){var t=new d.e;n.pivot.x=.5*n.width,n.pivot.y=.5*n.height,n.scale.x=.51,n.scale.y=.51,o.alpha=0,t.addChild(n),o.alpha=1,t.interactive=!0;var a=new d.e,i=new d.f;i.beginFill(5592405),i.drawRect(0,0,250,80);var r=new d.i("Play",{fontFamily:"Arial",fontSize:36,fill:16777215});function s(){a.position.x=bs/2-a.width/2,a.position.y=ws/2-a.height/2}return a.addChild(i,r),s(),r.position.x=a.width/2-r.width/2,r.position.y=a.height/2-r.height/2,a.interactive=!0,a.on("click",(function(){var e=us().game,t=e.gameState,a=e.gameSubState;ps(_e("main",t,S.GAMEPLAY)),ps(_e("sub",a,g))})),a.on("mouseover",(function(){hs(a.scale,.35,{x:1.05,y:1.05,onUpdate:s})})),a.on("mouseout",(function(){hs(a.scale,.35,{x:1,y:1,onUpdate:s})})),Es.stage.addChild(t),e.setKeyValue("main-menu",t),{menu:t}}().menu;nt.Events.on(fs,"tick",(function(t){var a=us().game,n=a.gameState,o=a.gameSubState;window.gameObjects&&!0===c.visible&&(c.visible=!1,document.body.style.cursor="auto"),(window.gameObjects&&n===S.MAIN_MENU||n===S.SCORES_VIEW)&&!1===c.visible&&(c.visible=!0,document.body.style.cursor="auto"),window.gameObjects&&n===S.MAIN_MENU||n===S.SCORES_VIEW||n===S.PAUSE||o===v||o===E||n===S.SHOP_MENU||n===S.BUILD_MENU||o===b?document.getElementsByClassName("App")[0]&&(document.body.style.cursor="auto",document.getElementsByClassName("App")[0].style.pointerEvents="all"):document.getElementsByClassName("App")[0]&&(document.getElementsByClassName("App")[0].style.pointerEvents="none"),n===S.GAMEPLAY&&window.gameObjects&&(document.body.style.cursor=o===v||o===E||o===b?"auto":"none"),Vo(0,e)})),nt.Events.on(fs,"collisionStart",(function(t){if(us().game.gameState===S.GAMEPLAY)for(var a=0;a<t.pairs.length;++a)Ao(t,a,e)}))}))}var Cs=at.getState,As=at.dispatch,Bs=function(){0===Cs().game.waveNum&&As(Te())},Ks=function(){As($e(0)),As(Me(null)),function(e){d.c.from("Arial",{fill:"#FFFFFF",fontSize:40,fontWeight:"bold"},{chars:[["a","z"],["0","9"],["A","Z"]," .!?"]});var t=window,a=t.gameObjects,n=t.TweenLite,o=n.from,i=n.to,r=t.Power1,s=a.getKeyValue("player"),l=a.getKeyValue("game-pixi-container"),c=a.getKeyValue("game-width"),p=a.getKeyValue("game-height"),u=new d.d(e,{font:"Arial"});u.pivot.x=u.width/2,u.pivot.y=u.height/2,u.position.x=c/2,u.position.y=p/5,l.addChild(u);var h=function(){ha(),ba().game.gameState===S.MAIN_MENU||ba().game.gameState===S.PAUSE?ba().game.gameSubState===f||ba().game.gameSubState===v?wa(_e("sub",ba().game.gameSubState,v)):wa(_e("sub",ba().game.gameSubState,m)):s.dead?wa(_e("sub",ba().game.gameSubState,b)):(wa(_e("sub",ba().game.gameSubState,v)),l.removeChild(u))},g=function e(){ba().game.gameState===S.PAUSE?setTimeout(e,2e3):i(u,.75,{delay:2,x:1.5*c,ease:r.easeIn,onUpdate:function(){a.getKeyValue("zombies").length>0&&ha()},onComplete:h})};!function e(){ba().game.gameState===S.PAUSE?setTimeout(e,2e3):o(u,.75,{x:-100,alpha:0,onUpdate:function(){a.getKeyValue("zombies").length>0&&ha()},onComplete:g})}()}("Wave Defeated!"),Vt(Cs().game.scoreAmounts.waveCompleted*Cs().game.waveNum),As(Te()),dn()},Vs=function(){var e=window.gameObjects,t=Object(l.c)(),a=Object(l.d)((function(e){return e.game.gameSubState})),n=Object(l.d)((function(e){return e.game.lastGameSubState})),i=Object(l.d)((function(e){return e.game.player.credits})),r=Object(l.d)((function(e){return e.game.respawnCost})),s=Object(l.d)((function(e){return e.game.respawnToShopCost})),c=Object(l.d)((function(e){return e.game.waveNum})),d=e.getKeyValue("game-width"),p=e.getKeyValue("game-height"),u=e.getKeyValue("screen-ui");return o.a.createElement(o.a.Fragment,null,o.a.createElement(Bt.Container,{width:.75*d,height:.75*p},o.a.createElement(Bt.Backing,{width:.75*d,height:.75*p}),o.a.createElement(Bt.MenuTitle,null,i>=s?"Respawn Menu":"Game Over"),o.a.createElement(Bt.MenuButtonContainer,null,i>=r||n===v?o.a.createElement(Bt.MenuButtonSpacer,null,o.a.createElement(Nt,{width:240,onClick:function(){u.respawn(),n!==v&&n!==w&&n!==y&&t(_e("sub",a,g)),n!==v&&t(Re(r)),t(ue("Respawn",r))}},"Respawn? ",n===v?"":"$".concat(r))):null,i>=s&&c>0&&n!==v?o.a.createElement(Bt.MenuButtonSpacer,null,o.a.createElement(Nt,{width:360,onClick:function(){ha(),Object(l.b)((function(){t($e(0)),t(Me(null)),t(je()),t(_e("sub",a,v)),t(Re(s)),t(ue("Shop Respawn",s))}))}},"Restart Current Wave from Shop? ","$".concat(s))):null,o.a.createElement(Bt.MenuButtonSpacer,null,o.a.createElement(Nt,{onClick:ma},"Go to Main Menu")))))},Os=function(){var e=window.gameObjects,t=Object(l.c)(),a=e.getKeyValue("game-width"),n=e.getKeyValue("game-height"),i=e.getKeyValue("screen-ui"),r=Object(l.d)((function(e){return e.game.gameState})),c=Object(l.d)((function(e){return e.game.gameSubState})),d="main",p="barriers",u="traps",h=o.a.useState(d),m=Object(s.a)(h,2),g=m[0],y=m[1],f=Object(l.d)((function(e){return e.game.barriers.costToBuild})),b=Object(l.d)((function(e){return e.game.traps.costToBuild})),w=Object(l.d)((function(e){return e.game.player.credits})),E=function(){y(d)},k=function(){e.getKeyValue("screen-ui").unpause(),t(_e("main",r,S.GAMEPLAY)),t(_e("sub",c,x))},C=function(){e.getKeyValue("crosshair").buildArrow(16777215)},A=function(e){w>=f[e]&&(t(Je(e)),t(Ze(null)),C(),setTimeout((function(){k()}),50))},B=function(e){w>=b[e]&&(t(Ze(e)),t(Je(null)),C(),setTimeout((function(){k()}),50))};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Bt.Container,{width:.75*a,height:.75*n},o.a.createElement(Bt.Backing,{width:.75*a,height:.75*n}),g===u?o.a.createElement(o.a.Fragment,null,o.a.createElement(Bt.MenuTitle,null,"Build Traps"),o.a.createElement(Bt.MenuButtonContainer,null,o.a.createElement(Bt.MenuButtonSpacer,null,o.a.createElement(Bt.MenuButtonSpacer,null,Object.keys(Ja).filter((function(e,t){return t%2==0})).map((function(e,t){return o.a.createElement(zt,{key:t},o.a.createElement(Bt.MenuButtonSpacer,null,o.a.createElement(Nt,{width:Ja[e].length>14?300:200,onClick:function(){return B(Ja[e])}},Ja[e]," ",o.a.createElement("span",{style:{color:w>=b[Ja[e]]?"#ffffff":"#ff0000"}},"$",b[Ja[e]]))))}))),o.a.createElement(Bt.MenuButtonSpacer,null,Object.keys(Ja).filter((function(e,t){return t%2==1})).map((function(e,t){return o.a.createElement(zt,{key:t},o.a.createElement(Bt.MenuButtonSpacer,null,o.a.createElement(Nt,{width:Ja[e].length>14?300:200,onClick:function(){return B(Ja[e])}},Ja[e]," ",o.a.createElement("span",{style:{color:w>=b[Ja[e]]?"#ffffff":"#ff0000"}},"$",b[Ja[e]]))))}))),o.a.createElement(Bt.MenuButtonSpacer,null,o.a.createElement(Ht,{onClick:E},"Back"))))):null,g===p?o.a.createElement(o.a.Fragment,null,o.a.createElement(Bt.MenuTitle,null,"Build Barriers"),o.a.createElement(Bt.MenuButtonContainer,null,o.a.createElement(Bt.MenuButtonSpacer,null,Object.keys(Xa).filter((function(e,t){return t%2==1})).map((function(e,t){return o.a.createElement(zt,{key:t},o.a.createElement(Bt.MenuButtonSpacer,null,o.a.createElement(Nt,{width:Xa[e].length>14?300:200,onClick:function(){return A(Xa[e])}},Xa[e]," ",o.a.createElement("span",{style:{color:w>=f[Xa[e]]?"#ffffff":"#ff0000"}},"$",f[Xa[e]]))))}))),o.a.createElement(Bt.MenuButtonSpacer,null,Object.keys(Xa).filter((function(e,t){return t%2==0})).map((function(e,t){return o.a.createElement(zt,{key:t},o.a.createElement(Bt.MenuButtonSpacer,null,o.a.createElement(Nt,{width:Xa[e].length>14?300:200,onClick:function(){return A(Xa[e])}},Xa[e]," ",o.a.createElement("span",{style:{color:w>=f[Xa[e]]?"#ffffff":"#ff0000"}},"$",f[Xa[e]]))))})),o.a.createElement(Bt.MenuButtonSpacer,null,o.a.createElement(Bt.MenuButtonSpacer,{padding:20}),o.a.createElement(Ht,{onClick:E},"Back"))))):null,g===d?o.a.createElement(o.a.Fragment,null,o.a.createElement(Bt.MenuTitle,null,"Build Menu"),o.a.createElement(Bt.MenuButtonContainer,null,o.a.createElement(Bt.MenuButtonSpacer,null,o.a.createElement(zt,null,o.a.createElement(Bt.MenuButtonSpacer,null,o.a.createElement(Nt,{onClick:function(){y(p)}},"Barriers"))),o.a.createElement(zt,null,o.a.createElement(Bt.MenuButtonSpacer,null,o.a.createElement(Nt,{onClick:function(){y(u)}},"Traps")))),o.a.createElement(Bt.MenuButtonSpacer,{padding:20}),o.a.createElement(Bt.MenuButtonSpacer,null,o.a.createElement(Ht,{onClick:function(){i.unpause(),t(_e("main",r,S.GAMEPLAY)),t(_e("sub",c,v))}},"Back")))):null))};function _s(){var e=Object(wt.a)(["\nheight: 120px;\nwidth: 100%;\nbackground-color: #333;\nopacity: .8;\n"]);return _s=function(){return e},e}function Ts(){var e=Object(wt.a)(["\nheight: 120px;\nwidth: 100%;\nposition: absolute;\nbottom: 0;\n"]);return Ts=function(){return e},e}var js=Bt.MenuButton,Ms=Bt.MenuButtonContainer,Fs=Bt.MenuButtonSpacer,Ps=vt.a.div(Ts()),Ls=vt.a.div(_s()),Ds=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ps,{className:"shop-query-menu"},o.a.createElement(Ls,null),o.a.createElement(Ms,{"space-top":2},o.a.createElement(Fs,null,o.a.createElement(zt,null,o.a.createElement(Fs,{padding:4},o.a.createElement(js,{bgcolor:"#555",width:500,height:40},"Done Placing Barriers/Traps: Press [ B ]")))))))},Rs=a(123),zs=function(e){return o.a.createElement(Bt.Container,null,o.a.createElement(Bt.MenuTitle,null,"Top 100 Scores of All-time"),o.a.createElement(Bt.MenuButtonContainer,{style:{height:470,overflow:"scroll"}},e&&e.scores&&e.scores.sort((function(e,t){return t.score-e.score})).map((function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(ga,{bgcolor:"rgba(0, 0, 0, 0.25)",hovercolor:"rgba(0, 0, 0, 0.35)",bordercolor:"rgba(0, 0, 0, 0)",hoverborder:"rgba(0, 0, 0, 0)"},o.a.createElement(zt,null,o.a.createElement("div",{style:{left:"20px",position:"absolute"}},e.name)),o.a.createElement(zt,null,o.a.createElement("div",{style:{left:0,right:0}},e.score)),o.a.createElement(zt,null,o.a.createElement("div",{style:{right:"20px",position:"absolute"}},function(){var t=e.time.substr(0,e.time.indexOf("T")),a=t.substr(0,e.time.indexOf("-")),n=t.substr(e.time.indexOf("-")+1,t.length);return"".concat(n," - ").concat(a)}()))))}))),o.a.createElement(Bt.MenuButtonContainer,null,o.a.createElement(zt,null,o.a.createElement(Ut,{marginTop:"-60px",onClick:ma},"Refresh List")),o.a.createElement(zt,null,o.a.createElement(Ut,{marginTop:"-60px",onClick:ma}))))};function Is(){var e=window,t=e.gameObjects,a=e.TweenLite.delayedCall,i=Object(l.c)(),r=Object(l.d)((function(e){return e.game})),d=Object(l.d)((function(e){return e.game.player.weapons.equipped})),p=o.a.useRef(null),u=o.a.useRef(!1),h=function(e){var t=o.a.useState(e),a=Object(s.a)(t,2);return[a[0],a[1]]}([]),m=Object(s.a)(h,2),w=m[0],k=m[1],C=Object(n.useState)(!1),A=Object(s.a)(C,2),B=A[0],K=A[1],V=Object(n.useState)(!1),O=Object(s.a)(V,2),_=O[0],T=O[1],j=Object(n.useState)(!1),M=Object(s.a)(j,2),F=M[0],P=M[1],L=Object(n.useState)(!1),D=Object(s.a)(L,2),R=D[0],z=D[1],I=Object(n.useState)(!1),W=Object(s.a)(I,2),N=W[0],H=W[1],U=Object(n.useState)(!1),G=Object(s.a)(U,2),q=G[0],Y=G[1];return o.a.useEffect((function(){ks()}),[]),o.a.useEffect((function(){sa()}),[d]),o.a.useEffect((function(){if(r.gameSubState===y&&Bs(),r.gameSubState===f&&Ks(),r.gameSubState===g){var e=3;u.current=!1,p.current=setInterval((function(){va("".concat(e),"#FFFFFF",.25,.5),e-=1}),500),a(2,(function(){u.current||(clearInterval(p.current),i(_e("sub",r.gameSubState,y)))}))}r.gameSubState===b&&(clearInterval(p.current),u.current=!0,va("You died.","#FF0000",.75,3))}),[r.gameSubState,a,i]),o.a.useEffect((function(){0===r.waveCountToDefeat&&r.gameSubState!==v&&Ks()}),[r.waveCountToDefeat,r.lastGameSubState,r.gameSubState,i]),o.a.useEffect((function(){(console.log("Game state has changed"),r.gameState===S.SHOP_MENU||r.gameState===S.BUILD_MENU)&&t.getKeyValue("screen-ui").pause();r.gameState===S.MAIN_MENU||r.gameState===S.GAMEPLAY?document.getElementsByClassName("App")[0].style.pointerEvents="none":document.getElementsByClassName("App")[0].style.pointerEvents="all",r.gameState===S.GAMEPLAY&&null===r.player.weapons.equipped&&i(Be("pistol weapon"))}),[r.gameState,r.player.weapons.equipped,t,i]),o.a.useEffect((function(){r.gameState!==S.MAIN_MENU&&null!==r.purchases&&r.lastPurchase&&null!==r.lastPurchase.item&&r.lastPurchase.amount>0&&(window.gameObjects.getKeyValue("purchase-sound").play(),window.gameObjects.getKeyValue("confirm-sound").play(),c.b.dark("You bought ".concat(r.lastPurchase.item," for $").concat(r.lastPurchase.amount),{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),dn())}),[r.purchases,r.lastPurchase]),o.a.useEffect((function(){null!==r.lastAchievementEarned&&r.gameState!==S.MAIN_MENU&&(window.gameObjects.getKeyValue("achievement2-sound").play(),c.b.warning("Achievement Earned: ".concat(r.lastAchievementEarned),{position:"top-left",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),i(De(500)),dn())}),[r.achievements,r.lastAchievementEarned]),o.a.useEffect((function(){var e;r.gameState===S.SCORES_VIEW&&un.a.get("http://localhost:8080/scores").catch((function(t){console.log(t),e=!0})).then((function(t){e?console.log("api is on a different port, use yarn build to view working scores"):k(t.data)}))}),[r.gameState]),o.a.useEffect((function(){K(!0),a(.1,(function(){K(!1)}))}),[r.scoreToggle]),o.a.useEffect((function(){T(!0),a(.25,(function(){T(!1)}))}),[r.player.upgradeTiers.run.current]),o.a.useEffect((function(){P(!0),a(.25,(function(){P(!1)}))}),[r.player.upgradeTiers.reload.current]),o.a.useEffect((function(){z(!0),a(.25,(function(){z(!1)}))}),[r.player.upgradeTiers.jump.current]),o.a.useEffect((function(){H(!0),a(.25,(function(){H(!1)}))}),[r.player.upgradeTiers.melee.current]),o.a.useEffect((function(){Y(!0),a(.25,(function(){Y(!1)}))}),[r.player.upgradeTiers.defense.current]),o.a.createElement(o.a.Fragment,null,o.a.createElement(c.a,null),o.a.createElement(o.a.Fragment,null,r.gameState===S.SCORES_VIEW?o.a.createElement(zs,{scores:w}):null),o.a.createElement(o.a.Fragment,null,r.gameState===S.MAIN_MENU&&window.gameObjects?o.a.createElement(o.a.Fragment,null,o.a.createElement(fa,{margintop:!0,hidetitle:!0,hidebg:!1,bgcolor:"#222",playbtn:!0})):null),o.a.createElement(o.a.Fragment,null,r.gameSubState===x&&r.gameState===S.GAMEPLAY?o.a.createElement(o.a.Fragment,null,o.a.createElement(Ds,null)):null),o.a.createElement(o.a.Fragment,null,t&&r.gameState===S.PAUSE?o.a.createElement(fa,{"shop-query-visibility":r.gameSubState===v||r.gameSubState===E}):o.a.createElement(o.a.Fragment,null)),o.a.createElement(o.a.Fragment,null,r.gameState===S.SHOP_MENU?o.a.createElement(Jt,null):o.a.createElement(o.a.Fragment,null)),o.a.createElement(o.a.Fragment,null,r.gameState===S.BUILD_MENU?o.a.createElement(Os,null):o.a.createElement(o.a.Fragment,null)),o.a.createElement(o.a.Fragment,null,r.gameSubState===v||r.gameSubState===E?o.a.createElement(vn,null):o.a.createElement(o.a.Fragment,null)),o.a.createElement(o.a.Fragment,null,r.gameSubState===b?o.a.createElement(Vs,null):null),o.a.createElement(o.a.Fragment,null,r.gameState!==S.MAIN_MENU&&r.gameState!==S.SCORES_VIEW?o.a.createElement("div",{style:{backgroundColor:"#333",position:"absolute",margin:"auto",width:"50%",height:"30px",lineHeight:"30px",top:"4px",left:0,right:0,textAlign:"center",borderRadius:"2px"}},o.a.createElement("div",{style:{display:"inline-block"},className:"debug-ui"},"wave no: ",r.waveNum),o.a.createElement("div",{style:{marginLeft:"100px",display:"inline-block"},className:"debug-ui"},"enemies to defeat: ",r.waveCountToDefeat)):null,r.gameState!==S.MAIN_MENU&&r.gameState!==S.SCORES_VIEW?o.a.createElement(Rs.a.div,{className:"game-score",animate:{scale:B?[1.35,1]:1},transition:{duration:.35}},o.a.createElement("span",{style:{color:r.score<r.prevScore?"red":r.score>r.prevScore?"#00FF61":"white"}},r.score)):null,o.a.createElement("div",{className:r.gameState!==S.MAIN_MENU&&r.gameState!==S.SCORES_VIEW?"player-attributes":""},r.gameState!==S.MAIN_MENU&&r.gameState!==S.SCORES_VIEW?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:F?"upgrade-gui-transition":"upgrade-gui"},"Reload Lvl. ",r.player.upgradeTiers.reload.current),o.a.createElement("div",{className:_?"upgrade-gui-transition":"upgrade-gui"},"Run Lvl. ",r.player.upgradeTiers.run.current),o.a.createElement("div",{className:R?"upgrade-gui-transition":"upgrade-gui"},"Jump Lvl. ",r.player.upgradeTiers.jump.current),o.a.createElement("div",{className:q?"upgrade-gui-transition":"upgrade-gui"},"Defense Lvl. ",r.player.upgradeTiers.defense.current),o.a.createElement("div",{className:N?"upgrade-gui-transition":"upgrade-gui"},"Melee Lvl. ",r.player.upgradeTiers.melee.current)):null),r.gameState!==S.MAIN_MENU&&r.gameState!==S.SCORES_VIEW?o.a.createElement("div",{className:"total-ammo-count-ui"},r.player.weapons.totalAmmo[r.player.weapons.equipped]):null,r.gameState!==S.MAIN_MENU&&r.gameState!==S.SCORES_VIEW?o.a.createElement("div",{className:"total-credits-ui"},"credits: ",o.a.createElement("span",{style:{color:"#71DD4D"}},"$",r.player.credits)):null,r.gameState!==S.MAIN_MENU&&r.gameState!==S.SCORES_VIEW&&d?o.a.createElement("div",{className:"weapon-stats"},o.a.createElement("div",{className:"weapon-stats-item"},"ROF: ",r.player.modTiers.rof[d].current),o.a.createElement("div",{className:"weapon-stats-item"},"PWR: ",r.player.modTiers.powder[d].current),o.a.createElement("div",{className:"weapon-stats-item"},"ACC: ",r.player.modTiers.sight[d].current),o.a.createElement("div",{className:"weapon-stats-item"},"CAP: ",r.player.modTiers.mag[d].current)):null))}var Ws=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement(Is,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(l.a,{store:at},o.a.createElement(Ws,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}]),[[126,1,2]]]);
//# sourceMappingURL=main.e3414cc6.chunk.js.map