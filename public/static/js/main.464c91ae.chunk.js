(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],Array(53).concat([function(e,t,a){e.exports=a.p+"static/media/pistol-icon.7f31cd11.png"},function(e,t,a){e.exports=a.p+"static/media/smg-icon.3a3ac587.png"},function(e,t,a){e.exports=a.p+"static/media/shotgun-icon.0cd5d683.png"},function(e,t,a){e.exports=a.p+"static/media/GroundTexture_Optimized.b017db2f.png"},function(e,t,a){e.exports=a.p+"static/media/wallTile.c21abdef.png"},function(e,t,a){e.exports=a.p+"static/media/gradient-layer-mask.2be09341.png"},function(e,t,a){e.exports=a.p+"static/media/explosiveBarrier.4f1da0f2.png"},function(e,t,a){e.exports=a.p+"static/media/head-sprite.0a5881b1.png"},function(e,t,a){e.exports=a.p+"static/media/bodyBulletImpact.94466266.wav"},,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/GameCover.82b711ae.png"},function(e,t,a){e.exports=a.p+"static/media/9mm1.604f7da7.wav"},function(e,t,a){e.exports=a.p+"static/media/9mm2.c11c6dad.mp3"},function(e,t,a){e.exports=a.p+"static/media/explosion1.9434e92f.wav"},function(e,t,a){e.exports=a.p+"static/media/explosion_distant.d9a90524.wav"},function(e,t,a){e.exports=a.p+"static/media/pistolReload.915ac0e1.wav"},function(e,t,a){e.exports=a.p+"static/media/grenadeClink.e7168e2c.wav"},function(e,t,a){e.exports=a.p+"static/media/throw.e7ed00d6.wav"},function(e,t,a){e.exports=a.p+"static/media/coinCollect.b65cb627.wav"},function(e,t,a){e.exports=a.p+"static/media/collectAmmo.b05c1059.wav"},function(e,t,a){e.exports=a.p+"static/media/collectItem.a7bd5386.wav"},function(e,t,a){e.exports=a.p+"static/media/bloodSquash.6c1046e0.flac"},function(e,t,a){e.exports=a.p+"static/media/bloodSquish.508e6483.wav"},function(e,t,a){e.exports=a.p+"static/media/bloodSmack.eb606367.wav"},function(e,t,a){e.exports=a.p+"static/media/deathRipSound.733ed512.wav"},function(e,t,a){e.exports=a.p+"static/media/jumpLanding.f703082d.wav"},function(e,t,a){e.exports=a.p+"static/media/dirtImpact.de2bbd17.wav"},function(e,t,a){e.exports=a.p+"static/media/zombieHurt.2e807e84.wav"},function(e,t,a){e.exports=a.p+"static/media/zombieDeath.0ac25f1f.wav"},function(e,t,a){e.exports=a.p+"static/media/pain1.e6646ac7.wav"},function(e,t,a){e.exports=a.p+"static/media/pain2.defb4bdf.wav"},function(e,t,a){e.exports=a.p+"static/media/playerDeath.e8c5712d.wav"},function(e,t,a){e.exports=a.p+"static/media/buttonAdd.8db1c8cf.wav"},function(e,t,a){e.exports=a.p+"static/media/buttonSubtract.b240a4d0.wav"},function(e,t,a){e.exports=a.p+"static/media/buttonClick.10d30b9f.wav"},function(e,t,a){e.exports=a.p+"static/media/buttonHover.e0064aca.wav"},function(e,t,a){e.exports=a.p+"static/media/placeObject.fa092176.flac"},function(e,t,a){e.exports=a.p+"static/media/cancelSound.0d1ffcde.wav"},function(e,t,a){e.exports=a.p+"static/media/moneySound.1bae50c5.wav"},function(e,t,a){e.exports=a.p+"static/media/purchase.4979dc37.wav"},function(e,t,a){e.exports=a.p+"static/media/shellImpact.8075d182.wav"},function(e,t,a){e.exports=a.p+"static/media/health.29ff687c.wav"},function(e,t,a){e.exports=a.p+"static/media/zombieGrowl.4792280f.wav"},function(e,t,a){e.exports=a.p+"static/media/smgFire.b1f03f38.wav"},function(e,t,a){e.exports=a.p+"static/media/magDrop.1547e6a9.wav"},function(e,t,a){e.exports=a.p+"static/media/shotShell.f90e6de6.wav"},function(e,t,a){e.exports=a.p+"static/media/shotgunBlast.4118af72.wav"},,,,,,,function(e,t,a){e.exports=a(188)},,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),i=a(29),r=a.n(i),s=(a(126),a(21)),l=a(9),d=a(62),p=(a(131),a(2)),c=a(46),u=a(40),h="neutral",m="waiting",y="wave started",g="wave defeated",f="player death",b="player respawn",w="shop query sub-menu",x="build trap placement mode",v={MAIN_MENU:"main menu",GAMEPLAY:"gameplay",PAUSE:"pause",IN_GAME_MENU:"in-game menu",GAMEOVER:"gameover",SHOP_MENU:"in-game shop menu",BUILD_MENU:"build menu",SCORES_VIEW:"scores view"},k=Object(c.b)({name:"game",initialState:{width:1200,height:550,keys:[],filterEffects:!0,displayZombieHealth:!0,rightMouseDown:!1,mouseState:{x:"",y:"",btn:""},mousePosition:{x:0,y:0},mouseRelativeToPlayerPosition:{x:0,y:0},textures:{},gameState:v.MAIN_MENU,lastGameState:null,gameSubState:h,lastGameSubState:null,waveNum:0,waveCountToDefeat:null,zombiesOnStage:0,showingMessage:!1,respawnCost:300,respawnToShopCost:150,purchases:0,lastPurchase:{item:null,amount:null},player:{perks:{magnetism:{cost:750,owned:!1},magDmg:{cost:750,owned:!1},lastBullet:{cost:750,owned:!1},creditDropper:{cost:1250,owned:!1},ammoDropper:{cost:1250,owned:!1},healthDropper:{cost:1250,owned:!1},quickTurret:{cost:1e3,owned:!1},barrierPlus:{cost:1e3,owned:!1},cluck:{cost:1e3,owned:!1}},health:100,credits:750,position:{x:0,y:0},compositeId:"",composite:{headId:"",bodyId:"",armId:""},weapons:{list:["pistol weapon","smg weapon","shotgun weapon"],equipped:null,grenadeChargeRate:35e-5,grenadeUpperForceThreshold:.025,grenadeFuseTime:{default:3},grenadeExplosionSize:450,laser:{"pistol weapon":!1,"smg weapon":!1,"shotgun weapon":!1},meleeDamage:{"pistol weapon":10,"smg weapon":15,"shotgun weapon":20},damage:{"pistol weapon":{min:4,max:10},"smg weapon":{min:3,max:7},"shotgun weapon":{min:4,max:8},"turret weapon":{min:4,max:6}},shotLimiter:{"pistol weapon":300,"smg weapon":100,"shotgun weapon":500},ammoCapacity:{"pistol weapon":9,"smg weapon":19,"shotgun weapon":6,grenades:1},totalAmmo:{"pistol weapon":45,"smg weapon":95,"shotgun weapon":30,grenades:3},ammoCostPerBox:{"pistol weapon":10,"smg weapon":20,"shotgun weapon":20,grenades:80},lastShot:{"pistol weapon":null,"smg weapon":null,"shotgun weapon":null},reloadSpeed:{"pistol weapon":.4,"smg weapon":.4,"shotgun weapon":.4},reloadAnimationFrames:{"pistol weapon":55,"smg weapon":60,"shotgun weapon":80},bulletVariance:{"pistol weapon":4e-4,"smg weapon":.001,"shotgun weapon":.002},bulletForce:{"pistol weapon":.0075,"smg weapon":.0075,"shotgun weapon":.0075,turret:.01},shellEjectionForce:{"pistol weapon":{min:3e-4,max:7e-4},"smg weapon":{min:3e-4,max:.001},"shotgun weapon":{min:8e-4,max:.0012}},shellRemovalTimeout:{"pistol weapon":2e3,"smg weapon":2e3,"shotgun weapon":2e3},buyWeapons:{"smg weapon":1500,"shotgun weapon":2750}},constants:{width:50,height:180},variables:{magnetism:400,magnetismSpeed:1,currentDirection:"",lastDirection:"",jumping:!1,jumpForce:-.4,defense:0,acceleration:{min:2,max:5},deceleration:.5},upgradeTiers:{run:{min:1,current:1,max:4},jump:{min:1,current:1,max:4},reload:{min:1,current:1,max:4},defense:{min:1,current:1,max:4},melee:{min:1,current:1,max:4}},upgradeCosts:{run:200,jump:200,reload:300,defense:400,melee:400},upgradeAmounts:{run:1,jump:-.1,reload:.1,defense:7,melee:{"pistol weapon":5,"smg weapon":6,"shotgun weapon":8}},modTiers:{rof:{"pistol weapon":{min:1,current:1,max:4},"smg weapon":{min:1,current:1,max:4},"shotgun weapon":{min:1,current:1,max:4}},powder:{"pistol weapon":{min:1,current:1,max:4},"smg weapon":{min:1,current:1,max:4},"shotgun weapon":{min:1,current:1,max:4}},sight:{"pistol weapon":{min:1,current:1,max:4},"smg weapon":{min:1,current:1,max:4},"shotgun weapon":{min:1,current:1,max:4}},mag:{"pistol weapon":{min:1,current:1,max:4},"smg weapon":{min:1,current:1,max:4},"shotgun weapon":{min:1,current:1,max:4}}},modCosts:{rof:{"pistol weapon":300,"smg weapon":400,"shotgun weapon":500},powder:{"pistol weapon":400,"smg weapon":550,"shotgun weapon":750},sight:{"pistol weapon":200,"smg weapon":300,"shotgun weapon":300},mag:{"pistol weapon":350,"smg weapon":600,"shotgun weapon":600}},modAmounts:{rof:{"pistol weapon":20,"smg weapon":15,"shotgun weapon":25},powder:{"pistol weapon":3,"smg weapon":2,"shotgun weapon":3},sight:{"pistol weapon":1e-4,"smg weapon":2e-4,"shotgun weapon":3e-4},mag:{"pistol weapon":3,"smg weapon":5,"shotgun weapon":1}}},barriers:{selectedBarrier:null,costToBuild:{Wooden:150,Stone:250,Metal:350,"Explosive Barrel":400}},traps:{turret:{fireDistance:500,cooldown:.5},selectedTrap:null,costToBuild:{Landmine:250,"Remote Mine":400,"Machine Gun Turret":750,"Cluster Bomb":500}},enemies:{zombies:{attackDmg:20,attackDmgDefault:20,attackIncrementer:.25,walkSpeed:1.5,walkSpeedDefault:1.5,walkSpeedIncrementer:.015,zombieAttackLimiter:2e3,zombieAttackDefaultLimiter:2e3,zombieAttackLimiterDecrementer:15,zombieAttackDistance:150,defaultHealth:100,startingHealth:100,healthIncrementer:.5,onRight:0,onLeft:0}},consumables:{healthkit:{20:{cost:40},50:{cost:80},full:{cost:150}}}},reducers:{addPurchase:{reducer:function(e,t){e.purchases+=1,e.lastPurchase=t.payload},prepare:function(e,t){return{payload:{item:e,amount:t}}}},setZombiesOnLeft:function(e,t){e.enemies.zombies.onLeft=t.payload},setZombiesOnRight:function(e,t){e.enemies.zombies.onRight=t.payload},setRightMouseDown:function(e,t){e.rightMouseDown=t.payload},attachMod:{reducer:function(e,t){var a=t.payload,o=a.modType,n=a.wepType;switch(o){case"rof":e.player.modTiers.rof[n].current+=1,e.player.weapons.shotLimiter[n]-=e.player.modAmounts.rof[n];break;case"powder":e.player.modTiers.powder[n].current+=1,e.player.weapons.damage[n].min+=Math.round(.5*e.player.modAmounts.powder[n]),e.player.weapons.damage[n].max+=Math.round(e.player.modAmounts.powder[n]);break;case"sight":e.player.modTiers.sight[n].current+=1,e.player.weapons.bulletVariance[n]-=e.player.modAmounts.sight[n];break;case"mag":e.player.modTiers.mag[n].current+=1,e.player.weapons.ammoCapacity[n]+=e.player.modAmounts.mag[n]}},prepare:function(e,t){return{payload:{modType:e,wepType:t}}}},setPlayerCompositeId:function(e,t){console.log(t.type),e.player.compositeId=t.payload},setKeyPress:function(e,t){e.keys.push(t.payload)},removeKeyPress:function(e,t){e.keys.splice(e.keys.indexOf(parseInt(t.payload)),1)},setLastDirection:function(e,t){e.player.variables.lastDirection=t.payload},setCurrentDirection:function(e,t){e.player.variables.currentDirection=t.payload},setJumping:function(e,t){e.player.variables.jumping=t.payload},setGroundId:function(e,t){e.groundId=t.payload},setMousePosition:function(e,t){e.mousePosition=t.payload},setMouseStateX:function(e,t){e.mouseState.x=t.payload},setMouseStateY:function(e,t){e.mouseState.y=t.payload},setMouseButtonState:function(e,t){e.mouseState.btn=t.payload},setWeaponEquipped:function(e,t){e.player.weapons.equipped=t.payload},setLastShot:{reducer:function(e,t){var a=e.player.weapons;a.lastShot[a.equipped]=t.payload.dateTimeObject},prepare:function(e,t){return{payload:{weapon:e,dateTimeObject:t}}}},setMouseRelativeToPlayerPosition:function(e,t){e.mouseRelativeToPlayerPosition=t.payload},setCompositeBodyIds:function(e,t){e.player.composite=t.payload},setStaticGunAngle:function(e,t){e.staticGunAngle=t.payload},setStaticGunAngleState:function(e,t){e.staticGun=t.payload},setTexturePath:{reducer:function(e,t){e.textures[t.payload.textureName]=t.payload.texturePath},prepare:function(e,t){return{payload:{textureName:e,texturePath:t}}}},gameStateTransition:{reducer:function(e,t){switch(t.payload.type){case"sub":e.lastGameSubState=t.payload.from,e.gameSubState=t.payload.to;break;case"main":e.lastGameState=t.payload.from,e.gameState=t.payload.to}},prepare:function(e,t,a){return{payload:{type:e,from:t,to:a}}}},incrementWave:function(e){e.waveNum+=1},decrementWave:function(e){e.waveNum-=1},setWaveCountToDefeat:function(e,t){e.waveCountToDefeat=t.payload},incrementWaveCountToDefeat:function(e,t){e.waveCountToDefeat+=1},decrementWaveCountToDefeat:function(e,t){e.waveCountToDefeat-=1,e.zombiesOnStage-=1},setWeaponsList:function(e,t){e.player.weapons.list=t.payload},setShowingMessage:function(e,t){e.showingMessage=t.payload},unsetAllKeys:function(e,t){e.keys=[]},resetPlayerVariables:function(e){e=Object.assign({variables:Object(u.a)({},e,{currentDirection:"",lastDirection:"",jumping:!1})},e)},decrementTotalAmmo:function(e,t){e.player.weapons.totalAmmo[t.payload]-=1},addToTotalAmmo:{reducer:function(e,t){e.player.weapons.totalAmmo[t.payload.wepType]+=t.payload.amount},prepare:function(e,t){return{payload:{wepType:e,amount:t}}}},updateAmmoCapacity:{reducer:function(e,t){e.player.weapons.ammoCapacity[t.payload.wepType]=t.payload.newCapacityAmount},prepare:function(e,t){return{payload:{wepType:e,newCapacityAmount:t}}}},setPlayerPosition:function(e,t){e.player.position=t.payload},addToTotalCredits:function(e,t){e.player.credits+=t.payload},subtractFromTotalCredits:function(e,t){e.player.credits-=t.payload},upgradeRunSpeed:function(e){e.player.upgradeTiers.run.current+=1,e.player.variables.acceleration.max=e.player.variables.acceleration.max+e.player.upgradeAmounts.run},upgradeReloadSpeed:function(e){e.player.upgradeTiers.reload.current+=1,e.player.weapons.reloadSpeed["pistol weapon"]=e.player.weapons.reloadSpeed["pistol weapon"]+e.player.upgradeAmounts.reload,e.player.weapons.reloadSpeed["smg weapon"]=e.player.weapons.reloadSpeed["smg weapon"]+e.player.upgradeAmounts.reload},upgradeJumpForce:function(e){e.player.upgradeTiers.jump.current+=1,e.player.variables.jumpForce=e.player.variables.jumpForce+e.player.upgradeAmounts.jump},upgradeDefense:function(e){e.player.upgradeTiers.defense.current+=1,e.player.variables.defense=e.player.variables.defense+e.player.upgradeAmounts.defense},upgradeMelee:function(e){e.player.upgradeTiers.melee.current+=1,e.player.weapons.meleeDamage["pistol weapon"]+=e.player.upgradeAmounts.melee["pistol weapon"],e.player.weapons.meleeDamage["smg weapon"]+=e.player.upgradeAmounts.melee["smg weapon"]},updatePlayerHealth:function(e,t){e.player.health=t.payload},decrementGrenadeCount:function(e){e.player.weapons.totalAmmo.grenades-=1},incrementGrenadeCount:function(e){e.player.weapons.totalAmmo.grenades+=1},updateZombieWalkSpeed:function(e,t){var a=e.enemies.zombies.walkSpeedDefault,o=e.enemies.zombies.walkSpeedIncrementer;e.enemies.zombies.walkSpeed=a+t.payload*o},updateZombieAttackDmg:function(e,t){e.enemies.zombies.attackDmg=Math.round(t.payload*e.enemies.zombies.attackIncrementer+e.enemies.zombies.attackDmgDefault)},decrementZombieAttackTimeLimit:function(e,t){e.enemies.zombies.zombieAttackLimiter=e.enemies.zombies.zombieAttackDefaultLimiter-t.payload*e.enemies.zombies.zombieAttackLimiterDecrementer,console.log(e.enemies.zombies.zombieAttackLimiter)},showLaserSight:function(e,t){e.player.weapons.laser[t.payload]=!0},incrementZombieHealth:function(e,t){e.enemies.zombies.startingHealth=Math.round(e.enemies.zombies.defaultHealth+e.enemies.zombies.healthIncrementer*t.payload)},setSelectedBarrierToBuild:function(e,t){e.barriers.selectedBarrier=t.payload},setSelectedTrapToBuild:function(e,t){e.traps.selectedTrap=t.payload},setLastWaveCountDefeated:function(e){e.lastWaveCountDefeated=e.waveCountToDefeat},incrementZombiesOnStage:function(e){e.zombiesOnStage+=1},setZombiesOnStage:function(e,t){e.zombiesOnStage=t.payload},updateWeaponsList:function(e,t){e.player.weapons.list.push(t.payload)},setPlayerMagnetism:{reducer:function(e,t){e.player.variables.magnetism=t.payload.range,e.player.variables.magnetismSpeed=t.payload.speed,e.player.perks.magnetism.owned=!0},prepare:function(e,t){return{payload:{range:e,speed:t}}}},setPlayerMagDamage:function(e){e.player.perks.magDmg.owned=!0},setPlayerLastBullet:function(e){e.player.perks.lastBullet.owned=!0},setPlayerCreditDropper:function(e){e.player.perks.creditDropper.owned=!0},setPlayerAmmoDropper:function(e){e.player.perks.ammoDropper.owned=!0},setPlayerHealthDropper:function(e){e.player.perks.healthDropper.owned=!0},setPlayerQuickTurret:function(e){e.player.perks.quickTurret.owned=!0,e.traps.turret.cooldown=.25,e.traps.turret.fireDistance=600},setPlayerBarrierPlus:function(e){e.player.perks.barrierPlus.owned=!0},setPlayerFusterCluck:function(e){e.player.perks.cluck.owned=!0},toggleFilterEffects:function(e,t){e.filterEffects=t.payload},toggleZombieHealthDisplay:function(e,t){e.displayZombieHealth=t.payload}}}),E=k.actions,S=E.toggleZombieHealthDisplay,A=E.toggleFilterEffects,C=E.setPlayerFusterCluck,B=E.setPlayerBarrierPlus,_=E.setPlayerQuickTurret,V=E.setPlayerHealthDropper,K=E.setPlayerAmmoDropper,O=E.setPlayerCreditDropper,F=E.setPlayerLastBullet,j=E.setPlayerMagDamage,M=E.setPlayerMagnetism,T=E.addPurchase,P=(E.setZombiesOnLeft,E.setZombiesOnRight,E.setRightMouseDown),L=E.resetPlayerVariables,D=E.unsetAllKeys,R=E.setPlayerCompositeId,z=E.setKeyPress,W=E.removeKeyPress,I=E.setLastDirection,H=E.setCurrentDirection,U=E.setJumping,G=(E.setGroundId,E.setMousePosition),N=E.setMouseStateX,q=E.setMouseStateY,Y=E.setMouseButtonState,X=E.setLastShot,Z=E.setWeaponEquipped,$=E.setMouseRelativeToPlayerPosition,J=E.setCompositeBodyIds,Q=E.setTexturePath,ee=E.gameStateTransition,te=E.incrementWave,ae=E.decrementWave,oe=(E.incrementWaveCountToDefeat,E.setWaveCountToDefeat),ne=E.decrementWaveCountToDefeat,ie=(E.setWeaponsList,E.setShowingMessage),re=E.decrementTotalAmmo,se=E.addToTotalAmmo,le=(E.updateAmmoCapacity,E.addToTotalCredits),de=E.subtractFromTotalCredits,pe=E.setPlayerPosition,ce=E.upgradeRunSpeed,ue=E.upgradeReloadSpeed,he=E.upgradeJumpForce,me=E.upgradeDefense,ye=E.upgradeMelee,ge=E.updatePlayerHealth,fe=E.attachMod,be=(E.incrementGrenadeCount,E.decrementGrenadeCount),we=E.updateZombieWalkSpeed,xe=E.updateZombieAttackDmg,ve=E.decrementZombieAttackTimeLimit,ke=E.showLaserSight,Ee=E.incrementZombieHealth,Se=E.setSelectedBarrierToBuild,Ae=E.setSelectedTrapToBuild,Ce=(E.lastWaveCountDefeated,E.incrementZombiesOnStage),Be=E.setZombiesOnStage,_e=E.updateWeaponsList,Ve=k.reducer,Ke=Object(c.a)({reducer:{game:Ve}}),Oe=a(1),Fe=a(7),je=a.n(Fe),Me=Ke.getState,Te=window.TweenLite.to,Pe=function(e){return new p.h(p.j.from(Me().game.textures[e]))},Le=function(e){return e.bounds.max.x-e.bounds.min.x},De=function(e){return e.bounds.max.y-e.bounds.min.y},Re=function(e,t){var a=Me().game.player.composite,o=a.headId,n=a.bodyId,i=a.armId,r=a.gunId,s=t.getKeyValue("world");return"head"===e?Oe.Composite.get(s,o,"body"):"body"===e?Oe.Composite.get(s,n,"body"):"arm"===e?Oe.Composite.get(s,i,"body"):"gun"===e?Oe.Composite.get(s,r,"body"):void 0},ze=function(e){var t=e.getKeyValue("world"),a=Me().game.player.composite.bodyId;return Oe.Composite.get(t,a,"body")};var We=a(14),Ie=a(20),He="greater than player x position",Ue={group:-1,category:1,mask:1},Ge={group:-1,category:2,mask:1},Ne={category:1,mask:1},qe=Ke.getState,Ye=Ke.dispatch,Xe=function(e,t,a,o){p.c.from("Arial",{fill:t,fontSize:40,fontWeight:"bold"});var n=window,i=n.gameObjects,r=n.TweenLite,s=r.from,l=r.to,d=n.Power1,c=i.getKeyValue("game-pixi-container"),u=i.getKeyValue("game-width"),h=i.getKeyValue("game-height"),m=new p.d(e,{font:"Arial"});m.pivot.x=m.width/2,m.pivot.y=m.height/2,m.position.x=u/2,m.position.y=h/2,c.addChild(m),s(m,a,{x:-100,alpha:0,onStart:function(){Ye(ie(!0))},onComplete:function(){l(m,a,{delay:o,x:1.5*u,ease:d.easeIn,onComplete:function(){Ye(ie(!1)),c.removeChild(m)}})}})},Ze=function(e,t,a,o,n){var i=window,r=i.gameObjects,s=i.TweenLite,l=s.to,d=s.set,c=r.getKeyValue("game-pixi-container"),u=r.getKeyValue("text-messages"),h=r.getKeyValue("player").body,m=new p.i(e,{fill:t,fontSize:n||13,fontWeight:"bold"});m.pivot.x=.5*m.width,m.pivot.y=.5*m.height,c.addChild(m);var y=qe().game.player.position,g=y.y-.65*De(h);u.push(m),d(m,{x:y.x,y:g-20*u.length}),l(m,a,{x:y.x,y:g-20*u.length-20,onComplete:function(){l(m,a,{delay:o,alpha:0,onComplete:function(){m.destroy();var e=u.indexOf(m);e>-1&&u.splice(e,1)}})}})},$e=window.TweenLite,Je=$e.delayedCall,Qe=$e.to;function et(e,t,a){var o=this,n=e.position_x,i=e.position_y,r=t.force_x,s=t.force_y,l=window.gameObjects,d=l.getKeyValue("gibs"),c=l.getKeyValue("world"),u=l.getKeyValue("game-pixi-container"),h=Oe.Bodies.circle(n,i,5,{collisionFilter:{category:2,mask:1}});h.label="gib",Oe.World.add(c,h);var m=l.getKeyValue("player-parts-sheet"),y=new p.h(m.textures[function(){var e=["gib.png","gib2.png","gib3.png","gib4.png"];return e[Math.floor(Math.random()*e.length)]}()]);return u.addChild(y),d.push(this),y.pivot.x=.5*y.width,y.pivot.y=.475*y.height,Oe.Body.applyForce(h,{x:n,y:i},{x:je.a.float(.25*r,r),y:je.a.float(.25*s,s)}),this.animate=function(e){var t=e(h),a=t.x,o=t.y,n=t.rotation;y.position={x:a,y:o},y.rotation=n},this.destroy=function(){y&&y.destroy(),h&&Oe.World.remove(c,h);var e=d.indexOf(o);e>-1&&d.splice(e,1),c=null,h=null,u=null,d=null,l=null},Je(a,(function(){Qe(y,2,{alpha:0,onComplete:function(){o.destroy()}})})),this}function tt(e,t,a,o){for(var n=t.x,i=t.y,r=a=a||{force_x:0,force_y:0},s=r.x,l=r.y,d=0;d<e;++d)new et({position_x:n,position_y:i},{force_x:s,force_y:l},o)}function at(e,t,a){var o=this,n=e.x,i=e.y,r=window.gameObjects,s=r.getKeyValue("world"),l=r.getKeyValue("game-pixi-container"),d=40,c=60,u=25,h=25,m=15,y=30,g=15,f=50,b=15,w=20,x=10,v=7,k=10,E=14,S=10,A=10,C=Oe.Bodies.rectangle(n,i,d,c,{collisionFilter:Ge}),B=Oe.Bodies.rectangle(n,i,u,h,{}),_=Oe.Bodies.rectangle(n,i,u,h,{}),V=Oe.Bodies.rectangle(n,i,m,y,{collisionFilter:Ue}),K=Oe.Bodies.rectangle(n,i,m,y,{collisionFilter:Ue}),O=Oe.Bodies.rectangle(n,i,b,w,{}),F=Oe.Bodies.rectangle(n,i,m,y,{}),j=Oe.Bodies.rectangle(n,i,m,y,{}),M=Oe.Bodies.rectangle(n,i,b,w,{}),T=Oe.Bodies.rectangle(n,i,g,f,{collisionFilter:Ue}),P=Oe.Bodies.rectangle(n,i,g,f,{collisionFilter:Ue}),L=Oe.Bodies.rectangle(n,i,g,f,{}),D=Oe.Bodies.rectangle(n,i,g,f,{}),R=Oe.Bodies.rectangle(n,i,k,E,{}),z=Oe.Bodies.rectangle(n,i,x,v,{}),W=Oe.Constraint.create({bodyA:C,bodyB:B,pointA:{x:0,y:-c/2},pointB:{x:0,y:h/2},length:1}),I=Oe.Constraint.create({bodyA:C,bodyB:V,pointA:{x:0,y:-c/4},pointB:{x:0,y:-y/2},length:1}),H=Oe.Constraint.create({bodyA:C,bodyB:K,pointA:{x:0,y:-c/4},pointB:{x:0,y:-y/2},length:1}),U=Oe.Constraint.create({bodyA:V,bodyB:F,pointA:{x:0,y:y/2},pointB:{x:0,y:-y/2},length:1}),G=Oe.Constraint.create({bodyA:K,bodyB:j,pointA:{x:0,y:y/2},pointB:{x:0,y:-y/2},length:1}),N=Oe.Constraint.create({bodyA:F,bodyB:O,pointA:{x:0,y:y/2},pointB:{x:0,y:-w/2},length:1}),q=Oe.Constraint.create({bodyA:j,bodyB:M,pointA:{x:0,y:y/2},pointB:{x:0,y:-w/2},length:1}),Y=Oe.Constraint.create({bodyA:C,bodyB:T,pointA:{x:0,y:c/2},pointB:{x:0,y:-f/2},length:2}),X=Oe.Constraint.create({bodyA:C,bodyB:P,pointA:{x:0,y:c/2},pointB:{x:0,y:-f/2},length:1}),Z=Oe.Constraint.create({bodyA:T,bodyB:L,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),$=Oe.Constraint.create({bodyA:P,bodyB:D,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:2}),J=Oe.Constraint.create({bodyA:L,bodyB:R,pointA:{x:0,y:f/2},pointB:{x:0,y:-E/2},length:1}),Q=Oe.Constraint.create({bodyA:D,bodyB:z,pointA:{x:0,y:f/2},pointB:{x:0,y:-v/2},length:1}),ee=[],te=function(){for(var e=[],t=0;t<6;++t){var a=Oe.Bodies.rectangle(C.position.x,C.position.y,S,A);e.push(a)}return{spineLinks:e,spineConstraints:[Oe.Constraint.create({bodyA:e[0],bodyB:e[1],pointA:{x:0,y:A/2},pointB:{x:0,y:-A/2},length:4}),Oe.Constraint.create({bodyA:e[1],bodyB:e[2],pointA:{x:0,y:A/2},pointB:{x:0,y:-A/2},length:4}),Oe.Constraint.create({bodyA:e[2],bodyB:e[3],pointA:{x:0,y:A/2},pointB:{x:0,y:-A/2},length:4}),Oe.Constraint.create({bodyA:e[3],bodyB:e[4],pointA:{x:0,y:A/2},pointB:{x:0,y:-A/2},length:4}),Oe.Constraint.create({bodyA:e[4],bodyB:e[5],pointA:{x:0,y:A/2},pointB:{x:0,y:-A/2},length:4})]}}(),ae=te.spineLinks,oe=te.spineConstraints,ne=Oe.Constraint.create({bodyA:B,bodyB:ae[0],pointA:{x:0,y:h/2},pointB:{x:0,y:-A/2},length:10});this.composite=Oe.Composite.create(),Oe.Composite.add(this.composite,[B,_,C,V,K,F,j,T,P,L,D,O,M,R,z,W,N,q,J,Q,I,H,U,G,Y,X,Z,$]),Oe.Composite.add(this.composite,ae),Oe.Composite.add(this.composite,oe),Oe.Composite.add(this.composite,ne),Oe.World.add(s,this.composite),Oe.Body.applyForce(C,C.position,t);var ie=t.x<0?{x:-.002}:{x:.002};ie.y=-.002,new tt(je.a.int(15,20),C.position,ie,5);var re=r.getKeyValue("player-parts-sheet"),se=[];console.log(a);var le=new p.h(re.textures["rear_leg_foot.png"]);le._id="foot 2",se.push(le);var de=new p.h(re.textures["rear_leg_lower.png"]);de._id="leg 2",se.push(de);var pe=new p.h(re.textures["rear_arm_hand.png"]);pe._id="hand 2",se.push(pe);var ce=new p.h(re.textures["rear_arm_forearm.png"]);ce._id="arm 2",se.push(ce);var ue=new p.h(re.textures["rear_arm_upper.png"]);ue._id="limb",se.push(ue);var he=new p.h(re.textures["front_leg_foot.png"]);he._id="foot 1",se.push(he);var me=new p.h(re.textures["rear_leg_upper.png"]);me._id="limb",se.push(me);var ye=new p.h(re.textures["head_gore.png"]);ye._id="skull",se.push(ye);var ge=new p.h(re.textures["mask.png"]);ge._id="mask",se.push(ge);var fe=new p.h(re.textures["front_leg_lower.png"]);fe._id="leg 1",se.push(fe);var be=new p.h(re.textures["front_leg_upper.png"]);be._id="limb",se.push(be),ae.forEach((function(e){var t=new p.h(re.textures["spine_link.png"]);ee.push(t),se.push(t)}));var we=new p.h(re.textures["torso_whole_headless.png"]);we._id="torso upper",se.push(we);var xe=new p.h(re.textures["front_arm_hand.png"]);xe._id="hand 1",se.push(xe);var ve=new p.h(re.textures["front_arm_forearm.png"]);ve._id="arm 1",se.push(ve);var ke=new p.h(re.textures["front_arm_upper.png"]);return ke._id="limb",se.push(ke),se.forEach((function(e){e.updateAnchor=!0,"skull"===e._id?(e.pivot.x=.55*e.width,e.pivot.y=.475*e.height):"foot 1"===e._id||"foot 2"===e._id?(e.pivot.x=.525*e.width,e.pivot.y=.5*e.height):(e.pivot.x=.5*e.width,e.pivot.y=.5*e.height),l.addChild(e)})),this.head=B,this.mask=_,this.bodyUpper=C,this.armUpperL=V,this.armUpperR=K,this.armLowerL=F,this.armLowerR=j,this.legUpperL=T,this.legUpperR=P,this.legLowerL=L,this.legLowerR=D,this.handL=O,this.handR=M,this.footL=R,this.footR=z,this.destroy=function(){r.setKeyValue("player-ragdoll",null),se.forEach((function(e){e.destroy(),e=null})),Oe.World.remove(s,o.composite),o.composite=null,s=null,l=null,r=null},this.animateRagParts=function(e){ae.forEach((function(t,a){var o=e(t);ee[a].position=o,ee[a].rotation=o.rotation}));var t=e(o.mask);ge.position=t,ge.rotation=t.rotation;var a=e(o.head);ye.position=a,ye.rotation=a.rotation;var n=e(o.bodyUpper);we.position=n,we.rotation=n.rotation;var i=e(o.armLowerL);ve.position=i,ve.rotation=i.rotation;var r=e(o.armUpperL);ke.position=r,ke.rotation=r.rotation;var s=e(o.handL);xe.position=s,xe.rotation=s.rotation;var l=e(o.legUpperL);be.position=l,be.rotation=l.rotation;var d=e(o.legLowerL);fe.position=d,fe.rotation=d.rotation;var p=e(o.footL);he.position=p,he.rotation=p.rotation;var c=e(o.armLowerR);ce.position=c,ce.rotation=c.rotation;var u=e(o.armUpperR);ue.position=u,ue.rotation=u.rotation;var h=e(o.handR);pe.position=h,pe.rotation=h.rotation;var m=e(o.legUpperR);me.position=m,me.rotation=m.rotation;var y=e(o.legLowerR);de.position=y,de.rotation=y.rotation;var g=e(o.footR);le.position=g,le.rotation=g.rotation},Oe.Composite.remove(this.composite,W),Oe.Body.applyForce(this.head,this.head.position,{x:0,y:-.1}),this}function ot(e,t,a){var o=this,n=e.x,i=e.y,r=window.gameObjects,s=r.getKeyValue("world"),l=r.getKeyValue("game-pixi-container"),d=40,c=35,u=45,h=5,m=25,y=25,g=15,f=30,b=15,w=50,x=15,v=20,k=10,E=7,S=10,A=14,C=10,B=10,_=Oe.Bodies.rectangle(n,i,u,h),V=Oe.Bodies.rectangle(n,i,d,c,{collisionFilter:Ge}),K=Oe.Bodies.rectangle(n,i,m,y,{}),O=Oe.Bodies.rectangle(n,i,g,f,{collisionFilter:Ue}),F=Oe.Bodies.rectangle(n,i,g,f,{collisionFilter:Ue}),j=Oe.Bodies.rectangle(n,i,x,v,{}),M=Oe.Bodies.rectangle(n,i,g,f,{}),T=Oe.Bodies.rectangle(n,i,g,f,{}),P=Oe.Bodies.rectangle(n,i,x,v,{}),L=Oe.Bodies.rectangle(n,i,b,w,{collisionFilter:Ue}),D=Oe.Bodies.rectangle(n,i,b,w,{collisionFilter:Ue}),R=Oe.Bodies.rectangle(n,i,b,w,{}),z=Oe.Bodies.rectangle(n,i,b,w,{}),W=Oe.Bodies.rectangle(n,i,S,A,{}),I=Oe.Bodies.rectangle(n,i,k,E,{}),H=Oe.Constraint.create({bodyA:V,bodyB:K,pointA:{x:0,y:-c/2},pointB:{x:0,y:y/2},length:1}),U=Oe.Constraint.create({bodyA:V,bodyB:O,pointA:{x:0,y:-c/4},pointB:{x:0,y:-f/2},length:1}),G=Oe.Constraint.create({bodyA:V,bodyB:F,pointA:{x:0,y:-c/4},pointB:{x:0,y:-f/2},length:1}),N=Oe.Constraint.create({bodyA:O,bodyB:M,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),q=Oe.Constraint.create({bodyA:F,bodyB:T,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),Y=Oe.Constraint.create({bodyA:M,bodyB:j,pointA:{x:0,y:f/2},pointB:{x:0,y:-v/2},length:1}),X=Oe.Constraint.create({bodyA:T,bodyB:P,pointA:{x:0,y:f/2},pointB:{x:0,y:-v/2},length:1}),Z=Oe.Constraint.create({bodyA:_,bodyB:L,pointA:{x:0,y:h/2},pointB:{x:0,y:-w/2},length:2}),$=Oe.Constraint.create({bodyA:_,bodyB:D,pointA:{x:0,y:h/2},pointB:{x:0,y:-w/2},length:1}),J=Oe.Constraint.create({bodyA:L,bodyB:R,pointA:{x:0,y:w/2},pointB:{x:0,y:-w/2},length:1}),Q=Oe.Constraint.create({bodyA:D,bodyB:z,pointA:{x:0,y:w/2},pointB:{x:0,y:-w/2},length:2}),ee=Oe.Constraint.create({bodyA:R,bodyB:W,pointA:{x:0,y:w/2},pointB:{x:0,y:-A/2},length:1}),te=Oe.Constraint.create({bodyA:z,bodyB:I,pointA:{x:0,y:w/2},pointB:{x:0,y:-E/2},length:1}),ae=[],oe=[],ne=function(){for(var e=[],t=0;t<6;++t){var a=Oe.Bodies.rectangle(V.position.x,V.position.y,C,B);e.push(a)}return{spineLinks:e,spineConstraints:[Oe.Constraint.create({bodyA:e[0],bodyB:e[1],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4}),Oe.Constraint.create({bodyA:e[1],bodyB:e[2],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4}),Oe.Constraint.create({bodyA:e[2],bodyB:e[3],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4}),Oe.Constraint.create({bodyA:e[3],bodyB:e[4],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4}),Oe.Constraint.create({bodyA:e[4],bodyB:e[5],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4})]}},ie=ne(),re=ie.spineLinks,se=ie.spineConstraints,le=ne(),de=le.spineLinks,pe=le.spineConstraints,ce=Oe.Constraint.create({bodyA:V,bodyB:re[0],pointA:{x:0,y:c/2},pointB:{x:0,y:-B/2},length:10}),ue=Oe.Constraint.create({bodyA:_,bodyB:de[0],pointA:{x:0,y:-h/2},pointB:{x:0,y:-B/2},length:10});this.composite=Oe.Composite.create(),Oe.Composite.add(this.composite,[K,V,_,O,F,M,T,L,D,R,z,j,P,W,I,H,Y,X,ee,te,U,G,N,q,Z,$,J,Q]),Oe.Composite.add(this.composite,re),Oe.Composite.add(this.composite,se),Oe.Composite.add(this.composite,ce),Oe.Composite.add(this.composite,de),Oe.Composite.add(this.composite,pe),Oe.Composite.add(this.composite,ue),Oe.World.add(s,this.composite),Oe.Body.applyForce(V,V.position,t);var he=t.x<0?{x:-.002}:{x:.002};he.y=-.002,new tt(je.a.int(15,20),V.position,he,5);var me=r.getKeyValue("player-parts-sheet"),ye=[];console.log(a);var ge=new p.h(me.textures["rear_leg_foot.png"]);ge._id="foot 2",ye.push(ge);var fe=new p.h(me.textures["rear_leg_lower.png"]);fe._id="leg 2",ye.push(fe);var be=new p.h(me.textures["rear_arm_hand.png"]);be._id="hand 2",ye.push(be);var we=new p.h(me.textures["rear_arm_forearm.png"]);we._id="arm 2",ye.push(we);var xe=new p.h(me.textures["rear_arm_upper.png"]);xe._id="limb",ye.push(xe);var ve=new p.h(me.textures["front_leg_foot.png"]);ve._id="foot 1",ye.push(ve);var ke=new p.h(me.textures["rear_leg_upper.png"]);ke._id="limb",ye.push(ke);var Ee=new p.h(me.textures["skull.png"]);Ee._id="skull",ye.push(Ee);var Se=new p.h(me.textures["front_leg_lower.png"]);Se._id="leg 1",ye.push(Se);var Ae=new p.h(me.textures["front_leg_upper.png"]);Ae._id="limb",ye.push(Ae),re.forEach((function(e){var t=new p.h(me.textures["spine_link.png"]);ae.push(t),ye.push(t)})),de.forEach((function(e){var t=new p.h(me.textures["entrail_chunk.png"]);oe.push(t),ye.push(t)}));var Ce=new p.h(me.textures["torso_upper_gore.png"]);Ce._id="torso upper",ye.push(Ce);var Be=new p.h(me.textures["torso_lower_gore.png"]);Be._id="torso lower",ye.push(Be);var _e=new p.h(me.textures["front_arm_hand.png"]);_e._id="hand 1",ye.push(_e);var Ve=new p.h(me.textures["front_arm_forearm.png"]);Ve._id="arm 1",ye.push(Ve);var Ke=new p.h(me.textures["front_arm_upper.png"]);return Ke._id="limb",ye.push(Ke),ye.forEach((function(e){e.updateAnchor=!0,"skull"===e._id?(e.pivot.x=.55*e.width,e.pivot.y=.475*e.height):"foot 1"===e._id||"foot 2"===e._id?(e.pivot.x=.525*e.width,e.pivot.y=.5*e.height):(e.pivot.x=.5*e.width,e.pivot.y=.5*e.height),l.addChild(e)})),this.head=K,this.bodyUpper=V,this.bodyLower=_,this.armUpperL=O,this.armUpperR=F,this.armLowerL=M,this.armLowerR=T,this.legUpperL=L,this.legUpperR=D,this.legLowerL=R,this.legLowerR=z,this.handL=j,this.handR=P,this.footL=W,this.footR=I,this.destroy=function(){r.setKeyValue("player-ragdoll",null),ye.forEach((function(e){e.destroy()})),Oe.World.remove(s,o.composite)},this.animateRagParts=function(e){re.forEach((function(t,a){var o=e(t);ae[a].position=o,ae[a].rotation=o.rotation})),de.forEach((function(t,a){var o=e(t);oe[a].position=o,oe[a].rotation=o.rotation}));var t=e(o.head);Ee.position=t,Ee.rotation=t.rotation;var a=e(o.bodyUpper);Ce.position=a,Ce.rotation=a.rotation;var n=e(o.bodyLower);Be.position=n,Be.rotation=n.rotation;var i=e(o.armLowerL);Ve.position=i,Ve.rotation=i.rotation;var r=e(o.armUpperL);Ke.position=r,Ke.rotation=r.rotation;var s=e(o.handL);_e.position=s,_e.rotation=s.rotation;var l=e(o.legUpperL);Ae.position=l,Ae.rotation=l.rotation;var d=e(o.legLowerL);Se.position=d,Se.rotation=d.rotation;var p=e(o.footL);ve.position=p,ve.rotation=p.rotation;var c=e(o.armLowerR);we.position=c,we.rotation=c.rotation;var u=e(o.armUpperR);xe.position=u,xe.rotation=u.rotation;var h=e(o.handR);be.position=h,be.rotation=h.rotation;var m=e(o.legUpperR);ke.position=m,ke.rotation=m.rotation;var y=e(o.legLowerR);fe.position=y,fe.rotation=y.rotation;var g=e(o.footR);ge.position=g,ge.rotation=g.rotation},this}function nt(e,t,a){var o=this,n=e.x,i=e.y,r=window.gameObjects,s=r.getKeyValue("world"),l=r.getKeyValue("game-pixi-container"),d=40,c=55,u=25,h=15,m=15,y=30,g=15,f=50,b=15,w=20,x=10,v=7,k=10,E=14,S=Oe.Bodies.rectangle(n,i,d,c,{collisionFilter:Ge}),A=Oe.Bodies.rectangle(n,i,u,h,{}),C=Oe.Bodies.rectangle(n,i,m,y,{collisionFilter:Ue}),B=Oe.Bodies.rectangle(n,i,m,y,{collisionFilter:Ue}),_=Oe.Bodies.rectangle(n,i,b,w,{}),V=Oe.Bodies.rectangle(n,i,m,y,{}),K=Oe.Bodies.rectangle(n,i,m,y,{}),O=Oe.Bodies.rectangle(n,i,b,w,{}),F=Oe.Bodies.rectangle(n,i,g,f,{collisionFilter:Ue}),j=Oe.Bodies.rectangle(n,i,g,f,{collisionFilter:Ue}),M=Oe.Bodies.rectangle(n,i,g,f,{}),T=Oe.Bodies.rectangle(n,i,g,f,{}),P=Oe.Bodies.rectangle(n,i,k,E,{}),L=Oe.Bodies.rectangle(n,i,x,v,{}),D=Oe.Constraint.create({bodyA:S,bodyB:A,pointA:{x:0,y:-c/2},pointB:{x:0,y:h/2},length:1}),R=Oe.Constraint.create({bodyA:S,bodyB:C,pointA:{x:0,y:-c/4},pointB:{x:0,y:-y/2},length:1}),z=Oe.Constraint.create({bodyA:S,bodyB:B,pointA:{x:0,y:-c/4},pointB:{x:0,y:-y/2},length:1}),W=Oe.Constraint.create({bodyA:C,bodyB:V,pointA:{x:0,y:y/2},pointB:{x:0,y:-y/2},length:1}),I=Oe.Constraint.create({bodyA:B,bodyB:K,pointA:{x:0,y:y/2},pointB:{x:0,y:-y/2},length:1}),H=Oe.Constraint.create({bodyA:V,bodyB:_,pointA:{x:0,y:y/2},pointB:{x:0,y:-w/2},length:1}),U=Oe.Constraint.create({bodyA:K,bodyB:O,pointA:{x:0,y:y/2},pointB:{x:0,y:-w/2},length:1}),G=Oe.Constraint.create({bodyA:S,bodyB:F,pointA:{x:-d/4,y:c/2},pointB:{x:0,y:-f/2},length:2}),N=Oe.Constraint.create({bodyA:S,bodyB:j,pointA:{x:0,y:c/2},pointB:{x:0,y:-f/2},length:1}),q=Oe.Constraint.create({bodyA:F,bodyB:M,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),Y=Oe.Constraint.create({bodyA:j,bodyB:T,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:2}),X=Oe.Constraint.create({bodyA:M,bodyB:P,pointA:{x:0,y:f/2},pointB:{x:0,y:-E/2},length:1}),Z=Oe.Constraint.create({bodyA:T,bodyB:L,pointA:{x:0,y:f/2},pointB:{x:0,y:-v/2},length:1});this.composite=Oe.Composite.create(),Oe.Composite.add(this.composite,[A,S,C,B,V,K,F,j,M,T,_,O,P,L,D,H,U,X,Z,R,z,W,I,G,N,q,Y]),Oe.World.add(s,this.composite),Oe.Body.applyForce(S,S.position,t);var $=r.getKeyValue("player-parts-sheet"),J=[];console.log(a);var Q=t.x<0?{x:-.002}:{x:.002};Q.y=-.002,new tt(je.a.int(15,20),S.position,Q,5);var ee=new p.h($.textures["rear_leg_foot.png"]);ee._id="foot 2",J.push(ee);var te=new p.h($.textures["rear_leg_lower.png"]);te._id="leg 2",J.push(te);var ae=new p.h($.textures["rear_arm_hand.png"]);ae._id="hand 2",J.push(ae);var oe=new p.h($.textures["rear_arm_forearm.png"]);oe._id="arm 2",J.push(oe);var ne=new p.h($.textures["rear_arm_upper_gore.png"]);ne._id="limb",J.push(ne);var ie=new p.h($.textures["front_leg_foot.png"]);ie._id="foot 1",J.push(ie);var re=new p.h($.textures["rear_leg_upper.png"]);re._id="limb",J.push(re);var se=new p.h($.textures["skull_gore.png"]);se._id="skull",J.push(se);var le=new p.h($.textures["front_leg_lower.png"]);le._id="leg 1",J.push(le);var de=new p.h($.textures["front_leg_upper.png"]);de._id="limb",J.push(de);var pe=new p.h($.textures["torso_whole_gore.png"]);pe._id="torso",J.push(pe);var ce=new p.h($.textures["front_arm_hand.png"]);ce._id="hand 1",J.push(ce);var ue=new p.h($.textures["front_arm_forearm.png"]);ue._id="arm 1",J.push(ue);var he=new p.h($.textures["front_arm_upper_gore.png"]);return he._id="limb",J.push(he),J.forEach((function(e){e.updateAnchor=!0,"skull"===e._id?(e.pivot.x=.55*e.width,e.pivot.y=.475*e.height):"foot 1"===e._id||"foot 2"===e._id?(e.pivot.x=.525*e.width,e.pivot.y=.5*e.height):(e.pivot.x=.5*e.width,e.pivot.y=.5*e.height),l.addChild(e)})),this.head=A,this.bodyUpper=S,this.armUpperL=C,this.armUpperR=B,this.armLowerL=V,this.armLowerR=K,this.legUpperL=F,this.legUpperR=j,this.legLowerL=M,this.legLowerR=T,this.handL=_,this.handR=O,this.footL=P,this.footR=L,this.destroy=function(){r.setKeyValue("player-ragdoll",null),J.forEach((function(e){e.destroy()})),Oe.World.remove(s,o.composite)},this.animateRagParts=function(e){var t=e(o.head);se.position=t,se.rotation=t.rotation;var a=e(o.bodyUpper);pe.position=a,pe.rotation=a.rotation;var n=e(o.armLowerL);ue.position=n,ue.rotation=n.rotation;var i=e(o.armUpperL);he.position=i,he.rotation=i.rotation;var r=e(o.handL);ce.position=r,ce.rotation=r.rotation;var s=e(o.legUpperL);de.position=s,de.rotation=s.rotation;var l=e(o.legLowerL);le.position=l,le.rotation=l.rotation;var d=e(o.footL);ie.position=d,ie.rotation=d.rotation;var p=e(o.armLowerR);oe.position=p,oe.rotation=p.rotation;var c=e(o.armUpperR);ne.position=c,ne.rotation=c.rotation;var u=e(o.handR);ae.position=u,ae.rotation=u.rotation;var h=e(o.legUpperR);re.position=h,re.rotation=h.rotation;var m=e(o.legLowerR);te.position=m,te.rotation=m.rotation;var y=e(o.footR);ee.position=y,ee.rotation=y.rotation},Oe.Composite.remove(this.composite,[R,z]),Oe.Body.applyForce(this.armLowerL,this.armLowerL.position,{x:-.01,y:-.1}),Oe.Body.applyForce(this.armLowerR,this.armUpperR.position,{x:.01,y:-.1}),this}function it(e,t,a){var o=this,n=e.x,i=e.y,r=window.gameObjects,s=r.getKeyValue("world"),l=r.getKeyValue("game-pixi-container"),d=40,c=55,u=25,h=15,m=15,y=30,g=15,f=50,b=15,w=20,x=10,v=7,k=10,E=14,S=Oe.Bodies.rectangle(n,i,d,c,{collisionFilter:Ge}),A=Oe.Bodies.rectangle(n,i,u,h,{}),C=Oe.Bodies.rectangle(n,i,m,y,{collisionFilter:Ue}),B=Oe.Bodies.rectangle(n,i,m,y,{collisionFilter:Ue}),_=Oe.Bodies.rectangle(n,i,b,w,{}),V=Oe.Bodies.rectangle(n,i,m,y,{}),K=Oe.Bodies.rectangle(n,i,m,y,{}),O=Oe.Bodies.rectangle(n,i,b,w,{}),F=Oe.Bodies.rectangle(n,i,g,f,{collisionFilter:Ue}),j=Oe.Bodies.rectangle(n,i,g,f,{collisionFilter:Ue}),M=Oe.Bodies.rectangle(n,i,g,f,{}),T=Oe.Bodies.rectangle(n,i,g,f,{}),P=Oe.Bodies.rectangle(n,i,k,E,{}),L=Oe.Bodies.rectangle(n,i,x,v,{}),D=Oe.Constraint.create({bodyA:S,bodyB:A,pointA:{x:0,y:-c/2},pointB:{x:0,y:h/2},length:1}),R=Oe.Constraint.create({bodyA:S,bodyB:C,pointA:{x:0,y:-c/4},pointB:{x:0,y:-y/2},length:1}),z=Oe.Constraint.create({bodyA:S,bodyB:B,pointA:{x:0,y:-c/4},pointB:{x:0,y:-y/2},length:1}),W=Oe.Constraint.create({bodyA:C,bodyB:V,pointA:{x:0,y:y/2},pointB:{x:0,y:-y/2},length:1}),I=Oe.Constraint.create({bodyA:B,bodyB:K,pointA:{x:0,y:y/2},pointB:{x:0,y:-y/2},length:1}),H=Oe.Constraint.create({bodyA:V,bodyB:_,pointA:{x:0,y:y/2},pointB:{x:0,y:-w/2},length:1}),U=Oe.Constraint.create({bodyA:K,bodyB:O,pointA:{x:0,y:y/2},pointB:{x:0,y:-w/2},length:1}),G=Oe.Constraint.create({bodyA:S,bodyB:F,pointA:{x:-d/4,y:c/2},pointB:{x:0,y:-f/2},length:2}),N=Oe.Constraint.create({bodyA:S,bodyB:j,pointA:{x:0,y:c/2},pointB:{x:0,y:-f/2},length:1}),q=Oe.Constraint.create({bodyA:F,bodyB:M,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),Y=Oe.Constraint.create({bodyA:j,bodyB:T,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:2}),X=Oe.Constraint.create({bodyA:M,bodyB:P,pointA:{x:0,y:f/2},pointB:{x:0,y:-E/2},length:1}),Z=Oe.Constraint.create({bodyA:T,bodyB:L,pointA:{x:0,y:f/2},pointB:{x:0,y:-v/2},length:1});this.composite=Oe.Composite.create(),Oe.Composite.add(this.composite,[A,S,C,B,V,K,F,j,M,T,_,O,P,L,D,H,U,X,Z,R,z,W,I,G,N,q,Y]),Oe.World.add(s,this.composite),Oe.Body.applyForce(S,S.position,t);var $=r.getKeyValue("player-parts-sheet"),J=[];console.log(a);var Q=t.x<0?{x:-.002}:{x:.002};Q.y=-.002,new tt(je.a.int(10,15),S.position,Q,5);var ee=new p.h($.textures["rear_leg_foot.png"]);ee._id="foot 2",J.push(ee);var te=new p.h($.textures["rear_leg_lower.png"]);te._id="leg 2",J.push(te);var ae=new p.h($.textures["rear_arm_hand.png"]);ae._id="hand 2",J.push(ae);var oe=new p.h($.textures["rear_arm_forearm.png"]);oe._id="arm 2",J.push(oe);var ne=new p.h($.textures["rear_arm_upper.png"]);ne._id="limb",J.push(ne);var ie=new p.h($.textures["front_leg_foot.png"]);ie._id="foot 1",J.push(ie);var re=new p.h($.textures["rear_leg_upper.png"]);re._id="limb",J.push(re);var se=new p.h($.textures["skull.png"]);se._id="skull",J.push(se);var le=new p.h($.textures["front_leg_lower.png"]);le._id="leg 1",J.push(le);var de=new p.h($.textures["front_leg_upper.png"]);de._id="limb",J.push(de);var pe=new p.h($.textures["torso_whole_gore.png"]);pe._id="torso",J.push(pe);var ce=new p.h($.textures["front_arm_hand.png"]);ce._id="hand 1",J.push(ce);var ue=new p.h($.textures["front_arm_forearm.png"]);ue._id="arm 1",J.push(ue);var he=new p.h($.textures["front_arm_upper.png"]);return he._id="limb",J.push(he),J.forEach((function(e){e.updateAnchor=!0,"skull"===e._id?(e.pivot.x=.55*e.width,e.pivot.y=.475*e.height):"foot 1"===e._id||"foot 2"===e._id?(e.pivot.x=.525*e.width,e.pivot.y=.5*e.height):(e.pivot.x=.5*e.width,e.pivot.y=.5*e.height),l.addChild(e)})),this.head=A,this.bodyUpper=S,this.armUpperL=C,this.armUpperR=B,this.armLowerL=V,this.armLowerR=K,this.legUpperL=F,this.legUpperR=j,this.legLowerL=M,this.legLowerR=T,this.handL=_,this.handR=O,this.footL=P,this.footR=L,this.destroy=function(){r.setKeyValue("player-ragdoll",null),J.forEach((function(e){e.destroy()})),Oe.World.remove(s,o.composite)},this.animateRagParts=function(e){var t=e(o.head);se.position=t,se.rotation=t.rotation;var a=e(o.bodyUpper);pe.position=a,pe.rotation=a.rotation;var n=e(o.armLowerL);ue.position=n,ue.rotation=n.rotation;var i=e(o.armUpperL);he.position=i,he.rotation=i.rotation;var r=e(o.handL);ce.position=r,ce.rotation=r.rotation;var s=e(o.legUpperL);de.position=s,de.rotation=s.rotation;var l=e(o.legLowerL);le.position=l,le.rotation=l.rotation;var d=e(o.footL);ie.position=d,ie.rotation=d.rotation;var p=e(o.armLowerR);oe.position=p,oe.rotation=p.rotation;var c=e(o.armUpperR);ne.position=c,ne.rotation=c.rotation;var u=e(o.handR);ae.position=u,ae.rotation=u.rotation;var h=e(o.legUpperR);re.position=h,re.rotation=h.rotation;var m=e(o.legLowerR);te.position=m,te.rotation=m.rotation;var y=e(o.footR);ee.position=y,ee.rotation=y.rotation},this}var rt=window.TweenLite.set;function st(e,t,a,o){var n=window.gameObjects,i=n.getKeyValue("world"),r=n.getKeyValue("game-pixi-container"),s=null,l=n.getKeyValue("blood-spurt-1"),d=new p.a(l.animations.blood_spurt_1),c=n.getKeyValue("blood-spurt-2"),u=new p.a(c.animations.blood_spurt_2),h=n.getKeyValue("blood-spurt-3"),m=new p.a(h.animations.blood_spurt_3),y=["blood spurt type 1","blood spurt type 2","blood spurt type 3"],g=y[Math.floor(Math.random()*y.length)];return e||(e=g),(s="blood spurt type 1"===e?d:"blood spurt type 2"===e?u:m).onComplete=function(){s.destroy(),o&&Oe.World.remove(i,o),i=null,r=null,n=null,s=null,d=null,l=null,u=null,c=null,m=null,h=null,y=null,g=null},s.animationSpeed=.5,s.pivot.x=.5*s.width,s.pivot.y=.5*s.height,rt(s.scale,a?{x:a,y:a}:{x:.5,y:.5}),s.position=t,s.loop=!1,s.updateAnchor=!0,s.play(),r.addChild(s),s}var lt="fell off of ledge",dt=Ke.getState;function pt(e){var t=this,a=window,o=a.gameObjects,n=a.TweenLite,i=n.to,r=n.delayedCall,s=o.getKeyValue("world"),l=o.getKeyValue("rocks"),d=o.getKeyValue("game-pixi-container"),c=o.getKeyValue("explosion-assets-sheet"),u=["rock-piece1.png","rock-piece2.png","rock-piece3.png"],h=new p.h(c.textures[u[Math.floor(Math.random()*u.length)]]),m=function(){return je.a.float(.45,.65)};h.pivot.x=.48*h.width,h.pivot.y=.48*h.height,h.scale.x=m(),h.scale.y=m(),d.addChild(h);var y=Oe.Bodies.rectangle(e.x,e.y-50,10,10,{restitution:.25,collisionFilter:{category:2,mask:1}});return Oe.Body.applyForce(y,y.position,{x:je.a.float(-.005,.005),y:je.a.float(-.001,-.0025)}),Oe.World.add(s,y),this.animate=function(e){var t=e(y),a=t.x,o=t.y;h.position={x:a,y:o}},this.destroy=function(){var e=l.indexOf(t);Oe.World.remove(s,y),d.removeChild(h),e>-1&&l.splice(e,1),s=null,l=null,d=null,y=null,h=null,o=null},r(dt().game.lastWaveCountDefeated&&dt().game.lastWaveCountDefeated<10?4:1,(function(){i(h,.5,{alpha:0,onComplete:function(){t.destroy()}})})),this}var ct=a(15),ut=function(){function e(t){var a=this;Object(We.a)(this,e),this.gameObjects=window.gameObjects;var o=window.TweenLite,n=o.to,i=o.delayedCall,r=this.gameObjects.getKeyValue("game-pixi-container"),s=this.gameObjects.getKeyValue("world");this.woodPlanksSheet=this.gameObjects.getKeyValue("wood-planks-sheet"),this.woodPlanks=this.gameObjects.getKeyValue("wood-planks"),this.plankRange=["000.png","001.png","002.png"];var l=t.x,d=t.y;return this.gfc=this.getPlank(),this.gfc.width=50,this.gfc.height=15,this.gfcContainer=new p.e,this.gfcContainer.addChild(this.gfc),this.gfcContainer.pivot.x=.5*this.gfcContainer.width,this.gfcContainer.pivot.y=.5*this.gfcContainer.height,this.body=new Oe.Bodies.rectangle(l,d,50,15,{collisionFilter:Ue}),this.body.torque=je.a.float(-.5,.5),Oe.Body.applyForce(this.body,this.body.position,{x:je.a.float(-.02,.02),y:je.a.float(-.01,-.02)}),Oe.World.add(s,this.body),r.addChild(this.gfcContainer),this.destroy=function(){var e=a.woodPlanks.indexOf(a);Oe.World.remove(s,a.body),r.removeChild(a.gfcContainer),e>-1&&a.woodPlanks.splice(e,1),s=null,r=null,a.gameObjects=null,a.woodPlanks=null,a.gfc=null},i(4,(function(){n(a.gfcContainer,2,{alpha:0,onComplete:function(){a.destroy()}})})),this}return Object(ct.a)(e,[{key:"animate",value:function(e){var t=e(this.body),a=t.x,o=t.y,n=t.rotation;this.gfcContainer.position={x:a,y:o},this.gfcContainer.rotation=n}},{key:"getPlank",value:function(){return new p.h(this.woodPlanksSheet.textures[this.plankRange[Math.floor(Math.random()*this.plankRange.length)]])}}]),e}(),ht=(a(67),a(38)),mt=a(42),yt=a(24),gt=function(){function e(t,a){var o=this;Object(We.a)(this,e),this.gameObjects=window.gameObjects;var n=window.TweenLite.to;this.container=this.gameObjects.getKeyValue("game-pixi-container");var i=this.gameObjects.getKeyValue("explosion3d1-sheet"),r=this.gameObjects.getKeyValue("explosion3d2-sheet");this.explosion1=new p.a(i.animations.explosion3d),this.explosion2=new p.a(r.animations.explosion3d),this.explosions=[this.explosion1,this.explosion2],this.explosions.forEach((function(e){e.pivot.x=.5*e.width,e.pivot.y=.5*e.height,e.loop=!1,e.onComplete=function(){o.container.removeChild(e),o.container=null,o.gameObjects=null,i=null,r=null,o.explosions=null}})),1===t&&(this.explosion=this.explosion1,this.explosion.animationSpeed=1),2===t&&(this.explosion=this.explosion2,this.explosion.animationSpeed=1),this.renderBody=a;var s=new ht.a;s.brightness=20,s.saturation=3;var l=new mt.a;l.blur=.5;var d=new yt.a({outerStrength:3});this.filters=Ke.getState().game.filterEffects?[s,l,d]:[],this.explosion.filters=this.filters,n(this.explosion,.35,{alpha:0}),n(s,.5,{brightness:1,saturation:1.5,onUpdate:function(){Ke.getState().game.filterEffects&&(o.explosion.filters=o.filters)}}),this.explosion.play()}return Object(ct.a)(e,[{key:"renderPosition",value:function(e){this.renderBody&&(this.explosion.position=e(this.renderBody),this.container&&-1===this.container.children.indexOf(this.explosion)&&this.container.addChild(this.explosion))}}]),e}(),ft=a(12);function bt(e,t,a){var o=this,n=window,i=n.gameObjects,r=n.TweenLite.to,s=window.gameObjects.getKeyValue("explosion1"),l=new ft.Howl({src:[s]}),d=window.gameObjects.getKeyValue("distant-explosion"),c=new ft.Howl({src:[d]}),u=i.getKeyValue("world"),h=i.getKeyValue("rocks"),m=i.getKeyValue("game-pixi-container"),y=i.getKeyValue("explosions"),g=i.getKeyValue("explosion-assets-sheet"),f=["smoke1.png","smoke2.png","smoke3.png","smoke4.png"],b=Oe.Bodies.rectangle(e.x,e.y,20,20,{restitution:0,collisionFilter:Ue,isStatic:!0});Oe.World.add(u,b),this.calcRenderedPosition=function(e){var t=e(b),a=t.x,n=t.y;o.calculatedPosition={x:a,y:n}},y.push(this);for(var w=je.a.int(5,10),x=function(e){var t=new p.h(g.textures[f[Math.floor(Math.random()*f.length)]]);t.pivot.x=.5*t.width,t.pivot.y=.5*t.height;r(t,2,{onStart:function(){m.addChild(t)},alpha:0,onComplete:function(){if(e===w-1){Oe.World.remove(u,b);var t=y.indexOf(o);t>-1&&y.splice(t,1),u=null,y=null,g=null,f=null}}});var a=je.a.int(1,2);r(t.scale,.5,{x:a,y:a});var n={x:0,y:0};r(n,.5,{x:je.a.int(-100,100),y:je.a.int(-50,50)}),r(t.position,2,{onUpdate:function(){o.calculatedPosition&&(t.position.x=o.calculatedPosition.x+n.x,t.position.y=o.calculatedPosition.y+n.y)},onComplete:function(){t.destroy(),m=null,i=null}})},v=0;v<w;++v)x(v);var k=i.getKeyValue("wood-planks");if(e.y>300||t){for(var E=0;E<je.a.int(4,7);++E)a&&a.showWood?k.push(new ut(e)):h.push(new pt(e));k=null,h=null}if(!a||a.showExplosionSprite){var S=i.getKeyValue("explosion-sprites");l.seek(.5),l.play(),c.play(),S.push(new gt(je.a.int(1,2),b)),S=null}}function wt(e,t,a){var o=this,n=Ke.getState,i=window,r=i.gameObjects,s=i.TweenLite.delayedCall,l=r.getKeyValue("barriers-sheet"),d=r.getKeyValue("game-pixi-container"),c=r.getKeyValue("world"),u=r.getKeyValue("build-objects"),h=t.width,m=t.height,y=new p.h(l.textures["woodenBarrier.png"]),g=new p.h(l.textures["stoneBarrier.png"]),f=new p.h(l.textures["metalBarrier.png"]),b=Pe("explosive-barrel");this.types={WOOD:"Wooden",STONE:"Stone",METAL:"Metal",EXPLOSIVE:"Explosive Barrel"};var w,x=e.x,v=e.y,k=Oe.Bodies.rectangle(x,v,h,m,{inertia:1/0,label:a===this.types.EXPLOSIVE?"explosive barrier":"barrier"}),E=r.getKeyValue("ground"),S=Oe.Constraint.create({bodyA:E,bodyB:k,pointA:{x:-Le(E)/2+e.x,y:-De(E)/2},pointB:{x:0,y:De(k)/2},length:0});if(a)switch(a){case this.types.WOOD:k.strength=n().game.player.perks.barrierPlus.owned?300:100;break;case this.types.STONE:k.strength=n().game.player.perks.barrierPlus.owned?500:250;break;case this.types.METAL:k.strength=n().game.player.perks.barrierPlus.owned?800:400;break;case this.types.EXPLOSIVE:k.strength=n().game.player.perks.barrierPlus.owned?200:100;break;default:k.strength=n().game.player.perks.barrierPlus.owned?300:100}k.main=this,this.destroyed=!1,this.getBody=function(){return k},Oe.World.add(c,[S,k]);var A=new p.i(k.strength,{fill:"#ffffff",fontSize:12});if(A.pivot.x=.5*A.width,A.pivot.y=.5*A.height,a)switch(a){case this.types.WOOD:w=y;break;case this.types.STONE:w=g;break;case this.types.METAL:w=f;break;case this.types.EXPLOSIVE:w=b}w.width=h,w.height=m;var C=new p.e;return C.addChild(w),C.pivot.x=.5*C.width,C.pivot.y=.5*C.height,d.addChild(C),d.addChild(A),r.getKeyValue("player").sprites.forEach((function(e){d.addChild(e)})),this.takeDamage=function(e){k.strength-=e,A.text=k.strength},this.displayBarrierStrength=function(e){A.position=e(k),w.position=e(k)},k.removeSelf=function(){if(o.destroyed=!0,new bt(k.position,!0,{showWood:a===o.types.WOOD,showExplosionSprite:a===o.types.EXPLOSIVE}),a===o.types.EXPLOSIVE){var e=k.position,t=e.x,n=e.y,i=Oe.Bodies.rectangle(t,n,400,300);i.label="barrel explosion",Oe.World.add(c,i),s(2,(function(){i&&Oe.World.remove(c,i)})),i.removeSelf=function(){Oe.World.remove(c,i)}}Oe.World.remove(c,[S,k]),d.removeChild(A),d.removeChild(C);var r=u.indexOf(o);r>-1&&u.splice(r,1)},this}var xt=function(){function e(t){var a=this;Object(We.a)(this,e);var o=t.x,n=t.y,i=window.gameObjects;this.world=i.getKeyValue("world"),this.container=i.getKeyValue("game-pixi-container"),this.landmines=i.getKeyValue("build-objects");var r=i.getKeyValue("landmine-sheet");this.body=Oe.Bodies.rectangle(o,n,100,5),this.body.label="landmine trap",this.body.destroy=function(){a.destroy()};var s=i.getKeyValue("ground");return this.constraint=Oe.Constraint.create({bodyA:s,bodyB:this.body,pointA:{x:-Le(s)/2+t.x,y:-De(s)/2},pointB:{x:0,y:De(this.body)/2},length:0}),Oe.World.add(this.world,[this.body,this.constraint]),this.gfc=new p.a(r.animations.landmine),this.gfc.updateAnchor=!0,this.gfc.loop=!0,this.gfc.animationSpeed=.75,this.gfc.play(),this.gfc.width=100,this.gfc.height=100,this.gfcContainer=new p.e,this.gfcContainer.addChild(this.gfc),this.gfcContainer.pivot.x=0,this.gfcContainer.pivot.y=0,this.container.addChild(this.gfcContainer),console.log(this.gfcContainer.position),this.destroyed=!1,this}return Object(ct.a)(e,[{key:"getBody",value:function(){return this.body}},{key:"updatePosition",value:function(e){var t=e(this.body),a=t.x,o=t.y;this.gfcContainer.position={x:a,y:o}}},{key:"destroy",value:function(){var e=this;new bt(this.body.position,!0);var t=window.TweenLite.delayedCall,a=this.body.position,o=a.x,n=a.y;if(this.hitbox=Oe.Bodies.rectangle(o,n,500,300),this.hitbox.label="landmine explosion",this.hitbox.removeSelf=function(){Oe.World.remove(e.world,e.hitbox)},Oe.World.add(this.world,this.hitbox),t(.1,(function(){e.hitbox.removeSelf()})),!this.destroyed){this.destroyed=!0,Oe.World.remove(this.world,[this.body,this.constraint]),this.container.removeChild(this.gfcContainer);var i=this.landmines.indexOf(this);i>-1&&this.landmines.splice(i,1)}}}]),e}(),vt=a(19),kt=a(37),Et=a(33);function St(e,t,a,o,n){var i=this,r=Ke.getState,s=window,l=s.gameObjects,d=s.TweenLite,c=d.delayedCall,u=d.from,h=l.getKeyValue("world"),m=l.getKeyValue("game-pixi-container"),y=l.getKeyValue("grenades"),g=Oe.Bodies.circle(e,t,a,{restitution:.8,collisionFilter:{category:3}});g.label="grenade",g.main=this,Oe.World.add(h,g),Oe.Body.applyForce(g,g.position,o),g.torque=.01;var f=new p.f;f.beginFill(2049836),f.drawCircle(0,0,a);var b=new vt.a;b.shadowAlpha=.45,b.lightAlpha=.35,b.thickness=5,b.shadowColor=0,b.lightColor=2133060;var w=new kt.a;w.noise=.1,w.seed=.5,f.filters=Ke.getState().game.filterEffects?[b,w]:[];var x=new Et.a({velocity:{x:0,y:0}});u(x.velocity,.75,{x:100,y:10}),m.addChild(f),this.animate=function(e){if(g&&f){var t=e(g),a=t.x,o=t.y,n=t.rotation;f.position.x=a,f.position.y=o,f.rotation=n,b.rotation=Object(Ie.radians)(n),f.filters=Ke.getState().game.filterEffects?[b,w,x]:[]}},c(n||r().game.player.weapons.grenadeFuseTime.default,(function(){i.exploded||i.explode()})),this.exploded=!1,this.explode=function(e){i.exploded=!0,new bt(g.position,e||null);var t=r().game.player.weapons.grenadeExplosionSize;i.explosionHitbox=Oe.Bodies.rectangle(g.position.x,g.position.y,t,t,{}),i.explosionHitbox.label="grenade explosion",Oe.World.remove(h,g),Oe.World.add(h,i.explosionHitbox),m.removeChild(f),c(.01,(function(){i.destroy()}))},this.destroy=function(){Oe.World.remove(h,i.explosionHitbox);var e=y.indexOf(i);e>-1&&y.splice(e,1)}}var At=function(){function e(t){var a=this;Object(We.a)(this,e);var o=t.x,n=t.y,i=window.gameObjects;this.world=i.getKeyValue("world"),this.container=i.getKeyValue("game-pixi-container"),this.landmines=i.getKeyValue("build-objects");var r=i.getKeyValue("clustermine-sheet");this.body=Oe.Bodies.rectangle(o,n,100,5),this.body.label="clustermine trap",this.body.destroy=function(){a.destroy()};var s=i.getKeyValue("ground");return this.constraint=Oe.Constraint.create({bodyA:s,bodyB:this.body,pointA:{x:-Le(s)/2+t.x,y:-De(s)/2},pointB:{x:0,y:De(this.body)/2},length:0}),Oe.World.add(this.world,[this.body,this.constraint]),this.gfc=new p.a(r.animations.clustermine),this.gfc.updateAnchor=!0,this.gfc.loop=!0,this.gfc.animationSpeed=.75,this.gfc.play(),this.gfc.width=100,this.gfc.height=100,this.gfcContainer=new p.e,this.gfcContainer.addChild(this.gfc),this.gfcContainer.pivot.x=0,this.gfcContainer.pivot.y=0,this.container.addChild(this.gfcContainer),console.log(this.gfcContainer.position),this.destroyed=!1,this}return Object(ct.a)(e,[{key:"getBody",value:function(){return this.body}},{key:"updatePosition",value:function(e){var t=e(this.body),a=t.x,o=t.y;this.gfcContainer.position={x:a,y:o}}},{key:"destroy",value:function(){var e=this,t=window.TweenLite.delayedCall,a=window.gameObjects.getKeyValue("grenades");t(.25,(function(){for(var o=Ke.getState,n=o().game.player.perks.cluck.owned?8:4,i=o().game.player.perks.cluck.owned?je.a.float(-.02,.02):je.a.float(-.01,.01),r=o().game.player.perks.cluck?je.a.float(-.025,-.075):je.a.float(-.01,-.05),s=0;s<n;++s)t(.1*s,(function(){var t=new St(e.body.position.x,e.body.position.y-50,10,{x:i,y:r},4);a.push(t)}))})),new bt(this.body.position,!0);var o=this.body.position,n=o.x,i=o.y;if(this.hitbox=Oe.Bodies.rectangle(n,i,500,300),this.hitbox.label="clustermine explosion",this.hitbox.removeSelf=function(){Oe.World.remove(e.world,e.hitbox)},Oe.World.add(this.world,this.hitbox),t(.1,(function(){e.hitbox.removeSelf()})),!this.destroyed){this.destroyed=!0,Oe.World.remove(this.world,[this.body,this.constraint]),this.container.removeChild(this.gfcContainer);var r=this.landmines.indexOf(this);r>-1&&this.landmines.splice(r,1)}}}]),e}(),Ct={WOOD:"Wooden",STONE:"Stone",METAL:"Metal",EXPLOSIVE:"Explosive Barrel"},Bt={LANDMINE:"Landmine",CLUSTER_BOMB:"Cluster Bomb",REMOTE_MINE:"Remote Mine",TURRET:"Machine Gun Turret"},_t=function(){function e(t,a){var o=this;Object(We.a)(this,e);var n=t.x,i=t.y,r=window.gameObjects;this.world=r.getKeyValue("world"),this.container=r.getKeyValue("game-pixi-container"),this.buildObjects=r.getKeyValue("build-objects"),this.remoteMines=r.getKeyValue("remote-mines"),this.remoteMinesArr=r.getKeyValue("remote-mines-array");var s=r.getKeyValue("remote-mine-sheet");this.body=Oe.Bodies.rectangle(n,i,100,5,{collisionFilter:Ue}),this.body.label="remote mine trap",this.body.destroy=function(){o.destroy()};var l=r.getKeyValue("ground");this.constraint=Oe.Constraint.create({bodyA:l,bodyB:this.body,pointA:{x:-Le(l)/2+t.x,y:-De(l)/2},pointB:{x:0,y:De(this.body)/2},length:0}),Oe.World.add(this.world,[this.body,this.constraint]),this.gfc=new p.a(s.animations["remote-mine"]),this.gfc.updateAnchor=!0,this.gfc.loop=!0,this.gfc.animationSpeed=.75,this.gfc.play(),this.gfc.width=100,this.gfc.height=100,this.gfcContainer=new p.e,this.gfcContainer.addChild(this.gfc),this.gfcContainer.pivot.x=0,this.gfcContainer.pivot.y=0,this.container.addChild(this.gfcContainer),console.log(this.gfcContainer.position);return this.num=new p.i("[ ".concat(a," ]: detonate"),{fill:"#00FFFF",fontSize:12}),this.num.pivot.x=.5*this.num.width,this.num.pivot.y=.5*this.num.height,this.container.addChild(this.num),this.destroyed=!1,this}return Object(ct.a)(e,[{key:"getBody",value:function(){return this.body}},{key:"updatePosition",value:function(e){var t=e(this.body),a=t.x,o=t.y;this.gfcContainer.position={x:a,y:o},this.num.position={x:a,y:o-50}}},{key:"detonate",value:function(){this.destroy()}},{key:"updateNumber",value:function(e){this.num.text="[ ".concat(e," ]: detonate")}},{key:"destroy",value:function(){var e=this,t=window.TweenLite.delayedCall;new bt(this.body.position,!0);var a=this.body.position,o=a.x,n=a.y;if(this.hitbox=Oe.Bodies.rectangle(o,n,500,300),this.hitbox.label="landmine explosion",this.hitbox.removeSelf=function(){Oe.World.remove(e.world,e.hitbox)},Oe.World.add(this.world,this.hitbox),t(.1,(function(){e.hitbox.removeSelf()})),!this.destroyed){this.destroyed=!0,Oe.World.remove(this.world,[this.body,this.constraint]),this.container.removeChild(this.gfcContainer),this.container.removeChild(this.num);var i=this.buildObjects.indexOf(this);i>-1&&this.buildObjects.splice(i,1),this.remoteMinesArr.indexOf(this)>-1&&this.remoteMinesArr.splice(i,1)}}}]),e}(),Vt=Ke.getState,Kt=Ke.dispatch,Ot=function(e){var t=Vt().game.player.weapons.damage["pistol weapon"],a=t.min,o=t.max;return e.label.indexOf("body")>-1?{part:"torso",dmg:a}:e.label.indexOf("head")>-1?{part:"head",dmg:o}:void 0};function Ft(e,t,a){var o=this,n=t.x,i=t.y,r=window,s=r.gameObjects,l=r.TweenLite,d=l.to,c=l.set,u=(l.from,s.getKeyValue("world")),h=s.getKeyValue("game-pixi-container"),m=Oe.Bodies.rectangle(n,i,10,10,{isStatic:!0,collisionFilter:Ue});Oe.World.add(u,m);for(var y=s.getKeyValue("explosion-assets-sheet"),g=["smoke1.png","smoke2.png","smoke3.png","smoke4.png"],f=function(t){var n=new p.h(y.textures[g[Math.floor(Math.random()*g.length)]]);"enemy"===e&&(n.tint=16711680),n.pivot.x=.5*n.width,n.pivot.y=.5*n.height,d(n,a&&a.alphaDuration?a.alphaDuration:.5,{alpha:0,onComplete:function(){1===t&&(Oe.World.remove(u,m),u=null)}});var i=void 0;i=a&&a.rand&&a.rand.min&&a.rand.max?je.a.float(a.rand.min,a.rand.max):je.a.float(.25,.5),c(n.scale,{x:a&&a.set?a.set:.1,y:a&&a.set?a.set:.1}),d(n.scale,a&&a.duration?a.duration:.25,{x:i,y:i});var r={x:0,y:0};d(r,a&&a.duration?a.duration:.25,{x:"enemy"===e?je.a.int(-20,20):je.a.int(-10,10),y:"enemy"===e?je.a.int(-20,20):je.a.int(-50,0)}),d(n.position,3,{onUpdate:function(){o.calculatedPosition&&(n.position.x=o.calculatedPosition.x+r.x,n.position.y=o.calculatedPosition.y+r.y,h&&h.children.indexOf(n)<0&&h.addChild(n))},onComplete:function(){n.destroy(),h=null,s=null}})},b=0;b<2;++b)f(b);return this.renderPosition=function(e){o.calculatedPosition=e(m)},this}function jt(e,t,a,o,n){var i,r,s,l=Vt().game,d=l.mouseState,c=l.player.weapons,u=c.equipped,h=c.shellEjectionForce,m=c.shellRemovalTimeout;r||(r=a.getKeyValue("game-pixi-container")),i||(i=a.getKeyValue("world")),s||(s=a.getKeyValue("pistol-shells")),this.body=n&&n.body?n.body:Oe.Bodies.rectangle("greater than player y position"===d.y||"less than player y position"===d.y?e:d.x===He?e+30:e-30,"less than player y position"===d.y?t-40:t-20,7,4,{restitution:.75,collisionFilter:Ue}),this.body.label=void 0!==o?"player ".concat(o," shell"):"player pistol shell","shotgun weapon"===u&&(this.body.label="shotgun shell"),Oe.World.add(i,this.body),Oe.Body.applyForce(this.body,this.body.position,n&&n.force?n.force:{x:d.x===He?je.a.float(-h[u].min,-h[u].max):je.a.float(h[u].min,h[u].max),y:je.a.float(-h[u].min,-h[u].max)}),Oe.Body.setAngularVelocity(this.body,je.a.float(-.5,-1)),this.gfc=new p.f,this.gfc.beginFill("shotgun weapon"===u?11534336:11244318);var y=Le(this.body),g=De(this.body);"shotgun weapon"===u?this.gfc.drawRect(0,0,g,y+1):"smg weapon"===u?this.gfc.drawRect(0,0,g,y+2):this.gfc.drawRect(0,0,y,g),this.gfc.endFill(),"shotgun weapon"===u&&(this.gfc.beginFill(13416013),this.gfc.drawRect(0,y+1,g,3)),window.gameObjects.getKeyValue("bullet-shell-bevel")||window.gameObjects.setKeyValue("bullet-shell-bevel",new vt.a({lightAlpha:.5,shadowAlpha:.5}));var f=[window.gameObjects.getKeyValue("bullet-shell-bevel")];return this.gfc.filters=Vt().game.filterEffects?f:[],this.gfc.pivot.x=this.gfc.width/2,this.gfc.pivot.y=this.gfc.height/2,r.addChild(this.gfc),s.push(this),this.destroy=function(){r.removeChild(this.gfc),Oe.World.remove(i,this.body),this.body=null,this.gfc=null,s.splice(s.indexOf(this),1),i=null,r=null,a=null,s=null},setTimeout(this.destroy.bind(this),m[u]),this}function Mt(e,t,a,o,n,i){var r,s,l,d,c;l=Re("arm",a);var u=Vt().game,h=u.mouseRelativeToPlayerPosition,m=u.mouseState;return s||(s=a.getKeyValue("game-pixi-container")),r||(r=a.getKeyValue("world")),d||(d=a.getKeyValue("pistol-bullets")),this.body=n&&n.overrideBody?n.overrideBody:Oe.Bodies.circle("greater than player y position"===m.y||"less than player y position"===m.y?e:m.x===He?e+50:e-50,t,4,{restitution:.3}),this.body.label=i?"extra damage bullet":void 0!==o&&null!==o?"player ".concat(o," bullet"):"player pistol bullet",this.body.main=this,Oe.World.add(r,this.body),Oe.Body.setAngle(this.body,n&&n.overrideAngle?n.overrideAngle:Oe.Vector.angle(this.body.position,h)),Oe.Body.applyForce(this.body,this.body.position,n&&n.overrideForce?n.overrideForce:function(e,t){var a=Me().game.player.weapons,o=a.bulletVariance,n=a.equipped,i=a.bulletForce,r=Oe.Vector.angle(e,t);return{x:Math.cos(r)*i[n],y:Math.sin(r)*i[n]+je.a.float(-o[n],o[n])}}(l.position,h)),this.gfc=new p.f,this.gfc.beginFill(16777215),c||(c=Le(this.body)),this.gfc.drawRect(0,0,c,c/3),this.gfc.endFill(),this.gfc.pivot.x=this.gfc.width/2,this.gfc.pivot.y=this.gfc.height/2,s.addChild(this.gfc),d.push(this),this.addImpactEffect=function(e,t){var o=a.getKeyValue("bullet-impacts"),n=new Ft(e,t);o.push(n)},this.destroyed=!1,this.destroy=function(e){if(!this.destroyed){var t=this.body.position;this.destroyed=!0,s.removeChild(this.gfc),s.removeChild(this.bulletTrail),Oe.World.remove(r,this.body),this.linePoints=null,this.body=null,this.gfc=null,d.indexOf(this)>-1&&d.splice(d.indexOf(this),1),e&&this.addImpactEffect(e,t),r=null,s=null,a=null}},setTimeout(this.destroy.bind(this),500),this}var Tt=function(e){var t,a,o,n,i,r,s;t||(t=e.getKeyValue("world")),a||(a=e.getKeyValue("weapons-ui")),o||(o=e.getKeyValue("player"));var l=Vt().game.player.weapons,d=l.lastShot,p=l.totalAmmo,c=l.equipped,u=l.shotLimiter;if(JSON.parse(d[c])+u[c]<Date.now()&&!a.checkEmpty(c)&&!a.reloading&&p[c]>0){Kt(X(c,JSON.stringify(Date.now()))),a.fireBullet(c),o.fireWeaponAnimation(),n||(n=ze(e)),i||(i=Le(n)),r||(r=De(n)),s||(s=Re("arm",e));var h=!(!a.lastBulletByWepType[c]||!Vt().game.player.perks.lastBullet.owned);if("shotgun weapon"===c?new jt(0,0,e,null,{body:Oe.Bodies.rectangle(n.position.x,s.position.y,10,4,{collisionFilter:Ue})}):new jt(n.position.x,s.position.y,e,"pistol weapon"!==c?c.split(" ")[0]:void 0),"shotgun weapon"===c)for(var m=0;m<10;++m)new Mt(s.position.x,s.position.y,e,"shotgun",h);else new Mt(s.position.x,s.position.y,e,"pistol weapon"!==c?c.split(" ")[0]:void 0,null,h);t=null,a=null,o=null,n=null,i=null,r=null,s=null}else 0===p[c]&&!1===Vt().game.showingMessage?a.shaking||(a.changeTextForEmptyShake("EMPTY"),a.emptyMagShake()):a.checkEmpty(c)&&!1===Vt().game.showingMessage&&(a.reloading||a.shaking||(a.changeTextForEmptyShake("RELOAD"),a.emptyMagShake()))},Pt=function(){function e(){var t=this;Object(We.a)(this,e);var a=window.gameObjects;this.to=window.TweenLite.to,this.set=window.TweenLite.set;var o=a.getKeyValue("game-pixi-container");this.container=o;var n=a.getKeyValue("muzzle-flashes-sheet"),i=new p.h(n.textures["muzzle-flash1.png"]),r=new p.h(n.textures["muzzle-flash2.png"]),s=new p.h(n.textures["muzzle-flash3.png"]),l=new p.h(n.textures["muzzle-flash4.png"]),d=new p.h(n.textures["muzzle-flash5.png"]),c=[i,r,s,l,d];o.addChild(i),o.addChild(r),o.addChild(s),o.addChild(l),o.addChild(d),i.visible=!1,r.visible=!1,s.visible=!1,l.visible=!1,d.visible=!1,this.muzzleScale=.65,this.blurFilter=new p.k.BlurFilter,this.blurFilter.blur=this.getRandomBlur(),this.blurFilter.quality=5,this.glowFilter=new yt.a,this.glowFilter.innerStrength=.1,this.glowFilter.outerStrength=je.a.float(1,1.5),this.adjustmentFilter=new ht.a,this.adjustmentFilter.brightness=2,this.adjustmentFilter.saturation=2,this.flashes=[],c.forEach((function(e){e.updateAnchor=!0,e.scale={x:t.muzzleScale,y:t.muzzleScale},e.filters=Ke.getState().game.filterEffects?[t.blurFilter,t.adjustmentFilter,t.glowFilter]:[],t.flashes.push(e)}))}return Object(ct.a)(e,[{key:"fireEffect",value:function(e){var t=Ke.getState().game.player.weapons.equipped,a=Ke.getState().game.player.modTiers.powder[t].current,o=this.getRandomFlash();o.visible=!0,e&&(o.position=e),Ke.getState().game.filterEffects&&(this.adjustmentFilter.saturation=1===a?1:2===a?2:3===a?3:4===a?5:1,this.glowFilter.color=1===a?16774400:2===a?16765184:3===a?16739584:4===a?16726016:16777215),o.filters=Ke.getState().game.filterEffects?[this.glowFilter,this.adjustmentFilter,this.blurFilter]:[],this.container.addChild(o),this.set(o,{alpha:1}),this.set(o.scale,{x:this.muzzleScale}),this.to(o,.1,{alpha:0}),this.to(o.scale,.1,{x:2*this.muzzleScale,onComplete:function(){o.visible=!1}})}},{key:"setMuzzleRotations",value:function(e){this.flashes.forEach((function(t){t.rotation=e})),this.rotation=e}},{key:"getRandomBlur",value:function(){return je.a.float(.5,4)}},{key:"changeBlurAmount",value:function(){this.blurFilter.blur=this.getRandomBlur()}},{key:"getFlashes",value:function(){return this.flashes}},{key:"getRandomFlash",value:function(){return this.flashes[Math.floor(Math.random()*this.flashes.length)]}},{key:"muzzleScale",get:function(){return this._muzzleScale},set:function(e){this._muzzleScale=e}}]),e}(),Lt=function(){function e(t){var a=this;Object(We.a)(this,e);var o=t.x,n=t.y;this.delayedCall=window.TweenLite.delayedCall,this.gameObjects=window.gameObjects,this.world=this.gameObjects.getKeyValue("world"),this.buildObjects=this.gameObjects.getKeyValue("build-objects"),this.container=this.gameObjects.getKeyValue("game-pixi-container"),this.scanAnim=new p.a(this.gameObjects.getKeyValue("turret-scan-sheet").animations.turretScan),this.scanAnim.visible=!0,this.scanAnim.loop=!0,this.scanAnim.play(),this.shootAnim=new p.a(this.gameObjects.getKeyValue("turret-shoot-sheet").animations.turretShoot),this.shootAnim.loop=!1,this.shootAnim.onFrameChange=function(){},this.shootAnim.onComplete=function(){a.shootAnim.gotoAndStop(0),a.scanAnim.play(),a.scanAnim.visible=!0,a.shootAnim.visible=!1},this.shootAnim.visible=!1,this.scanAnim.width=150,this.scanAnim.height=150,this.scanAnim.pivot.x=.5*this.scanAnim.width,this.scanAnim.pivot.y=this.scanAnim.height,this.shootAnim.width=150,this.shootAnim.height=150,this.shootAnim.pivot.x=.5*this.shootAnim.width,this.shootAnim.pivot.y=this.shootAnim.height,this.turret=new p.e,this.turret.addChild(this.scanAnim,this.shootAnim),this.container.addChild(this.turret),this.turret.children.forEach((function(e){})),this.body=Oe.Bodies.rectangle(o,n,50,50,{label:"turret barrier",main:this}),this.body.removeSelf=function(){a.destroy()};var i=this.gameObjects.getKeyValue("ground");this.constraint=Oe.Constraint.create({bodyA:i,bodyB:this.body,pointA:{x:-Le(i)/2+t.x,y:-De(i)/2},pointB:{x:0,y:De(this.body)/2},length:0}),Oe.World.add(this.world,[this.body,this.constraint]),this.body.strength=250,this.healthDisplay=new p.i("health: ".concat(this.body.strength),{fontSize:12,fill:16777215}),this.healthDisplay.pivot.x=.5*this.healthDisplay.width,this.container.addChild(this.healthDisplay),this.direction="right";var r=this.gameObjects.getKeyValue("player");return r.dead||r.sprites.forEach((function(e){a.container.addChild(e)})),this.destroyed=!1,this}return Object(ct.a)(e,[{key:"takeDamage",value:function(e){this.body.strength-=e,this.healthDisplay.text="health: ".concat(this.body.strength)}},{key:"displayBarrierStrength",value:function(e){var t=e(this.body),a=t.x,o=t.y;this.healthDisplay.position={x:a,y:o-100},this.turret.position={x:a,y:o}}},{key:"updateDirection",value:function(e){this.turret.scale.x="left"===e?-1:1,this.direction=e}},{key:"getBody",value:function(){return this.body}},{key:"resumeScan",value:function(){this.scanning||(this.scanning=!0,this.scanAnim.play(),this.scanAnim.visible=!0,this.shootAnim.visible=!1)}},{key:"fireBullet",value:function(){if(!this.destroyed){this.muzzleFlashFX||(this.muzzleFlashFX=new Pt,this.muzzleFlashFX.setMuzzleRotations("left"===this.direction?Object(Ie.degrees)(-92):Object(Ie.degrees)(92)));Ke.getState().game.player.weapons.bulletForce;var e=this.body.position,t=e.x,a=e.y;this.muzzleFlashFX.fireEffect("left"==this.direction?{x:this.turret.position.x-100,y:this.turret.position.y-25}:{x:this.turret.position.x+100,y:this.turret.position.y-25});var o=Oe.Bodies.circle(t,a-25,5),n=je.a.float(-5e-4,-75e-5);new jt(0,0,this.gameObjects,null,{body:Oe.Bodies.rectangle(t,a-50,7,4,{collisionFilter:Ue}),force:"right"===this.direction?{x:je.a.float(-35e-5,-75e-5),y:n}:{x:je.a.float(35e-5,75e-5),y:n}}),new Mt(0,0,this.gameObjects,"turret",{overrideBody:o,overrideForce:"left"===this.direction?{x:-.01,y:-75e-5}:{x:.01,y:-75e-5},overrideAngle:"left"===this.direction?-3:.1})}}},{key:"shoot",value:function(){var e=this;if(!this.shooting&&!this.destroyed){var t=Ke.getState().game.traps.turret.cooldown;this.fireBullet(),this.shooting=!0,this.scanAnim.visible=!1,this.shootAnim.visible=!0,this.shootAnim.play(),this.delayedCall(t,(function(){e.shooting=!1}))}}},{key:"destroy",value:function(){if(!this.destroyed){this.destroyed=!0,new bt(this.body.position,!0),this.container.removeChild(this.turret,this.healthDisplay),Oe.World.remove(this.world,[this.body,this.constraint]);var e=this.buildObjects.indexOf(this,1);e>-1&&this.buildObjects.splice(e,1)}}}]),e}(),Dt=function(){function e(t,a,o){var n=this;Object(We.a)(this,e);var i=new p.a(window.gameObjects.getKeyValue("sparks-sheet").animations["spark-particle"]),r=new p.a(window.gameObjects.getKeyValue("muzzle-sparks-sheet").animations.muzzleSparks),s=[i,r];switch(s.forEach((function(e){var t=o&&o.scale?o.scale:1;1!==t&&(e.scale.x=t,e.scale.y=t),e.pivot.x=.5*e.width,e.pivot.y=.5*e.height,e.loop=!1,e.animationSpeed=o&&o.animationSpeed?o.animationSpeed:1,e.onComplete=function(){n.container.removeChild(e),n.container=null,e=null,i=null,r=null,s=null}})),this.container=window.gameObjects.getKeyValue("game-pixi-container"),t){case 1:this.spark=i,o&&o.tint&&(this.spark.tint=o.tint);break;case 2:this.spark=r,this.blurFilter=new p.k.BlurFilter(je.a.float(.5,.75),5),this.adjFilter=new ht.a,this.glowFilter=new yt.a,this.adjFilter.saturation=2,this.adjFilter.brightness=1.5,this.glowFilter.color=16777215,this.filters=Ke.getState().game.filterEffects?[this.blurFilter,this.adjFilter,this.glowFilter]:[],this.spark.filters=this.filters}if(o&&o.scale){var l=new p.e;this.spark.scale.x=o.scale,this.spark.scale.y=o.scale,l.addChild(this.spark),l.pivot.x=l.width*(.5*o.scale),l.pivot.y=l.height*(.5*o.scale),this.spark=l}return this.renderBody=a,(!o||o&&!o.stop)&&(this.spark.play&&this.spark.play(),this.spark.children&&this.spark.children[0]&&this.spark.children[0].play()),this}return Object(ct.a)(e,[{key:"getFilters",value:function(){return{glow:this.glowFilter,adjust:this.adjFilter,blur:this.blurFilter}}},{key:"updateFilters",value:function(e){this.filters=e,this.spark.filters=this.filters}},{key:"renderPosition",value:function(e){this.renderBody&&(this.spark.position=e(this.renderBody),this.container&&-1===this.container.children.indexOf(this.spark)&&this.container.addChild(this.spark))}}]),e}(),Rt=function(){function e(t,a){Object(We.a)(this,e),this.container=window.gameObjects.getKeyValue("game-pixi-container");var o=3*t;return this.gfc=new p.f,this.gfc.lineStyle(2,0),this.gfc.beginFill(1881185),this.gfc.drawRect(0,0,o/2,o),this.gfc.drawRect(-o/4,o/4,o,o/2),this.gfc.lineStyle(0,0,0),this.gfc.beginFill(1881185),this.gfc.drawRect(0,0,o/2,o),this.gfc.drawRect(-o/4,o/4,o,o/2),this.bevel=new vt.a({thickness:3,lightAlpha:.5,shadowAlpha:.5,shadowColor:2391885}),this.glow=new yt.a({outerStrength:.5}),this.gfc.filters=Ke.getState().game.filterEffects?[this.glow,this.bevel]:[],this.body=Oe.Bodies.rectangle(a.x,a.y,o,o,{restitution:.65,collisionFilter:Ne}),this.body.main=this,this.body.amount=t,this.body.label="health drop",Oe.World.add(window.gameObjects.getKeyValue("world"),this.body),window.gameObjects.getKeyValue("health-drops").push(this),this}return Object(ct.a)(e,[{key:"checkFilters",value:function(){this.gfc&&Ke.getState().game.filterEffects?this.gfc.filters=[this.bevel,this.glow]:this.gfc&&(this.gfc.filters=[])}},{key:"destroy",value:function(){var e=window.gameObjects.getKeyValue("health-drops"),t=e.indexOf(this);t>-1&&e.splice(t,1),this.gfc.destroy(),this.gfc=null,Oe.World.remove(window.gameObjects.getKeyValue("world"),this.body),this.body=null,e=null,t=null,this.container=null}},{key:"renderPosition",value:function(e){this.container&&-1===this.container.children.indexOf(this.gfc)&&this.container.addChild(this.gfc),this.gfc.position=e(this.body)}}]),e}(),zt=function e(t){Object(We.a)(this,e);var a=Ke.getState().game.player.weapons.equipped,o=Ke.getState().game.player.modTiers.powder[a].current,n=window.TweenLite.to,i=window.gameObjects,r=new Dt(2,t),s=i.getKeyValue("spark-sprites");if(r.spark.scale.x=.5,r.spark.scale.y=.5,s.push(r),r.spark.gotoAndPlay(je.a.int(10,15)),Ke.getState().game.filterEffects){var l=r.getFilters(),d=l.adjust,p=l.glow,c=l.blur;d.brightness=1===o?1:2===o?2:3===o?3:4===o?3.5:1,d.saturation=1===o?1:2===o?2:3===o?3:4===o?5:1,p.color=1===o?16777215:2===o?16774400:3===o||4===o?16739584:16777215,r.updateFilters([p,c,d])}return n(r.spark.scale,.1,{x:.55,y:.55}),r};function Wt(){var e=this,t=window.gameObjects,a=t.getKeyValue("world"),o=t.getKeyValue("engine"),n=t.getKeyValue("weapons-ui"),i=t.getKeyValue("game-pixi-container"),r=Ke.getState,s=Ke.dispatch,d=r().game,c=d.width,u=d.height,y=d.player.constants,g=y.width,k=y.height,E=window.TweenLite,S=E.delayedCall,A=E.to,C=E.from;E.set;this.body=Oe.Bodies.rectangle(400,200,g,k,{inertia:1/0,collisionFilter:Ue}),this.arm=Oe.Bodies.rectangle(400,200,30,15,{friction:0,inertia:1/0,collisionFilter:Ue}),this.armAttach=Oe.Constraint.create({bodyA:this.arm,bodyB:this.body,pointA:{x:12,y:0},pointB:{x:0,y:-80},length:0}),this.head=Oe.Bodies.rectangle(400,200,20,24,{inertia:1/0,collisionFilter:Ue}),this.headAttach=Oe.Constraint.create({bodyA:this.head,bodyB:this.body,pointA:{x:0,y:10},pointB:{x:0,y:-(k/2+5)},length:0}),this.composite=Oe.Composite.create(),Oe.Composite.add(this.composite,[this.body,this.arm,this.head,this.armAttach,this.headAttach]),this.composite.bodies.forEach((function(t){t.label="player character",t.main=e})),s(R(this.composite.id)),s(J({bodyId:this.body.id,headId:this.head.id,armId:this.arm.id})),this.composite.body=this.body,this.composite.arm=this.arm,Oe.World.add(a,this.composite),s(X("pistol weapon",JSON.stringify(Date.now()))),s(X("smg weapon",JSON.stringify(Date.now()))),this.life=100;var B=new p.f;B.lineStyle(1,2108682),B.drawRect(0,0,.75*c,12),i.addChild(B);var _=new p.f;_.beginFill(16777215),_.tint=64154,_.drawRect(0,0,.75*c-2,10);var V=new vt.a({thickness:5,lightAlpha:.5,lightColor:16777215,shadowAlpha:.4,shadowColor:0});_.filters=r().game.filterEffects?[V]:[],i.addChild(_),this.initialLifebarWidth=_.width,B.position.x=80,B.position.y=u-40,_.position.x=B.position.x+1,_.position.y=B.position.y+1;_.position;var K=t.getKeyValue("char-reload-pistol-sheet"),O=new p.a(K.animations.char_reload_pistol);O.loop=!1,O.animationSpeed=.5,O.updateAnchor=!0,O.pivot.x=.52*O.width,O.pivot.y=.5*O.height,O.visible=!1,O.onComplete=function(){O.gotoAndStop(0),n.reloading=!1},i.addChild(O);var F=t.getKeyValue("char-reload-smg-sheet"),j=new p.a(F.animations.char_reload_smg);j.loop=!1,j.animationSpeed=.5,j.updateAnchor=!0,j.pivot.x=.52*O.width,j.pivot.y=.5*O.height,j.visible=!1,j.onComplete=function(){j.gotoAndStop(0),n.reloading=!1},i.addChild(j);var M=t.getKeyValue("char-reload-shotgun-sheet"),T=new p.a(M.animations.shotgunReload);T.loop=!1,T.animationSpeed=.5,T.updateAnchor=!0,T.pivot.x=.725*T.width,T.pivot.y=.5*T.height,T.visible=!1,this.shotgunShellLoadIterations=0,this.gotoToEndOfShotgunReload=!0,T.onComplete=function(){T.gotoAndStop(0),n.reloading=!1,e.shotgunShellLoadIterations=0,e.gotoToEndOfShotgunReload=!0},i.addChild(T),this.reloadAnimsByType={"pistol weapon":O,"smg weapon":j,"shotgun weapon":T},this.reloadAnims=[O,j,T];var I=new Et.a;I.kernelSize=5,I.velocity.x=30,I.velocity.y=40;var H=t.getKeyValue("melee-pistol-sheet"),$=new p.a(H.animations.melee_pistol);$.loop=!1,$.animationSpeed=.75,$.updateAnchor=!0,$.pivot.x=.5*$.width,$.pivot.y=.5*$.height,$.visible=!1,$.onComplete=function(){$.gotoAndStop(0),$.visible=!1,e.meleeAttackInProgress=!1,e.removeMeleeHitbox()},$.onFrameChange=function(){e.meleeAttackInProgress=!0,r().game.filterEffects&&$.currentFrame>12&&$.currentFrame<15?$.filters=[I]:$.filters=[]},i.addChild($);var Q=t.getKeyValue("melee-ump-sheet"),ae=new p.a(Q.animations.melee_ump);ae.loop=!1,ae.animationSpeed=.75,ae.updateAnchor=!0,ae.pivot.x=.5*ae.width,ae.pivot.y=.5*ae.height,ae.visible=!1,ae.onComplete=function(){ae.gotoAndStop(0),ae.visible=!1,e.meleeAttackInProgress=!1,e.removeMeleeHitbox()},ae.onFrameChange=function(){e.meleeAttackInProgress=!0,r().game.filterEffects&&ae.currentFrame>11&&ae.currentFrame<14?ae.filters=[I]:ae.filters=[]},i.addChild(ae);var oe=t.getKeyValue("melee-shotgun-sheet"),ne=new p.a(oe.animations.meleeShotgun);ne.loop=!1,ne.animationSpeed=.5,ne.updateAnchor=!0,ne.pivot.x=.75*ne.width,ne.pivot.y=.5*ne.height,ne.visible=!1,ne.onComplete=function(){ne.gotoAndStop(0),ne.visible=!1,e.meleeAttackInProgress=!1,e.removeMeleeHitbox()},ne.onFrameChange=function(){e.meleeAttackInProgress=!0,r().game.filterEffects&&ne.currentFrame>6&&ne.currentFrame<9?ne.filters=[I]:ne.filters=[]},i.addChild(ne),this.meleeSprites=[$,ae,ne],this.grenadeThrowInProgress=!1,this.grenadeForce={x:.001,y:.001},this.chargingGrenade=!1,this.chargeGrenade=function(){i.addChild(e.meter),e.grenadeChargeRate=r().game.player.weapons.grenadeChargeRate,e.chargingGrenade=!0,e.grenadeForce.x<=e.grenadeUpperForceThreshold&&(e.grenadeForce.x+=e.grenadeChargeRate,e.grenadeForce.y+=e.grenadeChargeRate)};e.meter=new p.f,e.meter.beginFill(16753215),e.meter.drawRect(0,0,100,10),i.addChild(e.meter),this.renderGrenadeChargeMeter=function(t){var a=t(e.body),o=a.x,n=a.y;e.grenadeUpperForceThreshold=r().game.player.weapons.grenadeUpperForceThreshold,e.meter&&e.chargingGrenade?(e.meter.position.x=o-e.meter.width/2,e.meter.position.y=n-.75*De(e.body),e.meter.width=e.grenadeForce.x/e.grenadeUpperForceThreshold*100):e.meter.width=0},this.createGrenade=function(){t.getKeyValue("weapons-ui").updateGrenadeIcons();var a=t.getKeyValue("grenades");e.grenadeChargeRate=r().game.player.weapons.grenadeChargeRate,e.calculatedGrenadeForce=function(e,t,a){var o=Oe.Vector.angle(e,t);return{x:Math.cos(o)*a.x,y:Math.sin(o)*a.y}}(e.arm.position,r().game.mouseRelativeToPlayerPosition,e.grenadeForce),a.push(new St(r().game.mouseState.x===He?e.body.position.x+Le(e.body):e.body.position.x-Le(e.body),e.body.position.y-De(e.body)/2,8,e.calculatedGrenadeForce)),e.grenadeForce={x:.001,y:.001},e.chargingGrenade=!1},this.throwGrenade=function(){var t=r().game.player.weapons.equipped,a={"pistol weapon":function(){re.currentFrame<1&&(re.visible=!0,re.gotoAndPlay(8))},"smg weapon":function(){ce.currentFrame<1&&(ce.visible=!0,ce.gotoAndPlay(8))},"shotgun weapon":function(){he.currentFrame<1&&(he.visible=!0,he.gotoAndPlay(8))}};e.grenadeThrowInProgress||(S(.2,(function(){window.gameObjects.getKeyValue("throw-sound").play(),e.createGrenade()})),e.chargingGrenade=!1,e.grenadeThrowInProgress=!0,a[t]&&(a[t](),s(be())))};var ie=t.getKeyValue("grenade-pistol-sheet"),re=new p.a(ie.animations.grenade_throw_pistol);re.loop=!1,re.animationSpeed=1,re.updateAnchor=!0,re.pivot.x=.5*re.width,re.pivot.y=.5*re.height,re.visible=!1,re.onComplete=function(){re.gotoAndStop(0),re.visible=!1,e.grenadeThrowInProgress=!1},re.onFrameChange=function(){e.grenadeThrowInProgress=!0,re.currentFrame>22&&(e.grenadeThrown||(e.grenadeThrown=!0,S(.5,(function(){e.grenadeThrown=!1})))),re.currentFrame>27&&(re.gotoAndStop(0),re.visible=!1,e.grenadeThrowInProgress=!1)},i.addChild(re);var pe=t.getKeyValue("grenade-ump-sheet"),ce=new p.a(pe.animations.grenade_throw_ump);ce.loop=!1,ce.animationSpeed=1,ce.updateAnchor=!0,ce.pivot.x=.5*ce.width,ce.pivot.y=.5*ce.height,ce.visible=!1,ce.onComplete=function(){ce.gotoAndStop(0),ce.visible=!1,e.grenadeThrowInProgress=!1},ce.onFrameChange=function(){e.grenadeThrowInProgress=!0,22===ce.currentFrame&&(e.grenadeThrown=!0,S(.5,(function(){e.grenadeThrown=!1}))),ce.currentFrame>27&&(ce.gotoAndStop(0),ce.visible=!1,e.grenadeThrowInProgress=!1)},i.addChild(ce);var ue=t.getKeyValue("grenade-shotgun-sheet"),he=new p.a(ue.animations.shotgunGrenadeThrow);he.loop=!1,he.animationSpeed=1,he.updateAnchor=!0,he.pivot.x=.5*he.width,he.pivot.y=.5*he.height,he.visible=!1,he.onComplete=function(){he.gotoAndStop(0),he.visible=!1,e.grenadeThrowInProgress=!1},he.onFrameChange=function(){22===he.currentFrame&&(e.grenadeThrown=!0,S(.5,(function(){e.grenadeThrown=!1}))),he.currentFrame>27&&(he.gotoAndStop(0),he.visible=!1,e.grenadeThrowInProgress=!1)},i.addChild(he),this.grenadeSprites=[re,ce,he],this.grenadeSpritesByEquipped={"pistol weapon":re,"smg weapon":ce,"shotgun weapon":he},this.ejectedMags=[],this.reloadMagazineActionsByType={"pistol weapon":function(){var t=r().game,o=t.player,n=o.weapons,s=(n.equipped,n.reloadSpeed,o.perks.magDmg.owned),l=t.mouseState.x;Qe.play(),Qe.fade(1,0,300);var d=l===He?"left":"right",c=Oe.Bodies.rectangle(e.body.position.x+("left"===d?20:-20),e.body.position.y,7,20,{collisionFilter:s?{}:Ne});c.label="magazine",Oe.World.add(a,c),Oe.Body.applyForce(c,e.body.position,{x:+("left"===d?je.a.float(.0025,.005):je.a.float(-.0025,-.005)),y:je.a.float(-.0025,-.005)});var u=new p.f;u.beginFill(3355443),u.drawRect(0,0,7,20),u.pivot.x=u.width/2,u.pivot.y=u.height/2;var h={gfx:u,body:c};e.ejectedMags.unshift(h),i.addChild(u),S(2,(function(){Oe.World.remove(a,c),u.destroy(),e.ejectedMags.pop()}))},"smg weapon":function(){var t=r().game,o=t.player.perks.magDmg.owned,n=t.mouseState.x;Qe.play(),Qe.fade(1,0,300);var s=n===He?"left":"right",l=Oe.Bodies.rectangle(e.body.position.x+("left"===s?20:-20),e.body.position.y-De(e.body)/2,7,42,{collisionFilter:o?{}:Ne});l.label="magazine",Oe.World.add(a,l),Oe.Body.applyForce(l,e.body.position,{x:+("left"===s?je.a.float(.004,.01):je.a.float(-.004,-.01)),y:je.a.float(-.0015,-.01)});var d=new p.f;d.beginFill(3355443),d.drawRect(0,0,7,42),d.pivot.x=d.width/2,d.pivot.y=d.height/2;var c={gfx:d,body:l};e.ejectedMags.unshift(c),i.addChild(d),S(2,(function(){Oe.World.remove(a,l),d.destroy(),e.ejectedMags.pop()}))},"shotgun weapon":function(){!function t(){S(.3,(function(){e.shotgunShellLoadIterations>5?T.gotoAndPlay(21):(T.gotoAndPlay(10),e.shotgunShellLoadIterations++,t())}))}()}},this.updateEjectedMagPositions=function(t){e.ejectedMags.forEach((function(e){var a=t(e.body),o=a.x,n=a.y,i=a.rotation;e.gfx.position={x:o,y:n},e.gfx.rotation=i}))},this.reloadWeapon=function(){var t=r().game.player.weapons,a=t.reloadSpeed,o=(t.reloadAnimationFrames,t.equipped);e.reloadAnimsByType[o].animationSpeed=a[o],e.reloadAnimsByType[o].gotoAndPlay(1),S("pistol weapon"===o?a[o]/4:"smg weapon"===o?2*a[o]+a[o]/2:"shotgun weapon"===o?a[o]+a[o]/4:0,(function(){!0===e.reloadAnimsByType[o].visible&&e.reloadMagazineActionsByType[o]()}))};var me=t.getKeyValue("right-arm-pistol-fire-sheet"),ye=new p.a(me.animations.right_char_arm_pistol_fire);ye.play(),ye.loop=!1,ye.animationSpeed=.35,ye.updateAnchor=!0,ye.pivot.x=.6*ye.width,ye.pivot.y=.4*ye.height,ye.onComplete=function(){ye.stop()},i.addChild(ye);var fe=t.getKeyValue("right-arm-smg-fire-sheet"),we=new p.a(fe.animations.char_right_arm_smg_fire);we.play(),we.loop=!1,we.animationSpeed=.35,we.updateAnchor=!0,we.pivot.x=.6*we.width,we.pivot.y=.4*we.height,we.onComplete=function(){we.stop()},i.addChild(we);var xe=t.getKeyValue("arms-fire-shotgun-sheet"),ve=new p.a(xe.animations.rightArmFireShotgun);ve.play(),ve.loop=!1,ve.animationSpeed=.5,ve.updateAnchor=!0,ve.pivot.x=.6*ve.width,ve.pivot.y=.4*ve.height,ve.onComplete=function(){ve.stop()},i.addChild(ve);var ke=Pe("char-head");i.addChild(ke),this.positionHeadSprite=function(t){var a=r().game,o=a.keys,n=a.mouseState.x,i=a.mousePosition,s=a.player,l=s.variables,d=l.jumping,p=l.currentDirection,c=s.weapons.equipped,u=t.mx,h=t.my,m=(0,t.fn)(e.head),y=m.x,g=m.y;(o.indexOf(68)>-1||o.indexOf(65)>-1)&&!d?"right"===p?ke.position.x=n===He?y+5:y:"left"===p&&(ke.position.x="less than player x position"===n?y-5:y):ke.position.x=y,ke.position.y=g+12,d?e.armsSpritesByType[c].forEach((function(e){e.pivot.x=.6*e.width,e.pivot.y=.47*e.height})):"less than player y position"===h?(e.armsSpritesByType[c].forEach((function(e){e.pivot.y=.45*e.height})),ke.rotation=u===He?2.5:.957):"greater than player y position"===h?(e.armsSpritesByType[c].forEach((function(e){e.pivot.x=.65*e.width,e.pivot.y=.45*e.height})),ke.rotation=u===He?-2.723:-.5532):i.x>550&&i.x<650?(e.armsSpritesByType[c].forEach((function(e){e.pivot.x=.62*e.width,e.pivot.y=.42*e.height})),ke.rotation=u===He?-2.723:-.5532):i.x<750&&i.y>250&&u===He?(e.armsSpritesByType[c].forEach((function(e){e.pivot.x=.62*e.width,e.pivot.y=.42*e.height})),ke.rotation=-2.723):i.x>450&&i.y>250&&"less than player x position"===u?(e.armsSpritesByType[c].forEach((function(e){e.pivot.x=.62*e.width,e.pivot.y=.42*e.height})),ke.rotation=-.5532):(e.armsSpritesByType[c].forEach((function(e){e.pivot.x=.6*e.width,e.pivot.y=.42*e.height})),ke.rotation=Te.rotation)},ke.pivot.x=.52*ke.width,ke.pivot.y=.17*ke.height,this.headSprite=ke;var Ee=t.getKeyValue("char-run-sheet"),Se=new p.a(Ee.animations.char_run);Se.loop=!0,Se.animationSpeed=1,Se.updateAnchor=!0,Se.pivot.x=.52*Se.width,Se.pivot.y=.5*Se.height,i.addChild(Se);var Ae=t.getKeyValue("char-idle-sheet"),Ce=new p.a(Ae.animations.char_idle);Ce.play(),Ce.loop=!0,Ce.animationSpeed=.1,Ce.updateAnchor=!0,Ce.pivot.x=.52*Ce.width,Ce.pivot.y=.5*Ce.height,i.addChild(Ce);var Be=t.getKeyValue("char-jump-sheet"),_e=new p.a(Be.animations.char_jump);_e.loop=!1,_e.animationSpeed=.35,_e.updateAnchor=!0,_e.pivot.x=.52*_e.width,_e.pivot.y=.5*_e.height,_e.visible=!1,i.addChild(_e),this.stopJumpAnimation=function(){_e.gotoAndStop(0),_e.visible=!1},_e.onComplete=function(){r().game.player.variables.jumping?e.resumeJumpAnimation():e.stopJumpAnimation()};var Ve=new Et.a({velocity:{y:0}});this.resumeJumpAnimation=function(){_e.gotoAndPlay(3),_e.visible=!0,Se.visible=!1,Ce.visible=!1},this.playJumpAnimation=function(){r().game.filterEffects&&(_e.filters=[Ve],C(Ve.velocity,.35,{y:50,onUpdate:function(){_e.filters=[Ve]}})),_e.gotoAndPlay(0),_e.visible=!0,Se.visible=!1,Ce.visible=!1};var Fe=t.getKeyValue("left-arm-pistol-fire-sheet"),Te=new p.a(Fe.animations.left_char_arm_pistol_fire);Te.play(),Te.loop=!1,Te.animationSpeed=.35,Te.updateAnchor=!0,Te.pivot.x=.6*Te.width,Te.pivot.y=.4*Te.height,Te.onComplete=function(){Te.gotoAndStop(0)},i.addChild(Te);var Re=t.getKeyValue("left-arm-smg-fire-sheet"),We=new p.a(Re.animations.char_left_arm_smg_fire);We.play(),We.loop=!1,We.animationSpeed=.35,We.updateAnchor=!0,We.pivot.x=.6*We.width,We.pivot.y=.4*We.height,We.onComplete=function(){We.gotoAndStop(0)},i.addChild(We);var Ge=new p.a(xe.animations.leftArmFireShotgun);Ge.play(),Ge.loop=!1,Ge.animationSpeed=.5,Ge.updateAnchor=!0,Ge.pivot.x=.6*Ge.width,Ge.pivot.y=.4*Ge.height,Ge.onComplete=function(){Ge.stop()},i.addChild(Ge);new Et.a({velocity:{y:0}});this.armsSprites=[Te,ye,We,we,Ge,ve],this.armsSpritesByType={"pistol weapon":[Te,ye],"smg weapon":[We,we],"shotgun weapon":[Ge,ve]};var qe=new Pt,Ye=window.gameObjects.getKeyValue("9mm-sound1"),Xe=window.gameObjects.getKeyValue("9mm-sound2"),$e=new ft.Howl({src:[Ye]}),Je=(new ft.Howl({src:[Xe],sprite:{_1:[500,1e3]}}),window.gameObjects.getKeyValue("pistol-reload-sound")),Qe=new ft.Howl({src:[Je],volume:.25}),et=t.getKeyValue("throw-sound"),tt=t.getKeyValue("pain1-sound"),rt=t.getKeyValue("pain2-sound"),dt=t.getKeyValue("death-rip-sound"),pt=t.getKeyValue("player-death-sound"),ct=t.getKeyValue("bullet-impact-body-sound"),ut=t.getKeyValue("smg-fire-sound"),ht=t.getKeyValue("shotgun-blast-sound");this.fireWeaponAnimation=function(){var t=r().game,a=(t.mouseState,t.player.weapons.equipped);e.armsSpritesByType[a].forEach((function(e){e.visible=!0})),e.armsSpritesByType[a].forEach((function(e){e.gotoAndPlay(0)})),qe.fireEffect();var o=new zt(e.arm);e.currentMuzzleSpark=o,"pistol weapon"===a&&$e.play(),"smg weapon"===a&&ut.play(),"shotgun weapon"===a&&ht.play()},this.charRunSprite=Se,this.charIdleSprite=Ce,this.charJumpSprite=_e,this.charReloadPistolSprite=O,this.charReloadSMGSprite=j,this.charReloadShotgunSprite=T,this.bodySprites=[Se,Ce,_e,O,j,T,$,ae,ne,re,ce,he],this.sprites=[ye,we,ve,Se,Ce,_e,O,j,T,$,ae,re,ce,he,Te,We,Ge],this.shadow=new p.f,this.shadow.beginFill(0,.35),this.shadow.drawEllipse(0,0,60,10);var mt=new p.k.BlurFilter;mt.blur=8,this.shadow.filters=r().game.filterEffects?[mt]:[],this.checkFilters=function(){r().game.filterEffects?(e.shadow.alpha=.85,e.shadow.filters=[mt],_.filters=[V]):(e.shadow.alpha=.45,e.shadow.filters=[],_.filters=[])},this.setBodySpritesPositions=function(t){var a=(0,t.fn)(e.body),o=a.x,n=a.y;e.bodySprites.forEach((function(e){e.position.x=o,e.position.y=n-15})),i&&-1===i.children.indexOf(e.shadow)&&i.addChild(e.shadow),e.shadow.position.x=o,e.shadow.position.y=e.bodySprites[0].position.y+e.bodySprites[0].height/2-5},this.setArmsSpritePosition=function(t){var a,o=r().game,n=o.keys,i=o.mouseState,s=i.x,l=i.y,d=o.player.variables,p=d.jumping,c=d.currentDirection,u=(0,t.fn)(e.arm),h=u.x,m=u.y,y=u.rotation;e.armsSprites.forEach((function(e){(n.indexOf(68)>-1||n.indexOf(65)>-1)&&!p?"right"===c?e.x=s===He?h+5:h:"left"===c&&(e.x="less than player x position"===s?h-5:h):e.x=h,e.y=p&&"less than player y position"===l?m-10:m,e.rotation=y})),qe.getFlashes().forEach((function(e){e.position=ye.position,e.rotation=y-Object(Ie.degrees)(90),e.pivot.x=.05*-e.width,e.pivot.y="shotgun weapon"===r().game.player.weapons.equipped?3.25*e.height:2.25*e.height,a=e.position,e.rotation})),e.currentMuzzleSpark&&(e.currentMuzzleSpark.spark.pivot.x=-e.currentMuzzleSpark.spark.width,e.currentMuzzleSpark.spark.position=a,e.currentMuzzleSpark.spark.rotation=y-Object(Ie.degrees)(180))},this.meleeAttackInProgress=!1,this.createMeleeHitbox=function(){var t=r().game,o=t.mouseState,n=t.player.weapons.equipped;window.gameObjects.getKeyValue("throw-sound").play(),e.meleeHitbox=Oe.Bodies.rectangle(o.x===He?e.body.position.x+1.5*Le(e.body):e.body.position.x-1.5*Le(e.body),e.body.position.y-De(e.body)/2,2*Le(e.body),De(e.body),{isStatic:!0}),e.meleeHitbox.main=e,e.meleeHitbox.label="melee hitbox ".concat(n),Oe.World.add(a,e.meleeHitbox)},this.removeMeleeHitbox=function(){e.meleeHitbox&&Oe.World.remove(a,e.meleeHitbox)},this.meleeAttack=function(){var t=r().game.player.weapons.equipped,a={"pistol weapon":function(){$.currentFrame<1&&($.visible=!0,$.gotoAndPlay(1))},"smg weapon":function(){ae.currentFrame<1&&(ae.visible=!0,ae.gotoAndPlay(1))},"shotgun weapon":function(){ne.currentFrame<1&&(ne.visible=!0,ne.gotoAndPlay(1))}};e.meleeAttackInProgress||(e.meleeAttackInProgress=!0,S(.35,(function(){e.dead||e.createMeleeHitbox(),S(.1,(function(){e.removeMeleeHitbox()}))})),a[t]())},this.collectHealth=function(t){e.life+=t,e.life>100&&(e.life=100),s(ge(e.life)),A(_,.5,{width:e.life/100*e.initialLifebarWidth})},this.collectCredits=function(e){s(le(e))},this.collectAmmo=function(e,t){Ze("+".concat(t," ").concat(e," ammo"),"#32BD6A",.35,1),s(se(e,t))},this.playerHit=!1,this.resetPlayerHit=function(){e.playerHit=!0,S(1,(function(){e.playerHit=!1}))},this.blinkAlpha=function(){e.headSprite.alpha=.25,e.armsSprites.forEach((function(e){e.alpha=.25})),e.bodySprites.forEach((function(e){e.alpha=.25})),S(.1,(function(){e.headSprite.alpha=1,e.armsSprites.forEach((function(e){e.alpha=1})),e.bodySprites.forEach((function(e){e.alpha=1}))})),S(.2,(function(){e.headSprite.alpha=.25,e.armsSprites.forEach((function(e){e.alpha=.25})),e.bodySprites.forEach((function(e){e.alpha=.25}))})),S(.3,(function(){e.headSprite.alpha=1,e.armsSprites.forEach((function(e){e.alpha=1})),e.bodySprites.forEach((function(e){e.alpha=1}))})),S(.35,(function(){e.headSprite.alpha=.25,e.armsSprites.forEach((function(e){e.alpha=.25})),e.bodySprites.forEach((function(e){e.alpha=.25}))})),S(.4,(function(){e.headSprite.alpha=1,e.armsSprites.forEach((function(e){e.alpha=1})),e.bodySprites.forEach((function(e){e.alpha=1}))})),S(.45,(function(){e.headSprite.alpha=.25,e.armsSprites.forEach((function(e){e.alpha=.25})),e.bodySprites.forEach((function(e){e.alpha=.25}))})),S(.5,(function(){e.headSprite.alpha=1,e.armsSprites.forEach((function(e){e.alpha=1})),e.bodySprites.forEach((function(e){e.alpha=1}))}))},this.takeDamage=function(t){var a=r().game.player.variables.defense;e.life-=t-a,s(ge(e.life)),1===[1,2][Math.floor(2*Math.random())]?tt.play():rt.play(),ct.play(),_.tint=14487054,A(_,.2,{width:e.life/100*e.initialLifebarWidth}),A(_,.1,{y:_.position.y+2,onComplete:function(){A(_,.1,{y:_.position.y-3,onComplete:function(){A(_,.1,{y:_.position.y+1,onComplete:function(){_.tint=64154}})}})}});var o={x:je.a.float(e.bodySprites[0].position.x-5,e.bodySprites[0].position.x+20),y:je.a.float(e.bodySprites[0].position.y,e.bodySprites[0].position.y-60)};Ze("-".concat(t),"#FF0000",.35,1,12),new st(null,o,.75),e.blinkAlpha(),e.resetPlayerHit(),e.life<=0&&e.kill()},this.acceptHealth=function(t){e.life=t,s(ge(e.life)),A(_,.5,{width:e.life/100*e.initialLifebarWidth})},this.addSpritesInOrder=function(){i.addChild(e.headSprite),e.armsSprites.forEach((function(e){return i.addChild(e)})),e.bodySprites.forEach((function(e){return i.addChild(e)})),i.addChild(Te),i.addChild(We),i.addChild(Ge),i.addChild(_)},this.respawn=function(){if(o.timing.timeScale=1,e.playerRagdoll&&(e.playerRagdoll.destroy(),e.playerRagdoll=null),e.addSpritesInOrder(),e.life=100,_.width=e.initialLifebarWidth,e.dead=!1,_.visible=B.visible=!0,e.lastDeathType===lt)if(e.lastBodyPosition.x<0)for(;e.body.position.x<200&&e.body.position.y>0;)Oe.Composite.translate(e.composite,{x:100,y:-100});else for(;e.body.position.x>r().game.width&&e.body.position.y>0;)Oe.Composite.translate(e.composite,{x:-100,y:-100});Oe.World.add(a,e.composite),r().game.lastGameSubState===w?s(ee("sub",r().game.gameSubState,w)):s(ee("sub",r().game.gameSubState,b))},this.dead=!1,this.kill=function(n){if(!1===e.dead){n?e.lastDeathType=n:(dt.play(),e.lastDeathType="killed by zombie"),pt.play(),o.timing.timeScale=.5,_.visible=B.visible=!1,e.life=0,e.dead=!0,e.removeMeleeHitbox(),e.lastBodyPosition=e.body.position,Oe.World.remove(a,e.composite),e.bodySprites&&e.armsSprites&&(i.removeChild(e.headSprite),e.bodySprites.forEach((function(e){return i.removeChild(e)})),e.armsSprites.forEach((function(e){return i.removeChild(e)})));var d={x:1===o.timing.timeScale?1===Ce.scale.x?.1:-.1:1===Ce.scale.x?.25:-.25,y:1===o.timing.timeScale?-.25:-.75},p=["head","body","limb","none"],c=p[Math.floor(Math.random()*p.length)];e.playerRagdoll="head"===c?t.setKeyValue("player-ragdoll",new at({x:e.body.position.x,y:e.body.position.y},d,c)):"body"===c?t.setKeyValue("player-ragdoll",new ot({x:e.body.position.x,y:e.body.position.y},d,c)):"limb"===c?t.setKeyValue("player-ragdoll",new nt({x:e.body.position.x,y:e.body.position.y},d,c)):t.setKeyValue("player-ragdoll",new it({x:e.body.position.x,y:e.body.position.y},d,c)),Object(l.b)((function(){s(D()),s(L()),s(Y("mouse up")),s(ee("sub",r().game.gameSubState,f))}))}};var yt=ze(t),gt=function(e){var t=e.getKeyValue("world"),a=Me().game.player.compositeId;return Oe.Composite.get(t,a,"composite")}(t).bodies[1],bt=De(this.body);return window.keydownListenersAdded||(window.addEventListener("keydown",(function(a){var o=r().game,i=o.keys,l=o.gameState,d=o.gameSubState,p=o.player.variables,c=p.jumpForce,u=p.jumping;(l===v.GAMEPLAY&&(e.dead||n.reloading||e.meleeAttackInProgress||e.grenadeThrowInProgress||(87!==a.keyCode||u||e.chargingGrenade?i.indexOf(a.keyCode)<0&&s(z(a.keyCode)):(s(U(!0)),et.play(),e.playJumpAnimation(),Oe.Body.applyForce(e.body,e.body.position,{x:0,y:c})))),l===v.GAMEPLAY&&d!==w&&d!==x&&(e.dead||n.reloading||e.meleeAttackInProgress||u||e.grenadeThrowInProgress||"f"!==a.key&&"F"!==a.key||e.meleeAttack()),l!==v.SHOP_MENU&&d===w)&&("Enter"===a.key&&(t.getKeyValue("screen-ui").unpause(),s(te()),s(ee("main",l,v.GAMEPLAY)),s(ee("sub",d,m))));l!==v.SHOP_MENU&&d===x&&("b"!==a.key&&"B"!==a.key||(t.getKeyValue("object-placement-arrow").changeBack=!0,s(ee("main",l,v.BUILD_MENU)),s(ee("sub",d,h))));if((l===v.GAMEPLAY||l===v.SHOP_MENU)&&32===a.keyCode&&(!n.reloading||l===v.SHOP_MENU)&&!e.meleeAttackInProgress&&!e.grenadeThrowInProgress){var y=r().game.player.weapons,g=y.equipped,f=y.list;if(f[f.indexOf(g)+1]){var b=f.indexOf(g);s(Z(f[b+1]))}else s(Z(f[0]))}if(l===v.GAMEPLAY&&d!==w&&d!==x){var k=t.getKeyValue("remote-mines"),E=["1","2","3","4","5","6","7","8","9"].indexOf(a.key.toString());console.log(a.key),E>-1&&k[a.key.toString()]&&(k[a.key.toString()].detonate(),delete k[a.key.toString()])}if(l===v.GAMEPLAY&&d===x&&r().game.traps.selectedTrap===Bt.TURRET){var S=t.getKeyValue("current-turret");S&&("ArrowLeft"===a.key&&S.updateDirection("left"),"ArrowRight"===a.key&&S.updateDirection("right"))}if(l===v.GAMEPLAY&&82===a.keyCode&&!e.meleeAttackInProgress){var A=r().game,C=A.showingMessage,B=A.player.weapons,_=B.equipped;0===B.totalAmmo[_]&&!1===C?Ze("Out of ammo!","#FF0000",.25,.75):n.reloading||u||e.dead||(e.reloadWeapon(),n.reload())}})),window.addEventListener("keyup",(function(t){var a=r().game,o=a.keys,i=a.gameState,l=a.gameSubState;i===v.GAMEPLAY&&(e.dead||(o.indexOf(t.keyCode)>-1&&s(W(t.keyCode)),"g"!==t.key&&"G"!==t.key||!(r().game.player.weapons.totalAmmo.grenades>0)||e.meleeAttackInProgress||n.reloading||i===v.GAMEPLAY&&l!==x&&l!==w&&e.throwGrenade()))})),window.addEventListener("mousemove",(function(e){var t=r().game,a=t.gameState;t.gameSubState;if(a===v.GAMEPLAY&&e.target&&e.target===document.getElementsByTagName("canvas")[1]&&e.target.getBoundingClientRect){var o,n,i,l=e.target.getBoundingClientRect(),d=e.clientX-l.left,p=e.clientY-l.top,c=r().game.mouseRelativeToPlayerPosition;s(G({x:d,y:p})),c.x>yt.position.x&&(n=He),c.x<yt.position.x&&(n="less than player x position"),c.y>yt.position.y+bt/2&&(i="greater than player y position"),c.y<yt.position.y-bt&&(i="less than player y position"),o=Oe.Vector.angle(c,gt.position),Oe.Body.setAngle(gt,o),s(N(n)),s(q(i))}})),window.addEventListener("mousedown",(function(t){console.log(t);var a=r().game,o=a.gameState,n=a.gameSubState;o===v.GAMEPLAY&&n!==x&&n!==w&&(e.dead||e.meleeAttackInProgress||e.grenadeThrowInProgress||(1===t.buttons?s(Y("mouse down")):2===t.buttons&&(s(P(!0)),console.log("should charge"))))})),window.addEventListener("mouseup",(function(e){r().game.gameState===v.GAMEPLAY&&(console.log(e),s(Y("mouse up")),r().game.rightMouseDown&&s(P(!1)))})),window.addEventListener("click",(function(e){var a=r().game,o=a.player.credits,n=a.mouseRelativeToPlayerPosition,i=a.gameSubState,l=a.traps,d=l.selectedTrap,p=l.costToBuild,c=a.barriers,u=c.selectedBarrier,h=c.costToBuild;if(i===x){var m,y,g={x:n.x,y:360},f=!0,b=(t.getKeyValue("remote-mines"),t.getKeyValue("build-objects")),w=t.getKeyValue("place-object-sound"),v=t.getKeyValue("button-cancel-sound"),k=b.map((function(e){return function(e){return g.x+25<e.getBody().position.x-Le(e.getBody())/2||e.getBody().position.x+Le(e.getBody())/2<g.x-25}(e)?"allow placement":"place next to"}));if(b.length>0)m=b.map((function(e){return e.getBody().position.x})).reduce((function(e,t){return Math.abs(t-g.x)<Math.abs(e-g.x)?t:e})),console.log(m);if(k.indexOf("place next to")>-1&&(f=!1),u)o>=h[u]?(y=f||0===b.length?new wt(g,{width:50,height:100},u):new wt(g.x<m?{x:m-50,y:g.y}:{x:m+50,y:g.y},{width:50,height:100},u))&&(s(de(h[u])),Ze("- $".concat(h[u]),16711680,.5,.75),b.push(y),w.play()):(v.play(),Ze("insufficient credits",16711680,.5,.75));var E,S=function(e){switch(d){case Bt.LANDMINE:return new xt(e);case Bt.CLUSTER_BOMB:return new At(e);case Bt.REMOTE_MINE:var a=t.getKeyValue("remote-mines-array");return new _t(e,a.length+1);case Bt.TURRET:return new Lt(e)}};if(d)if(o>=p[d]){if(E=f||0===b.length?S(g):S(g.x<m?{x:m-50,y:g.y}:{x:m+50,y:g.y})){s(de(p[d])),Ze("- $".concat(p[d]),16711680,.5,.75),w.play(),b.push(E);var A=t.getKeyValue("remote-mines-array");if(d===Bt.REMOTE_MINE)if(A.length<10){var C=t.getKeyValue("remote-mines");A.push(E),A.forEach((function(e,t){C[t+1]=e,e.updateNumber(t+1)}))}else v.play(),Ze("can hold up to 9 remote mines at a time",16711680,.5,.75);d===Bt.TURRET&&(Ze("Press Left or Right arrow to change turret direction",16777215,.75,2),t.setKeyValue("current-turret",E))}}else v.play(),Ze("insufficient credits",16711680,.5,.75)}})),window.addEventListener("contextmenu",(function(t){t.preventDefault();var a=r().game,o=a.gameState,i=a.gameSubState,s=a.player,l=s.variables.jumping,d=s.weapons.totalAmmo.grenades;o===v.GAMEPLAY&&d>0&&!e.meleeAttackInProgress&&!n.reloading&&!l&&i!==x&&i!==w&&(e.throwGrenade(),console.log("throw!"))})),window.addEventListener("wheel",(function(t){console.log(t);var a=r().game.gameState;if(t.preventDefault(),(a===v.GAMEPLAY||a===v.SHOP_MENU)&&(!n.reloading||a===v.SHOP_MENU)&&!e.meleeAttackInProgress&&!e.grenadeThrowInProgress){var o=r().game.player.weapons,i=o.equipped,l=o.list;if(t.deltaY<0)if(l[l.indexOf(i)-1]){var d=l.indexOf(i);s(Z(l[d-1]))}else s(Z(l[l.length-1]));else if(t.deltaY>0)if(l[l.indexOf(i)+1]){var p=l.indexOf(i);s(Z(l[p+1]))}else s(Z(l[0]))}})),window.keydownListenersAdded=!0),this.pause=function(){0!==e.charRunSprite.currentFrame&&e.charRunSprite.play(),0!==e.charReloadPistolSprite.currentFrame&&e.charReloadPistolSprite.play(),0!==e.charReloadSMGSprite.currentFrame&&e.charReloadSMGSprite.play(),0!==_e.currentFrame&&_e.play()},this.unpause=function(){e.charRunSprite.stop(),e.charReloadPistolSprite.stop(),e.charReloadSMGSprite.stop(),_e.stop(),s(U(!1))},this}var It=window.TweenLite,Ht=It.to;It.from,It.kill;function Ut(e){var t=this,a=e.getKeyValue("game-pixi-container");return this.crosshair=new p.e,this.cross=new p.f,this.cross.lineStyle(2,11534336,.75),this.cross.moveTo(0,-15),this.cross.lineTo(0,15),this.cross.moveTo(-15,0),this.cross.lineTo(15,0),this.crosshair.addChild(this.cross),this.circle=new p.f,this.circle.lineStyle(1,11534336,.75),this.circle.drawCircle(0,0,10),this.crosshair.addChild(this.circle),this.changed=!1,this.changeBack=!1,this._new=null,a.addChild(this.crosshair),this.crosshair.buildArrow=function(o){var n=e.getKeyValue("crosshair");a.removeChild(n);var i=new p.f;return i.lineStyle(2,o,1),i.beginFill(7829367,0),i.moveTo(0,0),i.lineTo(20,0),i.lineTo(20,30),i.lineTo(30,30),i.lineTo(10,45),i.lineTo(-10,30),i.lineTo(0,30),i.lineTo(0,0),i.endFill(),i.pivot.x=.5*i.width,i.pivot.y=.5*i.height,a.addChild(i),t._new=i,n._new=i,n.changed=!0,e.setKeyValue("object-placement-arrow",i),t.animationLoop=function(){Ht(i.scale,.5,{x:1.2,y:.75,onComplete:function(){Ht(i.scale,.5,{x:.9,y:1.2,onComplete:t.animationLoop})}})},t.animationLoop(),i},this}function Gt(e,t,a){var o,n=this,i=e.x,r=e.y,s=window,l=s.gameObjects,d=s.TweenLite,c=d.to,u=d.delayedCall,h=l.getKeyValue("world"),m=l.getKeyValue("game-pixi-container"),y=l.getKeyValue("static-ground-effects"),g=l.getKeyValue("ground-fx-sheet"),f=["bullet-impact1.png","bullet-impact2.png"],b=["ground-blood-spatter1.png","ground-blood-spatter2.png","ground-blood-spatter3.png"];"bullet impact"===t&&(o=new p.h(g.textures[f[Math.floor(Math.random()*f.length)]])),"blood spatter"===t&&(o=new p.h(g.textures[b[Math.floor(Math.random()*b.length)]])),o.pivot.x=.5*o.width,o.pivot.y=o.height*(a?.2:.5);var w=l.getKeyValue("ground");o.position.x-o.width>w.bounds.min.x||(o.position.x,o.width,w.bounds.max.x);var x=l.getKeyValue("player");x.dead||x.sprites.forEach((function(e){m.addChild(e)}));var v=Oe.Bodies.rectangle(i,r,10,10,{isStatic:!0,collisionFilter:Ue});Oe.World.add(h,v),this.renderPosition=function(e){o.position=e(v),m&&-1===m.children.indexOf(o)&&m.addChild(o)},this.destroy=function(){Oe.World.remove(h,v),m.removeChild(o);var e=y.indexOf(n);e>-1&&y.splice(e,1),h=null,m=null,l=null,y=null,g=null,f=null,b=null,v=null};return u(1,(function(){c(o,.5,{alpha:0,onComplete:function(){n.destroy()}})})),this}var Nt,qt,Yt,Xt,Zt,$t,Jt,Qt,ea,ta,aa,oa,na,ia,ra,sa,la,da,pa,ca,ua,ha,ma,ya,ga,fa,ba,wa,xa,va,ka,Ea,Sa,Aa,Ca,Ba,_a,Va,Ka,Oa,Fa=a(119),ja=a(120),Ma=a(6),Ta=function(e){Object(ja.a)(a,e);var t=Object(Fa.a)(a);function a(){var e;Object(We.a)(this,a);var o=Ma.p.from(window.gameObjects.getKeyValue("wall-tile"));return(e=t.call(this,o,1,o.height)).width=window.gameObjects.getKeyValue("game-width"),e.height=window.gameObjects.getKeyValue("game-height"),e.alpha=.2,e}return Object(ct.a)(a,[{key:"onResize",value:function(e,t){}},{key:"onUpdate",value:function(e){this.tilePosition.x-=4*e}},{key:"renderPosition",value:function(e,t,a){var o=e(t),n=(o.x,o.y,(0,Ke.getState)().game),i=n.keys,r=n.player.variables,s=r.currentDirection,l=r.jumping;"right"===s&&i.indexOf(68)>-1&&(this.tilePosition.x-=.35),"left"===s&&i.indexOf(65)>-1&&(this.tilePosition.x+=.35),l&&(this.tilePosition.y+=.25)}}]),a}(a(35).a),Pa=a(47),La=Ke.getState,Da=Ke.dispatch,Ra=La().game,za=Ra.width,Wa=Ra.height,Ia=window.TweenLite.delayedCall,Ha=function(e,t,a){var o=a.body1_label,n=a.body2_label,i=a.callback,r={};e.pairs[t].bodyA.label.indexOf(o)>-1&&e.pairs[t].bodyB.label.indexOf(n)>-1?(r.body1=e.pairs[t].bodyA,r.body2=e.pairs[t].bodyB,i(r)):e.pairs[t].bodyB.label.indexOf(o)>-1&&e.pairs[t].bodyA.label.indexOf(n)>-1&&(r.body1=e.pairs[t].bodyB,r.body2=e.pairs[t].bodyA,i(r))},Ua=function(e,t){return"pistol weapon"===e?Ot(t):"smg weapon"===e?function(e){var t=Vt().game.player.weapons.damage["smg weapon"],a=t.min,o=t.max;return e.label.indexOf("body")>-1?{part:"torso",dmg:a}:e.label.indexOf("head")>-1?{part:"head",dmg:o}:void 0}(t):"shotgun weapon"===e?function(e){var t=Vt().game.player.weapons.damage["shotgun weapon"],a=t.min,o=t.max;return e.label.indexOf("body")>-1?{part:"torso",dmg:a}:e.label.indexOf("head")>-1?{part:"head",dmg:o}:void 0}(t):"turret weapon"===e?function(e){var t=Vt().game.player.weapons.damage["turret weapon"],a=t.min,o=t.max;return e.label.indexOf("body")>-1?{part:"torso",dmg:a}:e.label.indexOf("head")>-1?{part:"head",dmg:o}:void 0}(t):Ot(t)},Ga=function(e,t,a){Ha(e,t,{body1_label:"player character",body2_label:"ground",callback:function(){Da(U(!1));var e=a.getKeyValue("jump-landing-sound");e.seek(.1),e.play()}}),Ha(e,t,{body1_label:"player character",body2_label:"barrier",callback:function(){Da(U(!1));var e=a.getKeyValue("jump-landing-sound");e.seek(.1),e.play()}}),Ha(e,t,{body1_label:"gib",body2_label:"ground",callback:function(e){a.getKeyValue("static-ground-effects").push(new Gt(e.body1.position,"blood spatter"))}}),Ha(e,t,{body1_label:"zombie body part",body2_label:"ground",callback:function(e){a.getKeyValue("static-ground-effects").push(new Gt(e.body1.position,"blood spatter",!0))}}),Ha(e,t,{body1_label:"bullet",body2_label:"ground",callback:function(e){e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("ground")}}),Ha(e,t,{body1_label:"pistol shell",body2_label:"ground",callback:function(e){e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("ground"),a.getKeyValue("shell-impact-sound").play()}}),Ha(e,t,{body1_label:"smg shell",body2_label:"ground",callback:function(e){e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("ground"),a.getKeyValue("shell-impact-sound").play()}}),Ha(e,t,{body1_label:"bullet",body2_label:"player character",callback:function(e){e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy()}}),Ha(e,t,{body1_label:"grenade explosion",body2_label:"ground",callback:function(e){var t=a.getKeyValue("world");Oe.World.remove(t,e.body1)}}),Ha(e,t,{body1_label:"turret bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=Ua("turret weapon",e.body2),a=t.part,o=t.dmg;e.body2.main.takeDamage(o,a)}}}),Ha(e,t,{body1_label:"pistol bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=Ua("pistol weapon",e.body2),o=t.part,n=t.dmg;e.body2.main.takeDamage(n,o)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Ha(e,t,{body1_label:"smg bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=Ua("smg weapon",e.body2),o=t.part,n=t.dmg;e.body2.main.takeDamage(n,o)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Ha(e,t,{body1_label:"shotgun bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=Ua("shotgun weapon",e.body2),o=t.part,n=t.dmg;e.body2.main.takeDamage(n,o)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Ha(e,t,{body1_label:"extra damage bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=La().game.player.weapons.damage[La().game.player.weapons.equipped].max;e.body2.main.takeDamage(3*t,"head","critical")}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Ha(e,t,{body1_label:"magazine",body2_label:"ground",callback:function(e){a.getKeyValue("mag-drop-sound").play()}}),Ha(e,t,{body1_label:"magazine",body2_label:"enemy",callback:function(e){e.body2.main&&e.body2.main.takeDamage&&e.body2.main.takeDamage(20,"head"),a.getKeyValue("spark-sprites").push(new Dt(1,e.body2,{tint:16741632})),a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Ha(e,t,{body1_label:"melee hitbox",body2_label:"enemy zombie body",callback:function(e){a.getKeyValue("spark-sprites").push(new Dt(1,e.body2,{tint:16711680})),a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Ha(e,t,{body1_label:"melee hitbox pistol",body2_label:"enemy",callback:function(e){if(e.body2.main&&e.body2.main.takeDamage){var t=La().game.player.weapons.meleeDamage["pistol weapon"];e.body1.main.removeMeleeHitbox(),e.body2.main.takeDamage(t)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Ha(e,t,{body1_label:"melee hitbox smg",body2_label:"enemy",callback:function(e){if(e.body2.main&&e.body2.main.takeDamage){var t=La().game.player.weapons.meleeDamage["smg weapon"];e.body1.main.removeMeleeHitbox(),e.body2.main.takeDamage(t)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Ha(e,t,{body1_label:"melee hitbox shotgun",body2_label:"enemy",callback:function(e){if(e.body2.main&&e.body2.main.takeDamage){var t=La().game.player.weapons.meleeDamage["shotgun weapon"];e.body1.main.removeMeleeHitbox(),e.body2.main.takeDamage(t)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),Ha(e,t,{body1_label:"clustermine trap",body2_label:"enemy",callback:function(e){e.body1.destroy&&e.body1.destroy(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill()}}),Ha(e,t,{body1_label:"clustermine explosion",body2_label:"enemy",callback:function(e){e.body1.removeSelf(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill()}}),Ha(e,t,{body1_label:"landmine trap",body2_label:"enemy",callback:function(e){e.body1.destroy&&e.body1.destroy(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill()}}),Ha(e,t,{body1_label:"landmine explosion",body2_label:"enemy",callback:function(e){e.body1.removeSelf(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill()}}),Ha(e,t,{body1_label:"barrel explosion",body2_label:"enemy",callback:function(e){e.body1.removeSelf(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill()}}),Ha(e,t,{body1_label:"grenade explosion",body2_label:"enemy",callback:function(e){e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill()}}),Ha(e,t,{body1_label:"pistol bullet",body2_label:"grenade",callback:function(e){e.body2.main&&e.body2.main.explode&&e.body2.main.explode()}}),Ha(e,t,{body1_label:"smg bullet",body2_label:"grenade",callback:function(e){e.body2.main&&e.body2.main.explode&&e.body2.main.explode()}}),Ha(e,t,{body1_label:"shotgun bullet",body2_label:"grenade",callback:function(e){e.body2.main&&e.body2.main.explode&&e.body2.main.explode()}}),Ha(e,t,{body1_label:"enemy",body2_label:"grenade",callback:function(e){e.body2.main&&e.body2.main.explode&&Ia(.1,(function(){e.body2.main.explode()}))}}),Ha(e,t,{body1_label:"player character",body2_label:"attack",callback:function(e){if(e.body1.main&&e.body1.main.takeDamage){var t=La().game.enemies.zombies.attackDmg,a=e.body1.main;a.playerHit||a.takeDamage(t)}}}),Ha(e,t,{body1_label:"explosive barrier",body2_label:"bullet",callback:function(e){var t=La().game.enemies.zombies.attackDmg;e.body1.main&&e.body1.main.takeDamage(t),e.body1.strength<0&&e.body1.removeSelf(),a.getKeyValue("spark-sprites").push(new Dt(1,e.body2,{scale:.5,animationSpeed:2}))}}),Ha(e,t,{body1_label:"barrier",body2_label:"attack",callback:function(e){var t=La().game.enemies.zombies.attackDmg;e.body1.main&&e.body1.main.takeDamage(t),e.body1.strength<0&&e.body1.removeSelf()}}),Ha(e,t,{body1_label:"player character",body2_label:"health drop",callback:function(e){(e.body2.main.destroy&&e.body2.main.destroy(),e.body1.main&&e.body1.main.collectHealth)&&($t.collectHealth(e.body2.amount),a.getKeyValue("spark-sprites").push(new Dt(1,e.body2,{scale:.5,animationSpeed:.75})),a.getKeyValue("health-pickup-sound").play())}}),Ha(e,t,{body1_label:"player character",body2_label:"ammo drop",callback:function(e){(e.body2.main.destroy&&e.body2.main.destroy(),e.body1.main&&e.body1.main.collectAmmo)&&($t.collectAmmo(e.body2.ammo_type,e.body2.amount),a.getKeyValue("spark-sprites").push(new Dt(1,e.body2,{scale:.5,animationSpeed:.75})),a.getKeyValue("ammo-collect-sound").play())}}),Ha(e,t,{body1_label:"player character",body2_label:"currency drop",callback:function(e){(e.body2.main.destroy&&e.body2.main.destroy(),e.body1.main&&e.body1.main.collectCredits)&&($t.collectCredits(e.body2.amount),a.getKeyValue("spark-sprites").push(new Dt(1,e.body2,{scale:.5,animationSpeed:.75})),a.getKeyValue("coin-collect-sound").play())}}),Ha(e,t,{body1_label:"ground",body2_label:"shotgun shell",callback:function(e){var t=a.getKeyValue("shot-shell-sound");t.play(),t.fade(1,0,200)}}),Ha(e,t,{body1_label:"ground",body2_label:"grenade",callback:function(e){var t=a.getKeyValue("grenade-clink-sound");t.play(),t.fade(1,0,500)}})},Na=!1;(new p.k.BlurFilter).blur=3;var qa=function(e){return{fill:0===e?"#00e595":"#FF0000",fontSize:12}},Ya=function(e,t){if(!Na){ka=t.getKeyValue("container"),Ea=t.getKeyValue("game-width"),Nt=t.getKeyValue("weapons-ui"),qt=t.getKeyValue("render"),Yt=t.getKeyValue("ground-texture"),Xt=t.getKeyValue("ground"),Zt=t.getKeyValue("static-ground-effects"),Jt=Re("body",t),Qt=La().game.player.variables.acceleration.min,na=t.getKeyValue("pistol-shells"),ea=t.getKeyValue("pistol-bullets"),oa=t.getKeyValue("bullet-impacts"),sa=t.getKeyValue("ammo-drops-by-type"),ca=t.getKeyValue("currency-drops"),Ka=t.getKeyValue("health-drops"),la=sa["pistol weapon"],da=sa["smg weapon"],pa=sa["shotgun weapon"],ha=new Ut(t),ua=ha.crosshair,t.setKeyValue("crosshair-shape",ha.crosshair),t.setKeyValue("crosshair",ua),(Ca=new p.i("")).position={x:10,y:5},(Ba=new p.i("zombies on right: 0")).pivot.x=.075*Ba.width,Ba.position={x:Ea,y:5},$t=t.getKeyValue("player"),ma=t.getKeyValue("zombies"),ya=t.getKeyValue("zombie-ragdolls"),fa=t.getKeyValue("gibs"),ba=t.getKeyValue("grenades"),wa=t.getKeyValue("explosions"),xa=t.getKeyValue("rocks"),va=t.getKeyValue("wood-planks"),t.getKeyValue("landmines"),ga=t.getKeyValue("build-objects"),_a=t.getKeyValue("explosion-sprites"),Va=t.getKeyValue("spark-sprites"),ka=t.getKeyValue("game-pixi-container"),Oa=new Ta;var a=t.getKeyValue("gradient-alpha");a.alpha=.75,ka.addChild(Oa,a,Yt),$t.addSpritesInOrder(),ka.addChild(Ca),ka.addChild(Ba),Na=!0}var o=La().game,n=o.keys,i=o.gameState,r=o.gameSubState,s=o.mouseState,l=o.mousePosition,d=o.player,c=d.variables,u=c.magnetism,h=c.magnetismSpeed,m=c.currentDirection,y=c.jumping,g=c.acceleration.max,b=c.deceleration,k=d.weapons,E=(k.laser,k.equipped),S=k.totalAmmo.grenades,A=o.enemies.zombies,C=A.zombieAttackLimiter,B=A.zombieAttackDistance,_=o.traps.turret.fireDistance,V=o.mouseState,K=V.x,O=V.y,F=V.btn,j={x:l.x+Jt.position.x-za/2,y:l.y+Jt.position.y-Wa/2};Da($({x:j.x,y:j.y}));var M=function(e){return{x:e.position.x-Jt.position.x+za/2+("right"===m?Qt:-Qt),y:e.position.y-Jt.position.y+Wa/2,rotation:e.angle}};if(i===v.GAMEPLAY){Oa.renderPosition(M,Jt,Qt),"mouse down"!==F||$t.meleeAttackInProgress||$t.grenadeThrowInProgress||("pistol weapon"===E&&function(e){Tt(e)}(t),"smg weapon"===E&&function(e){Tt(e)}(t),"shotgun weapon"===E&&function(e){Tt(e)}(t)),Oe.Render.lookAt(qt,{min:{x:Jt.position.x+za/2,y:Jt.position.y-Wa/2},max:{x:Jt.position.x-za/2,y:Jt.position.y+Wa/2}}),Oe.Body.setAngle(Jt,0),Nt.reloading||$t.meleeAttackInProgress||$t.grenadeThrowInProgress||(n.indexOf(68)>-1||n.indexOf(65)>-1?Qt<g&&(Qt+=.25):(Da(I(m)),Qt>0&&(Qt-=b)),n.indexOf(68)>-1&&n.indexOf(65)>-1&&Qt>0&&(Qt-=b),n.indexOf(68)>-1&&(Da(H("right")),Oe.Body.translate(Jt,{x:Qt,y:0})),n.indexOf(65)>-1&&(Da(H("left")),Oe.Body.translate(Jt,{x:-Qt,y:0})),n.indexOf(71)>-1&&S>0&&$t&&!$t.meleeAttackInProgress&&!Nt.reloading&&r!==w&&r!==x&&$t.chargeGrenade(),La().game.rightMouseDown&&S>0&&$t&&!$t.meleeAttackInProgress&&!Nt.reloading&&!y&&r!==w&&r!==x&&($t.chargeGrenade(),console.log("should charge grenade from engineHandlers")));var T=M(Jt),P=T.x,L=T.y;if(Da(pe({x:P,y:L})),Ka.forEach((function(e){e.renderPosition(M)})),la.concat(da).concat(pa).forEach((function(e){e.positionAmmoBox(M),e.body&&e.body.position.y>500&&e.destroy(),e.body&&(Jt.position.x>e.body.position.x&&Jt.position.x-e.body.position.x<u&&Oe.Body.translate(e.body,{x:h,y:0}),Jt.position.x<e.body.position.x&&e.body.position.x-Jt.position.x<u&&Oe.Body.translate(e.body,{x:-h,y:0}))})),ca.forEach((function(e){e.positionCreditGfx(M),e.creditBody&&e.creditBody.position.y>500&&e.destroy(),e.creditBody&&(Jt.position.x>e.creditBody.position.x&&Jt.position.x-e.creditBody.position.x<u&&(Jt.position.x>e.creditBody.position.x&&Jt.position.x-e.creditBody.position.x<u/2?Oe.Body.translate(e.creditBody,{x:2*h,y:0}):Oe.Body.translate(e.creditBody,{x:h,y:0})),Jt.position.x<e.creditBody.position.x&&e.creditBody.position.x-Jt.position.x<u&&(Jt.position.x<e.creditBody.position.x&&e.creditBody.position.x-Jt.position.x<u/2?Oe.Body.translate(e.creditBody,{x:-2*h,y:0}):Oe.Body.translate(e.creditBody,{x:-h,y:0})))})),$t.setBodySpritesPositions({mx:K,fn:M}),$t.setArmsSpritePosition({mx:K,my:O,fn:M}),$t.positionHeadSprite({mx:K,my:O,fn:M}),$t.renderGrenadeChargeMeter(M),$t.charRunSprite&&$t.charIdleSprite&&$t.charJumpSprite&&(n.indexOf(65)>-1||n.indexOf(68)>-1?y||($t.charRunSprite.play(),$t.charRunSprite.visible=!0,$t.charIdleSprite.visible=!1,$t.stopJumpAnimation()):($t.charRunSprite.stop(),$t.charRunSprite.visible=!1,$t.charIdleSprite.visible=!0,$t.armsSprites.forEach((function(e){e.visible=!1})),$t.reloadAnims.forEach((function(e){e.visible=!1}))),n.indexOf(65)>-1&&s.x===He||n.indexOf(68)>-1&&"less than player x position"===s.x?$t.charRunSprite.animationSpeed=-1:$t.charRunSprite.animationSpeed=1,s.x===He?($t.bodySprites.forEach((function(e){e.scale.x=-1})),$t.armsSprites.forEach((function(e){e.scale.y=-1})),$t.headSprite.scale.y=-1):($t.bodySprites.forEach((function(e){e.scale.x=1})),$t.armsSprites.forEach((function(e){e.scale.y=1})),$t.headSprite.scale.y=1),Nt.reloading?($t.bodySprites.forEach((function(e){e.visible=!1})),$t.armsSprites.forEach((function(e){e.visible=!1})),$t.reloadAnimsByType[E].visible=!0,$t.charIdleSprite.visible=!1):$t.armsSpritesByType[E]&&($t.armsSprites.forEach((function(e){e.visible=!1})),$t.armsSpritesByType[E].forEach((function(e){e.visible=!0})),$t.reloadAnimsByType[E].visible=!1),y||Nt.reloading||$t.meleeAttackInProgress||$t.grenadeThrowInProgress?$t.headSprite.visible=!1:$t.headSprite.visible=!0,y?($t.charIdleSprite.visible=!1,$t.charJumpSprite.currentFrame<2&&$t.armsSpritesByType[E].forEach((function(e){e.y+=80}))):$t.stopJumpAnimation(),$t.meleeAttackInProgress&&($t.armsSprites.forEach((function(e){e.visible=!1})),$t.bodySprites.forEach((function(e){$t.meleeSprites.indexOf(e)<0&&(e.visible=!1)}))),$t.grenadeThrowInProgress&&($t.armsSprites.forEach((function(e){e.visible=!1})),$t.bodySprites.forEach((function(e){$t.grenadeSprites.indexOf(e)<0&&(e.visible=!1)})))),null!==t.getKeyValue("player-ragdoll")){var D=t.getKeyValue("player-ragdoll");D&&D.animateRagParts&&D.animateRagParts(M)}}$t.body.position.y>500&&$t.kill(lt);for(var R=0;R<na.length;++R)ia||(ia=Le(na[R].body)),ra||(ra=De(na[R].body)),na[R].gfc.position.x=na[R].body.position.x-Jt.position.x+za/2+("right"===m?Qt:-Qt),na[R].gfc.position.y=na[R].body.position.y-Jt.position.y+Wa/2,na[R].gfc.rotation="shotgun weapon"===E?na[R].body.angle+Object(Ie.degrees)(90):na[R].body.angle;for(var z=0;z<ea.length;++z)ta||(ta=Le(ea[z].body)),aa||(aa=De(ea[z].body)),ea[z].gfc.position.x=ea[z].body.position.x-Jt.position.x+za/2+("right"===m?Qt:-Qt),ea[z].gfc.position.y=ea[z].body.position.y-Jt.position.y+Wa/2,ea[z].gfc.rotation=ea[z].body.angle;ba.forEach((function(e){e.animate(M)})),wa.forEach((function(e){e.calcRenderedPosition(M)})),xa.forEach((function(e){e.animate(M)})),va.forEach((function(e){e.animate(M)})),$t.updateEjectedMagPositions(M),fa.forEach((function(e){e.animate(M)})),Sa=0,Aa=0,ma.forEach((function(e){e.setPlayerVars({player:$t,playerDirection:m,playerBody:Jt}),e.paused||e.walk(),Oe.Body.setAngle(e.body,0),e.setSpritesPositions(M),e.body.position.y>500&&e.kill(),(Jt.position.x>e.body.position.x&&Jt.position.x-e.body.position.x<B||Jt.position.x<e.body.position.x&&e.body.position.x-Jt.position.x<B)&&e.timeSinceLastAttack+C<Date.now()&&e.attack(),ga.forEach((function(t){t&&!t.destroyed&&"remote mine trap"!==t.getBody().label&&((t.getBody().position.x>e.body.position.x&&t.getBody().position.x-e.body.position.x<B||t.getBody().position.x<e.body.position.x&&e.body.position.x-t.getBody().position.x<B)&&e.timeSinceLastAttack+C<Date.now()&&"landmine trap"!==t.getBody().label&&e.attack(),(t.direction&&"right"===t.direction&&e.body.position.x>t.getBody().position.x-10&&e.body.position.x-t.getBody().position.x<_||t.direction&&"left"===t.direction&&e.body.position.x<t.getBody().position.x-10&&t.getBody().position.x-e.body.position.x<_)&&t.shoot())})),e.dead||(e.body.position.x<Jt.position.x&&(Sa+=1),e.body.position.x>Jt.position.x&&(Aa+=1))})),ga.forEach((function(e){e&&!e.destroyed&&e.displayBarrierStrength&&e.displayBarrierStrength(M),e.updatePosition&&e.updatePosition(M)})),0!==La().game.waveCountToDefeat&&null!==La().game.waveCountToDefeat||(Sa=0,Aa=0),Ca.text="".concat(Sa),Ca.style=qa(Sa),Ba.text="".concat(Aa),Ba.style=qa(Aa),ya.forEach((function(e){e.animateRagParts(M)})),r!==f&&(ua.position=l),ua.changed&&((ua=ua._new).changed=!1),ua.changeBack&&(ka.removeChild(ua),ua=ha.crosshair,ka.addChild(ha.crosshair),ua.changeBack=!1),Yt.position=M(Xt),oa.forEach((function(e){e.renderPosition(M)})),Zt.forEach((function(e){e.renderPosition(M)})),_a.forEach((function(e){e.renderPosition(M)})),Va.forEach((function(e){e.renderPosition(M)})),ka.addChild(ha.crosshair)},Xa=Ke.getState,Za=Ke.dispatch,$a=window.TweenLite,Ja=$a.to,Qa=$a.from;function eo(){var e,t=this,a=window.gameObjects,o=a.getKeyValue("game-pixi-container"),n=a.getKeyValue("game-width"),i=a.getKeyValue("game-height"),r=Pe("weapon-ui-icon-pistol"),s=Pe("weapon-ui-icon-smg"),l=Pe("weapon-ui-icon-shotgun"),d=[],c=(new Pa.a({distance:3,alpha:1}),new Pa.a({distance:1,alpha:2}),new p.f);c.beginFill(4345921),c.drawRect(0,0,120,90),c.alpha=.65,c.position.x=n-c.width-20,c.position.y=i-c.height-20,o.addChild(c),r.width=r.width/2,r.height=r.height/2,d.push(r),s.width=s.width/2,s.height=s.height/2,d.push(s),l.width=l.width/2,l.height=l.height/2,d.push(l),d.forEach((function(e){e.position.x=n-(e.width+20),e.position.y=i-(e.height+10),e.alpha=0,o.addChild(e)})),this.keepOnTop=function(){o.addChild(c),d.forEach((function(e){o.addChild(e)})),u["pistol weapon"].concat(u["smg weapon"]).concat(u["shotgun weapon"]).forEach((function(e){o.addChild(e)})),t.grenades.forEach((function(e){o.addChild(e)})),t.shaking&&!t.reloading&&o.addChild(t.emptyText)},setInterval(this.keepOnTop,1e3);var u={"pistol weapon":null,"smg weapon":null,"shotgun weapon":null},h=new p.f;h.beginFill(16777215),h.drawRect(r.position.x,r.position.y,r.width,r.height),o.addChild(h),window.gameObjects.getKeyValue("bullet-shell-bevel-ui")||window.gameObjects.setKeyValue("bullet-shell-bevel-ui",new vt.a({lightAlpha:.5,shadowAlpha:.5,thickness:.5}));var m=window.gameObjects.getKeyValue("bullet-shell-bevel-ui");this.checkFilters=function(){Xa().game.filterEffects?(u["pistol weapon"].forEach((function(e){e.filters=[m]})),u["shotgun weapon"].forEach((function(e){e.filters=[m]})),t.grenades&&t.gbevel&&t.gnoise&&t.grenades.forEach((function(e){e.filters=[t.gbevel,t.gnoise]}))):(u["pistol weapon"].forEach((function(e){e.filters=[]})),u["shotgun weapon"].forEach((function(e){e.filters=[]})),t.grenades&&t.grenades.forEach((function(e){e.filters=[]})))};var y={"pistol weapon":function(){u["pistol weapon"]=u["pistol weapon"].map((function(e,t){var a=new p.f;return a.lineStyle(1,5656365),a.beginFill(12559650),a.drawRect(0,0,4,8),a.filters=Xa().game.filterEffects?[m]:[],a.alpha=0,a.position.x=n-27-r.width/u["pistol weapon"].length*t,a.position.y=r.position.y+r.height-22,o.addChild(a),a.mask=h,a}))},"smg weapon":function(){u["smg weapon"]=u["smg weapon"].map((function(e,t){var a=new p.f;return a.lineStyle(1,5656365),a.beginFill(13549954),a.drawRect(0,0,2,8),a.alpha=0,a.position.x=n-24-s.width/u["smg weapon"].length*t,a.position.y=s.position.y+s.height-22,o.addChild(a),a.mask=h,a}))},"shotgun weapon":function(){u["shotgun weapon"]=u["shotgun weapon"].map((function(e,t){var a=new p.f;return a.lineStyle(1,4068115),a.beginFill(11534336),a.drawRect(0,0,4,8),a.beginFill(12363845),a.drawRect(0,8,4,3),a.filters=Xa().game.filterEffects?[m]:[],a.alpha=0,a.position.x=n-32-l.width/u["shotgun weapon"].length*t,a.position.y=l.position.y+l.height-26,o.addChild(a),a.mask=h,a}))}},g={"pistol weapon":r,"smg weapon":s,"shotgun weapon":l};this.updateMagazine=function(e){var t=Xa().game.player.weapons.ammoCapacity;u[e]&&(u[e].forEach((function(e){e.destroy()})),u[e]=null),u[e]=new Array(t[e]).fill(1),y[e]()},this.updateMagazine("pistol weapon"),this.updateMagazine("smg weapon"),this.updateMagazine("shotgun weapon"),e=[u["pistol weapon"],u["smg weapon"],u["shotgun weapon"]],this.swapSwap=function(e){var a=Xa().game.player.weapons,o=a.list,n=a.equipped;f[e]=0;var i=o.indexOf(e);i>-1&&t.select(o[i+1]?o[i+1]:o[0]),window.TweenLite.delayedCall(.05,(function(){t.select(n)}))},this.updateWeaponMagazines=function(a){var n=Xa().game.player.weapons.list;e.forEach((function(e){e.forEach((function(e){o.removeChild(e)}))})),n.forEach((function(e){t.updateMagazine(e)})),e=[u["pistol weapon"],u["smg weapon"],u["shotgun weapon"]],t.reload(!0),Za(Z(a)),t.swapSwap(a)};var f={"pistol weapon":0,"smg weapon":0,"shotgun weapon":0},b={"pistol weapon":!1,"smg weapon":!1,"shotgun weapon":!1};this.checkEmpty=function(e){return b[e]};var w=function(e,a,o){Ja(e,.1,{x:a+10,onComplete:function(){Ja(e,.1,{x:a-10,onComplete:function(){Ja(e,.1,{x:a+5,onComplete:function(){Ja(e,.1,{x:a-5,onComplete:function(){Ja(e,.1,{x:a+3,onComplete:function(){Ja(e,.1,{x:a-2,onComplete:function(){Ja(e,.1,{x:a+1,onComplete:function(){Ja(e,.1,{x:a,onComplete:function(){t.shaking=!1,o()}})}})}})}})}})}})}})}})};this.textForEmptyShake="RELOAD",this.changeTextForEmptyShake=function(e){t.textForEmptyShake=e,t.emptyText.text=e},this.emptyText=new p.i(this.textForEmptyShake,{fill:11534336,fontSize:"15px",fontWeight:"bold"}),this.emptyText.pivot.x=.5*this.emptyText.width,this.emptyText.pivot.y=.5*this.emptyText.height,this.emptyText.position.x=c.position.x+.5*c.width,this.emptyText.position.y=c.position.y+.8*c.height,this.removeEmptyText=function(){o.removeChild(t.emptyText)},this.shaking=!1,this.emptyMagShake=function(){o.addChild(t.emptyText),t.shaking||(t.shaking=!0,d.forEach((function(e){var a=e.position.x;w(e,a,t.removeEmptyText)})),w(c,c.position.x,t.removeEmptyText))},this.reloading=!1,this.reload=function(e){t.reloading&&!e||function(){var a=Xa().game.player.weapons,o=a.reloadAnimationFrames,i=a.equipped,r=a.totalAmmo;if(t.removeEmptyText(),0!==f[i]&&0!==r[i]||e){e&&(f[i]=0),t.reloading=!0;var s=r[i]<u[i].length;u[i].forEach((function(e,t){e.alpha=0}));for(var l=function(a,s){var l=u[i][a];l.alpha=1,Qa(l,o[i]/60,{x:n-l.width*a,onComplete:function(a){a===s-1&&(f[i]=0,b[i]=!1,t.lastBulletByWepType[i]=!1,e&&(t.reloading=!1)),0===r[i]&&(t.reloading=!1)},onCompleteParams:[a]})},d=0,p=s?r[i]:u[i].length;d<p;++d)l(d,p)}}()},this.select=function(t){var a=Xa().game.player.weapons,o=a.totalAmmo,n=a.equipped;d.forEach((function(e){e.alpha=0})),e.forEach((function(e){e.forEach((function(e){e&&e.hasOwnProperty("alpha")&&(e.alpha=0)}))})),g[t||n].alpha=1;var i=o[t||n]<u[t||n].length;if(0!==o[t||n]){var r=i?o[t||n]:u[t||n].length-f[t||n],s=i?u[t||n].length-o[t||n]:0;i&&(f[t||n]=s);for(var l=0;l<r;++l)u[t||n][u[t||n].length-1-l].alpha=1}b[n]&&u[n].forEach((function(e){t||(e.alpha=0)}))},this.lastBulletByWepType={"pistol weapon":!1,"smg weapon":!1,"shotgun weapon":!1},this.fireBullet=function(e){u[e][f[e]]&&(u[e][f[e]].alpha=0,f[e]++,Za(re(e)),u[e].length===f[e]&&(t.lastBulletByWepType[e]=!0),u[e].length===f[e]&&(b[e]=!0))};var x=function(){t.gbevel=new vt.a,t.gnoise=new kt.a,t.gbevel.shadowAlpha=.45,t.gbevel.lightAlpha=.35,t.gbevel.thickness=5,t.gbevel.shadowColor=0,t.gbevel.lightColor=2133060,t.gnoise.noise=.1,t.gnoise.seed=.5;var e=new p.f;return e.lineStyle(1,0),e.beginFill(2049836),e.drawCircle(0,0,6),e.filters=Xa().game.filterEffects?[t.gbevel,t.gnoise]:[],o.addChild(e),e};return this.grenades=[],this.updateGrenadeIcons=function(){t.grenades&&t.grenades.forEach((function(e){e.destroy()})),t.grenades=[];for(var e=Xa().game.player.weapons.totalAmmo.grenades,a=0;a<e;++a){var o=x();t.grenades.push(o)}t.grenades.forEach((function(e,t){e.position.x=Xa().game.width-25-1.5*e.width*t,e.position.y=Xa().game.height-110-e.height,Qa(e,.1*t,{y:e.position.y-10,alpha:0})}))},this.updateGrenadeIcons(),this}function to(e,t,a){var o=this,n=p.k.BlurFilter,i=window.gameObjects,r=i.getKeyValue("game-pixi-container"),s=i.getKeyValue("ammo-drops-by-type"),l={"pistol weapon":152831,"smg weapon":16751874,"shotgun weapon":10821921},d={x:e.x,y:e.y,w:50,h:20},c=Oe.Bodies.rectangle(d.x,d.y,d.w,d.h,{collisionFilter:Ne});c.label="ammo drop",c.ammo_type=t,c.amount=a;var u=i.getKeyValue("world");Oe.World.add(u,c),c.main=this;var h=new p.e,m=new p.f;m.beginFill(l[t]),m.drawRect(0,0,d.w,d.h),m.pivot.x=.5*m.width,m.pivot.y=.5*m.height;var y,g,f=new vt.a;f.thickness=5,f.lightColor=16777215,f.lightAlpha=.25,f.shadowColor=0,f.shadowAlpha=.25,m.filters=Ke.getState().game.filterEffects?[f]:[],(y=new p.f).beginFill(0),y.drawRect(0,d.h/2,d.w,d.h/2),y.pivot.x=.5*y.width,y.pivot.y=.5*y.height,g=new n(5,3),y.alpha=.85,y.filters=Ke.getState().game.filterEffects?[g]:[];var b=new p.f;b.beginFill(l[t]),b.drawRect(0,0,d.w,d.h),b.pivot.x=.5*b.width,b.pivot.y=.5*b.height,y.mask=b,Ke.getState().game.filterEffects?h.addChild(m,y,b):h.addChild(m,b);var w=new p.i({"pistol weapon":"PISTOL","smg weapon":"SMG","shotgun weapon":"SHOTGUN"}[t],{fontSize:"9px",fill:"#FFF",fontWeight:"bold"});w.pivot.x=.5*w.width,w.pivot.y=.5*w.height;var x=new yt.a;return x.color=0,x.outerStrength=1,w.filters=Ke.getState().game.filterEffects?[x]:[],h.addChild(w),this.gfc=h,this.body=c,this.checkFilters=function(){Ke.getState().game.filterEffects?(h.addChild(y,w),m.filters=[f],y.filters=[g],w.filters=[x]):(h.children.indexOf(y)>-1&&h.removeChild(y),m.filters=[],y.filters=[],w.filters=[])},this.destroy=function(){var e=s[t].indexOf(o);e>-1&&s[t].splice(e,1),h.destroy(),Oe.World.remove(u,c)},s[t].push(this),this.positionAmmoBox=function(e){var t=e(c),a=t.x,n=t.y,i=t.rotation;h.position={x:a,y:n},h.rotation=i,r&&-1===r.children.indexOf(o.gfc)&&r.addChild(h)},this}function ao(e,t,a){var o,n,i,r=this,s=e.x,l=e.y,d=Ke.dispatch,c=Ke.getState,u=window.TweenLite,h=u.delayedCall,m=u.to,y=window.gameObjects;o||(o=y.getKeyValue("world")),n||(n=y.getKeyValue("game-pixi-container")),i||(i=y.getKeyValue("zombie-ragdolls")),y.getKeyValue("death-rip-sound").play(),y.getKeyValue("zombie-death-sound").play();var g=40,f=90,b=20,w=30,x=15,v=40,k=15,E=40,S=15,A=35,C=15,B=35,_=Oe.Bodies.rectangle(s,l,g,f,{collisionFilter:Ue}),V=Oe.Bodies.rectangle(s,l,b,w,{collisionFilter:Ue}),K=Oe.Bodies.rectangle(s,l,x,v,{collisionFilter:Ue}),O=Oe.Bodies.rectangle(s,l,x,v,{collisionFilter:Ue}),F=Oe.Bodies.rectangle(s,l,S,A,{collisionFilter:Ue}),j=Oe.Bodies.rectangle(s,l,x,v,{collisionFilter:Ue}),M=Oe.Bodies.rectangle(s,l,x,v,{collisionFilter:Ue}),T=Oe.Bodies.rectangle(s,l,S,A,{collisionFilter:Ue}),P=Oe.Bodies.rectangle(s,l,k,E,{collisionFilter:Ue}),L=Oe.Bodies.rectangle(s,l,k,E,{collisionFilter:Ue}),D=Oe.Bodies.rectangle(s,l,k,E,{collisionFilter:Ue}),R=Oe.Bodies.rectangle(s,l,k,E,{collisionFilter:Ue}),z=Oe.Bodies.rectangle(s,l,C,B,{collisionFilter:Ue}),W=Oe.Bodies.rectangle(s,l,C,B,{collisionFilter:Ue}),I=Oe.Constraint.create({bodyA:_,bodyB:V,pointA:{x:0,y:-f/2},pointB:{x:0,y:w/2},length:1}),H=Oe.Constraint.create({bodyA:_,bodyB:K,pointA:{x:-g/4,y:-f/2+10},pointB:{x:0,y:-v/2},length:2}),U=Oe.Constraint.create({bodyA:_,bodyB:O,pointA:{x:0,y:-f/2+10},pointB:{x:0,y:-v/2},length:2}),G=Oe.Constraint.create({bodyA:K,bodyB:j,pointA:{x:0,y:v/2},pointB:{x:0,y:-v/2},length:2}),N=Oe.Constraint.create({bodyA:O,bodyB:M,pointA:{x:0,y:v/2},pointB:{x:0,y:-v/2},length:2}),q=Oe.Constraint.create({bodyA:j,bodyB:F,pointA:{x:0,y:v/2},pointB:{x:0,y:-A/2},length:1}),Y=Oe.Constraint.create({bodyA:M,bodyB:T,pointA:{x:0,y:v/2},pointB:{x:0,y:-A/2},length:1}),X=Oe.Constraint.create({bodyA:_,bodyB:P,pointA:{x:-g/4,y:f/2},pointB:{x:0,y:-E/2},length:2}),Z=Oe.Constraint.create({bodyA:_,bodyB:L,pointA:{x:0,y:f/2},pointB:{x:0,y:-E/2},length:2}),$=Oe.Constraint.create({bodyA:P,bodyB:D,pointA:{x:0,y:E/2},pointB:{x:0,y:-E/2},length:2}),J=Oe.Constraint.create({bodyA:L,bodyB:R,pointA:{x:0,y:E/2},pointB:{x:0,y:-E/2},length:2}),Q=Oe.Constraint.create({bodyA:D,bodyB:z,pointA:{x:0,y:E/2},pointB:{x:0,y:-B/2},length:1}),ee=Oe.Constraint.create({bodyA:R,bodyB:W,pointA:{x:0,y:E/2},pointB:{x:0,y:-B/2},length:1});this.composite=Oe.Composite.create(),this.bodies=[V,K,O,j,M,P,L,D,R,z,W],this.bodies.forEach((function(e){e.label="zombie body part"})),_.label="torso",Oe.Composite.add(this.composite,[V,_,K,O,j,M,P,L,D,R,F,T,z,W,I,q,Y,Q,ee,H,U,G,N,X,Z,$,J]),this.constraints=[I,q,Y,Q,ee,H,U,G,N,X,Z,$,J],Oe.World.add(o,this.composite),Oe.Body.applyForce(_,_.position,t),this.bodies.forEach((function(e){Oe.Body.applyForce(e,e.position,{x:je.a.float(-.01,-.05),y:je.a.float(-.01,-.05)})})),i.push(this);var te=y.getKeyValue("zombie-parts-gored-sheet"),ae=new p.h(te.textures[function(){var e=["skull_gored.png","skull_gored2.png","skull_gored3.png"];return e[Math.floor(Math.random()*e.length)]}()]);ae._id="skull";var oe=new p.h(te.textures["torso_whole_gored.png"]);oe._id="torso";var ie=[],re=new p.h(te.textures["rear_leg_lower_gored.png"]);re._id="leg 2",ie.push(re);var se=new p.h(te.textures["rear_arm_hand_gored.png"]);se._id="hand 2",ie.push(se);var le=new p.h(te.textures["rear_arm_forearm_gored.png"]);le._id="arm 2",ie.push(le);var de=new p.h(te.textures["rear_arm_upper_gored.png"]);de._id="limb",ie.push(de);var pe=new p.h(te.textures["rear_leg_upper_gored.png"]);pe._id="limb",ie.push(pe);var ce=new p.h(te.textures["rear_leg_foot_gored.png"]);ce._id="foot 2",ie.push(ce),ie.push(oe,ae);var ue=new p.h(te.textures["front_leg_lower_gored.png"]);ue._id="leg 1",ie.push(ue);var he=new p.h(te.textures["front_arm_hand_gored.png"]);he._id="hand 1",ie.push(he);var me=new p.h(te.textures["front_arm_forearm_gored.png"]);me._id="arm 1",ie.push(me);var ye=new p.h(te.textures["front_arm_upper_gored.png"]);ye._id="limb",ie.push(ye);var ge=new p.h(te.textures["front_arm_upper_gored.png"]);ge._id="limb",ie.push(ge);var fe=new p.h(te.textures["front_leg_foot_gored.png"]);fe._id="foot 1",ie.push(fe),ie.forEach((function(e){e.updateAnchor=!0,e.pivot.x=.5*e.width,e.pivot.y=.5*e.height,n.addChild(e)})),this.head=V,this.bodyUpper=_,this.armUpperL=K,this.armUpperR=O,this.armLowerL=j,this.armLowerR=M,this.legUpperL=P,this.legUpperR=L,this.legLowerL=D,this.legLowerR=R,this.handL=F,this.handR=T,this.footL=z,this.footR=W;var be=t?t.x<0?{x:-.002}:{x:.002}:{x:je.a.float(-.002,.002)};be.y=-.005,new tt(c().game.lastWaveCountDefeated&&c().game.lastWaveCountDefeated<10?je.a.int(5,10):3,_.position,be,c().game.lastWaveCountDefeated&&c().game.lastWaveCountDefeated<10?2:1),this.destroy=function(){ie.forEach((function(e,t){m(e,c().game.lastWaveCountDefeated&&c().game.lastWaveCountDefeated<10?1:.5,{alpha:0,onComplete:function(){n.removeChild(e),t===ie.length-1&&(Oe.World.remove(o,r.composite),i.splice(i.indexOf(r),1),i=null,o=null,n=null,r.bodies.forEach((function(e){null})),r.constraints.forEach((function(e){null})))}})}))},this.animateRagParts=function(e){var t=e(r.head);ae.position=t,ae.rotation=t.rotation;var a=e(r.bodyUpper);oe.position=a,oe.rotation=a.rotation;var o=e(r.armLowerL);me.position=o,me.rotation=o.rotation;var n=e(r.armUpperL);ye.position=n,ye.rotation=n.rotation;var i=e(r.handL);he.position=i,he.rotation=i.rotation;var s=e(r.legUpperL);ge.position=s,ge.rotation=s.rotation;var l=e(r.legLowerL);ue.position=l,ue.rotation=l.rotation;var d=e(r.footL);fe.position=d,fe.rotation=d.rotation;var p=e(r.armLowerR);le.position=p,le.rotation=p.rotation;var c=e(r.armUpperR);de.position=c,de.rotation=c.rotation;var u=e(r.handR);se.position=u,se.rotation=u.rotation;var h=e(r.legUpperR);pe.position=h,pe.rotation=h.rotation;var m=e(r.legLowerR);re.position=m,re.rotation=m.rotation;var y=e(r.footR);ce.position=y,ce.rotation=y.rotation};var we=new Array(je.a.int(1,10)).fill(1);return(we=we.map((function(e,t){var a;return function e(){if(a=r.constraints[Math.floor(Math.random()*r.constraints.length)],!(we.indexOf(a)>-1))return a;e()}()}))).forEach((function(e){Oe.Composite.remove(r.composite,e)})),h(!c().game.lastWaveCountDefeated||c().game.lastWaveCountDefeated<10?4:1,this.destroy),d(ne()),this}function oo(e,t){var a,o,n,i=this,r=Ke.dispatch,s=Ke.getState,l=window,d=(l.Power2,l.TweenLite),c=d.delayedCall,u=d.to,h=(d.set,window.gameObjects);a||(a=h.getKeyValue("world")),o||(o=h.getKeyValue("zombies")),n||(n=h.getKeyValue("game-pixi-container"));var m=h.getKeyValue("bullet-impacts");r(Ce());var y=60,g=125,f=40,b=60,w=s().game.enemies.zombies.walkSpeed,x=Oe.Bodies.rectangle(e,t,y,g,{collisionFilter:Ge}),v=Oe.Bodies.rectangle(e,t,f,b,{collisionFilter:Ge,inertia:1/0});x.label="enemy zombie body",v.label="enemy zombie head";var k=Oe.Constraint.create({bodyA:v,bodyB:x,pointA:{x:0,y:b/2},pointB:{x:0,y:-g/2},length:0}),E=Oe.Composite.create();this.composite=E,this.body=x,this.head=v,Oe.Composite.add(E,[x,v,k]),Oe.World.add(a,E);var S=h.getKeyValue("zombie-walk-sheet"),A=h.getKeyValue("zombie-attack1-sheet"),C=h.getKeyValue("zombie-idle-sheet"),B=new p.a(C.animations.idle),_=new p.a(S.animations.walkcycle),V=new p.a(A.animations.attack1),K=new p.a(h.getKeyValue("zombie-attack2-sheet").animations.attackTwo),O=h.getKeyValue("zombie-slash-fx-sheet"),F=new p.a(O.animations.slash);F.loop=!1,F.animationSpeed=.5,F.updateAnchor=!0,F.pivot.x=.5*F.width,F.pivot.y=.5*F.height,F.visible=!1,F.onComplete=function(){F.visible=!1},n.addChild(F),B.loop=!0,B.animationSpeed=.5,B.updateAnchor=!0,B.pivot.x=.5*B.width,B.pivot.y=.6*B.height,n.addChild(B),_.loop=!0,_.animationSpeed=.5,_.updateAnchor=!0,_.pivot.x=.5*_.width,_.pivot.y=.6*_.height,n.addChild(_),V.loop=!1,V.animationSpeed=.65,V.updateAnchor=!0,V.pivot.x=.5*V.width,V.pivot.y=.6*V.height,n.addChild(V),V.visible=!1,K.loop=!1,K.animationSpeed=.65,K.updateAnchor=!0,K.pivot.x=.5*K.width,K.pivot.y=.6*K.height,n.addChild(K),K.visible=!1,this.walkAnim=_,this.attackAnim=V,this.attackAnim2=K,this.idleAnim=B,this.anims=[this.walkAnim,this.attackAnim,this.attackAnim2,this.idleAnim],this.anims.forEach((function(e){window.TweenLite.from(e,1,{alpha:0})})),this.playerBodyPosition=null,this.playSlashAnim=function(){i.attackAnim.visible?(F.position={x:i.attackAnim.position.x,y:i.attackAnim.position.y-50},F.scale.x=i.attackAnim.scale.x,F.rotation=Object(Ie.degrees)(0)):(F.position={x:i.attackAnim.position.x,y:i.attackAnim.position.y-50},F.scale.x=-1*i.attackAnim.scale.x,F.rotation=Object(Ie.degrees)(180)),F.visible=!0,F.gotoAndPlay(0)},this.setSpritesPositions=function(e){var t=e(i.body),a=t.x,o=t.y;n&&-1===n.children.indexOf(i.shadow)&&n.addChild(i.shadow),i.shadow.position.x=a,i.shadow.position.y=o+i.walkAnim.height/4+10,i.walkAnim.position.x=a,i.walkAnim.position.y=o,i.attackAnim.position.x=a,i.attackAnim.position.y=o,i.attackAnim2.position.x=a,i.attackAnim2.position.y=o,i.idleAnim.position.x=a,i.idleAnim.position.y=o,i.player.dead?(i.walkAnim.animationSpeed=.2,i.walkAnim.animationSpeed=.2,i.attackAnim.animationSpeed=.2,i.attackAnim2.animationSpeed=.2,i.idleAnim.animationSpeed=.2,F.animationSpeed=.2):(i.walkAnim.animationSpeed=.5,i.attackAnim.animationSpeed=.65,i.attackAnim2.animationSpeed=.65,i.idleAnim.animationSpeed=.5,F.animationSpeed=.5),i.shouldDisplayHealth&&void 0!==i.healthDisplay&&i.moveLifeDisplay(e(i.body))},this.setPlayerVars=function(e){var t=e.player,a=e.playerDirection,o=e.playerBody;i.player=t,i.playerBodyPosition=o.position,i.playerBody=o,i.playerDirection=a};var j=function(e){return i.playerBody.position.x-(e||120)>i.body.position.x||i.playerBody.position.x+(e||120)<i.body.position.x};this.playIdleAnim=function(){V.playing||K.playing||i.walkAnimPlaying||(B.play(),B.visible=!0)},this.stopIdleAnim=function(){B.visible=!1},this.walkAnimPlaying=!1,this.playWalkAnim=function(){!1===i.walkAnimPlaying?(i.stopIdleAnim(),i.walkAnim.visible=!0,i.walkAnim.play(),i.walkAnimPlaying=!0):i.playIdleAnim()},this.stopWalkAnim=function(){!0===i.walkAnimPlaying&&(i.walkAnim.stop(),i.walkAnim.gotoAndStop(0),i.walkAnimPlaying=!1,i.walkAnim.visible=!1,i.playIdleAnim())},this.playWalkAnim(),this.healthOffsetY=160,this.damageDisplayOptions={fill:"#FF0000",fontSize:11},this.healthDisplayOptions={fill:"#FFFF00",fontSize:11},this.healthDisplay=new p.i(this.health,this.healthDisplayOptions),this.healthDisplay.pivot.x=.5*this.healthDisplay.width,s().game.displayZombieHealth&&(this.shouldDisplayHealth=!0,n.addChild(this.healthDisplay)),this.moveLifeDisplay=function(e){i.shouldDisplayHealth?(i.dead?i.healthDisplay.text=0:i.healthDisplay.text=i.health,i.healthDisplay.position={x:e.x,y:e.y-i.healthOffsetY}):n.children.indexOf(i.healthDisplay)>-1&&n.removeChild(i.healthDisplay)},this.walk=function(){var e,t=i.playerBody.position.x<i.body.position.x;!j()||V.playing||K.playing||i.player.dead?i.stopWalkAnim():(i.playWalkAnim(),t?i.sprites.forEach((function(e){e.scale.x=1})):i.sprites.forEach((function(e){e.scale.x=-1})),j(800)?(_.animationSpeed=1,e=w*je.a.float(2.8,3.2)):j(400)?(_.animationSpeed=.75,e=w*je.a.float(1.8,2.2)):(_.animationSpeed=.5,e=w),Oe.Body.translate(i.body,{x:t?-e:e,y:0}))},this.health=s().game.enemies.zombies.startingHealth,this.shadow=new p.f,this.shadow.beginFill(0,.35),this.shadow.drawEllipse(0,0,80,10);var M=new p.k.BlurFilter;M.blur=8,this.shadow.filters=s().game.filterEffects?[M]:[],this.checkFilters=function(){s().game.filterEffects?(i.shadow.filters=[M],i.shadow.alpha=1,i.criticalText&&(i.criticalText.filters=[i.criticalGlow])):(i.shadow.filters=[],i.shadow.alpha=.5,i.criticalText&&(i.criticalText.filters=[]))},this.displayHealth=function(e){i.shouldDisplayHealth=e,e?n.addChild(i.healthDisplay):n.children.indexOf(i.healthDisplay)&&n.removeChild(i.healthDisplay)},this.sprites=[this.walkAnim,this.attackAnim,this.attackAnim2,this.idleAnim,F],this.composite.bodies.forEach((function(e){e.main=i})),this.dead=!1,this.dmgTxts=[],this.dmgIterator=0,this.tintAmounts={1:16751616,2:16723456,3:16711680,4:11993103},this.takeDamage=function(e,t,a){a&&(i.criticalText=new p.i("critical hit!",{fontSize:"13px",fontWeight:"bold",fill:16777215}),i.criticalGlow=new yt.a,i.criticalGlow.outerStrength=3,i.criticalGlow.color=16711680,i.criticalText.filters=s().game.filterEffects?[i.criticalGlow]:[],n.addChild(i.criticalText),i.criticalText.position={x:i.walkAnim.position.x,y:i.walkAnim.position.y-i.healthOffsetY},u(i.criticalText,.35,{y:i.walkAnim.position.y-(i.healthOffsetY+10),onComplete:function(){c(1,(function(){u(i.criticalText,.25,{alpha:0,onComplete:function(){n?n.removeChild(i.criticalText):((n=window.gameObjects.getKeyValue("game-pixi-container")).removeChild(i.criticalText),n=null)}})}))}}));var o={x:je.a.float(i.walkAnim.position.x-20,i.walkAnim.position.x+20),y:je.a.float(i.walkAnim.position.y,i.walkAnim.position.y+50)},r={x:je.a.float(i.walkAnim.position.x-20,i.walkAnim.position.x+20),y:je.a.float(i.walkAnim.position.y-100,i.walkAnim.position.y-50)};new st(null,t&&"head"!==t?o:r),i.health-=e,i.directionX=!!i.playerBodyPosition&&i.playerBodyPosition.x>i.body.position.x,i.health<=0&&!i.dead&&i.kill(t),i.sprites.forEach((function(e){e!==F&&(i.health<25&&(e.tint=i.tintAmounts[3]),i.health<10&&(e.tint=i.tintAmounts[4]))}))},this.removeZombieFromMatterWorld=function(){return i.dead=!0,i.attackHitbox&&Oe.World.remove(a,i.attackHitbox),i.healthDisplay&&n.removeChild(i.healthDisplay),i.sprites.forEach((function(e){n.removeChild(e)})),i.attackHitbox&&Oe.World.remove(a,i.attackHitbox),Oe.World.remove(a,i.composite),"zombie removed"},this.removeZombieFromZombiesArray=function(){var e=o.indexOf(i);e>-1&&o.splice(e,1)},this.kill=function(e,t){if(i.attackHitbox&&Oe.World.remove(a,i.attackHitbox),!i.dead){i.dead=!0,i.health=0,i.healthDisplay&&n.removeChild(i.healthDisplay),n.removeChild(i.shadow),i.removeZombieFromMatterWorld(),i.removeZombieFromZombiesArray();var r={x:i.directionX?-.2:.2,y:-.25},l={x:i.directionX?i.body.position.x-20:i.body.position.x+20,y:i.body.position.y-60};if(!t){if(co(l),s().game.player.perks.ammoDropper.owned){var d=s().game.player.weapons.list;new to(l,d[Math.floor(Math.random()*d.length)],je.a.int(4,16))}s().game.player.perks.healthDropper.owned&&new Rt(je.a.int(2,6),l),m.push(new Ft("enemy",i.body.position,{duration:3,alphaDuration:3,set:1,rand:{min:1,max:4}}))}n=1,o=1,n=null,o=null,t||new ao({x:i.body.position.x,y:i.body.position.y-De(i.body)},r,e),i.attackHitbox&&Oe.World.remove(a,i.attackHitbox)}};V.onFrameChange=function(){B.visible=!1},V.onComplete=function(){V.gotoAndStop(0),V.visible=!1,i.playWalkAnim(),Oe.World.remove(a,i.attackHitbox)},K.onComplete=function(){K.gotoAndStop(0),K.visible=!1,i.playWalkAnim(),Oe.World.remove(a,i.attackHitbox)},this.timeSinceLastAttack=Date.now()+500;var T=h.getKeyValue("zombie-growl-sound");return this.attack=function(){if(!i.paused&&o.indexOf(i)>-1&&!i.player.dead&&!i.dead){i.timeSinceLastAttack=Date.now();var e=[1,2][Math.floor(2*Math.random())];i.attackHitbox=function(e){if(i.playerBodyPosition){var t=i.playerBodyPosition.x>i.body.position.x?80:-80;return Oe.Bodies.rectangle(i.body.position.x+t,i.body.position.y-De(i.body)/2,2===e?120:100,150,{label:"enemy zombie attack",isStatic:!0})}}(e),T.play(),_.visible=!1,1===e?(V.visible=!0,V.play()):(K.visible=!0,K.play()),B.visible=!1,c(.15,(function(){i.playSlashAnim()})),c(.2,(function(){Oe.World.add(a,i.attackHitbox),c(.1,(function(){Oe.World.remove(a,i.attackHitbox)}))}))}else i.attackHitbox&&Oe.World.remove(a,i.attackHitbox)},this.pause=function(){i.paused=!0,B.stop(),i.walkAnim.stop(),i.attackAnim.stop(),i.attackAnim2.stop()},this.unpause=function(){i.paused=!1,i.walkAnim.play(),0!==V.currentFrame&&V.play()},o.push(this),this}function no(e,t){var a=this,o=window.gameObjects,n=o.getKeyValue("world"),i=o.getKeyValue("game-pixi-container"),r=o.getKeyValue("currency-drops"),s=e.x,l=e.y,d=Oe.Bodies.circle(s,l,.25*t,{restitution:.5,collisionFilter:Ne});d.label="currency drop",d.amount=t,Oe.World.add(n,d);var c=new p.e,u=new p.f;u.beginFill(977624),u.drawCircle(0,0,.25*t);var h=new p.k.BlurFilter;h.blur=3,u.filters=Ke.getState().game.filterEffects?[h]:[],u.pivot.x=.25*u.width*.5,u.pivot.y=.25*u.height*.5,u.scale.x=1.1,u.scale.y=1.1,c.addChild(u);var m=new p.f;m.beginFill(977624),m.drawCircle(0,0,.25*t),m.pivot.x=.25*m.width*.5,m.pivot.y=.25*m.height*.5,c.addChild(m);var y=new vt.a;return y.lightColor=16777215,y.lightAlpha=.3,y.shadowColor=0,y.shadowAlpha=.3,c.filters=Ke.getState().game.filterEffects?[y]:[],i.addChild(c),r.push(this),d.main=this,this.creditBody=d,this.checkFilters=function(){Ke.getState().game.filterEffects?(c.filters=[y],u.filters=[h]):(c.filters=[],u.filters=[])},this.destroyed=!1,this.destroy=function(){if(!a.destroyed){a.destroyed=!0;var e=r.indexOf(a);e>-1&&r.splice(e,1),c.destroy(),Oe.World.remove(n,d),n=null,i=null,r=null,o=null,d=null,a.creditBody=null,c=null}},this.positionCreditGfx=function(e){var t=e(d),a=t.x,o=t.y,n=t.rotation;c.position={x:a,y:o},c.rotation=n},this}var io=Ke.getState,ro=window.TweenLite.delayedCall,so=io().game.height/2,lo=function(e){for(var t=window.gameObjects,a=t.getKeyValue("world-width"),o=t.getKeyValue("zombies");o.length>0;)o.forEach((function(e){e.kill(null,!0)}));!function t(){io().game.gameState===v.GAMEPLAY&&io().game.gameSubState===y?function(){for(var t=0;t<e;++t)ro(je.a.float(.5,1.5)*t,(function(){!function e(){io().game.zombiesOnStage<4&&io().game.gameState!==v.PAUSE&&io().game.gameState!==v.MAIN_MENU?(console.log("should create a zombo"),new oo(je.a.int(150,a-150),so)):setTimeout((function(){e()}),2e3)}()}))}():setTimeout((function(){t()}),2e3)}()},po=function(e,t,a){for(var o=window.gameObjects.getKeyValue("world-width"),n=io().game.player.weapons,i=n.list,r=n.ammoCapacity,s=a||je.a.int(1,2),l=i[Math.floor(Math.random()*i.length)],d=0;d<s;++d)new to(e||{x:je.a.int(150,o-150),y:200},l,t?je.a.int(t.min,t.max):je.a.int(5,r[l]))},co=function(e,t){for(var a=window.gameObjects.getKeyValue("world-width"),o=io().game.player.perks.creditDropper.owned?je.a.int(5,7):je.a.int(4,5),n=0;n<o;++n)new no(e?{x:e.x,y:e.y-je.a.int(0,75)}:{x:je.a.int(150,a-150),y:200-je.a.int(0,75)},t?je.a.int(t.min,t.max):io().game.player.perks.creditDropper.owned?je.a.int(15,30):je.a.int(10,25))},uo=Ke.dispatch,ho=Ke.getState;function mo(){var e=new p.e,t=new p.f;t.beginFill(5592405),t.drawRect(0,0,150,50),e.addChild(t);var a=new p.i("Respawn?",{font:"Arial",fill:"#FFFFFF",fontSize:20,fontWeight:"bold"});return a.position.x=t.width/2-a.width/2,a.position.y=t.height/2-a.height/2,e.addChild(a),e}function yo(){var e,t=this,a=window,o=a.gameObjects,n=a.TweenLite.from,i=a.Bounce,r=o.getKeyValue("game-pixi-container"),s=o.getKeyValue("engine"),l=o.getKeyValue("zombies");this.respawnButton=new mo,r.addChild(this.respawnButton),this.respawnButton.visible=!1,this.respawnButton.interactive=!0,this.respawnButton.pivot.x=this.respawnButton.width/2,this.respawnButton.pivot.y=this.respawnButton.height/2,this.respawnButton.position.x=this.respawnButton.width/2+20,this.respawnButton.position.y=this.respawnButton.height/2+20,this.respawn=function(){var e=o.getKeyValue("player");e.respawn(),Xe("Still alive!",16777215,.5,.75),e.lastDeathType!==lt&&(po({x:je.a.float(e.body.position.x-100,e.body.position.x+100),y:e.body.position.y-200},{min:10,max:2*ho().game.player.weapons.ammoCapacity[ho().game.player.weapons.equipped]},je.a.int(1,2)),co({x:je.a.float(e.body.position.x-100,e.body.position.x+100),y:e.body.position.y-200}))},this.respawnButton.on("click",(function(){t.respawn(),t.respawnButton.visible=!1})),(e=this.respawnButton).on("mouseover",(function(){Te(e.scale,.35,{x:1.05,y:1.05})})),e.on("mouseout",(function(){Te(e.scale,.35,{x:1,y:1})})),this.showRespawnButton=function(){t.respawnButton.visible=!0,n(t.respawnButton.scale,1.5,{x:.5,y:.5,ease:i.easeOut})};var d=function(){o.getKeyValue("player").pause(),l.forEach((function(e){e.unpause()})),s.timing.timeScale=1},p=function(){uo(D()),o.getKeyValue("player").unpause(),l.forEach((function(e){e.pause()})),s.timing.timeScale=.05};return this.unpause=d,this.pause=p,this.togglePause=function(){var e=ho().game,t=e.gameState,a=e.gameSubState;t!==v.MAIN_MENU&&t!==v.SHOP_MENU&&a!==x&&t!==v.BUILD_MENU&&a!==w&&a!==g&&(o.getKeyValue("player").dead||(t!==v.PAUSE&&a!==m?(uo(ee("main",t,v.PAUSE)),p()):(uo(ee("main",t,v.GAMEPLAY)),a===y?uo(ee("sub",a,y)):a===h&&uo(ee("sub",a,m)),d())))},document.body.addEventListener("keydown",(function(e){"p"!==e.key&&"P"!==e.key&&"Escape"!==e.key||(console.log("pause key was pressed"),t.togglePause())})),this}var go=a(53),fo=a.n(go),bo=a(54),wo=a.n(bo),xo=a(55),vo=a.n(xo),ko=a(56),Eo=a.n(ko),So=a(57),Ao=a.n(So),Co=a(58),Bo=a.n(Co),_o=a(78),Vo=a.n(_o),Ko=a(59),Oo=a.n(Ko),Fo=a(60),jo=a.n(Fo),Mo=a(79),To=a.n(Mo),Po=a(80),Lo=a.n(Po),Do=a(81),Ro=a.n(Do),zo=a(82),Wo=a.n(zo),Io=a(83),Ho=a.n(Io),Uo=a(61),Go=a.n(Uo),No=a(84),qo=a.n(No),Yo=a(85),Xo=a.n(Yo),Zo=a(86),$o=a.n(Zo),Jo=a(87),Qo=a.n(Jo),en=a(88),tn=a.n(en),an=a(89),on=a.n(an),nn=a(90),rn=a.n(nn),sn=a(91),ln=a.n(sn),dn=a(92),pn=a.n(dn),cn=a(93),un=a.n(cn),hn=a(94),mn=a.n(hn),yn=a(95),gn=a.n(yn),fn=a(96),bn=a.n(fn),wn=a(97),xn=a.n(wn),vn=a(98),kn=a.n(vn),En=a(99),Sn=a.n(En),An=a(100),Cn=a.n(An),Bn=a(101),_n=a.n(Bn),Vn=a(102),Kn=a.n(Vn),On=a(103),Fn=a.n(On),jn=a(104),Mn=a.n(jn),Tn=a(105),Pn=a.n(Tn),Ln=a(106),Dn=a.n(Ln),Rn=a(107),zn=a.n(Rn),Wn=a(108),In=a.n(Wn),Hn=a(109),Un=a.n(Hn),Gn=a(110),Nn=a.n(Gn),qn=a(111),Yn=a.n(qn),Xn=a(112),Zn=a.n(Xn),$n=a(113),Jn=a.n($n),Qn=a(114),ei=a.n(Qn),ti="./spritesheet-assets/FX/muzzle_flashes/muzzle-flashes.json",ai="./spritesheet-assets/enemy-spritesheets/zombie/idle/idle.json",oi="./spritesheet-assets/enemy-spritesheets/zombie/walkcycle/walkcycle.json",ni="./spritesheet-assets/enemy-spritesheets/zombie/attack1/attack1.json",ii="./spritesheet-assets/enemy-spritesheets/zombie/attack2/attack2.json",ri="./spritesheet-assets/enemy-spritesheets/zombie/parts/zombie_parts.json",si="./spritesheet-assets/enemy-spritesheets/zombie/parts/zombie_parts_gored.json",li="./spritesheet-assets/enemy-spritesheets/zombie/slash_fx/slash_fx.json",di="./spritesheet-assets/barriers/barriers.json",pi="./spritesheet-assets/character-spritesheets/parts/player_parts.json",ci="./spritesheet-assets/character-spritesheets/idle/char_idle_anim.json",ui="./spritesheet-assets/character-spritesheets/run/char_run_anim.json",hi="./spritesheet-assets/character-spritesheets/jump/char_jump_anim.json",mi="./spritesheet-assets/character-spritesheets/reloadPistol/char_reload_pistol_anim.json",yi="./spritesheet-assets/character-spritesheets/reloadSMG/char_reload_smg_anim.json",gi="./spritesheet-assets/character-spritesheets/leftArmPistolFire/char_left_arm_pistol_fire.json",fi="./spritesheet-assets/character-spritesheets/rightArmPistolFire/char_right_arm_pistol_fire.json",bi="./spritesheet-assets/character-spritesheets/leftArmSMGFire/char_left_arm_smg_fire.json",wi="./spritesheet-assets/character-spritesheets/rightArmSMGFire/char_right_arm_smg_fire.json",xi="./spritesheet-assets/character-spritesheets/melee/melee_pistol/melee_pistol.json",vi="./spritesheet-assets/character-spritesheets/melee/melee_ump/melee_ump.json",ki="./spritesheet-assets/character-spritesheets/melee/melee_shotgun/melee_shotgun.json",Ei="./spritesheet-assets/character-spritesheets/grenadeThrow/pistolEquipped/grenade_throw_pistol.json",Si="./spritesheet-assets/character-spritesheets/grenadeThrow/umpEquipped/grenade_throw_ump.json",Ai="./spritesheet-assets/character-spritesheets/grenadeThrow/shotgunEquipped/grenade_throw_shotgun.json",Ci="./spritesheet-assets/character-spritesheets/armsFireShotgun/arms_fire_shotgun_anim.json",Bi="./spritesheet-assets/character-spritesheets/reloadShotgun/reloadShotgun.json",_i="./spritesheet-assets/FX/blood_fx/blood_spurt_1/blood_spurt_1.json",Vi="./spritesheet-assets/FX/blood_fx/blood_spurt_2/blood_spurt_2.json",Ki="./spritesheet-assets/FX/blood_fx/blood_spurt_3/blood_spurt_3.json",Oi="./spritesheet-assets/landmine/landmine.json",Fi="./spritesheet-assets/FX/wood_planks/wood_planks.json",ji="./spritesheet-assets/FX/spark-particle/spark_particle.json",Mi=Ke.dispatch,Ti=Ke.getState,Pi=window.TweenLite.to,Li=function(e,t){var a=Oe.Engine.create(),o=a.world;o.bounds={min:{x:-6e3,y:-1100},max:{x:6e3,y:825}};var n=Oe.Render.create({element:document.getElementById(e),engine:a,options:{width:1200,height:550,pixelRatio:.5}});Oe.Render.run(n);var i=Oe.Runner.create();if(Oe.Runner.run(i,a),t){var r=Oe.Mouse.create(n.canvas),s=Oe.MouseConstraint.create(a,{mouse:r,constraint:{stiffness:.2,render:{visible:!1}}});Oe.World.add(o,s),n.mouse=r}return{engine:a,render:n,runner:i,world:o,width:1200,height:550,worldWidth:6e3}}("app-container",!0),Di=Li.world,Ri=Li.render,zi=Li.engine,Wi=Li.width,Ii=Li.height,Hi=Li.worldWidth,Ui=function(e){var t=new p.b({width:1200,height:550,antialias:!1,resolution:1});return p.l.ROUND_PIXELS=!0,document.getElementById(e).appendChild(t.view),{app:t,loader:new p.g}}("app-container"),Gi=Ui.app,Ni=Ui.loader;function qi(){Ni.add(Bo.a).add(Ao.a).add(Bi).add(Ci).add(ji).add("./spritesheet-assets/FX/muzzle-sparks/muzzle_sparks.json").add("./spritesheet-assets/FX/explosion3d/explosion3d1.json").add("./spritesheet-assets/FX/explosion3d/explosion3d2.json").add("./spritesheet-assets/turret/sheets/turret_scan.json").add("./spritesheet-assets/turret/sheets/turret_shoot.json").add("./spritesheet-assets/remote-mine/remote-mine.json").add("./spritesheet-assets/clustermine/clustermine.json").add(Oi).add(Oo.a).add(di).add(Eo.a).add("./spritesheet-assets/zombie_walkcycle_test.json").add("./spritesheet-assets/z_walk/z_walk.json").add("./spritesheet-assets/z_attack/z_attack.json").add("./spritesheet-assets/z_parts/limbs.json").add(ai).add(oi).add(ni).add(ii).add(ri).add(si).add(li).add(ti).add(_i).add(Vi).add(Ki).add("./spritesheet-assets/FX/explosion_fx/explosion_assets.json").add(Fi).add("./spritesheet-assets/FX/ground_fx/ground_fx.json").add(pi).add(ci).add(ui).add(hi).add(mi).add(yi).add(xi).add(vi).add(ki).add(Ei).add(Si).add(Ai).add(gi).add(fi).add(bi).add(wi).add(jo.a).add(fo.a).add(wo.a).add(vo.a).load((function(){window.gameObjects=new function(){var e=this;this.state={},this.getKeyValue=function(t){return!!e.state[t]&&e.state[t]},this.setKeyValue=function(t,a){return e.state[t]=a,e.state[t]},this.getFullState=function(){return e.state},this.setFullState=function(t){e.state=t}};var e=window.gameObjects;Mi(Q("game-cover",Vo.a)),Mi(Q("char-head",jo.a)),Mi(Q("gradient-alpha",Bo.a)),Mi(Q("weapon-ui-icon-pistol",fo.a)),Mi(Q("weapon-ui-icon-smg",wo.a)),Mi(Q("weapon-ui-icon-shotgun",vo.a)),Mi(Q("ground-texture",Eo.a)),Mi(Q("explosive-barrel",Oo.a));var t=Pe("ground-texture");t.pivot.x=.5*t.width,t.pivot.y=.425*t.height;var a=Pe("gradient-alpha");a.width=Wi,a.height=Ii,e.setKeyValue("gradient-alpha",a);var o=Pe("game-cover");e.setKeyValue("game-cover-art",o),e.setKeyValue("9mm-sound1",To.a),e.setKeyValue("9mm-sound2",Lo.a),e.setKeyValue("explosion1",Ro.a),e.setKeyValue("distant-explosion",Wo.a),e.setKeyValue("pistol-reload-sound",Ho.a),e.setKeyValue("bullet-impact-body",Go.a),e.setKeyValue("bullet-impact-body-sound",new ft.Howl({src:[Go.a]})),e.setKeyValue("grenade-clink-sound",new ft.Howl({src:[qo.a]})),e.setKeyValue("throw-sound",new ft.Howl({src:[Xo.a]})),e.setKeyValue("confirm-sound",new ft.Howl({src:[zn.a]})),e.setKeyValue("coin-collect-sound",new ft.Howl({src:[$o.a]})),e.setKeyValue("ammo-collect-sound",new ft.Howl({src:[Qo.a]})),e.setKeyValue("item-collect-sound",new ft.Howl({src:[tn.a]})),e.setKeyValue("blood-squish-sound",new ft.Howl({src:[rn.a]})),e.setKeyValue("blood-squash-sound",new ft.Howl({src:[on.a]})),e.setKeyValue("blood-smack-sound",new ft.Howl({src:[ln.a]})),e.setKeyValue("death-rip-sound",new ft.Howl({src:[pn.a]})),e.setKeyValue("jump-landing-sound",new ft.Howl({src:[un.a]})),e.setKeyValue("dirt-impact-sound",new ft.Howl({src:[mn.a]})),e.setKeyValue("zombie-hurt-sound",new ft.Howl({src:[gn.a],volume:.5})),e.setKeyValue("zombie-death-sound",new ft.Howl({src:[bn.a],volume:.5})),e.setKeyValue("pain1-sound",new ft.Howl({src:[xn.a]})),e.setKeyValue("pain2-sound",new ft.Howl({src:[kn.a]})),e.setKeyValue("player-death-sound",new ft.Howl({src:[Sn.a]})),e.setKeyValue("button-add-sound",new ft.Howl({src:[Cn.a]})),e.setKeyValue("button-subtract-sound",new ft.Howl({src:[_n.a]})),e.setKeyValue("button-hover-sound",new ft.Howl({src:[Fn.a]})),e.setKeyValue("button-click-sound",new ft.Howl({src:[Kn.a]})),e.setKeyValue("place-object-sound",new ft.Howl({src:[Mn.a]})),e.setKeyValue("button-cancel-sound",new ft.Howl({src:[Pn.a]})),e.setKeyValue("purchase-sound",new ft.Howl({src:[Dn.a]})),e.setKeyValue("shell-impact-sound",new ft.Howl({src:[In.a]})),e.setKeyValue("health-pickup-sound",new ft.Howl({src:[Un.a]})),e.setKeyValue("zombie-growl-sound",new ft.Howl({src:[Nn.a]})),e.setKeyValue("smg-fire-sound",new ft.Howl({src:[Yn.a]})),e.setKeyValue("mag-drop-sound",new ft.Howl({src:[Zn.a]})),e.setKeyValue("shot-shell-sound",new ft.Howl({src:[Jn.a]})),e.setKeyValue("shotgun-blast-sound",new ft.Howl({src:[ei.a]})),e.setKeyValue("zombie-idle-sheet",Ni.resources[ai].spritesheet),e.setKeyValue("zombie-walk-sheet",Ni.resources[oi].spritesheet),e.setKeyValue("zombie-attack1-sheet",Ni.resources[ni].spritesheet),e.setKeyValue("zombie-attack2-sheet",Ni.resources[ii].spritesheet),e.setKeyValue("zombie-parts-sheet",Ni.resources[ri].spritesheet),e.setKeyValue("zombie-parts-gored-sheet",Ni.resources[si].spritesheet),e.setKeyValue("zombie-slash-fx-sheet",Ni.resources[li].spritesheet),e.setKeyValue("muzzle-flashes",Ni.resources[ti].spritesheet),e.setKeyValue("sparks-sheet",Ni.resources[ji].spritesheet),e.setKeyValue("muzzle-sparks-sheet",Ni.resources["./spritesheet-assets/FX/muzzle-sparks/muzzle_sparks.json"].spritesheet),e.setKeyValue("explosion3d1-sheet",Ni.resources["./spritesheet-assets/FX/explosion3d/explosion3d1.json"].spritesheet),e.setKeyValue("explosion3d2-sheet",Ni.resources["./spritesheet-assets/FX/explosion3d/explosion3d2.json"].spritesheet),e.setKeyValue("blood-spurt-1",Ni.resources[_i].spritesheet),e.setKeyValue("blood-spurt-2",Ni.resources[Vi].spritesheet),e.setKeyValue("blood-spurt-3",Ni.resources[Ki].spritesheet),e.setKeyValue("explosion-assets-sheet",Ni.resources["./spritesheet-assets/FX/explosion_fx/explosion_assets.json"].spritesheet),e.setKeyValue("wood-planks-sheet",Ni.resources[Fi].spritesheet),e.setKeyValue("remote-mine-sheet",Ni.resources["./spritesheet-assets/remote-mine/remote-mine.json"].spritesheet),e.setKeyValue("landmine-sheet",Ni.resources[Oi].spritesheet),e.setKeyValue("clustermine-sheet",Ni.resources["./spritesheet-assets/clustermine/clustermine.json"].spritesheet),e.setKeyValue("turret-scan-sheet",Ni.resources["./spritesheet-assets/turret/sheets/turret_scan.json"].spritesheet),e.setKeyValue("turret-shoot-sheet",Ni.resources["./spritesheet-assets/turret/sheets/turret_shoot.json"].spritesheet),e.setKeyValue("barriers-sheet",Ni.resources[di].spritesheet),e.setKeyValue("ground-fx-sheet",Ni.resources["./spritesheet-assets/FX/ground_fx/ground_fx.json"].spritesheet),e.setKeyValue("player-parts-sheet",Ni.resources[pi].spritesheet),e.setKeyValue("char-idle-sheet",Ni.resources[ci].spritesheet),e.setKeyValue("char-run-sheet",Ni.resources[ui].spritesheet),e.setKeyValue("char-jump-sheet",Ni.resources[hi].spritesheet),e.setKeyValue("char-reload-pistol-sheet",Ni.resources[mi].spritesheet),e.setKeyValue("char-reload-smg-sheet",Ni.resources[yi].spritesheet),e.setKeyValue("char-reload-shotgun-sheet",Ni.resources[Bi].spritesheet),e.setKeyValue("left-arm-pistol-fire-sheet",Ni.resources[gi].spritesheet),e.setKeyValue("right-arm-pistol-fire-sheet",Ni.resources[fi].spritesheet),e.setKeyValue("left-arm-smg-fire-sheet",Ni.resources[bi].spritesheet),e.setKeyValue("right-arm-smg-fire-sheet",Ni.resources[wi].spritesheet),e.setKeyValue("melee-pistol-sheet",Ni.resources[xi].spritesheet),e.setKeyValue("melee-ump-sheet",Ni.resources[vi].spritesheet),e.setKeyValue("melee-shotgun-sheet",Ni.resources[ki].spritesheet),e.setKeyValue("grenade-pistol-sheet",Ni.resources[Ei].spritesheet),e.setKeyValue("grenade-ump-sheet",Ni.resources[Si].spritesheet),e.setKeyValue("grenade-shotgun-sheet",Ni.resources[Ai].spritesheet),e.setKeyValue("arms-fire-shotgun-sheet",Ni.resources[Ci].spritesheet);var n=new p.e;n.interactive=!0,n.width=Wi,n.height=Ii,e.setKeyValue("muzzle-flashes-sheet",Ni.resources[ti].spritesheet);var i=function(){var e=Oe.Bodies.rectangle(Hi/2,Ii,Hi,Ii/2,{isStatic:!0,collisionFilter:{mask:3}});return e.label="ground",Oe.World.add(Di,e),e}();Gi.stage.interactive=!0,Gi.stage.addChild(n),n.addChild(t),e.setKeyValue("pixi-app",Gi),e.setKeyValue("game-pixi-container",n),e.setKeyValue("ammo-drops-by-type",{"pistol weapon":[],"smg weapon":[],"shotgun weapon":[]}),e.setKeyValue("text-messages",[]),e.setKeyValue("reload-text-messages",[]),e.setKeyValue("gibs",[]),e.setKeyValue("grenades",[]),e.setKeyValue("explosions",[]),e.setKeyValue("rocks",[]),e.setKeyValue("currency-drops",[]),e.setKeyValue("pistol-shells",[]),e.setKeyValue("pistol-bullets",[]),e.setKeyValue("build-objects",[]),e.setKeyValue("bullet-impacts",[]),e.setKeyValue("wood-planks",[]),e.setKeyValue("spark-sprites",[]),e.setKeyValue("explosion-sprites",[]),e.setKeyValue("remote-mines",{}),e.setKeyValue("remote-mines-array",[]),e.setKeyValue("static-ground-effects",[]),e.setKeyValue("zombie-ragdolls",[]),e.setKeyValue("zombies",[]),e.setKeyValue("health-drops",[]),e.setKeyValue("wall-tile",Ao.a),e.setKeyValue("ground",i),e.setKeyValue("ground-texture",t),e.setKeyValue("game-width",Wi),e.setKeyValue("game-height",Ii),e.setKeyValue("world-width",Hi),e.setKeyValue("world",Di),e.setKeyValue("render",Ri),e.setKeyValue("engine",zi);var r=new yo;e.setKeyValue("screen-ui",r),e.setKeyValue("weapons-ui",new eo);var s=new Wt;e.setKeyValue("player",s);var l=function(){var t=new p.e;o.pivot.x=.5*o.width,o.pivot.y=.5*o.height,o.scale.x=.51,o.scale.y=.51,n.alpha=0,t.addChild(o),n.alpha=1,t.interactive=!0;var a=new p.e,i=new p.f;i.beginFill(5592405),i.drawRect(0,0,250,80);var r=new p.i("Play",{fontFamily:"Arial",fontSize:36,fill:16777215});function s(){a.position.x=Wi/2-a.width/2,a.position.y=Ii/2-a.height/2}return a.addChild(i,r),s(),r.position.x=a.width/2-r.width/2,r.position.y=a.height/2-r.height/2,a.interactive=!0,a.on("click",(function(){var e=Ti().game,t=e.gameState,a=e.gameSubState;Mi(ee("main",t,v.GAMEPLAY)),Mi(ee("sub",a,m))})),a.on("mouseover",(function(){Pi(a.scale,.35,{x:1.05,y:1.05,onUpdate:s})})),a.on("mouseout",(function(){Pi(a.scale,.35,{x:1,y:1,onUpdate:s})})),Gi.stage.addChild(t),e.setKeyValue("main-menu",t),{menu:t}}().menu;Oe.Events.on(zi,"tick",(function(t){var a=Ti().game,o=a.gameState,n=a.gameSubState;!0===l.visible&&(l.visible=!1,document.body.style.cursor="auto"),o!==v.MAIN_MENU&&o!==v.SCORES_VIEW||!1===l.visible&&(l.visible=!0,document.body.style.cursor="auto"),o===v.MAIN_MENU||o===v.SCORES_VIEW||o===v.PAUSE||n===w||o===v.SHOP_MENU||o===v.BUILD_MENU||n===f?(document.body.style.cursor="auto",document.getElementsByClassName("App")[0].style.pointerEvents="all"):document.getElementsByClassName("App")[0].style.pointerEvents="none",o===v.GAMEPLAY&&(document.body.style.cursor=n===w||n===f?"auto":"none"),Ya(0,e)})),Oe.Events.on(zi,"collisionStart",(function(t){if(Ti().game.gameState===v.GAMEPLAY)for(var a=0;a<t.pairs.length;++a)Ga(t,a,e)}))}))}var Yi,Xi=Ke.getState,Zi=Ke.dispatch,$i=function e(){if(!Yi){Yi={};for(var t=function(e){Yi[e.toString()]=function(){Object(l.b)((function(){Zi(we(e)),Zi(xe(e)),Zi(ve(e)),Zi(Ee(e))}));var t=function(e){return e<=3||e<=6?2:e%3<=0?Math.floor(e/3):Math.floor((e-1)/3)}(e);lo(t),po(),co(),Zi(oe(t))}},a=0;a<40;++a)t(a)}if(Xi().game.gameState===v.PAUSE)console.log("waiting for player to unpause game..."),setTimeout(e,2e3);else{0===Xi().game.waveNum&&Zi(te());var o=Xi().game.waveNum;Yi[o]&&Yi[o]()}},Ji=function(){var e=window.gameObjects,t=e.getKeyValue("currency-drops"),a=e.getKeyValue("health-drops"),o=e.getKeyValue("ammo-drops-by-type")["pistol weapon"],n=e.getKeyValue("ammo-drops-by-type")["smg weapon"],i=e.getKeyValue("ammo-drops-by-type")["shotgun weapon"];e.getKeyValue("zombies");t.forEach((function(e){e.destroy()})),o.concat(n).concat(i).forEach((function(e){e.destroy()})),a.forEach((function(e){e.destroy()}))},Qi=function(){Zi(oe(null)),function(e){p.c.from("Arial",{fill:"#FFFFFF",fontSize:40,fontWeight:"bold"},{chars:[["a","z"],["0","9"],["A","Z"]," .!?"]});var t=window,a=t.gameObjects,o=t.TweenLite,n=o.from,i=o.to,r=t.Power1,s=a.getKeyValue("player"),l=a.getKeyValue("game-pixi-container"),d=a.getKeyValue("game-width"),c=a.getKeyValue("game-height"),u=new p.d(e,{font:"Arial"});u.pivot.x=u.width/2,u.pivot.y=u.height/2,u.position.x=d/2,u.position.y=c/5,l.addChild(u);var m=function(){qe().game.gameState===v.MAIN_MENU||qe().game.gameState===v.PAUSE?qe().game.gameSubState===g||qe().game.gameSubState===w?Ye(ee("sub",qe().game.gameSubState,w)):Ye(ee("sub",qe().game.gameSubState,h)):s.dead?Ye(ee("sub",qe().game.gameSubState,f)):(Ye(ee("sub",qe().game.gameSubState,w)),l.removeChild(u))},y=function e(){qe().game.gameState===v.PAUSE?setTimeout(e,2e3):i(u,.75,{delay:2,x:1.5*d,ease:r.easeIn,onComplete:m})};!function e(){qe().game.gameState===v.PAUSE?setTimeout(e,2e3):n(u,.75,{x:-100,alpha:0,onComplete:y})}()}("Wave Defeated!"),window.TweenLite.delayedCall(30,Ji)},er=a(16),tr=a(17);function ar(){var e=Object(er.a)(["\npadding: ","px;\n"]);return ar=function(){return e},e}function or(){var e=Object(er.a)(["\nopacity: ","\ncolor: #fff;\nposition: relative;\nwidth: ","px;\nheight: ","px;\nline-height: ","px;\nbackground-color: ",";\nleft: 0; right: 0;\ncursor: pointer;\nmargin: auto;\nborder: 2px solid ",";\ntransform: scale(1.00);\n&:hover {\n  ",";\n  ",";\n  background-color: ",";\n  border: 2px solid ",";\n}\n"]);return or=function(){return e},e}function nr(){var e=Object(er.a)(["\ntop: ","px;\nfont-size: 1.5em;\ntext-align: center;\nposition: absolute;\nwidth: 100%;\n"]);return nr=function(){return e},e}function ir(){var e=Object(er.a)(["\nleft: 0;\nright: 0;\ntop: 20px;\nwidth: 300px;\nmargin: auto;\ndisplay: block;\nfont-size: 2em;\ntext-align: center;\nposition: absolute;\n"]);return ir=function(){return e},e}function rr(){var e=Object(er.a)(["\nheight: ","px;\nwidth: ","px;\nopacity: ",";\nbackground-color: ",";\n"]);return rr=function(){return e},e}function sr(){var e=Object(er.a)(["\ntop: 0;\nleft: 0;\nright: 0;\nbottom: 0;\nmargin: auto;\ndisplay: block;\nposition: absolute;\nheight: ","px;\nwidth: ","px;\nbackground-color: ",";\n"]);return sr=function(){return e},e}var lr={Container:tr.a.div(sr(),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.bgcolor?e.bgcolor:"none"})),Backing:tr.a.div(rr(),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.opacity?e.opacity:.5}),(function(e){return e.bgcolor?e.bgcolor:"#222"})),MenuTitle:tr.a.div(ir()),MenuButtonContainer:tr.a.div(nr(),(function(e){return e["space-top"]?e["space-top"]:80})),MenuButton:tr.a.div(or(),(function(e){return e.opacity?e.opacity:1}),(function(e){return e.width?e.width:200}),(function(e){return e.height?e.height:60}),(function(e){return e.height?e.height:60}),(function(e){return e.bgcolor?e.bgcolor:"#00589b"}),(function(e){return e.bordercolor?e.bordercolor:"rgba(0,0,0,0)"}),(function(e){return e&&!0===e.cancelTransition?"":"transition: all .35s"}),(function(e){return e&&!0===e.cancelTransition?"":"transform: scale(1.05)"}),(function(e){return e.hovercolor}),(function(e){return e.hoverborder?e.hoverborder:"rgba(0,0,0,0)"})),MenuButtonSpacer:tr.a.div(ar(),(function(e){return e.padding?e.padding:10}))},dr=a(41),pr=a(25);function cr(){var e=Object(er.a)(["\ncolor: #FFF;\ntext-align: center;\n"]);return cr=function(){return e},e}function ur(){var e=Object(er.a)(["\ntop: 0;\nwidth: 30px;\nheight: 30px;\ncolor: darkgreen;\nline-height: 30px;\ntext-align: center;\nposition: absolute;\nbackground-color: #ccc;\nleft: ",";\nright: ",";\ntransform: scale(1.0);\n&:hover {\n  transition: all;\n  transform: scale(1.05);\n  background-color: #fff;\n}\n"]);return ur=function(){return e},e}function hr(){var e=Object(er.a)(["\ndisplay: inline-block;\nvertical-align: top;\nmargin-right: 4px;\n"]);return hr=function(){return e},e}var mr=lr.Container,yr=lr.Backing,gr=lr.MenuTitle,fr=lr.MenuButtonContainer,br=lr.MenuButton,wr=lr.MenuButtonSpacer,xr=tr.a.div(hr()),vr=tr.a.div(ur(),(function(e){return e.left?0:"auto"}),(function(e){return e.right?0:"auto"})),kr=tr.a.div(cr()),Er=function(e){return n.a.createElement(br,{opacity:e&&e.opacity?e.opacity:1,bgcolor:e&&e.bgcolor?e.bgcolor:"#222",bordercolor:e&&e.bordercolor?e.bordercolor:"#333",hovercolor:e&&e.hovercolor?e.hovercolor:"#333",hoverborder:e&&e.hoverborder?e.hoverborder:"#fff",width:e.width,height:e.height,style:e.style,cancelTransition:!(!e||!e.cancelTransition)&&e.cancelTransition,onClick:function(){e.onClick&&(e.onClick(),window.gameObjects.getKeyValue("button-click-sound").play())},onMouseOver:function(){e.cancelTransition}},e.children)},Sr=function(e){return n.a.createElement(Er,{width:e.width?e.width:120,height:40,style:{borderRadius:"10px"},bgcolor:"#444",hovercolor:"#189969",onClick:e.onClick},e.arrowOnly?n.a.createElement("span",{style:{fontSize:"18px"}},"\u21d0"):n.a.createElement("span",{style:{fontSize:"18px"}},"\u21d0 Back"))},Ar=function(e){return n.a.createElement("div",{style:{top:0,right:e.right?e.right:"20px",marginTop:e.marginTop?e.marginTop:"-40px",position:"absolute"}},n.a.createElement(Sr,{onClick:e.onClick,width:e.width?e.width:120,arrowOnly:!!e.arrowOnly&&e.arrowOnly}))};function Cr(e){var t=e.label,a=e.labelClr,o=e.width,i=e.height,r=e.clickConfirmHandler,s=e.clickCancelHandler;return n.a.createElement(n.a.Fragment,null,n.a.createElement(mr,{style:{top:"150px"},width:o||500,height:i||300},n.a.createElement(yr,{width:o||500,height:i||300,bgcolor:"#222",opacity:1,style:{borderRadius:"2px",boxShadow:"5px 5px rgba(0, 0, 0, 0.2)"}}),n.a.createElement(gr,{style:{fontSize:"1.2em"}},n.a.createElement("span",{style:{color:a}},t)),n.a.createElement(fr,{"space-top":200},n.a.createElement(br,{bgcolor:"#222",bordercolor:"#333",hovercolor:"#333",hoverborder:"red",style:{display:"inline-block",fontSize:".8em",marginRight:"12px",borderRadius:"2px"},onClick:s},"Nope."),n.a.createElement(br,{bgcolor:"#222",bordercolor:"#333",hovercolor:"#333",hoverborder:"#189969",style:{display:"inline-block",fontSize:".8em",borderRadius:"2px"},onClick:r},"Confirm"))))}function Br(e){var t=e.type,a=e.toDefaultSubMenu,o=(e.toAmmoSubMenu,e.toStandardMenu,window.gameObjects),i=Object(l.c)(),r=Object(l.d)((function(e){return e.game.player.weapons.ammoCostPerBox})),d=Object(l.d)((function(e){return e.game.player.weapons.ammoCapacity})),p=Object(l.d)((function(e){return e.game.player.credits})),c=n.a.useReducer((function(e,t){switch(t.type){case"INCREASE":return Object(u.a)({},e,Object(dr.a)({},t.wepType,e[t.wepType]+t.amount));case"DECREASE":return Object(u.a)({},e,Object(dr.a)({},t.wepType,e[t.wepType]-t.amount));case"SET":return Object(u.a)({},e,Object(dr.a)({},t.wepType,t.amount));default:return e}}),{"pistol weapon":0,"smg weapon":0,grenades:0,"shotgun weapon":0}),h=Object(s.a)(c,2),m=h[0],y=h[1],g=n.a.useState(0),f=Object(s.a)(g,2),b=f[0],w=f[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(br,{cancelTransition:!0,bgcolor:"#28934C",width:100,height:30,style:{borderRadius:"4px",fontWeight:"bold"}},"$".concat(b)),n.a.createElement(br,{cancelTransition:!0,width:150,height:30,bgcolor:"#444"},n.a.createElement(vr,{onClick:function(){var e=(m[t]-d[t])/d[t]*r[t];m[t]>0&&(y({type:"DECREASE",wepType:t,amount:d[t]}),w(e),window.gameObjects.getKeyValue("button-subtract-sound").play())},left:!0},n.a.createElement("span",{style:{fontWeight:"bold"}},"-")),n.a.createElement(kr,null,m[t]),n.a.createElement(vr,{onClick:function(){var e=(m[t]+d[t])/d[t]*r[t];p>=e?(y({type:"INCREASE",wepType:t,amount:d[t]}),w(e),window.gameObjects.getKeyValue("button-add-sound").play()):window.gameObjects.getKeyValue("button-cancel-sound").play()},right:!0},n.a.createElement("span",{style:{fontWeight:"bold"}},"+"))),n.a.createElement(br,{cancelTransition:!0,bgcolor:"rgba(0,0,0,0)",height:30},n.a.createElement("div",{style:{display:"inline-block",marginRight:"4px"}},n.a.createElement(Er,{onClick:function(){a(),y({type:"SET",wepType:t,amount:0}),w(0),window.gameObjects.getKeyValue("button-cancel-sound").play()},width:80,height:30,hoverborder:"#B00000"},"Cancel")),n.a.createElement("div",{style:{display:"inline-block"}},b>0?n.a.createElement(Er,{onClick:function(){var e=o.getKeyValue("weapons-ui");i(de(b)),i(T("grenades"!==t?"".concat(t," ammo"):b>r[t]?t:"a grenade",b)),i(se(t,m[t])),y({type:"SET",wepType:t,amount:0}),"grenades"===t?e.updateGrenadeIcons():(e.select(t),i(Z(t)),e.reload(!0)),w(0),a()},width:100,height:30,hoverborder:"#189969"},"Buy"):null)))}var _r=function(e){var t=e.type,a=e.toDefaultSubMenu,o=e.subMenuType,i=e.setSubMenuType,r=(e.toStandardMenu,Object(l.d)((function(e){return e.game.player.upgradeTiers}))),s=Object(l.d)((function(e){return e.game.player.upgradeCosts})),d=Object(l.d)((function(e){return e.game.player.credits})),p=Object(l.c)(),c={run:ce,jump:he,reload:ue,defense:me,melee:ye},u=function(e){switch(e){case"run":return"Run Speed";case"jump":return"Jump Height";case"reload":return"Reload Speed";case"defense":return"Defense";case"melee":return"Melee Attack Power"}};return n.a.createElement(n.a.Fragment,null,o.indexOf(" upgrade sub menu")>-1?o===t+" upgrade sub menu"?n.a.createElement(Cr,{label:"Upgrade ".concat(u(t)," to lvl. ").concat(r[t].current+1,"?"),clickConfirmHandler:function(){p(de(s[t])),p(T("".concat(u(t)," Boost"),s[t])),p(c[t]()),a()},clickCancelHandler:function(){a()}}):null:n.a.createElement(n.a.Fragment,null,n.a.createElement(Er,{width:u(t).length>14?340:240,onClick:function(){d>s[t]&&r[t].current<r[t].max?i(t+" upgrade sub menu"):window.gameObjects.getKeyValue("button-cancel-sound").play()}},u(t)," ",r[t].current!==r[t].max?"Lvl.":"",r[t].current!==r[t].max?r[t].current+1:""," - ",n.a.createElement("span",{style:{color:d>s[t]&&r[t].current<r[t].max?"#189969":"red"}},r[t].current<r[t].max?"$".concat(s[t]):"MAXED")),n.a.createElement("br",null)))};function Vr(e){var t=e.type,a=e.setSubMenuType,o=window.gameObjects,i=Object(l.c)(),r=Object(l.d)((function(e){return e.game.player.credits})),d=Object(l.d)((function(e){return e.game.player.modTiers})),p=Object(l.d)((function(e){return e.game.player.modCosts})),c=function(e){switch(e){case"pistol weapon":return"Pistol";case"smg weapon":return"SMG";case"shotgun weapon":return"SHOTGUN"}},u=c(t),h=function(e,t){switch(e){case"rof":return d[e][t].current===d[e][t].max?"RATE OF FIRE MAXED!":"Upgrade Rate-of-Fire";case"powder":return d[e][t].current===d[e][t].max?"FIREPOWER MAXED!":"Increase Firepower";case"sight":return d[e][t].current===d[e][t].max?"ACCURACY MAXED!":"Upgrade Accuracy";case"mag":return d[e][t].current===d[e][t].max?"AMMO CAP MAXED!":"Increase Ammo Capacity"}},m=n.a.useState(null),y=Object(s.a)(m,2),g=y[0],f=y[1],b=n.a.useState(null),w=Object(s.a)(b,2),x=w[0],v=w[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(xr,{style:{marginLeft:"40px"}},g&&x?n.a.createElement(n.a.Fragment,null,n.a.createElement(Cr,{label:"".concat(c(x)," ").concat(h(g,x)," lvl.").concat(d[g][x].current+1,"?"),labelClr:d[g][x].current===d[g][x].max?"red":"white",clickConfirmHandler:function(){(i(de(p[g][x])),i(T(function(e,t){switch(e){case"rof":return"Rate of fire boost for the ".concat(t);case"powder":return"Firepower boost for the ".concat(t);case"sight":return"Accuracy boost for the ".concat(t);case"mag":return"Magazine ammo capacity boost for the ".concat(t)}}(g,x),p[g][x])),i(fe(g,x)),"mag"===g)&&o.getKeyValue("weapons-ui").updateWeaponMagazines(x);"sight"===g&&i(ke(x)),f(null),v(null),a("none - default")},clickCancelHandler:function(){f(null),v(null),a("none - default")}})):["rof","powder","sight","mag"].map((function(e,a){return n.a.createElement(n.a.Fragment,{key:a},n.a.createElement(Er,{onClick:function(){r>=p[e][t]&&d[e][t].current<d[e][t].max?(f(e),v(t)):window.gameObjects.getKeyValue("button-cancel-sound").play()},width:520},u,": ",h(e,t)," ",d[e][t].current===d[e][t].max?"":" - lvl."," ",d[e][t].current<d[e][t].max?d[e][t].current+1:null," - ",n.a.createElement("span",{style:{color:r>=p[e][t]&&d[e][t].current!==d[e][t].max?"#189969":"red"}},"\n                  ".concat(d[e][t].current===d[e][t].max?null:"$".concat(p[e][t])))),n.a.createElement("br",null))}))),g||x?null:n.a.createElement(xr,null,n.a.createElement(Er,{onClick:function(){a("none - default")},width:80,height:30,hoverborder:"red",style:{marginLeft:"10px"}},"close")))}function Kr(){var e=n.a.useState("standard menu"),t=Object(s.a)(e,2),a=t[0],o=t[1],i=n.a.useState("none - default"),r=Object(s.a)(i,2),d=r[0],p=r[1],c=Object(l.c)(),u=Object(l.d)((function(e){return e.game})),h=Object(l.d)((function(e){return e.game.gameState})),m=Object(l.d)((function(e){return e.game.gameSubState})),y=Object(l.d)((function(e){return e.game.player.credits})),g=window.gameObjects,f=g.getKeyValue("game-width"),b=g.getKeyValue("game-height"),x=g.getKeyValue("screen-ui"),k=g.getKeyValue("player"),E=function(){p("none - default")},S=function(){o("ammo menu")},A=function(){o("standard menu"),p("none - default")},P=function(e){switch(e){case"pistol weapon":p("pistol ammunition submenu");break;case"smg weapon":p("smg ammunition submenu");break;case"shotgun weapon":p("shotgun ammunition submenu");break;case"grenades":p("grenades submenu")}},L=function(e){return{color:u.player.credits>u.consumables.healthkit[e].cost&&u.player.health<100?"#189969":"red"}};return n.a.useEffect((function(){"buy weapons menu"===a&&u.player.weapons.list.indexOf("shotgun weapon")>-1&&u.player.weapons.list.indexOf("smg weapon")>-1&&A()}),[u.player.weapons.list,a]),n.a.createElement(n.a.Fragment,null,n.a.createElement(mr,{width:.75*f,height:.75*b},n.a.createElement(yr,{width:.75*f,height:.75*b}),n.a.createElement(gr,null,"Shop"),n.a.createElement(fr,{width:f},"standard menu"===a?n.a.createElement(n.a.Fragment,null,n.a.createElement(wr,null,n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(Er,{width:350,onClick:function(){S()}},"Buy Ammo & Grenades"))),n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(Er,{onClick:function(){o("healthkit menu")}},"Buy Health Kits"))),n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(Er,{onClick:function(){o("perks menu")}},"Perks")))),n.a.createElement(wr,null,n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(Er,{onClick:function(){o("player attributes menu")}},"Upgrade Player"))),n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(Er,{onClick:function(){o("weapon mods menu")}},"Weapon Mods"))),u.player.weapons.list.indexOf("shotgun weapon")>-1&&u.player.weapons.list.indexOf("smg weapon")>-1?null:n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(Er,{onClick:function(){o("buy weapons menu")}},"Buy New Weapons")))),n.a.createElement(wr,null,n.a.createElement(Sr,{onClick:function(){x.unpause(),c(ee("main",h,v.GAMEPLAY)),c(ee("sub",m,w))}},"Back"))):null,"ammo menu"===a?n.a.createElement(n.a.Fragment,null,n.a.createElement(wr,null,n.a.createElement(xr,null,n.a.createElement(wr,null,"pistol ammunition submenu"===d?n.a.createElement(Br,{type:"pistol weapon",toDefaultSubMenu:E,toAmmoSubMenu:S,toStandardMenu:A}):n.a.createElement(Er,{onClick:function(){P("pistol weapon")}},"Buy Pistol Ammo"))),u.player.weapons.list.indexOf("smg weapon")>-1?n.a.createElement(xr,null,n.a.createElement(wr,null,"smg ammunition submenu"===d&&u.player.weapons.list.indexOf("smg weapon")>-1?n.a.createElement(Br,{type:"smg weapon",toDefaultSubMenu:E,toAmmoSubMenu:S,toStandardMenu:A}):n.a.createElement(Er,{onClick:function(){P("smg weapon")}},"Buy SMG Ammo"))):null),n.a.createElement(wr,null,n.a.createElement(xr,null,n.a.createElement(wr,null,"grenades submenu"===d?n.a.createElement(Br,{type:"grenades",toDefaultSubMenu:E,toAmmoSubMenu:S,toStandardMenu:A}):n.a.createElement(Er,{onClick:function(){P("grenades")}},"Buy Grenades"))),u.player.weapons.list.indexOf("shotgun weapon")>-1?n.a.createElement(xr,null,n.a.createElement(wr,null,"shotgun ammunition submenu"===d&&u.player.weapons.list.indexOf("shotgun weapon")>-1?n.a.createElement(Br,{type:"shotgun weapon",toDefaultSubMenu:E,toAmmoSubMenu:S,toStandardMenu:A}):n.a.createElement(Er,{onClick:function(){P("shotgun weapon")}},"Buy Shotgun Shells"))):null),n.a.createElement(wr,null,n.a.createElement(Sr,{onClick:function(){A()}}))):null,"healthkit menu"===a?n.a.createElement(n.a.Fragment,null,n.a.createElement(wr,null,n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(Er,{width:300,onClick:function(){var e;u.player.health<100?(e=u.player.health+20>100?100:u.player.health+20,k.acceptHealth(e),c(de(u.consumables.healthkit[20].cost)),c(T("+20 Healthkit",u.consumables.healthkit[20].cost)),g.getKeyValue("health-pickup-sound").play()):g.getKeyValue("button-cancel-sound").play()}},"+20 Healthkit - ",n.a.createElement("span",{style:L("20")},u.player.health<100?"".concat(u.consumables.healthkit[20].cost):"Health Full")))),n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(Er,{width:300,onClick:function(){var e;u.player.health<100?(e=u.player.health+50>100?100:u.player.health+50,k.acceptHealth(e),c(de(u.consumables.healthkit[50].cost)),c(T("+50 Healthkit",u.consumables.healthkit[50].cost)),g.getKeyValue("health-pickup-sound").play()):g.getKeyValue("button-cancel-sound").play()}},"+50 Healthkit - ",n.a.createElement("span",{style:L("50")},u.player.health<100?"".concat(u.consumables.healthkit[50].cost):"Health Full"))))),n.a.createElement(wr,null,n.a.createElement(Er,{width:300,onClick:function(){u.player.health<100?(k.acceptHealth(100),c(de(u.consumables.healthkit.full.cost)),c(T("Full Healthkit",u.consumables.healthkit.full.cost)),g.getKeyValue("health-pickup-sound").play()):g.getKeyValue("button-cancel-sound").play()}},"Full Healthkit - ",n.a.createElement("span",{style:L("full")},u.player.health<100?"".concat(u.consumables.healthkit.full.cost):"Health Full"))),n.a.createElement(wr,null,n.a.createElement(Sr,{onClick:function(){A()}},"Back"))):null,"player attributes menu"===a?n.a.createElement(n.a.Fragment,null,n.a.createElement(wr,null,n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(_r,{type:"run",toDefaultSubMenu:E,toStandardMenu:A,subMenuType:d,setSubMenuType:p}))),n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(_r,{type:"jump",toDefaultSubMenu:E,toStandardMenu:A,subMenuType:d,setSubMenuType:p}))),n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(_r,{type:"reload",toDefaultSubMenu:E,toStandardMenu:A,subMenuType:d,setSubMenuType:p})))),n.a.createElement(wr,null,n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(_r,{type:"defense",toDefaultSubMenu:E,toStandardMenu:A,subMenuType:d,setSubMenuType:p}))),n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(_r,{type:"melee",toDefaultSubMenu:E,toStandardMenu:A,subMenuType:d,setSubMenuType:p}))),d.indexOf(" upgrade sub menu")>-1?null:n.a.createElement(wr,null,n.a.createElement(Sr,{onClick:function(){A()}},"Back")))):null,"perks menu"===a?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{onClick:function(){o("standard menu")},style:{top:0,right:"20px",marginTop:"-40px",position:"absolute"}},n.a.createElement(Sr,{width:50,arrowOnly:!0})),n.a.createElement(wr,null,u.player.perks.magnetism.owned?null:n.a.createElement(xr,null,n.a.createElement(wr,{"data-tip":!0,"data-for":"increase-magnetism"},n.a.createElement(Er,{width:260,onClick:function(){y>=u.player.perks.magnetism.cost?(c(de(u.player.perks.magnetism.cost)),c(M(1200,4)),c(T("Magnetism perk",u.player.perks.magnetism.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Increase Magnetism",n.a.createElement("span",{style:{color:y>=u.player.perks.magnetism.cost?"green":"red"}},"\xa0$",u.player.perks.magnetism.cost))),n.a.createElement(pr.a,{id:"increase-magnetism",type:"dark"},n.a.createElement("span",null,"Will increase the effect of items being drawn to you for easy pick up"))),u.player.perks.magDmg.owned?null:n.a.createElement(xr,null,n.a.createElement(wr,{"data-tip":!0,"data-for":"mag-damage"},n.a.createElement(Er,{width:260,onClick:function(){y>=u.player.perks.magDmg.cost?(c(de(u.player.perks.magDmg.cost)),c(j()),c(T("Mag Damage perk",u.player.perks.magDmg.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Magazine Damage",n.a.createElement("span",{style:{color:y>=u.player.perks.magDmg.cost?"green":"red"}},"\xa0$",u.player.perks.magDmg.cost))),n.a.createElement(pr.a,{id:"mag-damage",type:"dark"},n.a.createElement("span",null,"Ejected magazines will damage enemies"))),u.player.perks.lastBullet.owned?null:n.a.createElement(xr,null,n.a.createElement(wr,{"data-tip":!0,"data-for":"last-bullet"},n.a.createElement(Er,{width:260,onClick:function(){y>=u.player.perks.lastBullet.cost?(c(de(u.player.perks.lastBullet.cost)),c(F()),c(T("Last Bullet Extra Damage perk",u.player.perks.lastBullet.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Last Round",n.a.createElement("span",{style:{color:y>=u.player.perks.lastBullet.cost?"green":"red"}},"\xa0$",u.player.perks.lastBullet.cost))),n.a.createElement(pr.a,{id:"last-bullet",type:"dark"},n.a.createElement("span",null,"Last bullet fired will cause greater damage to enemies")))),n.a.createElement(wr,null,u.player.perks.creditDropper.owned?null:n.a.createElement(xr,null,n.a.createElement(wr,{"data-tip":!0,"data-for":"credit-dropper"},n.a.createElement(Er,{width:260,onClick:function(){y>=u.player.perks.creditDropper.cost?(c(de(u.player.perks.creditDropper.cost)),c(O()),c(T("Credit Dropper perk",u.player.perks.creditDropper.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Credit Dropper",n.a.createElement("span",{style:{color:y>=u.player.perks.creditDropper.cost?"green":"red"}},"\xa0$",u.player.perks.creditDropper.cost))),n.a.createElement(pr.a,{id:"credit-dropper",type:"dark"},n.a.createElement("span",null,"Enemies will drop more credits"))),u.player.perks.ammoDropper.owned?null:n.a.createElement(xr,null,n.a.createElement(wr,{"data-tip":!0,"data-for":"ammo-dropper"},n.a.createElement(Er,{width:260,onClick:function(){y>=u.player.perks.ammoDropper.cost?(c(de(u.player.perks.ammoDropper.cost)),c(K()),c(T("Ammo Dropper perk",u.player.perks.ammoDropper.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Ammo Dropper",n.a.createElement("span",{style:{color:y>=u.player.perks.ammoDropper.cost?"green":"red"}},"\xa0$",u.player.perks.ammoDropper.cost))),n.a.createElement(pr.a,{id:"ammo-dropper",type:"dark"},n.a.createElement("span",null,"Enemies will now drop ammunition"))),u.player.perks.healthDropper.owned?null:n.a.createElement(xr,null,n.a.createElement(wr,{"data-tip":!0,"data-for":"health-dropper"},n.a.createElement(Er,{width:260,onClick:function(){y>=u.player.perks.healthDropper.cost?(c(de(u.player.perks.healthDropper.cost)),c(V()),c(T("Health Dropper perk",u.player.perks.healthDropper.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Health Dropper",n.a.createElement("span",{style:{color:y>=u.player.perks.healthDropper.cost?"green":"red"}},"\xa0$",u.player.perks.healthDropper.cost))),n.a.createElement(pr.a,{id:"health-dropper",type:"dark"},n.a.createElement("span",null,"Enemies will now drop small health kits")))),n.a.createElement(wr,null,u.player.perks.quickTurret.owned?null:n.a.createElement(xr,null,n.a.createElement(wr,{"data-tip":!0,"data-for":"quick-turret"},n.a.createElement(Er,{width:260,onClick:function(){y>=u.player.perks.quickTurret.cost?(c(de(u.player.perks.quickTurret.cost)),c(_()),c(T("Turret Upgrade perk",u.player.perks.quickTurret.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Quick Turrets",n.a.createElement("span",{style:{color:y>=u.player.perks.quickTurret.cost?"green":"red"}},"\xa0$",u.player.perks.quickTurret.cost))),n.a.createElement(pr.a,{id:"quick-turret",type:"dark"},n.a.createElement("span",null,"Any placed machine gun turrets will now have less delay between fired shots and slightly more range"))),u.player.perks.barrierPlus.owned?null:n.a.createElement(xr,null,n.a.createElement(wr,{"data-tip":!0,"data-for":"barrier-plus"},n.a.createElement(Er,{width:260,onClick:function(){y>=u.player.perks.barrierPlus.cost?(c(de(u.player.perks.barrierPlus.cost)),c(B()),c(T("Barrier Plus+ perk",u.player.perks.barrierPlus.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Barrier Plus",n.a.createElement("span",{style:{color:y>=u.player.perks.barrierPlus.cost?"green":"red"}},"\xa0$",u.player.perks.barrierPlus.cost))),n.a.createElement(pr.a,{id:"barrier-plus",type:"dark"},n.a.createElement("span",null,"Placed barriers will now have increased strength to ward of oncoming enemies"))),u.player.perks.cluck.owned?null:n.a.createElement(xr,null,n.a.createElement(wr,{"data-tip":!0,"data-for":"big-cluster"},n.a.createElement(Er,{width:260,onClick:function(){y>=u.player.perks.cluck.cost?(c(de(u.player.perks.cluck.cost)),c(C()),c(T("Fuster Cluck perk",u.player.perks.cluck.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Fuster Cluck",n.a.createElement("span",{style:{color:y>=u.player.perks.cluck.cost?"green":"red"}},"\xa0$",u.player.perks.cluck.cost))),n.a.createElement(pr.a,{id:"big-cluster",type:"dark"},n.a.createElement("span",null,"Cluster bombs will now expel more explosives"))))):null,"buy weapons menu"===a?n.a.createElement(n.a.Fragment,null,n.a.createElement(wr,null,u.player.weapons.list.indexOf("smg weapon")<0?n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(Er,{width:300,onClick:function(){y>=u.player.weapons.buyWeapons["smg weapon"]?Object(l.b)((function(){c(de(u.player.weapons.buyWeapons["smg weapon"])),c(T("Submachine Gun",u.player.weapons.buyWeapons["smg weapon"])),c(_e("smg weapon"))})):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Buy Submachine Gun: ",n.a.createElement("span",{style:{color:y<=u.player.weapons.buyWeapons["smg weapon"]?"red":"green"}},"$",u.player.weapons.buyWeapons["smg weapon"])))):null,u.player.weapons.list.indexOf("shotgun weapon")<0?n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(Er,{width:300,onClick:function(){y>=u.player.weapons.buyWeapons["shotgun weapon"]?Object(l.b)((function(){c(de(u.player.weapons.buyWeapons["shotgun weapon"])),c(T("Shotgun",u.player.weapons.buyWeapons["shotgun weapon"])),c(_e("shotgun weapon"))})):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Buy Shotgun: ",n.a.createElement("span",{style:{color:y<=u.player.weapons.buyWeapons["shotgun weapon"]?"red":"green"}},"$",u.player.weapons.buyWeapons["shotgun weapon"])))):null),n.a.createElement(wr,null,n.a.createElement(Sr,{onClick:function(){A()}}))):null,"weapon mods menu"===a?n.a.createElement(n.a.Fragment,null,n.a.createElement(wr,{style:{marginTop:"-15px"}},"pistol mods submenu"===d?n.a.createElement(xr,null,n.a.createElement(Vr,{type:"pistol weapon",setSubMenuType:p})):null,"smg mods submenu"===d?n.a.createElement(xr,null,n.a.createElement(Vr,{type:"smg weapon",setSubMenuType:p})):null,"shotgun mods submenu"===d?n.a.createElement(xr,null,n.a.createElement(Vr,{type:"shotgun weapon",setSubMenuType:p})):null,"none - default"===d?n.a.createElement(n.a.Fragment,null,n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(Er,{onClick:function(){p("pistol mods submenu")}},"Pistol Mods"))),u.player.weapons.list.indexOf("smg weapon")>-1?n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(Er,{onClick:function(){p("smg mods submenu")}},"SMG Mods"))):null,u.player.weapons.list.indexOf("shotgun weapon")>-1?n.a.createElement(xr,null,n.a.createElement(wr,null,n.a.createElement(Er,{onClick:function(){p("shotgun mods submenu")}},"Shotgun Mods"))):null,n.a.createElement(wr,{style:{marginTop:"40px"}},n.a.createElement(Sr,{onClick:A},"Back"))):null)):null)))}var Or=lr.Container,Fr=lr.Backing,jr=lr.MenuTitle,Mr=lr.MenuButtonContainer,Tr=lr.MenuButtonSpacer,Pr=function(){for(var e=window.gameObjects,t=e.getKeyValue("screen-ui"),a=e.getKeyValue("zombies"),o=e.getKeyValue("player"),n=Ke.dispatch;a.length>0;)a.forEach((function(e){e.kill(null,!0)}));t.unpause(),o.dead&&t.respawn(),n(Be(0)),n(oe(null)),n(ee("sub",Ke.getState().game.gameSubState,h)),n(ee("main",Ke.getState().game.gameState,v.MAIN_MENU))},Lr=function(e){var t=e.bgcolor,a=e.bordercolor,o=e.hoverborder,i=e.hovercolor,r=e.width,s=e.children;return n.a.createElement(Er,{onMouseOver:null,width:r||"200px",hovercolor:i||"#222",hoverborder:o||"#333",bordercolor:a||"#333",bgcolor:t||"#222",cancelTransition:!0},s)};function Dr(e){var t=window.gameObjects,a=Object(l.c)(),o=Object(l.d)((function(e){return e.game.gameState})),i=Object(l.d)((function(e){return e.game.gameSubState})),r=t.getKeyValue("game-width"),d=t.getKeyValue("game-height"),p="Default",c="Controls",u="Options",h=function(){b(p)},y=n.a.useState(p),g=Object(s.a)(y,2),f=g[0],b=g[1],w=Object(l.d)((function(e){return e.game.filterEffects})),x=Object(l.d)((function(e){return e.game.displayZombieHealth}));return n.a.createElement(n.a.Fragment,null,t?n.a.createElement(Or,{style:{top:e.margintop?"100px":0},width:.75*r,height:e["shop-query-visibility"]?.5*d:.75*d},e.hidebg?null:n.a.createElement(n.a.Fragment,null,n.a.createElement(Fr,{bgcolor:"#222",opacity:o===v.MAIN_MENU?.35:.5,width:.75*r,height:e["shop-query-visibility"]?.5*d:.75*d})),f===p?n.a.createElement(n.a.Fragment,null,e.hidetitle?null:n.a.createElement(jr,null,"Pause Menu"),n.a.createElement(Mr,{width:r||0},n.a.createElement(Tr,{padding:4},e.playbtn?n.a.createElement(Er,{onClick:function(){a(ee("main",o,v.GAMEPLAY)),a(ee("sub",i,m))}},"Play Game"):n.a.createElement(Er,{onClick:function(){window.gameObjects.getKeyValue("screen-ui").togglePause()}},"Resume Game")),o!==v.MAIN_MENU?n.a.createElement(Tr,{padding:4},n.a.createElement(Er,{onClick:Pr},"Main Menu")):n.a.createElement(Tr,null,n.a.createElement(Er,{onClick:function(){a(ee("main",v.MAIN_MENU,v.SCORES_VIEW))}},"Scoreboard")),n.a.createElement(Tr,{padding:4},n.a.createElement(Er,{onClick:function(){b(c)}},"View Controls")),n.a.createElement(Tr,{padding:4},n.a.createElement(Er,{onClick:function(){b(u)}},"Options")))):null,f===c?n.a.createElement(n.a.Fragment,null,n.a.createElement(jr,null,"Controls"),n.a.createElement(Mr,{width:r},n.a.createElement(Ar,{marginTop:"-60px",onClick:h}),n.a.createElement(xr,null,n.a.createElement(Er,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Jump: W"),n.a.createElement(Er,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Run Left: A"),n.a.createElement(Er,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Run Right: D"),n.a.createElement(Er,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Melee Weapon Bash: F"),n.a.createElement(Er,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Aim: Mouse"),n.a.createElement(Er,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Shoot: Left Mouse")),n.a.createElement(xr,null,n.a.createElement(Er,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Charge Grenade Throw: Hold G / Right Mouse"),n.a.createElement(Er,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Change Weapon: Space / Mouse Wheel"),n.a.createElement(Er,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Turn Turret: L/R Arrow (while placing)"),n.a.createElement(Er,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Detonate remote mines: Numpad  1 - 9")))):null,f===u?n.a.createElement(n.a.Fragment,null,n.a.createElement(jr,null,"Options"),n.a.createElement(Mr,null,n.a.createElement(Ar,{marginTop:"-60px",onClick:h}),n.a.createElement(Tr,null,n.a.createElement(xr,null,n.a.createElement(Tr,{padding:4},n.a.createElement(Lr,{width:240},"Effect Filters?"))),n.a.createElement(xr,null,n.a.createElement(Tr,{padding:4,"data-tip":!0,"data-for":"effects-filter"},n.a.createElement(Er,{width:100,hoverborder:w?"white":"red",onClick:function(){a(A(!w)),window.gameObjects.getKeyValue("zombies").forEach((function(e){return e.checkFilters()}));var e=window.gameObjects.getKeyValue("ammo-drops-by-type");e["smg weapon"].concat(e["pistol weapon"]).concat(e["shotgun weapon"]).forEach((function(e){return e.checkFilters()})),window.gameObjects.getKeyValue("currency-drops").forEach((function(e){return e.checkFilters()})),window.gameObjects.getKeyValue("health-drops").forEach((function(e){return e.checkFilters()})),window.gameObjects.getKeyValue("player").checkFilters(),window.gameObjects.getKeyValue("weapons-ui").checkFilters()}},n.a.createElement("span",{style:{color:w?"white":"red"}},w?"On":"Off"))),n.a.createElement(pr.a,{id:"effects-filter"},n.a.createElement("span",null,"Adds filter effects like glow and motion blur to animations. Turning off could improve performance.")))),n.a.createElement(Tr,null,n.a.createElement(xr,null,n.a.createElement(Tr,{padding:4},n.a.createElement(Lr,{width:240},"Display Zombie Health?"))),n.a.createElement(xr,null,n.a.createElement(Tr,{padding:4,"data-tip":!0,"data-for":"display-zombie-health"},n.a.createElement(Er,{width:100,hoverborder:x?"white":"red",onClick:function(){a(S(!x)),window.gameObjects.getKeyValue("zombies").forEach((function(e){e.displayHealth(!x)}))}},n.a.createElement("span",{style:{color:x?"white":"red"}},x?"On":"Off"))),n.a.createElement(pr.a,{id:"display-zombie-health"},n.a.createElement("span",null,"Displays a yellow text box above each enemy zombie")))))):null):null)}function Rr(){var e=Object(er.a)(["\nheight: 140px;\nwidth: 100%;\nbackground-color: #333;\nopacity: .8;\n"]);return Rr=function(){return e},e}function zr(){var e=Object(er.a)(["\nheight: 140px;\nwidth: 100%;\nposition: absolute;\nmargin: auto;\ntop: 40px;\n"]);return zr=function(){return e},e}var Wr=lr.MenuButtonContainer,Ir=lr.MenuButtonSpacer,Hr=tr.a.div(zr()),Ur=tr.a.div(Rr());function Gr(){var e=window.gameObjects,t=Object(l.c)(),a=Object(l.d)((function(e){return e.game.gameState})),o=Object(l.d)((function(e){return e.game.gameSubState}));return n.a.createElement(n.a.Fragment,null,n.a.createElement(Hr,{className:"shop-query-menu"},n.a.createElement(Ur,null),n.a.createElement(Wr,{"space-top":2},n.a.createElement(Ir,null,n.a.createElement(xr,null,n.a.createElement(Ir,{padding:4},n.a.createElement(Er,{width:400,height:40,onClick:function(){t(ee("main",a,v.SHOP_MENU)),t(ee("sub",o,h))}},"Shop"))),n.a.createElement(xr,null,n.a.createElement(Ir,{padding:4},n.a.createElement(Er,{width:400,height:40,onClick:function(){t(ee("main",a,v.BUILD_MENU)),t(ee("sub",o,h))}},"Build Barriers/Traps")))),n.a.createElement(Ir,{padding:2},n.a.createElement(Er,{width:400,height:40,onClick:function(){e.getKeyValue("screen-ui").unpause(),t(te()),t(ee("main",a,v.GAMEPLAY)),t(ee("sub",o,m))}},"Next Wave")))))}var Nr=function(){var e=window.gameObjects,t=Object(l.c)(),a=Object(l.d)((function(e){return e.game.gameSubState})),o=Object(l.d)((function(e){return e.game.lastGameSubState})),i=Object(l.d)((function(e){return e.game.player.credits})),r=Object(l.d)((function(e){return e.game.respawnCost})),s=Object(l.d)((function(e){return e.game.respawnToShopCost})),d=Object(l.d)((function(e){return e.game.waveNum})),p=e.getKeyValue("game-width"),c=e.getKeyValue("game-height"),u=e.getKeyValue("screen-ui");return n.a.createElement(n.a.Fragment,null,n.a.createElement(lr.Container,{width:.75*p,height:.75*c},n.a.createElement(lr.Backing,{width:.75*p,height:.75*c}),n.a.createElement(lr.MenuTitle,null,i>=s?"Respawn Menu":"Game Over"),n.a.createElement(lr.MenuButtonContainer,null,i>=r||o===w?n.a.createElement(lr.MenuButtonSpacer,null,n.a.createElement(Er,{width:240,onClick:function(){u.respawn(),o!==w&&o!==b&&o!==y&&t(ee("sub",a,m)),o!==w&&t(de(r)),t(T("Respawn",r))}},"Respawn? ",o===w?"":"$".concat(r))):null,i>=s&&d>0&&o!==w?n.a.createElement(lr.MenuButtonSpacer,null,n.a.createElement(Er,{width:360,onClick:function(){var o=e.getKeyValue("zombies");o.forEach((function(e){e.removeZombieFromMatterWorld()})),o.forEach((function(e){e.removeZombieFromZombiesArray()})),u.respawn(),t(ae()),t(oe(null)),t(ee("sub",a,w)),t(de(s)),t(T("Shop Respawn",s))}},"Restart Current Wave from Shop? ","$".concat(s))):null,n.a.createElement(lr.MenuButtonSpacer,null,n.a.createElement(Er,{onClick:Pr},"Go to Main Menu")))))},qr=function(){var e=window.gameObjects,t=Object(l.c)(),a=e.getKeyValue("game-width"),o=e.getKeyValue("game-height"),i=e.getKeyValue("screen-ui"),r=Object(l.d)((function(e){return e.game.gameState})),d=Object(l.d)((function(e){return e.game.gameSubState})),p="main",c="barriers",u="traps",h=n.a.useState(p),m=Object(s.a)(h,2),y=m[0],g=m[1],f=Object(l.d)((function(e){return e.game.barriers.costToBuild})),b=Object(l.d)((function(e){return e.game.traps.costToBuild})),k=Object(l.d)((function(e){return e.game.player.credits})),E=function(){g(p)},S=function(){e.getKeyValue("screen-ui").unpause(),t(ee("main",r,v.GAMEPLAY)),t(ee("sub",d,x))},A=function(){e.getKeyValue("crosshair").buildArrow(16777215)},C=function(e){k>=f[e]&&(t(Se(e)),t(Ae(null)),A(),setTimeout((function(){S()}),50))},B=function(e){k>=b[e]&&(t(Ae(e)),t(Se(null)),A(),setTimeout((function(){S()}),50))};return n.a.createElement(n.a.Fragment,null,n.a.createElement(lr.Container,{width:.75*a,height:.75*o},n.a.createElement(lr.Backing,{width:.75*a,height:.75*o}),y===u?n.a.createElement(n.a.Fragment,null,n.a.createElement(lr.MenuTitle,null,"Build Traps"),n.a.createElement(lr.MenuButtonContainer,null,n.a.createElement(lr.MenuButtonSpacer,null,n.a.createElement(lr.MenuButtonSpacer,null,Object.keys(Bt).filter((function(e,t){return t%2==0})).map((function(e,t){return n.a.createElement(xr,{key:t},n.a.createElement(lr.MenuButtonSpacer,null,n.a.createElement(Er,{width:Bt[e].length>14?300:200,onClick:function(){return B(Bt[e])}},Bt[e]," ",n.a.createElement("span",{style:{color:k>=b[Bt[e]]?"#ffffff":"#ff0000"}},"$",b[Bt[e]]))))}))),n.a.createElement(lr.MenuButtonSpacer,null,Object.keys(Bt).filter((function(e,t){return t%2==1})).map((function(e,t){return n.a.createElement(xr,{key:t},n.a.createElement(lr.MenuButtonSpacer,null,n.a.createElement(Er,{width:Bt[e].length>14?300:200,onClick:function(){return B(Bt[e])}},Bt[e]," ",n.a.createElement("span",{style:{color:k>=b[Bt[e]]?"#ffffff":"#ff0000"}},"$",b[Bt[e]]))))}))),n.a.createElement(lr.MenuButtonSpacer,null,n.a.createElement(Sr,{onClick:E},"Back"))))):null,y===c?n.a.createElement(n.a.Fragment,null,n.a.createElement(lr.MenuTitle,null,"Build Barriers"),n.a.createElement(lr.MenuButtonContainer,null,n.a.createElement(lr.MenuButtonSpacer,null,Object.keys(Ct).filter((function(e,t){return t%2==1})).map((function(e,t){return n.a.createElement(xr,{key:t},n.a.createElement(lr.MenuButtonSpacer,null,n.a.createElement(Er,{width:Ct[e].length>14?300:200,onClick:function(){return C(Ct[e])}},Ct[e]," ",n.a.createElement("span",{style:{color:k>=f[Ct[e]]?"#ffffff":"#ff0000"}},"$",f[Ct[e]]))))}))),n.a.createElement(lr.MenuButtonSpacer,null,Object.keys(Ct).filter((function(e,t){return t%2==0})).map((function(e,t){return n.a.createElement(xr,{key:t},n.a.createElement(lr.MenuButtonSpacer,null,n.a.createElement(Er,{width:Ct[e].length>14?300:200,onClick:function(){return C(Ct[e])}},Ct[e]," ",n.a.createElement("span",{style:{color:k>=f[Ct[e]]?"#ffffff":"#ff0000"}},"$",f[Ct[e]]))))})),n.a.createElement(lr.MenuButtonSpacer,null,n.a.createElement(lr.MenuButtonSpacer,{padding:20}),n.a.createElement(Sr,{onClick:E},"Back"))))):null,y===p?n.a.createElement(n.a.Fragment,null,n.a.createElement(lr.MenuTitle,null,"Build Menu"),n.a.createElement(lr.MenuButtonContainer,null,n.a.createElement(lr.MenuButtonSpacer,null,n.a.createElement(xr,null,n.a.createElement(lr.MenuButtonSpacer,null,n.a.createElement(Er,{onClick:function(){g(c)}},"Barriers"))),n.a.createElement(xr,null,n.a.createElement(lr.MenuButtonSpacer,null,n.a.createElement(Er,{onClick:function(){g(u)}},"Traps")))),n.a.createElement(lr.MenuButtonSpacer,{padding:20}),n.a.createElement(lr.MenuButtonSpacer,null,n.a.createElement(Sr,{onClick:function(){i.unpause(),t(ee("main",r,v.GAMEPLAY)),t(ee("sub",d,w))}},"Back")))):null))};function Yr(){var e=Object(er.a)(["\nheight: 120px;\nwidth: 100%;\nbackground-color: #333;\nopacity: .8;\n"]);return Yr=function(){return e},e}function Xr(){var e=Object(er.a)(["\nheight: 120px;\nwidth: 100%;\nposition: absolute;\nbottom: 0;\n"]);return Xr=function(){return e},e}var Zr=lr.MenuButton,$r=lr.MenuButtonContainer,Jr=lr.MenuButtonSpacer,Qr=tr.a.div(Xr()),es=tr.a.div(Yr()),ts=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Qr,{className:"shop-query-menu"},n.a.createElement(es,null),n.a.createElement($r,{"space-top":2},n.a.createElement(Jr,null,n.a.createElement(xr,null,n.a.createElement(Jr,{padding:4},n.a.createElement(Zr,{bgcolor:"#555",width:500,height:40},"Done Placing Barriers/Traps: Press [ B ]")))))))},as=a(118),os=a.n(as),ns=function(e){return n.a.createElement(lr.Container,null,n.a.createElement(lr.MenuTitle,null,"Scoreboard"),n.a.createElement(lr.MenuButtonContainer,null,e&&e.scores&&e.scores.map((function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Lr,{bgcolor:"rgba(0, 0, 0, 0.25)",hovercolor:"rgba(0, 0, 0, 0.35)",bordercolor:"rgba(0, 0, 0, 0)",hoverborder:"rgba(0, 0, 0, 0)"},n.a.createElement(xr,null,n.a.createElement("div",{style:{textAlign:"left",paddingRight:"100px"}},e.name)),n.a.createElement(xr,null,n.a.createElement("div",null,e.score))))})),n.a.createElement(Ar,{marginTop:"-60px",onClick:Pr})))};function is(){var e=window,t=e.gameObjects,a=e.TweenLite.delayedCall,o=Object(l.c)(),i=Object(l.d)((function(e){return e.game})),r=Object(l.d)((function(e){return e.game.player.weapons.equipped})),p=n.a.useRef(null),c=n.a.useRef(!1),u=function(e){var t=n.a.useState(e),a=Object(s.a)(t,2);return[a[0],a[1]]}([]),h=Object(s.a)(u,2),b=h[0],k=h[1];return n.a.useEffect((function(){qi()}),[]),n.a.useEffect((function(){!function(){var e=window.gameObjects,t=Xa().game.gameState;if(e){var a=e.getKeyValue("weapons-ui");!a||a.reloading&&t!==v.SHOP_MENU||(a.select(),e=null)}}()}),[r]),n.a.useEffect((function(){if(i.gameSubState===y&&(console.log("wave starting.."),$i()),i.gameSubState===g&&(console.log("wave defeated"),Qi()),i.gameSubState===m){var e=3;c.current=!1,p.current=setInterval((function(){Xe("".concat(e),"#FFFFFF",.25,.5),e-=1}),1e3),a(4,(function(){c.current||(clearInterval(p.current),o(ee("sub",i.gameSubState,y)))}))}i.gameSubState===f&&(clearInterval(p.current),c.current=!0,Xe("You died.","#FF0000",.75,3))}),[i.gameSubState,a,o]),n.a.useEffect((function(){0===i.waveCountToDefeat&&i.gameSubState!==w&&Qi()}),[i.waveCountToDefeat,i.lastGameSubState,i.gameSubState,o]),n.a.useEffect((function(){(console.log("Game state has changed"),i.gameState===v.SHOP_MENU||i.gameState===v.BUILD_MENU)&&t.getKeyValue("screen-ui").pause();i.gameState===v.MAIN_MENU||i.gameState===v.GAMEPLAY?document.getElementsByClassName("App")[0].style.pointerEvents="none":document.getElementsByClassName("App")[0].style.pointerEvents="all",i.gameState===v.GAMEPLAY&&null===i.player.weapons.equipped&&o(Z("pistol weapon"))}),[i.gameState,i.player.weapons.equipped,t,o]),n.a.useEffect((function(){null!==i.purchases&&i.lastPurchase&&null!==i.lastPurchase.item&&i.lastPurchase.amount>0&&(window.gameObjects.getKeyValue("purchase-sound").play(),window.gameObjects.getKeyValue("confirm-sound").play(),d.b.dark("You bought ".concat(i.lastPurchase.item," for $").concat(i.lastPurchase.amount),{autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}));console.log(i.lastPurchase)}),[i.purchases,i.lastPurchase]),n.a.useEffect((function(){var e;i.gameState===v.SCORES_VIEW&&os.a.get("http://localhost:8080/scores").catch((function(t){console.log(t),e=!0})).then((function(t){e?console.log("api is on a different port, use yarn build to view working scores"):k(t.data)}))}),[i.gameState]),n.a.createElement(n.a.Fragment,null,n.a.createElement(d.a,null),n.a.createElement(n.a.Fragment,null,i.gameState===v.SCORES_VIEW?n.a.createElement(ns,{scores:b}):null),n.a.createElement(n.a.Fragment,null,i.gameState===v.MAIN_MENU&&window.gameObjects?n.a.createElement(n.a.Fragment,null,n.a.createElement(Dr,{margintop:!0,hidetitle:!0,hidebg:!1,bgcolor:"#222",playbtn:!0})):null),n.a.createElement(n.a.Fragment,null,i.gameSubState===x&&i.gameState===v.GAMEPLAY?n.a.createElement(n.a.Fragment,null,n.a.createElement(ts,null)):null),n.a.createElement(n.a.Fragment,null,t&&i.gameState===v.PAUSE?n.a.createElement(Dr,{"shop-query-visibility":i.gameSubState===w}):n.a.createElement(n.a.Fragment,null)),n.a.createElement(n.a.Fragment,null,i.gameState===v.SHOP_MENU?n.a.createElement(Kr,null):n.a.createElement(n.a.Fragment,null)),n.a.createElement(n.a.Fragment,null,i.gameState===v.BUILD_MENU?n.a.createElement(qr,null):n.a.createElement(n.a.Fragment,null)),n.a.createElement(n.a.Fragment,null,i.gameSubState===w?n.a.createElement(Gr,null):n.a.createElement(n.a.Fragment,null)),n.a.createElement(n.a.Fragment,null,i.gameSubState===f?n.a.createElement(Nr,null):null),n.a.createElement(n.a.Fragment,null,i.gameState!==v.MAIN_MENU&&i.gameState!==v.SCORES_VIEW?n.a.createElement("div",{style:{backgroundColor:"#333",position:"absolute",margin:"auto",width:"50%",height:"30px",lineHeight:"30px",top:"4px",left:0,right:0,textAlign:"center",borderRadius:"2px"}},n.a.createElement("div",{style:{display:"inline-block"},className:"debug-ui"},"wave no: ",i.waveNum),n.a.createElement("div",{style:{marginLeft:"100px",display:"inline-block"},className:"debug-ui"},"enemies to defeat: ",i.waveCountToDefeat)):null,i.gameState!==v.MAIN_MENU&&i.gameState!==v.SCORES_VIEW?n.a.createElement("div",{className:"total-ammo-count-ui"},i.player.weapons.totalAmmo[i.player.weapons.equipped]):null,i.gameState!==v.MAIN_MENU&&i.gameState!==v.SCORES_VIEW?n.a.createElement("div",{className:"total-credits-ui"},"credits: ",n.a.createElement("span",{style:{color:"#71DD4D"}},"$",i.player.credits)):null))}var rs=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement(is,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(l.a,{store:Ke},n.a.createElement(rs,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}]),[[121,1,2]]]);
//# sourceMappingURL=main.464c91ae.chunk.js.map