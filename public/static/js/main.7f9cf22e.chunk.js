(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],Array(54).concat([function(e,t,a){e.exports=a.p+"static/media/pistol-icon.7f31cd11.png"},function(e,t,a){e.exports=a.p+"static/media/smg-icon.3a3ac587.png"},function(e,t,a){e.exports=a.p+"static/media/shotgun-icon.0cd5d683.png"},function(e,t,a){e.exports=a.p+"static/media/GroundTexture_Optimized.b017db2f.png"},function(e,t,a){e.exports=a.p+"static/media/wallTile.c21abdef.png"},function(e,t,a){e.exports=a.p+"static/media/gradient-layer-mask.2be09341.png"},function(e,t,a){e.exports=a.p+"static/media/explosiveBarrier.4f1da0f2.png"},function(e,t,a){e.exports=a.p+"static/media/head-sprite.0a5881b1.png"},function(e,t,a){e.exports=a.p+"static/media/bodyBulletImpact.94466266.wav"},,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/GameCover.82b711ae.png"},function(e,t,a){e.exports=a.p+"static/media/9mm1.604f7da7.wav"},function(e,t,a){e.exports=a.p+"static/media/9mm2.c11c6dad.mp3"},function(e,t,a){e.exports=a.p+"static/media/explosion1.9434e92f.wav"},function(e,t,a){e.exports=a.p+"static/media/explosion_distant.d9a90524.wav"},function(e,t,a){e.exports=a.p+"static/media/pistolReload.915ac0e1.wav"},function(e,t,a){e.exports=a.p+"static/media/grenadeClink.e7168e2c.wav"},function(e,t,a){e.exports=a.p+"static/media/throw.e7ed00d6.wav"},function(e,t,a){e.exports=a.p+"static/media/coinCollect.b65cb627.wav"},function(e,t,a){e.exports=a.p+"static/media/collectAmmo.b05c1059.wav"},function(e,t,a){e.exports=a.p+"static/media/collectItem.a7bd5386.wav"},function(e,t,a){e.exports=a.p+"static/media/bloodSquash.6c1046e0.flac"},function(e,t,a){e.exports=a.p+"static/media/bloodSquish.508e6483.wav"},function(e,t,a){e.exports=a.p+"static/media/bloodSmack.eb606367.wav"},function(e,t,a){e.exports=a.p+"static/media/deathRipSound.733ed512.wav"},function(e,t,a){e.exports=a.p+"static/media/jumpLanding.f703082d.wav"},function(e,t,a){e.exports=a.p+"static/media/dirtImpact.de2bbd17.wav"},function(e,t,a){e.exports=a.p+"static/media/zombieHurt.2e807e84.wav"},function(e,t,a){e.exports=a.p+"static/media/zombieDeath.0ac25f1f.wav"},function(e,t,a){e.exports=a.p+"static/media/pain1.e6646ac7.wav"},function(e,t,a){e.exports=a.p+"static/media/pain2.defb4bdf.wav"},function(e,t,a){e.exports=a.p+"static/media/playerDeath.e8c5712d.wav"},function(e,t,a){e.exports=a.p+"static/media/buttonAdd.8db1c8cf.wav"},function(e,t,a){e.exports=a.p+"static/media/buttonSubtract.b240a4d0.wav"},function(e,t,a){e.exports=a.p+"static/media/buttonClick.10d30b9f.wav"},function(e,t,a){e.exports=a.p+"static/media/buttonHover.e0064aca.wav"},function(e,t,a){e.exports=a.p+"static/media/placeObject.fa092176.flac"},function(e,t,a){e.exports=a.p+"static/media/cancelSound.0d1ffcde.wav"},function(e,t,a){e.exports=a.p+"static/media/moneySound.1bae50c5.wav"},function(e,t,a){e.exports=a.p+"static/media/purchase.4979dc37.wav"},function(e,t,a){e.exports=a.p+"static/media/shellImpact.8075d182.wav"},function(e,t,a){e.exports=a.p+"static/media/health.29ff687c.wav"},function(e,t,a){e.exports=a.p+"static/media/zombieGrowl.4792280f.wav"},function(e,t,a){e.exports=a.p+"static/media/smgFire.b1f03f38.wav"},function(e,t,a){e.exports=a.p+"static/media/magDrop.1547e6a9.wav"},function(e,t,a){e.exports=a.p+"static/media/shotShell.f90e6de6.wav"},function(e,t,a){e.exports=a.p+"static/media/shotgunBlast.4118af72.wav"},function(e,t,a){e.exports=a.p+"static/media/achievement1.dd62d37e.wav"},function(e,t,a){e.exports=a.p+"static/media/achievement2.7a014c29.mp3"},function(e,t,a){e.exports=a.p+"static/media/achievement3.23db76c0.wav"},function(e,t,a){e.exports=a.p+"static/media/jumpSound.ccaa05f0.wav"},function(e,t,a){e.exports=a.p+"static/media/grenadeCharge.31709a11.wav"},,,,,function(e,t,a){e.exports=a(194)},,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(29),r=a.n(i),s=(a(131),a(16)),l=a(9),d=a(48),c=(a(136),a(2)),p=a(46),u=a(32),h=a(30),m="neutral",g="waiting",y="wave started",f="wave defeated",b="player death",w="player respawn",v="shop query sub-menu",x="build trap placement mode",E={MAIN_MENU:"main menu",GAMEPLAY:"gameplay",PAUSE:"pause",IN_GAME_MENU:"in-game menu",GAMEOVER:"gameover",SHOP_MENU:"in-game shop menu",BUILD_MENU:"build menu",SCORES_VIEW:"scores view"},S={THIS_IS_SPARTA:"SPARTA",FROM_DOWNTOWN:"Downtown",FIRE_IN_THE_HOLE:"Triplets",WEAPONS_COLLECTOR:"Collector",PISTOL_MODDER:"P.Modder",SMG_MODDER:"SMG Modder",SHOTGUN_MODDER:"S.Modder",MOD_AFICIONADO:"Aficionado",THE_JUMP_SHOT:"Jumpshot",PILEDRIVE:"Piledrive",TRAPHOUSE:"Traphouse",BARRICADE:"Barricade",MINER:"Miner",GUNNA:"Gunna"},k="zombiesKilled",A="bulletsFired",C="timesReloaded",B="grenadesThrown",_="timesKilled",O="timesRespawned",K="meleeKills",V="mineKills",T="trapsPlaced",M="turretKills",j="damageTaken",F=Object(p.b)({name:"game",initialState:{width:1200,height:550,keys:[],score:0,prevScore:0,lvlToWin:30,scoreToggle:!1,scoreAmounts:{zombie:500,meleeConnect:100,zombieStreakBonus:250,zombieKnockedOffStage:500,headShot:100,collectCredit:10,collectHealth:10,collectAmmo:10,waveCompleted:1e3,achievement:5e3,penalties:{respawn:1e3,killed:500,damageTaken:20}},achievements:{SPARTA:{owned:!1,description:"Kicking a zombie off-stage"},Downtown:{owned:!1,description:"Throwing a grenade 2000 ft. and hitting a zombie"},Triplets:{owned:!1,description:"Killing 3 Zombies with one grenade"},Collector:{owned:!1,description:"Buying both the Shotgun and the SMG from the Shop"},"P.Modder":{owned:!1,description:"Purchasing all pistol modifications"},"SMG Modder":{owned:!1,description:"Purchasing all SMG modifications"},"S.Modder":{owned:!1,description:"Purchasing all Shotgun modifications"},Aficionado:{owned:!1,description:"Buying all mods in available"},Jumpshot:{owned:!1,description:"Jumping in the air and firing the final killshot"},Piledrive:{owned:!1,description:"Killing 5 zombies with melee attacks as the final strike"},Traphouse:{owned:!1,description:"Building and placing 3 different traps"},Barricade:{owned:!1,description:"Building and placing 3 different barrier types"},Miner:{owned:!1,description:"Killing at least 3 zombies with landmines"},Gunna:{owned:!1,description:"Killing at least 10 zombies with turrets"}},stats:{zombiesKilled:0,bulletsFired:0,timesReloaded:0,grenadesThrown:0,timesKilled:0,timesRespawned:0,itemsPickedUp:0,creditsEarned:0,storePurchases:0,trapsBuilt:0,barriersBuilt:0,meleeKills:0,mineKills:0,trapsPlaced:0,barriersPlaced:0,turretKills:0,damageTaken:0,damageDealt:0},trapTypesPlaced:{},barrierTypesPlaced:{},lastAchievementEarned:null,lastMagDropped:null,consecutiveGrenadeKills:0,lastGrenadeKill:null,zombieLastKilled:null,filterEffects:!1,displayZombieHealth:!0,rightMouseDown:!1,mouseState:{x:"",y:"",btn:""},mousePosition:{x:0,y:0},mouseRelativeToPlayerPosition:{x:0,y:0},textures:{},gameState:E.MAIN_MENU,lastGameState:null,gameSubState:m,lastGameSubState:null,waveNum:0,waveCountToDefeat:null,zombiesOnStage:0,showingMessage:!1,respawnCost:300,respawnToShopCost:150,purchases:0,lastPurchase:{item:null,amount:null},player:{perks:{magnetism:{cost:750,owned:!1},magDmg:{cost:750,owned:!1},lastBullet:{cost:750,owned:!1},creditDropper:{cost:1250,owned:!1},ammoDropper:{cost:1250,owned:!1},healthDropper:{cost:1250,owned:!1},quickTurret:{cost:1e3,owned:!1},barrierPlus:{cost:1e3,owned:!1},cluck:{cost:1e3,owned:!1}},health:100,credits:500,position:{x:0,y:0},compositeId:"",composite:{headId:"",bodyId:"",armId:""},weapons:{list:["pistol weapon"],equipped:null,grenadeChargeRate:35e-5,grenadeUpperForceThreshold:.025,grenadeFuseTime:{default:3},grenadeExplosionSize:450,laser:{"pistol weapon":!1,"smg weapon":!1,"shotgun weapon":!1},meleeDamage:{"pistol weapon":10,"smg weapon":15,"shotgun weapon":20},damage:{"pistol weapon":{min:4,max:10},"smg weapon":{min:3,max:7},"shotgun weapon":{min:4,max:8},"turret weapon":{min:4,max:6}},shotLimiter:{"pistol weapon":300,"smg weapon":100,"shotgun weapon":500},ammoCapacity:{"pistol weapon":9,"smg weapon":19,"shotgun weapon":6,grenades:1},totalAmmo:{"pistol weapon":45,"smg weapon":95,"shotgun weapon":30,grenades:3},ammoCostPerBox:{"pistol weapon":10,"smg weapon":20,"shotgun weapon":20,grenades:80},lastShot:{"pistol weapon":null,"smg weapon":null,"shotgun weapon":null},reloadSpeed:{"pistol weapon":.4,"smg weapon":.4,"shotgun weapon":.4},reloadAnimationFrames:{"pistol weapon":55,"smg weapon":60,"shotgun weapon":80},bulletVariance:{"pistol weapon":4e-4,"smg weapon":.001,"shotgun weapon":.002},bulletForce:{"pistol weapon":.0075,"smg weapon":.0075,"shotgun weapon":.0075,turret:.01},shellEjectionForce:{"pistol weapon":{min:3e-4,max:7e-4},"smg weapon":{min:3e-4,max:.001},"shotgun weapon":{min:8e-4,max:.0012}},shellRemovalTimeout:{"pistol weapon":2e3,"smg weapon":2e3,"shotgun weapon":2e3},buyWeapons:{"smg weapon":1500,"shotgun weapon":2750}},constants:{width:50,height:180},variables:{magnetism:400,magnetismSpeed:1,currentDirection:"",lastDirection:"",jumping:!1,jumpForce:-.4,defense:0,acceleration:{min:2,max:5},deceleration:.5},upgradeTiers:{run:{min:1,current:1,max:4},jump:{min:1,current:1,max:4},reload:{min:1,current:1,max:4},defense:{min:1,current:1,max:4},melee:{min:1,current:1,max:4}},upgradeCosts:{run:200,jump:200,reload:300,defense:400,melee:400},upgradeAmounts:{run:1,jump:-.1,reload:.1,defense:7,melee:{"pistol weapon":5,"smg weapon":6,"shotgun weapon":8}},modTiers:{rof:{"pistol weapon":{min:1,current:1,max:4},"smg weapon":{min:1,current:1,max:4},"shotgun weapon":{min:1,current:1,max:4}},powder:{"pistol weapon":{min:1,current:1,max:4},"smg weapon":{min:1,current:1,max:4},"shotgun weapon":{min:1,current:1,max:4}},sight:{"pistol weapon":{min:1,current:1,max:4},"smg weapon":{min:1,current:1,max:4},"shotgun weapon":{min:1,current:1,max:4}},mag:{"pistol weapon":{min:1,current:1,max:4},"smg weapon":{min:1,current:1,max:4},"shotgun weapon":{min:1,current:1,max:4}}},modCosts:{rof:{"pistol weapon":300,"smg weapon":400,"shotgun weapon":500},powder:{"pistol weapon":400,"smg weapon":550,"shotgun weapon":750},sight:{"pistol weapon":200,"smg weapon":300,"shotgun weapon":300},mag:{"pistol weapon":350,"smg weapon":600,"shotgun weapon":600}},modAmounts:{rof:{"pistol weapon":20,"smg weapon":15,"shotgun weapon":25},powder:{"pistol weapon":3,"smg weapon":2,"shotgun weapon":3},sight:{"pistol weapon":1e-4,"smg weapon":2e-4,"shotgun weapon":3e-4},mag:{"pistol weapon":3,"smg weapon":5,"shotgun weapon":1}}},barriers:{selectedBarrier:null,costToBuild:{Wooden:150,Stone:250,Metal:350,"Explosive Barrel":400}},traps:{turret:{fireDistance:500,cooldown:.5},selectedTrap:null,costToBuild:{Landmine:250,"Remote Mine":400,"Machine Gun Turret":750,"Cluster Bomb":500}},enemies:{zombies:{attackDmg:20,attackDmgDefault:20,attackIncrementer:.25,walkSpeed:1.5,walkSpeedDefault:1.5,walkSpeedIncrementer:.015,zombieAttackLimiter:2e3,zombieAttackDefaultLimiter:2e3,zombieAttackLimiterDecrementer:15,zombieAttackDistance:150,defaultHealth:100,startingHealth:100,healthIncrementer:.5,onRight:0,onLeft:0}},consumables:{healthkit:{20:{cost:40},50:{cost:80},full:{cost:150}}}},reducers:{loadLocalStorageState:function(e){localStorage&&localStorage.getItem("ZombieChamber-GameSave")?(e=JSON.parse(localStorage.getItem("ZombieChamber-GameSave")),console.log("should load our save")):e=e},setTrapTypePlaced:function(e,t){return Object(h.a)({},e,{trapTypesPlaced:Object(h.a)({},e.trapTypesPlaced,Object(u.a)({},t.payload,e.trapTypesPlaced[t.payload]?e.trapTypesPlaced[t.payload]+1:1))})},setBarrierTypePlaced:function(e,t){return Object(h.a)({},e,{barrierTypesPlaced:Object(h.a)({},e.barrierTypesPlaced,Object(u.a)({},t.payload,e.barrierTypesPlaced[t.payload]?e.barrierTypesPlaced[t.payload]+1:1))})},setLastMagDropped:function(e,t){e.lastMagDropped=t.payload},increaseStats:function(e,t){e.stats[t.payload]+=1},increaseStatsByAmount:{reducer:function(e,t){e.stats[t.payload.type]+=t.payload.amount},prepare:function(e,t){return{payload:{type:e,amount:t}}}},setLastGrenadeKill:function(e,t){e.lastGrenadeKill=t.payload,e.consecutiveGrenadeKills+=1},resetConsecutiveGrenadeKills:function(e){e.consecutiveGrenadeKills=0},setZombieLastKilled:function(e,t){e.zombieLastKilled=t.payload},flipScoreToggle:function(e){e.scoreToggle=!e.scoreToggle},increaseScore:function(e,t){e.score+=t.payload},decreaseScore:function(e,t){e.score-=t.payload},updatePrevScore:function(e){e.prevScore=e.score},addPurchase:{reducer:function(e,t){e.purchases+=1,e.lastPurchase=t.payload},prepare:function(e,t){return{payload:{item:e,amount:t}}}},setZombiesOnLeft:function(e,t){e.enemies.zombies.onLeft=t.payload},setZombiesOnRight:function(e,t){e.enemies.zombies.onRight=t.payload},setRightMouseDown:function(e,t){e.rightMouseDown=t.payload},attachMod:{reducer:function(e,t){var a=t.payload,n=a.modType,o=a.wepType;switch(n){case"rof":e.player.modTiers.rof[o].current+=1,e.player.weapons.shotLimiter[o]-=e.player.modAmounts.rof[o];break;case"powder":e.player.modTiers.powder[o].current+=1,e.player.weapons.damage[o].min+=Math.round(.5*e.player.modAmounts.powder[o]),e.player.weapons.damage[o].max+=Math.round(e.player.modAmounts.powder[o]);break;case"sight":e.player.modTiers.sight[o].current+=1,e.player.weapons.bulletVariance[o]-=e.player.modAmounts.sight[o];break;case"mag":e.player.modTiers.mag[o].current+=1,e.player.weapons.ammoCapacity[o]+=e.player.modAmounts.mag[o]}},prepare:function(e,t){return{payload:{modType:e,wepType:t}}}},setPlayerCompositeId:function(e,t){console.log(t.type),e.player.compositeId=t.payload},setKeyPress:function(e,t){e.keys.push(t.payload)},removeKeyPress:function(e,t){e.keys.splice(e.keys.indexOf(parseInt(t.payload)),1)},setLastDirection:function(e,t){e.player.variables.lastDirection=t.payload},setCurrentDirection:function(e,t){e.player.variables.currentDirection=t.payload},setJumping:function(e,t){e.player.variables.jumping=t.payload},setGroundId:function(e,t){e.groundId=t.payload},setMousePosition:function(e,t){e.mousePosition=t.payload},setMouseStateX:function(e,t){e.mouseState.x=t.payload},setMouseStateY:function(e,t){e.mouseState.y=t.payload},setMouseButtonState:function(e,t){e.mouseState.btn=t.payload},setWeaponEquipped:function(e,t){e.player.weapons.equipped=t.payload},setLastShot:{reducer:function(e,t){var a=e.player.weapons;a.lastShot[a.equipped]=t.payload.dateTimeObject},prepare:function(e,t){return{payload:{weapon:e,dateTimeObject:t}}}},setMouseRelativeToPlayerPosition:function(e,t){e.mouseRelativeToPlayerPosition=t.payload},setCompositeBodyIds:function(e,t){e.player.composite=t.payload},setStaticGunAngle:function(e,t){e.staticGunAngle=t.payload},setStaticGunAngleState:function(e,t){e.staticGun=t.payload},setTexturePath:{reducer:function(e,t){e.textures[t.payload.textureName]=t.payload.texturePath},prepare:function(e,t){return{payload:{textureName:e,texturePath:t}}}},gameStateTransition:{reducer:function(e,t){switch(t.payload.type){case"sub":e.lastGameSubState=t.payload.from,e.gameSubState=t.payload.to;break;case"main":e.lastGameState=t.payload.from,e.gameState=t.payload.to}},prepare:function(e,t,a){return{payload:{type:e,from:t,to:a}}}},incrementWave:function(e){e.waveNum+=1},decrementWave:function(e){e.waveNum-=1},setWaveCountToDefeat:function(e,t){e.waveCountToDefeat=t.payload},incrementWaveCountToDefeat:function(e,t){e.waveCountToDefeat+=1},decrementWaveCountToDefeat:function(e,t){e.waveCountToDefeat-=1,e.zombiesOnStage-=1},setWeaponsList:function(e,t){e.player.weapons.list=t.payload},setShowingMessage:function(e,t){e.showingMessage=t.payload},unsetAllKeys:function(e,t){e.keys=[]},resetPlayerVariables:function(e){e=Object.assign({variables:Object(h.a)({},e,{currentDirection:"",lastDirection:"",jumping:!1})},e)},decrementTotalAmmo:function(e,t){e.player.weapons.totalAmmo[t.payload]-=1},addToTotalAmmo:{reducer:function(e,t){e.player.weapons.totalAmmo[t.payload.wepType]+=t.payload.amount},prepare:function(e,t){return{payload:{wepType:e,amount:t}}}},updateAmmoCapacity:{reducer:function(e,t){e.player.weapons.ammoCapacity[t.payload.wepType]=t.payload.newCapacityAmount},prepare:function(e,t){return{payload:{wepType:e,newCapacityAmount:t}}}},setPlayerPosition:function(e,t){e.player.position=t.payload},addToTotalCredits:function(e,t){e.player.credits+=t.payload},subtractFromTotalCredits:function(e,t){e.player.credits-=t.payload},upgradeRunSpeed:function(e){e.player.upgradeTiers.run.current+=1,e.player.variables.acceleration.max=e.player.variables.acceleration.max+e.player.upgradeAmounts.run},upgradeReloadSpeed:function(e){e.player.upgradeTiers.reload.current+=1,e.player.weapons.reloadSpeed["pistol weapon"]=e.player.weapons.reloadSpeed["pistol weapon"]+e.player.upgradeAmounts.reload,e.player.weapons.reloadSpeed["smg weapon"]=e.player.weapons.reloadSpeed["smg weapon"]+e.player.upgradeAmounts.reload},upgradeJumpForce:function(e){e.player.upgradeTiers.jump.current+=1,e.player.variables.jumpForce=e.player.variables.jumpForce+e.player.upgradeAmounts.jump},upgradeDefense:function(e){e.player.upgradeTiers.defense.current+=1,e.player.variables.defense=e.player.variables.defense+e.player.upgradeAmounts.defense},upgradeMelee:function(e){e.player.upgradeTiers.melee.current+=1,e.player.weapons.meleeDamage["pistol weapon"]+=e.player.upgradeAmounts.melee["pistol weapon"],e.player.weapons.meleeDamage["smg weapon"]+=e.player.upgradeAmounts.melee["smg weapon"]},updatePlayerHealth:function(e,t){e.player.health=t.payload},decrementGrenadeCount:function(e){e.player.weapons.totalAmmo.grenades-=1},incrementGrenadeCount:function(e){e.player.weapons.totalAmmo.grenades+=1},updateZombieWalkSpeed:function(e,t){var a=e.enemies.zombies.walkSpeedDefault,n=e.enemies.zombies.walkSpeedIncrementer;e.enemies.zombies.walkSpeed=a+t.payload*n},updateZombieAttackDmg:function(e,t){e.enemies.zombies.attackDmg=Math.round(t.payload*e.enemies.zombies.attackIncrementer+e.enemies.zombies.attackDmgDefault)},decrementZombieAttackTimeLimit:function(e,t){e.enemies.zombies.zombieAttackLimiter=e.enemies.zombies.zombieAttackDefaultLimiter-t.payload*e.enemies.zombies.zombieAttackLimiterDecrementer,console.log(e.enemies.zombies.zombieAttackLimiter)},showLaserSight:function(e,t){e.player.weapons.laser[t.payload]=!0},incrementZombieHealth:function(e,t){e.enemies.zombies.startingHealth=Math.round(e.enemies.zombies.defaultHealth+e.enemies.zombies.healthIncrementer*t.payload)},setSelectedBarrierToBuild:function(e,t){e.barriers.selectedBarrier=t.payload},setSelectedTrapToBuild:function(e,t){e.traps.selectedTrap=t.payload},setLastWaveCountDefeated:function(e){e.lastWaveCountDefeated=e.waveCountToDefeat},incrementZombiesOnStage:function(e){e.zombiesOnStage+=1},setZombiesOnStage:function(e,t){e.zombiesOnStage=t.payload},updateWeaponsList:function(e,t){e.player.weapons.list.push(t.payload)},setPlayerMagnetism:{reducer:function(e,t){e.player.variables.magnetism=t.payload.range,e.player.variables.magnetismSpeed=t.payload.speed,e.player.perks.magnetism.owned=!0},prepare:function(e,t){return{payload:{range:e,speed:t}}}},setPlayerMagDamage:function(e){e.player.perks.magDmg.owned=!0},setPlayerLastBullet:function(e){e.player.perks.lastBullet.owned=!0},setPlayerCreditDropper:function(e){e.player.perks.creditDropper.owned=!0},setPlayerAmmoDropper:function(e){e.player.perks.ammoDropper.owned=!0},setPlayerHealthDropper:function(e){e.player.perks.healthDropper.owned=!0},setPlayerQuickTurret:function(e){e.player.perks.quickTurret.owned=!0,e.traps.turret.cooldown=.25,e.traps.turret.fireDistance=600},setPlayerBarrierPlus:function(e){e.player.perks.barrierPlus.owned=!0},setPlayerFusterCluck:function(e){e.player.perks.cluck.owned=!0},toggleFilterEffects:function(e,t){e.filterEffects=t.payload},toggleZombieHealthDisplay:function(e,t){e.displayZombieHealth=t.payload},setAchievementOwned:function(e,t){e.achievements[t.payload].owned=!0,e.lastAchievementEarned=t.payload}}}),P=F.actions,D=P.loadLocalStorageState,L=P.increaseStatsByAmount,R=P.setTrapTypePlaced,z=P.setBarrierTypePlaced,I=P.setLastMagDropped,W=P.increaseStats,H=P.setAchievementOwned,N=P.resetConsecutiveGrenadeKills,U=P.setLastGrenadeKill,G=P.setZombieLastKilled,q=P.flipScoreToggle,J=P.updatePrevScore,X=P.increaseScore,Y=P.decreaseScore,Z=P.toggleZombieHealthDisplay,$=P.toggleFilterEffects,Q=P.setPlayerFusterCluck,ee=P.setPlayerBarrierPlus,te=P.setPlayerQuickTurret,ae=P.setPlayerHealthDropper,ne=P.setPlayerAmmoDropper,oe=P.setPlayerCreditDropper,ie=P.setPlayerLastBullet,re=P.setPlayerMagDamage,se=P.setPlayerMagnetism,le=P.addPurchase,de=(P.setZombiesOnLeft,P.setZombiesOnRight,P.setRightMouseDown),ce=P.resetPlayerVariables,pe=P.unsetAllKeys,ue=P.setPlayerCompositeId,he=P.setKeyPress,me=P.removeKeyPress,ge=P.setLastDirection,ye=P.setCurrentDirection,fe=P.setJumping,be=(P.setGroundId,P.setMousePosition),we=P.setMouseStateX,ve=P.setMouseStateY,xe=P.setMouseButtonState,Ee=P.setLastShot,Se=P.setWeaponEquipped,ke=P.setMouseRelativeToPlayerPosition,Ae=P.setCompositeBodyIds,Ce=P.setTexturePath,Be=P.gameStateTransition,_e=P.incrementWave,Oe=P.decrementWave,Ke=(P.incrementWaveCountToDefeat,P.setWaveCountToDefeat),Ve=P.decrementWaveCountToDefeat,Te=(P.setWeaponsList,P.setShowingMessage),Me=P.decrementTotalAmmo,je=P.addToTotalAmmo,Fe=(P.updateAmmoCapacity,P.addToTotalCredits),Pe=P.subtractFromTotalCredits,De=P.setPlayerPosition,Le=P.upgradeRunSpeed,Re=P.upgradeReloadSpeed,ze=P.upgradeJumpForce,Ie=P.upgradeDefense,We=P.upgradeMelee,He=P.updatePlayerHealth,Ne=P.attachMod,Ue=(P.incrementGrenadeCount,P.decrementGrenadeCount),Ge=P.updateZombieWalkSpeed,qe=P.updateZombieAttackDmg,Je=P.decrementZombieAttackTimeLimit,Xe=P.showLaserSight,Ye=P.incrementZombieHealth,Ze=P.setSelectedBarrierToBuild,$e=P.setSelectedTrapToBuild,Qe=(P.lastWaveCountDefeated,P.incrementZombiesOnStage),et=P.setZombiesOnStage,tt=P.updateWeaponsList,at=F.reducer,nt=Object(p.a)({reducer:{game:at}}),ot=a(1),it=a(7),rt=a.n(it),st=nt.getState,lt=window.TweenLite.to,dt=function(e){return new c.h(c.j.from(st().game.textures[e]))},ct=function(e){return e.bounds.max.x-e.bounds.min.x},pt=function(e){return e.bounds.max.y-e.bounds.min.y},ut=function(e,t){var a=st().game.player.composite,n=a.headId,o=a.bodyId,i=a.armId,r=a.gunId,s=t.getKeyValue("world");return"head"===e?ot.Composite.get(s,n,"body"):"body"===e?ot.Composite.get(s,o,"body"):"arm"===e?ot.Composite.get(s,i,"body"):"gun"===e?ot.Composite.get(s,r,"body"):void 0},ht=function(e){var t=e.getKeyValue("world"),a=st().game.player.composite.bodyId;return ot.Composite.get(t,a,"body")};var mt=a(14),gt=a(22),yt="greater than player x position",ft={group:-1,category:1,mask:1},bt={group:-1,category:2,mask:1},wt={category:1,mask:1},vt=a(17),xt=a(18);function Et(){var e=Object(vt.a)(["\npadding: ","px;\n"]);return Et=function(){return e},e}function St(){var e=Object(vt.a)(["\nopacity: ","\ncolor: #fff;\nposition: relative;\nwidth: ","px;\nheight: ","px;\nline-height: ","px;\nbackground-color: ",";\nleft: 0; right: 0;\ncursor: pointer;\nmargin: auto;\nborder: 2px solid ",";\ntransform: scale(1.00);\n&:hover {\n  ",";\n  ",";\n  background-color: ",";\n  border: 2px solid ",";\n}\n"]);return St=function(){return e},e}function kt(){var e=Object(vt.a)(["\ntop: ","px;\nfont-size: 1.5em;\ntext-align: center;\nposition: absolute;\nwidth: 100%;\n"]);return kt=function(){return e},e}function At(){var e=Object(vt.a)(["\nleft: 0;\nright: 0;\ntop: 20px;\nwidth: 300px;\nmargin: auto;\ndisplay: block;\nfont-size: 2em;\ntext-align: center;\nposition: absolute;\n"]);return At=function(){return e},e}function Ct(){var e=Object(vt.a)(["\nheight: ","px;\nwidth: ","px;\nopacity: ",";\nbackground-color: ",";\n"]);return Ct=function(){return e},e}function Bt(){var e=Object(vt.a)(["\ntop: 0;\nleft: 0;\nright: 0;\nbottom: 0;\nmargin: auto;\ndisplay: block;\nposition: absolute;\nheight: ","px;\nwidth: ","px;\nbackground-color: ",";\n"]);return Bt=function(){return e},e}var _t={Container:xt.a.div(Bt(),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.bgcolor?e.bgcolor:"none"})),Backing:xt.a.div(Ct(),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.opacity?e.opacity:.5}),(function(e){return e.bgcolor?e.bgcolor:"#222"})),MenuTitle:xt.a.div(At()),MenuButtonContainer:xt.a.div(kt(),(function(e){return e["space-top"]?e["space-top"]:80})),MenuButton:xt.a.div(St(),(function(e){return e.opacity?e.opacity:1}),(function(e){return e.width?e.width:200}),(function(e){return e.height?e.height:60}),(function(e){return e.height?e.height:60}),(function(e){return e.bgcolor?e.bgcolor:"#00589b"}),(function(e){return e.bordercolor?e.bordercolor:"rgba(0,0,0,0)"}),(function(e){return e&&!0===e.cancelTransition?"":"transition: all .35s"}),(function(e){return e&&!0===e.cancelTransition?"":"transform: scale(1.05)"}),(function(e){return e.hovercolor}),(function(e){return e.hoverborder?e.hoverborder:"rgba(0,0,0,0)"})),MenuButtonSpacer:xt.a.div(Et(),(function(e){return e.padding?e.padding:10}))},Ot=a(21),Kt=function(e){var t=nt.dispatch,a=window.TweenLite.delayedCall;t(X(e)),t(q()),a(.25,(function(){t(J())}))},Vt=function(e){var t=nt.dispatch,a=window.TweenLite.delayedCall;t(Y(e)),t(q()),a(.25,(function(){t(J())}))};function Tt(){var e=Object(vt.a)(["\ncolor: #FFF;\ntext-align: center;\n"]);return Tt=function(){return e},e}function Mt(){var e=Object(vt.a)(["\ntop: 0;\nwidth: 30px;\nheight: 30px;\ncolor: darkgreen;\nline-height: 30px;\ntext-align: center;\nposition: absolute;\nbackground-color: #ccc;\nleft: ",";\nright: ",";\ntransform: scale(1.0);\n&:hover {\n  transition: all;\n  transform: scale(1.05);\n  background-color: #fff;\n}\n"]);return Mt=function(){return e},e}function jt(){var e=Object(vt.a)(["\ndisplay: inline-block;\nvertical-align: top;\nmargin-right: 4px;\n"]);return jt=function(){return e},e}var Ft=_t.Container,Pt=_t.Backing,Dt=_t.MenuTitle,Lt=_t.MenuButtonContainer,Rt=_t.MenuButton,zt=_t.MenuButtonSpacer,It=xt.a.div(jt()),Wt=xt.a.div(Mt(),(function(e){return e.left?0:"auto"}),(function(e){return e.right?0:"auto"})),Ht=xt.a.div(Tt()),Nt=function(e){return o.a.createElement(Rt,{opacity:e&&e.opacity?e.opacity:1,bgcolor:e&&e.bgcolor?e.bgcolor:"#222",bordercolor:e&&e.bordercolor?e.bordercolor:"#333",hovercolor:e&&e.hovercolor?e.hovercolor:"#333",hoverborder:e&&e.hoverborder?e.hoverborder:"#fff",width:e.width,height:e.height,style:e.style,cancelTransition:!(!e||!e.cancelTransition)&&e.cancelTransition,onClick:function(){e.onClick&&(e.onClick(),window.gameObjects.getKeyValue("button-click-sound").play())},onMouseOver:function(){e.cancelTransition}},e.children)},Ut=function(e){return o.a.createElement(Nt,{width:e.width?e.width:120,height:40,style:{borderRadius:"10px"},bgcolor:"#444",hovercolor:"#189969",onClick:e.onClick},e.arrowOnly?o.a.createElement("span",{style:{fontSize:"18px"}},"\u21d0"):o.a.createElement("span",{style:{fontSize:"18px"}},"\u21d0 Back"))},Gt=function(e){return o.a.createElement("div",{style:{top:0,right:e.right?e.right:"20px",marginTop:e.marginTop?e.marginTop:"-40px",position:"absolute"}},o.a.createElement(Ut,{onClick:e.onClick,width:e.width?e.width:120,arrowOnly:!!e.arrowOnly&&e.arrowOnly}))};function qt(e){var t=e.label,a=e.labelClr,n=e.width,i=e.height,r=e.clickConfirmHandler,s=e.clickCancelHandler;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ft,{style:{top:"150px"},width:n||500,height:i||300},o.a.createElement(Pt,{width:n||500,height:i||300,bgcolor:"#222",opacity:1,style:{borderRadius:"2px",boxShadow:"5px 5px rgba(0, 0, 0, 0.2)"}}),o.a.createElement(Dt,{style:{fontSize:"1.2em"}},o.a.createElement("span",{style:{color:a}},t)),o.a.createElement(Lt,{"space-top":200},o.a.createElement(Rt,{bgcolor:"#222",bordercolor:"#333",hovercolor:"#333",hoverborder:"red",style:{display:"inline-block",fontSize:".8em",marginRight:"12px",borderRadius:"2px"},onClick:s},"Nope."),o.a.createElement(Rt,{bgcolor:"#222",bordercolor:"#333",hovercolor:"#333",hoverborder:"#189969",style:{display:"inline-block",fontSize:".8em",borderRadius:"2px"},onClick:r},"Confirm"))))}function Jt(e){var t=e.type,a=e.toDefaultSubMenu,n=(e.toAmmoSubMenu,e.toStandardMenu,window.gameObjects),i=Object(l.c)(),r=Object(l.d)((function(e){return e.game.player.weapons.ammoCostPerBox})),d=Object(l.d)((function(e){return e.game.player.weapons.ammoCapacity})),c=Object(l.d)((function(e){return e.game.player.credits})),p=o.a.useReducer((function(e,t){switch(t.type){case"INCREASE":return Object(h.a)({},e,Object(u.a)({},t.wepType,e[t.wepType]+t.amount));case"DECREASE":return Object(h.a)({},e,Object(u.a)({},t.wepType,e[t.wepType]-t.amount));case"SET":return Object(h.a)({},e,Object(u.a)({},t.wepType,t.amount));default:return e}}),{"pistol weapon":0,"smg weapon":0,grenades:0,"shotgun weapon":0}),m=Object(s.a)(p,2),g=m[0],y=m[1],f=o.a.useState(0),b=Object(s.a)(f,2),w=b[0],v=b[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(Rt,{cancelTransition:!0,bgcolor:"#28934C",width:100,height:30,style:{borderRadius:"4px",fontWeight:"bold"}},"$".concat(w)),o.a.createElement(Rt,{cancelTransition:!0,width:150,height:30,bgcolor:"#444"},o.a.createElement(Wt,{onClick:function(){var e=(g[t]-d[t])/d[t]*r[t];g[t]>0&&(y({type:"DECREASE",wepType:t,amount:d[t]}),v(e),window.gameObjects.getKeyValue("button-subtract-sound").play())},left:!0},o.a.createElement("span",{style:{fontWeight:"bold"}},"-")),o.a.createElement(Ht,null,g[t]),o.a.createElement(Wt,{onClick:function(){var e=(g[t]+d[t])/d[t]*r[t];c>=e?(y({type:"INCREASE",wepType:t,amount:d[t]}),v(e),window.gameObjects.getKeyValue("button-add-sound").play()):window.gameObjects.getKeyValue("button-cancel-sound").play()},right:!0},o.a.createElement("span",{style:{fontWeight:"bold"}},"+"))),o.a.createElement(Rt,{cancelTransition:!0,bgcolor:"rgba(0,0,0,0)",height:30},o.a.createElement("div",{style:{display:"inline-block",marginRight:"4px"}},o.a.createElement(Nt,{onClick:function(){a(),y({type:"SET",wepType:t,amount:0}),v(0),window.gameObjects.getKeyValue("button-cancel-sound").play()},width:80,height:30,hoverborder:"#B00000"},"Cancel")),o.a.createElement("div",{style:{display:"inline-block"}},w>0?o.a.createElement(Nt,{onClick:function(){var e=n.getKeyValue("weapons-ui");i(Pe(w)),i(le("grenades"!==t?"".concat(t," ammo"):w>r[t]?t:"a grenade",w)),i(je(t,g[t])),y({type:"SET",wepType:t,amount:0}),"grenades"===t?e.updateGrenadeIcons():(e.select(t),i(Se(t)),e.reload(!0)),v(0),a()},width:100,height:30,hoverborder:"#189969"},"Buy"):null)))}var Xt=function(e){var t=e.type,a=e.toDefaultSubMenu,n=e.subMenuType,i=e.setSubMenuType,r=(e.toStandardMenu,Object(l.d)((function(e){return e.game.player.upgradeTiers}))),s=Object(l.d)((function(e){return e.game.player.upgradeCosts})),d=Object(l.d)((function(e){return e.game.player.credits})),c=Object(l.c)(),p={run:Le,jump:ze,reload:Re,defense:Ie,melee:We},u=function(e){switch(e){case"run":return"Run Speed";case"jump":return"Jump Height";case"reload":return"Reload Speed";case"defense":return"Defense";case"melee":return"Melee Attack Power"}};return o.a.createElement(o.a.Fragment,null,n.indexOf(" upgrade sub menu")>-1?n===t+" upgrade sub menu"?o.a.createElement(qt,{label:"Upgrade ".concat(u(t)," to lvl. ").concat(r[t].current+1,"?"),clickConfirmHandler:function(){c(Pe(s[t])),c(le("".concat(u(t)," Boost"),s[t])),c(p[t]()),a()},clickCancelHandler:function(){a()}}):null:o.a.createElement(o.a.Fragment,null,o.a.createElement(Nt,{width:u(t).length>14?340:240,onClick:function(){d>s[t]&&r[t].current<r[t].max?i(t+" upgrade sub menu"):window.gameObjects.getKeyValue("button-cancel-sound").play()}},u(t)," ",r[t].current!==r[t].max?"Lvl.":"",r[t].current!==r[t].max?r[t].current+1:""," - ",o.a.createElement("span",{style:{color:d>s[t]&&r[t].current<r[t].max?"#189969":"red"}},r[t].current<r[t].max?"$".concat(s[t]):"MAXED")),o.a.createElement("br",null)))};function Yt(e){var t=e.type,a=e.setSubMenuType,n=window.gameObjects,i=Object(l.c)(),r=Object(l.d)((function(e){return e.game.player.credits})),d=Object(l.d)((function(e){return e.game.player.modTiers})),c=Object(l.d)((function(e){return e.game.player.modCosts})),p=Object(l.d)((function(e){return e.game.player.weapons.ammoCapacity})),u=function(e){switch(e){case"pistol weapon":return"Pistol";case"smg weapon":return"SMG";case"shotgun weapon":return"SHOTGUN"}},h=u(t),m=function(e,t){switch(e){case"rof":return d[e][t].current===d[e][t].max?"RATE OF FIRE MAXED!":"Upgrade Rate-of-Fire";case"powder":return d[e][t].current===d[e][t].max?"FIREPOWER MAXED!":"Increase Firepower";case"sight":return d[e][t].current===d[e][t].max?"ACCURACY MAXED!":"Upgrade Accuracy";case"mag":return d[e][t].current===d[e][t].max?"AMMO CAP MAXED!":"Increase Ammo Capacity"}},g=o.a.useState(null),y=Object(s.a)(g,2),f=y[0],b=y[1],w=o.a.useState(null),v=Object(s.a)(w,2),x=v[0],E=v[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(It,{style:{marginLeft:"40px"}},f&&x?o.a.createElement(o.a.Fragment,null,o.a.createElement(qt,{label:"".concat(u(x)," ").concat(m(f,x)," lvl.").concat(d[f][x].current+1,"?"),labelClr:d[f][x].current===d[f][x].max?"red":"white",clickConfirmHandler:function(){(i(Pe(c[f][x])),i(le(function(e,t){switch(e){case"rof":return"Rate of fire boost for the ".concat(t);case"powder":return"Firepower boost for the ".concat(t);case"sight":return"Accuracy boost for the ".concat(t);case"mag":return"Magazine ammo capacity boost for the ".concat(t)}}(f,x),c[f][x])),i(Ne(f,x)),"mag"===f)&&(i(je(x,p[x])),n.getKeyValue("weapons-ui").updateWeaponMagazines(x));"sight"===f&&i(Xe(x)),b(null),E(null),a("none - default")},clickCancelHandler:function(){b(null),E(null),a("none - default")}})):["rof","powder","sight","mag"].map((function(e,a){return o.a.createElement(o.a.Fragment,{key:a},o.a.createElement(Nt,{onClick:function(){r>=c[e][t]&&d[e][t].current<d[e][t].max?(b(e),E(t)):window.gameObjects.getKeyValue("button-cancel-sound").play()},width:520},h,": ",m(e,t)," ",d[e][t].current===d[e][t].max?"":" - lvl."," ",d[e][t].current<d[e][t].max?d[e][t].current+1:"",d[e][t].current<d[e][t].max?"-":"",o.a.createElement("span",{style:{color:r>=c[e][t]&&d[e][t].current!==d[e][t].max?"#189969":"red"}},"\n                  ".concat(d[e][t].current===d[e][t].max?"":"$".concat(c[e][t])))),o.a.createElement("br",null))}))),f||x?null:o.a.createElement(It,null,o.a.createElement(Nt,{onClick:function(){a("none - default")},width:80,height:30,hoverborder:"red",style:{marginLeft:"10px"}},"close")))}function Zt(){var e=o.a.useState("standard menu"),t=Object(s.a)(e,2),a=t[0],n=t[1],i=o.a.useState("none - default"),r=Object(s.a)(i,2),d=r[0],c=r[1],p=Object(l.c)(),u=Object(l.d)((function(e){return e.game})),h=Object(l.d)((function(e){return e.game.gameState})),m=Object(l.d)((function(e){return e.game.gameSubState})),g=Object(l.d)((function(e){return e.game.player.credits})),y=window.gameObjects,f=y.getKeyValue("game-width"),b=y.getKeyValue("game-height"),w=y.getKeyValue("screen-ui"),x=y.getKeyValue("player"),k=function(){c("none - default")},A=function(){n("ammo menu")},C=function(){n("standard menu"),c("none - default")},B=function(e){switch(e){case"pistol weapon":c("pistol ammunition submenu");break;case"smg weapon":c("smg ammunition submenu");break;case"shotgun weapon":c("shotgun ammunition submenu");break;case"grenades":c("grenades submenu")}},_=function(e){return{color:u.player.credits>u.consumables.healthkit[e].cost&&u.player.health<100?"#189969":"red"}};return o.a.useEffect((function(){"buy weapons menu"===a&&u.player.weapons.list.indexOf("shotgun weapon")>-1&&u.player.weapons.list.indexOf("smg weapon")>-1&&(p(H(S.WEAPONS_EXPERT)),Kt(u.scoreAmounts.achievement),C())}),[u.player.weapons.list,a]),o.a.useEffect((function(){u.player.modTiers.rof["pistol weapon"].current===u.player.modTiers.rof["pistol weapon"].max&&u.player.modTiers.powder["pistol weapon"].current===u.player.modTiers.powder["pistol weapon"].max&&u.player.modTiers.sight["pistol weapon"].current===u.player.modTiers.sight["pistol weapon"].max&&u.player.modTiers.mag["pistol weapon"].current===u.player.modTiers.mag["pistol weapon"].max&&(p(H(S.PISTOL_MODDER)),Kt(u.scoreAmounts.achievement)),u.player.modTiers.rof["smg weapon"].current===u.player.modTiers.rof["smg weapon"].max&&u.player.modTiers.powder["smg weapon"].current===u.player.modTiers.powder["smg weapon"].max&&u.player.modTiers.sight["smg weapon"].current===u.player.modTiers.sight["smg weapon"].max&&u.player.modTiers.mag["smg weapon"].current===u.player.modTiers.mag["smg weapon"].max&&(p(H(S.SMG_MODDER)),Kt(u.scoreAmounts.achievement)),u.player.modTiers.rof["shotgun weapon"].current===u.player.modTiers.rof["shotgun weapon"].max&&u.player.modTiers.powder["shotgun weapon"].current===u.player.modTiers.powder["shotgun weapon"].max&&u.player.modTiers.sight["shotgun weapon"].current===u.player.modTiers.sight["shotgun weapon"].max&&u.player.modTiers.mag["shotgun weapon"].current===u.player.modTiers.mag["shotgun weapon"].max&&(p(H(S.SHOTGUN_MODDER)),Kt(u.scoreAmounts.achievement)),u.achievements[S.PISTOL_MODDER].owned&&u.achievements[S.SMG_MODDER].owned&&u.achievements[S.SHOTGUN_MODDER].owned&&(p(H(S.MOD_AFICIONADO)),Kt(u.scoreAmounts.achievement))}),[u.player.modTiers]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Ft,{width:.75*f,height:.75*b},o.a.createElement(Pt,{width:.75*f,height:.75*b}),o.a.createElement(Dt,null,"Shop"),o.a.createElement(Lt,{width:f},"standard menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(zt,null,o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Nt,{width:350,onClick:function(){A()}},"Buy Ammo & Grenades"))),o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Nt,{onClick:function(){n("healthkit menu")}},"Buy Health Kits"))),o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Nt,{onClick:function(){n("perks menu")}},"Perks")))),o.a.createElement(zt,null,o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Nt,{onClick:function(){n("player attributes menu")}},"Upgrade Player"))),o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Nt,{onClick:function(){n("weapon mods menu")}},"Weapon Mods"))),u.player.weapons.list.indexOf("shotgun weapon")>-1&&u.player.weapons.list.indexOf("smg weapon")>-1?null:o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Nt,{onClick:function(){n("buy weapons menu")}},"Buy New Weapons")))),o.a.createElement(zt,null,o.a.createElement(Ut,{onClick:function(){w.unpause(),p(Be("main",h,E.GAMEPLAY)),p(Be("sub",m,v))}},"Back"))):null,"ammo menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(zt,null,o.a.createElement(It,null,o.a.createElement(zt,null,"pistol ammunition submenu"===d?o.a.createElement(Jt,{type:"pistol weapon",toDefaultSubMenu:k,toAmmoSubMenu:A,toStandardMenu:C}):o.a.createElement(Nt,{onClick:function(){B("pistol weapon")}},"Buy Pistol Ammo"))),u.player.weapons.list.indexOf("smg weapon")>-1?o.a.createElement(It,null,o.a.createElement(zt,null,"smg ammunition submenu"===d&&u.player.weapons.list.indexOf("smg weapon")>-1?o.a.createElement(Jt,{type:"smg weapon",toDefaultSubMenu:k,toAmmoSubMenu:A,toStandardMenu:C}):o.a.createElement(Nt,{onClick:function(){B("smg weapon")}},"Buy SMG Ammo"))):null),o.a.createElement(zt,null,o.a.createElement(It,null,o.a.createElement(zt,null,"grenades submenu"===d?o.a.createElement(Jt,{type:"grenades",toDefaultSubMenu:k,toAmmoSubMenu:A,toStandardMenu:C}):o.a.createElement(Nt,{onClick:function(){B("grenades")}},"Buy Grenades"))),u.player.weapons.list.indexOf("shotgun weapon")>-1?o.a.createElement(It,null,o.a.createElement(zt,null,"shotgun ammunition submenu"===d&&u.player.weapons.list.indexOf("shotgun weapon")>-1?o.a.createElement(Jt,{type:"shotgun weapon",toDefaultSubMenu:k,toAmmoSubMenu:A,toStandardMenu:C}):o.a.createElement(Nt,{onClick:function(){B("shotgun weapon")}},"Buy Shotgun Shells"))):null),o.a.createElement(zt,null,o.a.createElement(Ut,{onClick:function(){C()}}))):null,"healthkit menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(zt,null,o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Nt,{width:300,onClick:function(){var e;u.player.health<100?(e=u.player.health+20>100?100:u.player.health+20,x.acceptHealth(e),p(Pe(u.consumables.healthkit[20].cost)),p(le("+20 Healthkit",u.consumables.healthkit[20].cost)),y.getKeyValue("health-pickup-sound").play()):y.getKeyValue("button-cancel-sound").play()}},"+20 Healthkit - ",o.a.createElement("span",{style:_("20")},u.player.health<100?"".concat(u.consumables.healthkit[20].cost):"Health Full")))),o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Nt,{width:300,onClick:function(){var e;u.player.health<100?(e=u.player.health+50>100?100:u.player.health+50,x.acceptHealth(e),p(Pe(u.consumables.healthkit[50].cost)),p(le("+50 Healthkit",u.consumables.healthkit[50].cost)),y.getKeyValue("health-pickup-sound").play()):y.getKeyValue("button-cancel-sound").play()}},"+50 Healthkit - ",o.a.createElement("span",{style:_("50")},u.player.health<100?"".concat(u.consumables.healthkit[50].cost):"Health Full"))))),o.a.createElement(zt,null,o.a.createElement(Nt,{width:300,onClick:function(){u.player.health<100?(x.acceptHealth(100),p(Pe(u.consumables.healthkit.full.cost)),p(le("Full Healthkit",u.consumables.healthkit.full.cost)),y.getKeyValue("health-pickup-sound").play()):y.getKeyValue("button-cancel-sound").play()}},"Full Healthkit - ",o.a.createElement("span",{style:_("full")},u.player.health<100?"".concat(u.consumables.healthkit.full.cost):"Health Full"))),o.a.createElement(zt,null,o.a.createElement(Ut,{onClick:function(){C()}},"Back"))):null,"player attributes menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(zt,null,o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Xt,{type:"run",toDefaultSubMenu:k,toStandardMenu:C,subMenuType:d,setSubMenuType:c}))),o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Xt,{type:"jump",toDefaultSubMenu:k,toStandardMenu:C,subMenuType:d,setSubMenuType:c}))),o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Xt,{type:"reload",toDefaultSubMenu:k,toStandardMenu:C,subMenuType:d,setSubMenuType:c})))),o.a.createElement(zt,null,o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Xt,{type:"defense",toDefaultSubMenu:k,toStandardMenu:C,subMenuType:d,setSubMenuType:c}))),o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Xt,{type:"melee",toDefaultSubMenu:k,toStandardMenu:C,subMenuType:d,setSubMenuType:c}))),d.indexOf(" upgrade sub menu")>-1?null:o.a.createElement(zt,null,o.a.createElement(Ut,{onClick:function(){C()}},"Back")))):null,"perks menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{onClick:function(){n("standard menu")},style:{top:0,right:"20px",marginTop:"-40px",position:"absolute"}},o.a.createElement(Ut,{width:50,arrowOnly:!0})),o.a.createElement(zt,null,u.player.perks.magnetism.owned?null:o.a.createElement(It,null,o.a.createElement(zt,{"data-tip":!0,"data-for":"increase-magnetism"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.magnetism.cost?(p(Pe(u.player.perks.magnetism.cost)),p(se(1200,4)),p(le("Magnetism perk",u.player.perks.magnetism.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Increase Magnetism",o.a.createElement("span",{style:{color:g>=u.player.perks.magnetism.cost?"green":"red"}},"\xa0$",u.player.perks.magnetism.cost))),o.a.createElement(Ot.a,{id:"increase-magnetism",type:"dark"},o.a.createElement("span",null,"Will increase the effect of items being drawn to you for easy pick up"))),u.player.perks.magDmg.owned?null:o.a.createElement(It,null,o.a.createElement(zt,{"data-tip":!0,"data-for":"mag-damage"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.magDmg.cost?(p(Pe(u.player.perks.magDmg.cost)),p(re()),p(le("Mag Damage perk",u.player.perks.magDmg.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Magazine Damage",o.a.createElement("span",{style:{color:g>=u.player.perks.magDmg.cost?"green":"red"}},"\xa0$",u.player.perks.magDmg.cost))),o.a.createElement(Ot.a,{id:"mag-damage",type:"dark"},o.a.createElement("span",null,"Ejected magazines will damage enemies"))),u.player.perks.lastBullet.owned?null:o.a.createElement(It,null,o.a.createElement(zt,{"data-tip":!0,"data-for":"last-bullet"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.lastBullet.cost?(p(Pe(u.player.perks.lastBullet.cost)),p(ie()),p(le("Last Bullet Extra Damage perk",u.player.perks.lastBullet.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Last Round",o.a.createElement("span",{style:{color:g>=u.player.perks.lastBullet.cost?"green":"red"}},"\xa0$",u.player.perks.lastBullet.cost))),o.a.createElement(Ot.a,{id:"last-bullet",type:"dark"},o.a.createElement("span",null,"Last bullet fired will cause greater damage to enemies")))),o.a.createElement(zt,null,u.player.perks.creditDropper.owned?null:o.a.createElement(It,null,o.a.createElement(zt,{"data-tip":!0,"data-for":"credit-dropper"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.creditDropper.cost?(p(Pe(u.player.perks.creditDropper.cost)),p(oe()),p(le("Credit Dropper perk",u.player.perks.creditDropper.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Credit Dropper",o.a.createElement("span",{style:{color:g>=u.player.perks.creditDropper.cost?"green":"red"}},"\xa0$",u.player.perks.creditDropper.cost))),o.a.createElement(Ot.a,{id:"credit-dropper",type:"dark"},o.a.createElement("span",null,"Enemies will drop more credits"))),u.player.perks.ammoDropper.owned?null:o.a.createElement(It,null,o.a.createElement(zt,{"data-tip":!0,"data-for":"ammo-dropper"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.ammoDropper.cost?(p(Pe(u.player.perks.ammoDropper.cost)),p(ne()),p(le("Ammo Dropper perk",u.player.perks.ammoDropper.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Ammo Dropper",o.a.createElement("span",{style:{color:g>=u.player.perks.ammoDropper.cost?"green":"red"}},"\xa0$",u.player.perks.ammoDropper.cost))),o.a.createElement(Ot.a,{id:"ammo-dropper",type:"dark"},o.a.createElement("span",null,"Enemies will now drop ammunition"))),u.player.perks.healthDropper.owned?null:o.a.createElement(It,null,o.a.createElement(zt,{"data-tip":!0,"data-for":"health-dropper"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.healthDropper.cost?(p(Pe(u.player.perks.healthDropper.cost)),p(ae()),p(le("Health Dropper perk",u.player.perks.healthDropper.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Health Dropper",o.a.createElement("span",{style:{color:g>=u.player.perks.healthDropper.cost?"green":"red"}},"\xa0$",u.player.perks.healthDropper.cost))),o.a.createElement(Ot.a,{id:"health-dropper",type:"dark"},o.a.createElement("span",null,"Enemies will now drop small health kits")))),o.a.createElement(zt,null,u.player.perks.quickTurret.owned?null:o.a.createElement(It,null,o.a.createElement(zt,{"data-tip":!0,"data-for":"quick-turret"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.quickTurret.cost?(p(Pe(u.player.perks.quickTurret.cost)),p(te()),p(le("Turret Upgrade perk",u.player.perks.quickTurret.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Quick Turrets",o.a.createElement("span",{style:{color:g>=u.player.perks.quickTurret.cost?"green":"red"}},"\xa0$",u.player.perks.quickTurret.cost))),o.a.createElement(Ot.a,{id:"quick-turret",type:"dark"},o.a.createElement("span",null,"Any placed machine gun turrets will now have less delay between fired shots and slightly more range"))),u.player.perks.barrierPlus.owned?null:o.a.createElement(It,null,o.a.createElement(zt,{"data-tip":!0,"data-for":"barrier-plus"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.barrierPlus.cost?(p(Pe(u.player.perks.barrierPlus.cost)),p(ee()),p(le("Barrier Plus+ perk",u.player.perks.barrierPlus.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Barrier Plus",o.a.createElement("span",{style:{color:g>=u.player.perks.barrierPlus.cost?"green":"red"}},"\xa0$",u.player.perks.barrierPlus.cost))),o.a.createElement(Ot.a,{id:"barrier-plus",type:"dark"},o.a.createElement("span",null,"Placed barriers will now have increased strength to ward of oncoming enemies"))),u.player.perks.cluck.owned?null:o.a.createElement(It,null,o.a.createElement(zt,{"data-tip":!0,"data-for":"big-cluster"},o.a.createElement(Nt,{width:260,onClick:function(){g>=u.player.perks.cluck.cost?(p(Pe(u.player.perks.cluck.cost)),p(Q()),p(le("Fuster Cluck perk",u.player.perks.cluck.cost))):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Fuster Cluck",o.a.createElement("span",{style:{color:g>=u.player.perks.cluck.cost?"green":"red"}},"\xa0$",u.player.perks.cluck.cost))),o.a.createElement(Ot.a,{id:"big-cluster",type:"dark"},o.a.createElement("span",null,"Cluster bombs will now expel more explosives"))))):null,"buy weapons menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(zt,null,u.player.weapons.list.indexOf("smg weapon")<0?o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Nt,{width:300,onClick:function(){g>=u.player.weapons.buyWeapons["smg weapon"]?Object(l.b)((function(){p(Pe(u.player.weapons.buyWeapons["smg weapon"])),p(le("Submachine Gun",u.player.weapons.buyWeapons["smg weapon"])),p(tt("smg weapon"))})):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Buy Submachine Gun: ",o.a.createElement("span",{style:{color:g<=u.player.weapons.buyWeapons["smg weapon"]?"red":"green"}},"$",u.player.weapons.buyWeapons["smg weapon"])))):null,u.player.weapons.list.indexOf("shotgun weapon")<0?o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Nt,{width:300,onClick:function(){g>=u.player.weapons.buyWeapons["shotgun weapon"]?Object(l.b)((function(){p(Pe(u.player.weapons.buyWeapons["shotgun weapon"])),p(le("Shotgun",u.player.weapons.buyWeapons["shotgun weapon"])),p(tt("shotgun weapon"))})):window.gameObjects.getKeyValue("button-cancel-sound").play()}},"Buy Shotgun: ",o.a.createElement("span",{style:{color:g<=u.player.weapons.buyWeapons["shotgun weapon"]?"red":"green"}},"$",u.player.weapons.buyWeapons["shotgun weapon"])))):null),o.a.createElement(zt,null,o.a.createElement(Ut,{onClick:function(){C()}}))):null,"weapon mods menu"===a?o.a.createElement(o.a.Fragment,null,o.a.createElement(zt,{style:{marginTop:"-15px"}},"pistol mods submenu"===d?o.a.createElement(It,null,o.a.createElement(Yt,{type:"pistol weapon",setSubMenuType:c})):null,"smg mods submenu"===d?o.a.createElement(It,null,o.a.createElement(Yt,{type:"smg weapon",setSubMenuType:c})):null,"shotgun mods submenu"===d?o.a.createElement(It,null,o.a.createElement(Yt,{type:"shotgun weapon",setSubMenuType:c})):null,"none - default"===d?o.a.createElement(o.a.Fragment,null,o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Nt,{onClick:function(){c("pistol mods submenu")}},"Pistol Mods"))),u.player.weapons.list.indexOf("smg weapon")>-1?o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Nt,{onClick:function(){c("smg mods submenu")}},"SMG Mods"))):null,u.player.weapons.list.indexOf("shotgun weapon")>-1?o.a.createElement(It,null,o.a.createElement(zt,null,o.a.createElement(Nt,{onClick:function(){c("shotgun mods submenu")}},"Shotgun Mods"))):null,o.a.createElement(zt,{style:{marginTop:"40px"}},o.a.createElement(Ut,{onClick:C},"Back"))):null)):null)))}var $t=function(e){var t=e.backBtnFn,a=window.gameObjects,n=Object(l.d)((function(e){return e})),i=Object.keys(n.game.achievements);return o.a.createElement(o.a.Fragment,null,o.a.createElement(_t.Container,{width:a?.75*a.getKeyValue("game-width"):900,height:a?.75*a.getKeyValue("game-height"):412.5},o.a.createElement(_t.Backing,{width:a?.75*a.getKeyValue("game-width"):900,height:a?.75*a.getKeyValue("game-height"):412.5}),o.a.createElement(_t.MenuTitle,null,"Achievements"),o.a.createElement(_t.MenuButtonContainer,null,i.map((function(e){if(n.game.achievements[e].owned)return o.a.createElement(o.a.Fragment,{key:e},o.a.createElement(It,null,o.a.createElement(_t.MenuButtonSpacer,{"data-tip":!0,"data-for":e+"-description"},o.a.createElement(Nt,null,e))),o.a.createElement(Ot.a,{id:e+"-description"},o.a.createElement("span",null,"Earned by: ",n.game.achievements[e].description)))})),o.a.createElement(Gt,{marginTop:"-60px",onClick:t}))))},Qt=_t.Container,ea=_t.Backing,ta=_t.MenuTitle,aa=_t.MenuButtonContainer,na=_t.MenuButtonSpacer,oa=function(){for(var e=window.gameObjects.getKeyValue("screen-ui"),t=window.gameObjects.getKeyValue("player"),a=window.gameObjects.getKeyValue("zombies");a.length>0;)a.forEach((function(e){e.kill(null,!0)}));window.gameObjects.setKeyValue("zombies",[]),e.unpause(),t.dead&&e.respawn()},ia=function(){var e=nt.dispatch;oa(),Object(l.b)((function(){e(et(0)),e(Ke(null)),e(Be("sub",nt.getState().game.gameSubState,m)),e(Be("main",nt.getState().game.gameState,E.MAIN_MENU))}))},ra=function(e){var t=e.bgcolor,a=e.bordercolor,n=e.hoverborder,i=e.hovercolor,r=e.width,s=e.height,l=e.children;return o.a.createElement(Nt,{onMouseOver:null,width:r||"200px",height:s||"60px",hovercolor:i||"#222",hoverborder:n||"#333",bordercolor:a||"#333",bgcolor:t||"#222",cancelTransition:!0},l)},sa=function(e){var t=e.label,a=e.stat;return o.a.createElement(na,{padding:1},o.a.createElement(It,null,o.a.createElement(ra,{width:200,height:35,bgcolor:"rgba(0, 0, 0, 0.75)",hovercolor:"rgba(0, 0, 0, 0.75)",bordercolor:"rgba(0, 0, 0, 0)",hoverborder:"rgba(0, 0, 0, 0)"},t)),o.a.createElement(It,null,o.a.createElement(ra,{width:400,height:35,bgcolor:"rgba(0, 0, 0, 0.4)",hovercolor:"rgba(0, 0, 0, 0.5)",bordercolor:"rgba(0, 0, 0, 0)",hoverborder:"rgba(0, 0, 0, 0)"},a)))};function la(e){var t=window.gameObjects,a=Object(l.c)(),n=Object(l.d)((function(e){return e.game.gameState})),i=Object(l.d)((function(e){return e.game.gameSubState})),r=Object(l.d)((function(e){return e.game.stats})),d=t.getKeyValue("game-width"),c=t.getKeyValue("game-height"),p="Default",u="achievements",h="Controls",m="Options",y="Stats",f=function(){x(p)},b=o.a.useState(p),w=Object(s.a)(b,2),v=w[0],x=w[1],S=Object(l.d)((function(e){return e.game.filterEffects})),k=Object(l.d)((function(e){return e.game.displayZombieHealth}));return o.a.createElement(o.a.Fragment,null,t?o.a.createElement(Qt,{style:{top:e.margintop?"100px":0},width:.75*d,height:e["shop-query-visibility"]?.5*c:.75*c},e.hidebg?null:o.a.createElement(o.a.Fragment,null,o.a.createElement(ea,{bgcolor:"#222",opacity:n===E.MAIN_MENU?.35:.5,width:.75*d,height:e["shop-query-visibility"]?.5*c:.75*c})),v===p?o.a.createElement(o.a.Fragment,null,e.hidetitle?null:o.a.createElement(ta,null,"Pause Menu"),o.a.createElement(aa,{width:d||0},o.a.createElement(na,{padding:n===E.PAUSE?4:6},e.playbtn?o.a.createElement(Nt,{height:40,onClick:function(){a(Be("main",n,E.GAMEPLAY)),a(Be("sub",i,g))}},"Play Game"):o.a.createElement(Nt,{height:40,onClick:function(){window.gameObjects.getKeyValue("screen-ui").togglePause()}},"Resume Game")),n!==E.MAIN_MENU?o.a.createElement(na,{padding:4},o.a.createElement(Nt,{height:40,onClick:ia},"Main Menu")):o.a.createElement(na,{padding:2},o.a.createElement(Nt,{height:40,onClick:function(){a(Be("main",E.MAIN_MENU,E.SCORES_VIEW))}},"Scoreboard")),o.a.createElement(na,{padding:4},o.a.createElement(Nt,{height:40,onClick:function(){x(h)}},"View Controls")),o.a.createElement(na,{padding:4},o.a.createElement(Nt,{height:40,onClick:function(){x(m)}},"Options")),o.a.createElement(na,{padding:n===E.PAUSE?1:4},o.a.createElement(Nt,{height:40,onClick:function(){x(y)}},"Stats")),o.a.createElement(na,{padding:n===E.PAUSE?1:4},o.a.createElement(Nt,{height:40,onClick:function(){x(u)}},"Achievements")))):null,v===u?o.a.createElement($t,{backBtnFn:f}):null,v===h?o.a.createElement(o.a.Fragment,null,o.a.createElement(ta,null,"Controls"),o.a.createElement(aa,{width:d},o.a.createElement(Gt,{marginTop:"-60px",onClick:f}),o.a.createElement(It,null,o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Jump: W"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Run Left: A"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Run Right: D"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Melee Weapon Bash: F"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Aim: Mouse"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Shoot: Left Mouse")),o.a.createElement(It,null,o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Charge Grenade Throw: Hold G / Right Mouse"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Change Weapon: Space / Mouse Wheel"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Turn Turret: L/R Arrow (while placing)"),o.a.createElement(Nt,{hovercolor:"#222",hoverborder:"#333",cancelTransition:!0,height:50,width:360},"Detonate remote mines: Numpad  1 - 9")))):null,v===m?o.a.createElement(o.a.Fragment,null,o.a.createElement(ta,null,"Options"),o.a.createElement(aa,null,o.a.createElement(Gt,{marginTop:"-60px",onClick:f}),o.a.createElement(na,null,o.a.createElement(It,null,o.a.createElement(na,{padding:4},o.a.createElement(ra,{width:240,height:60},"Effect Filters?"))),o.a.createElement(It,null,o.a.createElement(na,{padding:4,"data-tip":!0,"data-for":"effects-filter"},o.a.createElement(Nt,{width:100,hoverborder:S?"white":"red",onClick:function(){a($(!S)),window.gameObjects.getKeyValue("zombies").forEach((function(e){return e.checkFilters()}));var e=window.gameObjects.getKeyValue("ammo-drops-by-type");e["smg weapon"].concat(e["pistol weapon"]).concat(e["shotgun weapon"]).forEach((function(e){return e.checkFilters()})),window.gameObjects.getKeyValue("currency-drops").forEach((function(e){return e.checkFilters()})),window.gameObjects.getKeyValue("health-drops").forEach((function(e){return e.checkFilters()})),window.gameObjects.getKeyValue("player").checkFilters(),window.gameObjects.getKeyValue("weapons-ui").checkFilters()}},o.a.createElement("span",{style:{color:S?"white":"red"}},S?"On":"Off"))),o.a.createElement(Ot.a,{id:"effects-filter"},o.a.createElement("span",null,"Adds filter effects like glow and motion blur to animations. Turning off could improve performance.")))),o.a.createElement(na,null,o.a.createElement(It,null,o.a.createElement(na,{padding:4},o.a.createElement(ra,{width:240,height:60},"Display Zombie Health?"))),o.a.createElement(It,null,o.a.createElement(na,{padding:4,"data-tip":!0,"data-for":"display-zombie-health"},o.a.createElement(Nt,{width:100,hoverborder:k?"white":"red",onClick:function(){a(Z(!k)),window.gameObjects.getKeyValue("zombies").forEach((function(e){e.displayHealth(!k)}))}},o.a.createElement("span",{style:{color:k?"white":"red"}},k?"On":"Off"))),o.a.createElement(Ot.a,{id:"display-zombie-health"},o.a.createElement("span",null,"Displays a yellow text box above each enemy zombie")))))):null,v===y?o.a.createElement(o.a.Fragment,null,o.a.createElement(ta,null,"Stats"),o.a.createElement(aa,null,o.a.createElement(Gt,{marginTop:"-60px",onClick:f}),o.a.createElement(sa,{label:"Shots Fired",stat:r.bulletsFired}),o.a.createElement(sa,{label:"Mags Changed",stat:r.timesReloaded}),o.a.createElement(sa,{label:"Grenades Thrown",stat:r.grenadesThrown}),o.a.createElement(sa,{label:"Zombies Killed",stat:r.zombiesKilled}),o.a.createElement(sa,{label:"Deaths",stat:r.timesKilled}))):null):null)}var da=nt.getState,ca=nt.dispatch,pa=function(e,t,a,n){c.c.from("Arial",{fill:t,fontSize:40,fontWeight:"bold"});var o=window,i=o.gameObjects,r=o.TweenLite,s=r.from,l=r.to,d=o.Power1,p=i.getKeyValue("game-pixi-container"),u=i.getKeyValue("game-width"),h=i.getKeyValue("game-height"),m=new c.d(e,{font:"Arial"});m.pivot.x=m.width/2,m.pivot.y=m.height/2,m.position.x=u/2,m.position.y=h/2,p.addChild(m),s(m,a,{x:-100,alpha:0,onStart:function(){ca(Te(!0))},onComplete:function(){l(m,a,{delay:n,x:1.5*u,ease:d.easeIn,onComplete:function(){ca(Te(!1)),p.removeChild(m)}})}})},ua=function(e,t,a,n,o){var i=window,r=i.gameObjects,s=i.TweenLite,l=s.to,d=s.set,p=r.getKeyValue("game-pixi-container"),u=r.getKeyValue("text-messages"),h=r.getKeyValue("player").body,m=new c.i(e,{fill:t,fontSize:o||13,fontWeight:"bold"});m.pivot.x=.5*m.width,m.pivot.y=.5*m.height,p.addChild(m);var g=da().game.player.position,y=g.y-.65*pt(h);u.push(m),d(m,{x:g.x,y:y-20*u.length}),l(m,a,{x:g.x,y:y-20*u.length-20,onComplete:function(){l(m,a,{delay:n,alpha:0,onComplete:function(){m.destroy();var e=u.indexOf(m);e>-1&&u.splice(e,1)}})}})},ha=window.TweenLite,ma=ha.delayedCall,ga=ha.to;function ya(e,t,a){var n=this,o=e.position_x,i=e.position_y,r=t.force_x,s=t.force_y,l=window.gameObjects,d=l.getKeyValue("gibs"),p=l.getKeyValue("world"),u=l.getKeyValue("game-pixi-container"),h=ot.Bodies.circle(o,i,5,{collisionFilter:{category:2,mask:1}});h.label="gib",ot.World.add(p,h);var m=l.getKeyValue("player-parts-sheet"),g=new c.h(m.textures[function(){var e=["gib.png","gib2.png","gib3.png","gib4.png"];return e[Math.floor(Math.random()*e.length)]}()]);return u.addChild(g),d.push(this),g.pivot.x=.5*g.width,g.pivot.y=.475*g.height,ot.Body.applyForce(h,{x:o,y:i},{x:rt.a.float(.25*r,r),y:rt.a.float(.25*s,s)}),this.animate=function(e){var t=e(h),a=t.x,n=t.y,o=t.rotation;g.position={x:a,y:n},g.rotation=o},this.destroy=function(){g&&g.destroy(),h&&ot.World.remove(p,h);var e=d.indexOf(n);e>-1&&d.splice(e,1),p=null,h=null,u=null,d=null,l=null},ma(a,(function(){ga(g,2,{alpha:0,onComplete:function(){n.destroy()}})})),this}function fa(e,t,a,n){for(var o=t.x,i=t.y,r=a=a||{force_x:0,force_y:0},s=r.x,l=r.y,d=0;d<e;++d)new ya({position_x:o,position_y:i},{force_x:s,force_y:l},n)}function ba(e,t,a){var n=this,o=e.x,i=e.y,r=window.gameObjects,s=r.getKeyValue("world"),l=r.getKeyValue("game-pixi-container"),d=40,p=60,u=25,h=25,m=15,g=30,y=15,f=50,b=15,w=20,v=10,x=7,E=10,S=14,k=10,A=10,C=ot.Bodies.rectangle(o,i,d,p,{collisionFilter:bt}),B=ot.Bodies.rectangle(o,i,u,h,{}),_=ot.Bodies.rectangle(o,i,u,h,{}),O=ot.Bodies.rectangle(o,i,m,g,{collisionFilter:ft}),K=ot.Bodies.rectangle(o,i,m,g,{collisionFilter:ft}),V=ot.Bodies.rectangle(o,i,b,w,{}),T=ot.Bodies.rectangle(o,i,m,g,{}),M=ot.Bodies.rectangle(o,i,m,g,{}),j=ot.Bodies.rectangle(o,i,b,w,{}),F=ot.Bodies.rectangle(o,i,y,f,{collisionFilter:ft}),P=ot.Bodies.rectangle(o,i,y,f,{collisionFilter:ft}),D=ot.Bodies.rectangle(o,i,y,f,{}),L=ot.Bodies.rectangle(o,i,y,f,{}),R=ot.Bodies.rectangle(o,i,E,S,{}),z=ot.Bodies.rectangle(o,i,v,x,{}),I=ot.Constraint.create({bodyA:C,bodyB:B,pointA:{x:0,y:-p/2},pointB:{x:0,y:h/2},length:1}),W=ot.Constraint.create({bodyA:C,bodyB:O,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),H=ot.Constraint.create({bodyA:C,bodyB:K,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),N=ot.Constraint.create({bodyA:O,bodyB:T,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),U=ot.Constraint.create({bodyA:K,bodyB:M,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),G=ot.Constraint.create({bodyA:T,bodyB:V,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),q=ot.Constraint.create({bodyA:M,bodyB:j,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),J=ot.Constraint.create({bodyA:C,bodyB:F,pointA:{x:0,y:p/2},pointB:{x:0,y:-f/2},length:2}),X=ot.Constraint.create({bodyA:C,bodyB:P,pointA:{x:0,y:p/2},pointB:{x:0,y:-f/2},length:1}),Y=ot.Constraint.create({bodyA:F,bodyB:D,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),Z=ot.Constraint.create({bodyA:P,bodyB:L,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:2}),$=ot.Constraint.create({bodyA:D,bodyB:R,pointA:{x:0,y:f/2},pointB:{x:0,y:-S/2},length:1}),Q=ot.Constraint.create({bodyA:L,bodyB:z,pointA:{x:0,y:f/2},pointB:{x:0,y:-x/2},length:1}),ee=[],te=function(){for(var e=[],t=0;t<6;++t){var a=ot.Bodies.rectangle(C.position.x,C.position.y,k,A);e.push(a)}return{spineLinks:e,spineConstraints:[ot.Constraint.create({bodyA:e[0],bodyB:e[1],pointA:{x:0,y:A/2},pointB:{x:0,y:-A/2},length:4}),ot.Constraint.create({bodyA:e[1],bodyB:e[2],pointA:{x:0,y:A/2},pointB:{x:0,y:-A/2},length:4}),ot.Constraint.create({bodyA:e[2],bodyB:e[3],pointA:{x:0,y:A/2},pointB:{x:0,y:-A/2},length:4}),ot.Constraint.create({bodyA:e[3],bodyB:e[4],pointA:{x:0,y:A/2},pointB:{x:0,y:-A/2},length:4}),ot.Constraint.create({bodyA:e[4],bodyB:e[5],pointA:{x:0,y:A/2},pointB:{x:0,y:-A/2},length:4})]}}(),ae=te.spineLinks,ne=te.spineConstraints,oe=ot.Constraint.create({bodyA:B,bodyB:ae[0],pointA:{x:0,y:h/2},pointB:{x:0,y:-A/2},length:10});this.composite=ot.Composite.create(),ot.Composite.add(this.composite,[B,_,C,O,K,T,M,F,P,D,L,V,j,R,z,I,G,q,$,Q,W,H,N,U,J,X,Y,Z]),ot.Composite.add(this.composite,ae),ot.Composite.add(this.composite,ne),ot.Composite.add(this.composite,oe),ot.World.add(s,this.composite),ot.Body.applyForce(C,C.position,t);var ie=t.x<0?{x:-.002}:{x:.002};ie.y=-.002,new fa(rt.a.int(15,20),C.position,ie,5);var re=r.getKeyValue("player-parts-sheet"),se=[];console.log(a);var le=new c.h(re.textures["rear_leg_foot.png"]);le._id="foot 2",se.push(le);var de=new c.h(re.textures["rear_leg_lower.png"]);de._id="leg 2",se.push(de);var ce=new c.h(re.textures["rear_arm_hand.png"]);ce._id="hand 2",se.push(ce);var pe=new c.h(re.textures["rear_arm_forearm.png"]);pe._id="arm 2",se.push(pe);var ue=new c.h(re.textures["rear_arm_upper.png"]);ue._id="limb",se.push(ue);var he=new c.h(re.textures["front_leg_foot.png"]);he._id="foot 1",se.push(he);var me=new c.h(re.textures["rear_leg_upper.png"]);me._id="limb",se.push(me);var ge=new c.h(re.textures["head_gore.png"]);ge._id="skull",se.push(ge);var ye=new c.h(re.textures["mask.png"]);ye._id="mask",se.push(ye);var fe=new c.h(re.textures["front_leg_lower.png"]);fe._id="leg 1",se.push(fe);var be=new c.h(re.textures["front_leg_upper.png"]);be._id="limb",se.push(be),ae.forEach((function(e){var t=new c.h(re.textures["spine_link.png"]);ee.push(t),se.push(t)}));var we=new c.h(re.textures["torso_whole_headless.png"]);we._id="torso upper",se.push(we);var ve=new c.h(re.textures["front_arm_hand.png"]);ve._id="hand 1",se.push(ve);var xe=new c.h(re.textures["front_arm_forearm.png"]);xe._id="arm 1",se.push(xe);var Ee=new c.h(re.textures["front_arm_upper.png"]);return Ee._id="limb",se.push(Ee),se.forEach((function(e){e.updateAnchor=!0,"skull"===e._id?(e.pivot.x=.55*e.width,e.pivot.y=.475*e.height):"foot 1"===e._id||"foot 2"===e._id?(e.pivot.x=.525*e.width,e.pivot.y=.5*e.height):(e.pivot.x=.5*e.width,e.pivot.y=.5*e.height),l.addChild(e)})),this.head=B,this.mask=_,this.bodyUpper=C,this.armUpperL=O,this.armUpperR=K,this.armLowerL=T,this.armLowerR=M,this.legUpperL=F,this.legUpperR=P,this.legLowerL=D,this.legLowerR=L,this.handL=V,this.handR=j,this.footL=R,this.footR=z,this.destroy=function(){r.setKeyValue("player-ragdoll",null),se.forEach((function(e){e.destroy(),e=null})),ot.World.remove(s,n.composite),n.composite=null,s=null,l=null,r=null},this.animateRagParts=function(e){ae.forEach((function(t,a){var n=e(t);ee[a].position=n,ee[a].rotation=n.rotation}));var t=e(n.mask);ye.position=t,ye.rotation=t.rotation;var a=e(n.head);ge.position=a,ge.rotation=a.rotation;var o=e(n.bodyUpper);we.position=o,we.rotation=o.rotation;var i=e(n.armLowerL);xe.position=i,xe.rotation=i.rotation;var r=e(n.armUpperL);Ee.position=r,Ee.rotation=r.rotation;var s=e(n.handL);ve.position=s,ve.rotation=s.rotation;var l=e(n.legUpperL);be.position=l,be.rotation=l.rotation;var d=e(n.legLowerL);fe.position=d,fe.rotation=d.rotation;var c=e(n.footL);he.position=c,he.rotation=c.rotation;var p=e(n.armLowerR);pe.position=p,pe.rotation=p.rotation;var u=e(n.armUpperR);ue.position=u,ue.rotation=u.rotation;var h=e(n.handR);ce.position=h,ce.rotation=h.rotation;var m=e(n.legUpperR);me.position=m,me.rotation=m.rotation;var g=e(n.legLowerR);de.position=g,de.rotation=g.rotation;var y=e(n.footR);le.position=y,le.rotation=y.rotation},ot.Composite.remove(this.composite,I),ot.Body.applyForce(this.head,this.head.position,{x:0,y:-.1}),this}function wa(e,t,a){var n=this,o=e.x,i=e.y,r=window.gameObjects,s=r.getKeyValue("world"),l=r.getKeyValue("game-pixi-container"),d=40,p=35,u=45,h=5,m=25,g=25,y=15,f=30,b=15,w=50,v=15,x=20,E=10,S=7,k=10,A=14,C=10,B=10,_=ot.Bodies.rectangle(o,i,u,h),O=ot.Bodies.rectangle(o,i,d,p,{collisionFilter:bt}),K=ot.Bodies.rectangle(o,i,m,g,{}),V=ot.Bodies.rectangle(o,i,y,f,{collisionFilter:ft}),T=ot.Bodies.rectangle(o,i,y,f,{collisionFilter:ft}),M=ot.Bodies.rectangle(o,i,v,x,{}),j=ot.Bodies.rectangle(o,i,y,f,{}),F=ot.Bodies.rectangle(o,i,y,f,{}),P=ot.Bodies.rectangle(o,i,v,x,{}),D=ot.Bodies.rectangle(o,i,b,w,{collisionFilter:ft}),L=ot.Bodies.rectangle(o,i,b,w,{collisionFilter:ft}),R=ot.Bodies.rectangle(o,i,b,w,{}),z=ot.Bodies.rectangle(o,i,b,w,{}),I=ot.Bodies.rectangle(o,i,k,A,{}),W=ot.Bodies.rectangle(o,i,E,S,{}),H=ot.Constraint.create({bodyA:O,bodyB:K,pointA:{x:0,y:-p/2},pointB:{x:0,y:g/2},length:1}),N=ot.Constraint.create({bodyA:O,bodyB:V,pointA:{x:0,y:-p/4},pointB:{x:0,y:-f/2},length:1}),U=ot.Constraint.create({bodyA:O,bodyB:T,pointA:{x:0,y:-p/4},pointB:{x:0,y:-f/2},length:1}),G=ot.Constraint.create({bodyA:V,bodyB:j,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),q=ot.Constraint.create({bodyA:T,bodyB:F,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),J=ot.Constraint.create({bodyA:j,bodyB:M,pointA:{x:0,y:f/2},pointB:{x:0,y:-x/2},length:1}),X=ot.Constraint.create({bodyA:F,bodyB:P,pointA:{x:0,y:f/2},pointB:{x:0,y:-x/2},length:1}),Y=ot.Constraint.create({bodyA:_,bodyB:D,pointA:{x:0,y:h/2},pointB:{x:0,y:-w/2},length:2}),Z=ot.Constraint.create({bodyA:_,bodyB:L,pointA:{x:0,y:h/2},pointB:{x:0,y:-w/2},length:1}),$=ot.Constraint.create({bodyA:D,bodyB:R,pointA:{x:0,y:w/2},pointB:{x:0,y:-w/2},length:1}),Q=ot.Constraint.create({bodyA:L,bodyB:z,pointA:{x:0,y:w/2},pointB:{x:0,y:-w/2},length:2}),ee=ot.Constraint.create({bodyA:R,bodyB:I,pointA:{x:0,y:w/2},pointB:{x:0,y:-A/2},length:1}),te=ot.Constraint.create({bodyA:z,bodyB:W,pointA:{x:0,y:w/2},pointB:{x:0,y:-S/2},length:1}),ae=[],ne=[],oe=function(){for(var e=[],t=0;t<6;++t){var a=ot.Bodies.rectangle(O.position.x,O.position.y,C,B);e.push(a)}return{spineLinks:e,spineConstraints:[ot.Constraint.create({bodyA:e[0],bodyB:e[1],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4}),ot.Constraint.create({bodyA:e[1],bodyB:e[2],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4}),ot.Constraint.create({bodyA:e[2],bodyB:e[3],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4}),ot.Constraint.create({bodyA:e[3],bodyB:e[4],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4}),ot.Constraint.create({bodyA:e[4],bodyB:e[5],pointA:{x:0,y:B/2},pointB:{x:0,y:-B/2},length:4})]}},ie=oe(),re=ie.spineLinks,se=ie.spineConstraints,le=oe(),de=le.spineLinks,ce=le.spineConstraints,pe=ot.Constraint.create({bodyA:O,bodyB:re[0],pointA:{x:0,y:p/2},pointB:{x:0,y:-B/2},length:10}),ue=ot.Constraint.create({bodyA:_,bodyB:de[0],pointA:{x:0,y:-h/2},pointB:{x:0,y:-B/2},length:10});this.composite=ot.Composite.create(),ot.Composite.add(this.composite,[K,O,_,V,T,j,F,D,L,R,z,M,P,I,W,H,J,X,ee,te,N,U,G,q,Y,Z,$,Q]),ot.Composite.add(this.composite,re),ot.Composite.add(this.composite,se),ot.Composite.add(this.composite,pe),ot.Composite.add(this.composite,de),ot.Composite.add(this.composite,ce),ot.Composite.add(this.composite,ue),ot.World.add(s,this.composite),ot.Body.applyForce(O,O.position,t);var he=t.x<0?{x:-.002}:{x:.002};he.y=-.002,new fa(rt.a.int(15,20),O.position,he,5);var me=r.getKeyValue("player-parts-sheet"),ge=[];console.log(a);var ye=new c.h(me.textures["rear_leg_foot.png"]);ye._id="foot 2",ge.push(ye);var fe=new c.h(me.textures["rear_leg_lower.png"]);fe._id="leg 2",ge.push(fe);var be=new c.h(me.textures["rear_arm_hand.png"]);be._id="hand 2",ge.push(be);var we=new c.h(me.textures["rear_arm_forearm.png"]);we._id="arm 2",ge.push(we);var ve=new c.h(me.textures["rear_arm_upper.png"]);ve._id="limb",ge.push(ve);var xe=new c.h(me.textures["front_leg_foot.png"]);xe._id="foot 1",ge.push(xe);var Ee=new c.h(me.textures["rear_leg_upper.png"]);Ee._id="limb",ge.push(Ee);var Se=new c.h(me.textures["skull.png"]);Se._id="skull",ge.push(Se);var ke=new c.h(me.textures["front_leg_lower.png"]);ke._id="leg 1",ge.push(ke);var Ae=new c.h(me.textures["front_leg_upper.png"]);Ae._id="limb",ge.push(Ae),re.forEach((function(e){var t=new c.h(me.textures["spine_link.png"]);ae.push(t),ge.push(t)})),de.forEach((function(e){var t=new c.h(me.textures["entrail_chunk.png"]);ne.push(t),ge.push(t)}));var Ce=new c.h(me.textures["torso_upper_gore.png"]);Ce._id="torso upper",ge.push(Ce);var Be=new c.h(me.textures["torso_lower_gore.png"]);Be._id="torso lower",ge.push(Be);var _e=new c.h(me.textures["front_arm_hand.png"]);_e._id="hand 1",ge.push(_e);var Oe=new c.h(me.textures["front_arm_forearm.png"]);Oe._id="arm 1",ge.push(Oe);var Ke=new c.h(me.textures["front_arm_upper.png"]);return Ke._id="limb",ge.push(Ke),ge.forEach((function(e){e.updateAnchor=!0,"skull"===e._id?(e.pivot.x=.55*e.width,e.pivot.y=.475*e.height):"foot 1"===e._id||"foot 2"===e._id?(e.pivot.x=.525*e.width,e.pivot.y=.5*e.height):(e.pivot.x=.5*e.width,e.pivot.y=.5*e.height),l.addChild(e)})),this.head=K,this.bodyUpper=O,this.bodyLower=_,this.armUpperL=V,this.armUpperR=T,this.armLowerL=j,this.armLowerR=F,this.legUpperL=D,this.legUpperR=L,this.legLowerL=R,this.legLowerR=z,this.handL=M,this.handR=P,this.footL=I,this.footR=W,this.destroy=function(){r.setKeyValue("player-ragdoll",null),ge.forEach((function(e){e.destroy()})),ot.World.remove(s,n.composite)},this.animateRagParts=function(e){re.forEach((function(t,a){var n=e(t);ae[a].position=n,ae[a].rotation=n.rotation})),de.forEach((function(t,a){var n=e(t);ne[a].position=n,ne[a].rotation=n.rotation}));var t=e(n.head);Se.position=t,Se.rotation=t.rotation;var a=e(n.bodyUpper);Ce.position=a,Ce.rotation=a.rotation;var o=e(n.bodyLower);Be.position=o,Be.rotation=o.rotation;var i=e(n.armLowerL);Oe.position=i,Oe.rotation=i.rotation;var r=e(n.armUpperL);Ke.position=r,Ke.rotation=r.rotation;var s=e(n.handL);_e.position=s,_e.rotation=s.rotation;var l=e(n.legUpperL);Ae.position=l,Ae.rotation=l.rotation;var d=e(n.legLowerL);ke.position=d,ke.rotation=d.rotation;var c=e(n.footL);xe.position=c,xe.rotation=c.rotation;var p=e(n.armLowerR);we.position=p,we.rotation=p.rotation;var u=e(n.armUpperR);ve.position=u,ve.rotation=u.rotation;var h=e(n.handR);be.position=h,be.rotation=h.rotation;var m=e(n.legUpperR);Ee.position=m,Ee.rotation=m.rotation;var g=e(n.legLowerR);fe.position=g,fe.rotation=g.rotation;var y=e(n.footR);ye.position=y,ye.rotation=y.rotation},this}function va(e,t,a){var n=this,o=e.x,i=e.y,r=window.gameObjects,s=r.getKeyValue("world"),l=r.getKeyValue("game-pixi-container"),d=40,p=55,u=25,h=15,m=15,g=30,y=15,f=50,b=15,w=20,v=10,x=7,E=10,S=14,k=ot.Bodies.rectangle(o,i,d,p,{collisionFilter:bt}),A=ot.Bodies.rectangle(o,i,u,h,{}),C=ot.Bodies.rectangle(o,i,m,g,{collisionFilter:ft}),B=ot.Bodies.rectangle(o,i,m,g,{collisionFilter:ft}),_=ot.Bodies.rectangle(o,i,b,w,{}),O=ot.Bodies.rectangle(o,i,m,g,{}),K=ot.Bodies.rectangle(o,i,m,g,{}),V=ot.Bodies.rectangle(o,i,b,w,{}),T=ot.Bodies.rectangle(o,i,y,f,{collisionFilter:ft}),M=ot.Bodies.rectangle(o,i,y,f,{collisionFilter:ft}),j=ot.Bodies.rectangle(o,i,y,f,{}),F=ot.Bodies.rectangle(o,i,y,f,{}),P=ot.Bodies.rectangle(o,i,E,S,{}),D=ot.Bodies.rectangle(o,i,v,x,{}),L=ot.Constraint.create({bodyA:k,bodyB:A,pointA:{x:0,y:-p/2},pointB:{x:0,y:h/2},length:1}),R=ot.Constraint.create({bodyA:k,bodyB:C,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),z=ot.Constraint.create({bodyA:k,bodyB:B,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),I=ot.Constraint.create({bodyA:C,bodyB:O,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),W=ot.Constraint.create({bodyA:B,bodyB:K,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),H=ot.Constraint.create({bodyA:O,bodyB:_,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),N=ot.Constraint.create({bodyA:K,bodyB:V,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),U=ot.Constraint.create({bodyA:k,bodyB:T,pointA:{x:-d/4,y:p/2},pointB:{x:0,y:-f/2},length:2}),G=ot.Constraint.create({bodyA:k,bodyB:M,pointA:{x:0,y:p/2},pointB:{x:0,y:-f/2},length:1}),q=ot.Constraint.create({bodyA:T,bodyB:j,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),J=ot.Constraint.create({bodyA:M,bodyB:F,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:2}),X=ot.Constraint.create({bodyA:j,bodyB:P,pointA:{x:0,y:f/2},pointB:{x:0,y:-S/2},length:1}),Y=ot.Constraint.create({bodyA:F,bodyB:D,pointA:{x:0,y:f/2},pointB:{x:0,y:-x/2},length:1});this.composite=ot.Composite.create(),ot.Composite.add(this.composite,[A,k,C,B,O,K,T,M,j,F,_,V,P,D,L,H,N,X,Y,R,z,I,W,U,G,q,J]),ot.World.add(s,this.composite),ot.Body.applyForce(k,k.position,t);var Z=r.getKeyValue("player-parts-sheet"),$=[];console.log(a);var Q=t.x<0?{x:-.002}:{x:.002};Q.y=-.002,new fa(rt.a.int(15,20),k.position,Q,5);var ee=new c.h(Z.textures["rear_leg_foot.png"]);ee._id="foot 2",$.push(ee);var te=new c.h(Z.textures["rear_leg_lower.png"]);te._id="leg 2",$.push(te);var ae=new c.h(Z.textures["rear_arm_hand.png"]);ae._id="hand 2",$.push(ae);var ne=new c.h(Z.textures["rear_arm_forearm.png"]);ne._id="arm 2",$.push(ne);var oe=new c.h(Z.textures["rear_arm_upper_gore.png"]);oe._id="limb",$.push(oe);var ie=new c.h(Z.textures["front_leg_foot.png"]);ie._id="foot 1",$.push(ie);var re=new c.h(Z.textures["rear_leg_upper.png"]);re._id="limb",$.push(re);var se=new c.h(Z.textures["skull_gore.png"]);se._id="skull",$.push(se);var le=new c.h(Z.textures["front_leg_lower.png"]);le._id="leg 1",$.push(le);var de=new c.h(Z.textures["front_leg_upper.png"]);de._id="limb",$.push(de);var ce=new c.h(Z.textures["torso_whole_gore.png"]);ce._id="torso",$.push(ce);var pe=new c.h(Z.textures["front_arm_hand.png"]);pe._id="hand 1",$.push(pe);var ue=new c.h(Z.textures["front_arm_forearm.png"]);ue._id="arm 1",$.push(ue);var he=new c.h(Z.textures["front_arm_upper_gore.png"]);return he._id="limb",$.push(he),$.forEach((function(e){e.updateAnchor=!0,"skull"===e._id?(e.pivot.x=.55*e.width,e.pivot.y=.475*e.height):"foot 1"===e._id||"foot 2"===e._id?(e.pivot.x=.525*e.width,e.pivot.y=.5*e.height):(e.pivot.x=.5*e.width,e.pivot.y=.5*e.height),l.addChild(e)})),this.head=A,this.bodyUpper=k,this.armUpperL=C,this.armUpperR=B,this.armLowerL=O,this.armLowerR=K,this.legUpperL=T,this.legUpperR=M,this.legLowerL=j,this.legLowerR=F,this.handL=_,this.handR=V,this.footL=P,this.footR=D,this.destroy=function(){r.setKeyValue("player-ragdoll",null),$.forEach((function(e){e.destroy()})),ot.World.remove(s,n.composite)},this.animateRagParts=function(e){var t=e(n.head);se.position=t,se.rotation=t.rotation;var a=e(n.bodyUpper);ce.position=a,ce.rotation=a.rotation;var o=e(n.armLowerL);ue.position=o,ue.rotation=o.rotation;var i=e(n.armUpperL);he.position=i,he.rotation=i.rotation;var r=e(n.handL);pe.position=r,pe.rotation=r.rotation;var s=e(n.legUpperL);de.position=s,de.rotation=s.rotation;var l=e(n.legLowerL);le.position=l,le.rotation=l.rotation;var d=e(n.footL);ie.position=d,ie.rotation=d.rotation;var c=e(n.armLowerR);ne.position=c,ne.rotation=c.rotation;var p=e(n.armUpperR);oe.position=p,oe.rotation=p.rotation;var u=e(n.handR);ae.position=u,ae.rotation=u.rotation;var h=e(n.legUpperR);re.position=h,re.rotation=h.rotation;var m=e(n.legLowerR);te.position=m,te.rotation=m.rotation;var g=e(n.footR);ee.position=g,ee.rotation=g.rotation},ot.Composite.remove(this.composite,[R,z]),ot.Body.applyForce(this.armLowerL,this.armLowerL.position,{x:-.01,y:-.1}),ot.Body.applyForce(this.armLowerR,this.armUpperR.position,{x:.01,y:-.1}),this}function xa(e,t,a){var n=this,o=e.x,i=e.y,r=window.gameObjects,s=r.getKeyValue("world"),l=r.getKeyValue("game-pixi-container"),d=40,p=55,u=25,h=15,m=15,g=30,y=15,f=50,b=15,w=20,v=10,x=7,E=10,S=14,k=ot.Bodies.rectangle(o,i,d,p,{collisionFilter:bt}),A=ot.Bodies.rectangle(o,i,u,h,{}),C=ot.Bodies.rectangle(o,i,m,g,{collisionFilter:ft}),B=ot.Bodies.rectangle(o,i,m,g,{collisionFilter:ft}),_=ot.Bodies.rectangle(o,i,b,w,{}),O=ot.Bodies.rectangle(o,i,m,g,{}),K=ot.Bodies.rectangle(o,i,m,g,{}),V=ot.Bodies.rectangle(o,i,b,w,{}),T=ot.Bodies.rectangle(o,i,y,f,{collisionFilter:ft}),M=ot.Bodies.rectangle(o,i,y,f,{collisionFilter:ft}),j=ot.Bodies.rectangle(o,i,y,f,{}),F=ot.Bodies.rectangle(o,i,y,f,{}),P=ot.Bodies.rectangle(o,i,E,S,{}),D=ot.Bodies.rectangle(o,i,v,x,{}),L=ot.Constraint.create({bodyA:k,bodyB:A,pointA:{x:0,y:-p/2},pointB:{x:0,y:h/2},length:1}),R=ot.Constraint.create({bodyA:k,bodyB:C,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),z=ot.Constraint.create({bodyA:k,bodyB:B,pointA:{x:0,y:-p/4},pointB:{x:0,y:-g/2},length:1}),I=ot.Constraint.create({bodyA:C,bodyB:O,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),W=ot.Constraint.create({bodyA:B,bodyB:K,pointA:{x:0,y:g/2},pointB:{x:0,y:-g/2},length:1}),H=ot.Constraint.create({bodyA:O,bodyB:_,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),N=ot.Constraint.create({bodyA:K,bodyB:V,pointA:{x:0,y:g/2},pointB:{x:0,y:-w/2},length:1}),U=ot.Constraint.create({bodyA:k,bodyB:T,pointA:{x:-d/4,y:p/2},pointB:{x:0,y:-f/2},length:2}),G=ot.Constraint.create({bodyA:k,bodyB:M,pointA:{x:0,y:p/2},pointB:{x:0,y:-f/2},length:1}),q=ot.Constraint.create({bodyA:T,bodyB:j,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:1}),J=ot.Constraint.create({bodyA:M,bodyB:F,pointA:{x:0,y:f/2},pointB:{x:0,y:-f/2},length:2}),X=ot.Constraint.create({bodyA:j,bodyB:P,pointA:{x:0,y:f/2},pointB:{x:0,y:-S/2},length:1}),Y=ot.Constraint.create({bodyA:F,bodyB:D,pointA:{x:0,y:f/2},pointB:{x:0,y:-x/2},length:1});this.composite=ot.Composite.create(),ot.Composite.add(this.composite,[A,k,C,B,O,K,T,M,j,F,_,V,P,D,L,H,N,X,Y,R,z,I,W,U,G,q,J]),ot.World.add(s,this.composite),ot.Body.applyForce(k,k.position,t);var Z=r.getKeyValue("player-parts-sheet"),$=[];console.log(a);var Q=t.x<0?{x:-.002}:{x:.002};Q.y=-.002,new fa(rt.a.int(10,15),k.position,Q,5);var ee=new c.h(Z.textures["rear_leg_foot.png"]);ee._id="foot 2",$.push(ee);var te=new c.h(Z.textures["rear_leg_lower.png"]);te._id="leg 2",$.push(te);var ae=new c.h(Z.textures["rear_arm_hand.png"]);ae._id="hand 2",$.push(ae);var ne=new c.h(Z.textures["rear_arm_forearm.png"]);ne._id="arm 2",$.push(ne);var oe=new c.h(Z.textures["rear_arm_upper.png"]);oe._id="limb",$.push(oe);var ie=new c.h(Z.textures["front_leg_foot.png"]);ie._id="foot 1",$.push(ie);var re=new c.h(Z.textures["rear_leg_upper.png"]);re._id="limb",$.push(re);var se=new c.h(Z.textures["skull.png"]);se._id="skull",$.push(se);var le=new c.h(Z.textures["front_leg_lower.png"]);le._id="leg 1",$.push(le);var de=new c.h(Z.textures["front_leg_upper.png"]);de._id="limb",$.push(de);var ce=new c.h(Z.textures["torso_whole_gore.png"]);ce._id="torso",$.push(ce);var pe=new c.h(Z.textures["front_arm_hand.png"]);pe._id="hand 1",$.push(pe);var ue=new c.h(Z.textures["front_arm_forearm.png"]);ue._id="arm 1",$.push(ue);var he=new c.h(Z.textures["front_arm_upper.png"]);return he._id="limb",$.push(he),$.forEach((function(e){e.updateAnchor=!0,"skull"===e._id?(e.pivot.x=.55*e.width,e.pivot.y=.475*e.height):"foot 1"===e._id||"foot 2"===e._id?(e.pivot.x=.525*e.width,e.pivot.y=.5*e.height):(e.pivot.x=.5*e.width,e.pivot.y=.5*e.height),l.addChild(e)})),this.head=A,this.bodyUpper=k,this.armUpperL=C,this.armUpperR=B,this.armLowerL=O,this.armLowerR=K,this.legUpperL=T,this.legUpperR=M,this.legLowerL=j,this.legLowerR=F,this.handL=_,this.handR=V,this.footL=P,this.footR=D,this.destroy=function(){r.setKeyValue("player-ragdoll",null),$.forEach((function(e){e.destroy()})),ot.World.remove(s,n.composite)},this.animateRagParts=function(e){var t=e(n.head);se.position=t,se.rotation=t.rotation;var a=e(n.bodyUpper);ce.position=a,ce.rotation=a.rotation;var o=e(n.armLowerL);ue.position=o,ue.rotation=o.rotation;var i=e(n.armUpperL);he.position=i,he.rotation=i.rotation;var r=e(n.handL);pe.position=r,pe.rotation=r.rotation;var s=e(n.legUpperL);de.position=s,de.rotation=s.rotation;var l=e(n.legLowerL);le.position=l,le.rotation=l.rotation;var d=e(n.footL);ie.position=d,ie.rotation=d.rotation;var c=e(n.armLowerR);ne.position=c,ne.rotation=c.rotation;var p=e(n.armUpperR);oe.position=p,oe.rotation=p.rotation;var u=e(n.handR);ae.position=u,ae.rotation=u.rotation;var h=e(n.legUpperR);re.position=h,re.rotation=h.rotation;var m=e(n.legLowerR);te.position=m,te.rotation=m.rotation;var g=e(n.footR);ee.position=g,ee.rotation=g.rotation},this}var Ea=window.TweenLite.set;function Sa(e,t,a,n){var o=window.gameObjects,i=o.getKeyValue("world"),r=o.getKeyValue("game-pixi-container"),s=null,l=o.getKeyValue("blood-spurt-1"),d=new c.a(l.animations.blood_spurt_1),p=o.getKeyValue("blood-spurt-2"),u=new c.a(p.animations.blood_spurt_2),h=o.getKeyValue("blood-spurt-3"),m=new c.a(h.animations.blood_spurt_3),g=["blood spurt type 1","blood spurt type 2","blood spurt type 3"],y=g[Math.floor(Math.random()*g.length)];return e||(e=y),(s="blood spurt type 1"===e?d:"blood spurt type 2"===e?u:m).onComplete=function(){s.destroy(),n&&ot.World.remove(i,n),i=null,r=null,o=null,s=null,d=null,l=null,u=null,p=null,m=null,h=null,g=null,y=null},s.animationSpeed=.5,s.pivot.x=.5*s.width,s.pivot.y=.5*s.height,Ea(s.scale,a?{x:a,y:a}:{x:.5,y:.5}),s.position=t,s.loop=!1,s.updateAnchor=!0,s.play(),r.addChild(s),s}var ka="fell off of ledge",Aa=nt.getState;function Ca(e){var t=this,a=window,n=a.gameObjects,o=a.TweenLite,i=o.to,r=o.delayedCall,s=n.getKeyValue("world"),l=n.getKeyValue("rocks"),d=n.getKeyValue("game-pixi-container"),p=n.getKeyValue("explosion-assets-sheet"),u=["rock-piece1.png","rock-piece2.png","rock-piece3.png"],h=new c.h(p.textures[u[Math.floor(Math.random()*u.length)]]),m=function(){return rt.a.float(.45,.65)};h.pivot.x=.48*h.width,h.pivot.y=.48*h.height,h.scale.x=m(),h.scale.y=m(),d.addChild(h);var g=ot.Bodies.rectangle(e.x,e.y-50,10,10,{restitution:.25,collisionFilter:{category:2,mask:1}});return ot.Body.applyForce(g,g.position,{x:rt.a.float(-.005,.005),y:rt.a.float(-.001,-.0025)}),ot.World.add(s,g),this.animate=function(e){var t=e(g),a=t.x,n=t.y;h.position={x:a,y:n}},this.destroy=function(){var e=l.indexOf(t);ot.World.remove(s,g),d.removeChild(h),e>-1&&l.splice(e,1),s=null,l=null,d=null,g=null,h=null,n=null},r(Aa().game.lastWaveCountDefeated&&Aa().game.lastWaveCountDefeated<10?4:1,(function(){i(h,.5,{alpha:0,onComplete:function(){t.destroy()}})})),this}var Ba=a(15),_a=function(){function e(t){var a=this;Object(mt.a)(this,e),this.gameObjects=window.gameObjects;var n=window.TweenLite,o=n.to,i=n.delayedCall,r=this.gameObjects.getKeyValue("game-pixi-container"),s=this.gameObjects.getKeyValue("world");this.woodPlanksSheet=this.gameObjects.getKeyValue("wood-planks-sheet"),this.woodPlanks=this.gameObjects.getKeyValue("wood-planks"),this.plankRange=["000.png","001.png","002.png"];var l=t.x,d=t.y;return this.gfc=this.getPlank(),this.gfc.width=50,this.gfc.height=15,this.gfcContainer=new c.e,this.gfcContainer.addChild(this.gfc),this.gfcContainer.pivot.x=.5*this.gfcContainer.width,this.gfcContainer.pivot.y=.5*this.gfcContainer.height,this.body=new ot.Bodies.rectangle(l,d,50,15,{collisionFilter:ft}),this.body.torque=rt.a.float(-.5,.5),ot.Body.applyForce(this.body,this.body.position,{x:rt.a.float(-.02,.02),y:rt.a.float(-.01,-.02)}),ot.World.add(s,this.body),r.addChild(this.gfcContainer),this.destroy=function(){var e=a.woodPlanks.indexOf(a);ot.World.remove(s,a.body),r.removeChild(a.gfcContainer),e>-1&&a.woodPlanks.splice(e,1),s=null,r=null,a.gameObjects=null,a.woodPlanks=null,a.gfc=null},i(4,(function(){o(a.gfcContainer,2,{alpha:0,onComplete:function(){a.destroy()}})})),this}return Object(Ba.a)(e,[{key:"animate",value:function(e){var t=e(this.body),a=t.x,n=t.y,o=t.rotation;this.gfcContainer.position={x:a,y:n},this.gfcContainer.rotation=o}},{key:"getPlank",value:function(){return new c.h(this.woodPlanksSheet.textures[this.plankRange[Math.floor(Math.random()*this.plankRange.length)]])}}]),e}(),Oa=(a(177),a(40)),Ka=a(42),Va=a(27),Ta=function(){function e(t,a){var n=this;Object(mt.a)(this,e),this.gameObjects=window.gameObjects;var o=window.TweenLite.to;this.container=this.gameObjects.getKeyValue("game-pixi-container");var i=this.gameObjects.getKeyValue("explosion3d1-sheet"),r=this.gameObjects.getKeyValue("explosion3d2-sheet");this.explosion1=new c.a(i.animations.explosion3d),this.explosion2=new c.a(r.animations.explosion3d),this.explosions=[this.explosion1,this.explosion2],this.explosions.forEach((function(e){e.pivot.x=.5*e.width,e.pivot.y=.5*e.height,e.loop=!1,e.onComplete=function(){n.container.removeChild(e),n.container=null,n.gameObjects=null,i=null,r=null,n.explosions=null}})),1===t&&(this.explosion=this.explosion1,this.explosion.animationSpeed=1),2===t&&(this.explosion=this.explosion2,this.explosion.animationSpeed=1),this.renderBody=a;var s=new Oa.a;s.brightness=20,s.saturation=3;var l=new Ka.a;l.blur=.5;var d=new Va.a({outerStrength:3});this.filters=nt.getState().game.filterEffects?[s,l,d]:[],this.explosion.filters=this.filters,o(this.explosion,.35,{alpha:0}),o(s,.5,{brightness:1,saturation:1.5,onUpdate:function(){nt.getState().game.filterEffects&&(n.explosion.filters=n.filters)}}),this.explosion.play()}return Object(Ba.a)(e,[{key:"renderPosition",value:function(e){this.renderBody&&(this.explosion.position=e(this.renderBody),this.container&&-1===this.container.children.indexOf(this.explosion)&&this.container.addChild(this.explosion))}}]),e}(),Ma=a(10);function ja(e,t,a){var n=this,o=window,i=o.gameObjects,r=o.TweenLite.to,s=window.gameObjects.getKeyValue("explosion1"),l=new Ma.Howl({src:[s]}),d=window.gameObjects.getKeyValue("distant-explosion"),p=new Ma.Howl({src:[d]}),u=i.getKeyValue("world"),h=i.getKeyValue("rocks"),m=i.getKeyValue("game-pixi-container"),g=i.getKeyValue("explosions"),y=i.getKeyValue("explosion-assets-sheet"),f=["smoke1.png","smoke2.png","smoke3.png","smoke4.png"],b=ot.Bodies.rectangle(e.x,e.y,20,20,{restitution:0,collisionFilter:ft,isStatic:!0});ot.World.add(u,b),this.calcRenderedPosition=function(e){var t=e(b),a=t.x,o=t.y;n.calculatedPosition={x:a,y:o}},g.push(this);for(var w=rt.a.int(5,10),v=function(e){var t=new c.h(y.textures[f[Math.floor(Math.random()*f.length)]]);t.pivot.x=.5*t.width,t.pivot.y=.5*t.height;r(t,2,{onStart:function(){m.addChild(t)},alpha:0,onComplete:function(){if(e===w-1){ot.World.remove(u,b);var t=g.indexOf(n);t>-1&&g.splice(t,1),u=null,g=null,y=null,f=null}}});var a=rt.a.int(1,2);r(t.scale,.5,{x:a,y:a});var o={x:0,y:0};r(o,.5,{x:rt.a.int(-100,100),y:rt.a.int(-50,50)}),r(t.position,2,{onUpdate:function(){n.calculatedPosition&&(t.position.x=n.calculatedPosition.x+o.x,t.position.y=n.calculatedPosition.y+o.y)},onComplete:function(){t.destroy(),m=null,i=null}})},x=0;x<w;++x)v(x);var E=i.getKeyValue("wood-planks");if(e.y>300||t){for(var S=0;S<rt.a.int(4,7);++S)a&&a.showWood?E.push(new _a(e)):h.push(new Ca(e));E=null,h=null}if(!a||a.showExplosionSprite){var k=i.getKeyValue("explosion-sprites");l.seek(.5),l.play(),p.play(),k.push(new Ta(rt.a.int(1,2),b)),k=null}}function Fa(e,t,a){var n=this,o=nt.getState,i=window,r=i.gameObjects,s=i.TweenLite.delayedCall,l=r.getKeyValue("barriers-sheet"),d=r.getKeyValue("game-pixi-container"),p=r.getKeyValue("world"),u=r.getKeyValue("build-objects"),h=t.width,m=t.height,g=new c.h(l.textures["woodenBarrier.png"]),y=new c.h(l.textures["stoneBarrier.png"]),f=new c.h(l.textures["metalBarrier.png"]),b=dt("explosive-barrel");this.types={WOOD:"Wooden",STONE:"Stone",METAL:"Metal",EXPLOSIVE:"Explosive Barrel"};var w,v=e.x,x=e.y,E=ot.Bodies.rectangle(v,x,h,m,{inertia:1/0,label:a===this.types.EXPLOSIVE?"explosive barrier":"barrier"}),S=r.getKeyValue("ground"),k=ot.Constraint.create({bodyA:S,bodyB:E,pointA:{x:-ct(S)/2+e.x,y:-pt(S)/2},pointB:{x:0,y:pt(E)/2},length:0});if(a)switch(a){case this.types.WOOD:E.strength=o().game.player.perks.barrierPlus.owned?300:100;break;case this.types.STONE:E.strength=o().game.player.perks.barrierPlus.owned?500:250;break;case this.types.METAL:E.strength=o().game.player.perks.barrierPlus.owned?800:400;break;case this.types.EXPLOSIVE:E.strength=o().game.player.perks.barrierPlus.owned?200:100;break;default:E.strength=o().game.player.perks.barrierPlus.owned?300:100}E.main=this,this.destroyed=!1,this.getBody=function(){return E},ot.World.add(p,[k,E]);var A=new c.i(E.strength,{fill:"#ffffff",fontSize:12});if(A.pivot.x=.5*A.width,A.pivot.y=.5*A.height,a)switch(a){case this.types.WOOD:w=g;break;case this.types.STONE:w=y;break;case this.types.METAL:w=f;break;case this.types.EXPLOSIVE:w=b}w.width=h,w.height=m;var C=new c.e;return C.addChild(w),C.pivot.x=.5*C.width,C.pivot.y=.5*C.height,d.addChild(C),d.addChild(A),r.getKeyValue("player").sprites.forEach((function(e){d.addChild(e)})),this.takeDamage=function(e){E.strength-=e,A.text=E.strength},this.displayBarrierStrength=function(e){A.position=e(E),w.position=e(E)},E.removeSelf=function(){if(n.destroyed=!0,new ja(E.position,!0,{showWood:a===n.types.WOOD,showExplosionSprite:a===n.types.EXPLOSIVE}),a===n.types.EXPLOSIVE){var e=E.position,t=e.x,o=e.y,i=ot.Bodies.rectangle(t,o,400,300);i.label="barrel explosion",ot.World.add(p,i),s(2,(function(){i&&ot.World.remove(p,i)})),i.removeSelf=function(){ot.World.remove(p,i)}}ot.World.remove(p,[k,E]),d.removeChild(A),d.removeChild(C);var r=u.indexOf(n);r>-1&&u.splice(r,1)},this}var Pa=function(){function e(t){var a=this;Object(mt.a)(this,e);var n=t.x,o=t.y,i=window.gameObjects;this.world=i.getKeyValue("world"),this.container=i.getKeyValue("game-pixi-container"),this.landmines=i.getKeyValue("build-objects");var r=i.getKeyValue("landmine-sheet");this.body=ot.Bodies.rectangle(n,o,100,5),this.body.label="landmine trap",this.body.destroy=function(){a.destroy()};var s=i.getKeyValue("ground");return this.constraint=ot.Constraint.create({bodyA:s,bodyB:this.body,pointA:{x:-ct(s)/2+t.x,y:-pt(s)/2},pointB:{x:0,y:pt(this.body)/2},length:0}),ot.World.add(this.world,[this.body,this.constraint]),this.gfc=new c.a(r.animations.landmine),this.gfc.updateAnchor=!0,this.gfc.loop=!0,this.gfc.animationSpeed=.75,this.gfc.play(),this.gfc.width=100,this.gfc.height=100,this.gfcContainer=new c.e,this.gfcContainer.addChild(this.gfc),this.gfcContainer.pivot.x=0,this.gfcContainer.pivot.y=0,this.container.addChild(this.gfcContainer),console.log(this.gfcContainer.position),this.destroyed=!1,this}return Object(Ba.a)(e,[{key:"getBody",value:function(){return this.body}},{key:"updatePosition",value:function(e){var t=e(this.body),a=t.x,n=t.y;this.gfcContainer.position={x:a,y:n}}},{key:"destroy",value:function(){var e=this;new ja(this.body.position,!0);var t=window.TweenLite.delayedCall,a=this.body.position,n=a.x,o=a.y;if(this.hitbox=ot.Bodies.rectangle(n,o,500,300),this.hitbox.label="landmine explosion",this.hitbox.removeSelf=function(){ot.World.remove(e.world,e.hitbox)},ot.World.add(this.world,this.hitbox),t(.1,(function(){e.hitbox.removeSelf()})),!this.destroyed){this.destroyed=!0,ot.World.remove(this.world,[this.body,this.constraint]),this.container.removeChild(this.gfcContainer);var i=this.landmines.indexOf(this);i>-1&&this.landmines.splice(i,1)}}}]),e}(),Da=a(20),La=a(39),Ra=a(35);function za(e,t,a,n,o){var i=this;this.grenadeDistance={start:e,end:null};var r=nt.getState,s=window,l=s.gameObjects,d=s.TweenLite,p=d.delayedCall,u=d.from,h=l.getKeyValue("world"),m=l.getKeyValue("game-pixi-container"),g=l.getKeyValue("grenades"),y=ot.Bodies.circle(e,t,a,{restitution:.8,collisionFilter:{category:3}});y.label="grenade",y.main=this,ot.World.add(h,y),ot.Body.applyForce(y,y.position,n),y.torque=.01;var f=new c.f;f.beginFill(2049836),f.drawCircle(0,0,a),this.grenadeBody=y;var b=new Da.a;b.shadowAlpha=.45,b.lightAlpha=.35,b.thickness=5,b.shadowColor=0,b.lightColor=2133060;var w=new La.a;w.noise=.1,w.seed=.5,f.filters=nt.getState().game.filterEffects?[b,w]:[];var v=new Ra.a({velocity:{x:0,y:0}});u(v.velocity,.75,{x:100,y:10}),m.addChild(f),this.animate=function(e){if(y&&f){var t=e(y),a=t.x,n=t.y,o=t.rotation;f.position.x=a,f.position.y=n,f.rotation=o,b.rotation=Object(gt.radians)(o),f.filters=nt.getState().game.filterEffects?[b,w,v]:[]}},p(o||r().game.player.weapons.grenadeFuseTime.default,(function(){i.exploded||i.explode()})),this.exploded=!1,this.explode=function(e){i.grenadeDistance.end=i.grenadeBody.position.x,i.exploded=!0,new ja(y.position,e||null);var t=r().game.player.weapons.grenadeExplosionSize;i.explosionHitbox=ot.Bodies.rectangle(y.position.x,y.position.y,t,t,{}),y.distance=i.grenadeDistance,i.explosionHitbox.label="grenade explosion",ot.World.remove(h,y),ot.World.add(h,i.explosionHitbox),m.removeChild(f),p(.01,(function(){i.destroy()}))},this.destroy=function(){ot.World.remove(h,i.explosionHitbox);var e=g.indexOf(i);e>-1&&g.splice(e,1)}}var Ia=function(){function e(t){var a=this;Object(mt.a)(this,e);var n=t.x,o=t.y,i=window.gameObjects;this.world=i.getKeyValue("world"),this.container=i.getKeyValue("game-pixi-container"),this.landmines=i.getKeyValue("build-objects");var r=i.getKeyValue("clustermine-sheet");this.body=ot.Bodies.rectangle(n,o,100,5),this.body.label="clustermine trap",this.body.destroy=function(){a.destroy()};var s=i.getKeyValue("ground");return this.constraint=ot.Constraint.create({bodyA:s,bodyB:this.body,pointA:{x:-ct(s)/2+t.x,y:-pt(s)/2},pointB:{x:0,y:pt(this.body)/2},length:0}),ot.World.add(this.world,[this.body,this.constraint]),this.gfc=new c.a(r.animations.clustermine),this.gfc.updateAnchor=!0,this.gfc.loop=!0,this.gfc.animationSpeed=.75,this.gfc.play(),this.gfc.width=100,this.gfc.height=100,this.gfcContainer=new c.e,this.gfcContainer.addChild(this.gfc),this.gfcContainer.pivot.x=0,this.gfcContainer.pivot.y=0,this.container.addChild(this.gfcContainer),console.log(this.gfcContainer.position),this.destroyed=!1,this}return Object(Ba.a)(e,[{key:"getBody",value:function(){return this.body}},{key:"updatePosition",value:function(e){var t=e(this.body),a=t.x,n=t.y;this.gfcContainer.position={x:a,y:n}}},{key:"destroy",value:function(){var e=this,t=window.TweenLite.delayedCall,a=window.gameObjects.getKeyValue("grenades");t(.25,(function(){for(var n=nt.getState,o=n().game.player.perks.cluck.owned?8:4,i=n().game.player.perks.cluck.owned?rt.a.float(-.02,.02):rt.a.float(-.01,.01),r=n().game.player.perks.cluck?rt.a.float(-.025,-.075):rt.a.float(-.01,-.05),s=0;s<o;++s)t(.1*s,(function(){var t=new za(e.body.position.x,e.body.position.y-50,10,{x:i,y:r},4);a.push(t)}))})),new ja(this.body.position,!0);var n=this.body.position,o=n.x,i=n.y;if(this.hitbox=ot.Bodies.rectangle(o,i,500,300),this.hitbox.label="clustermine explosion",this.hitbox.removeSelf=function(){ot.World.remove(e.world,e.hitbox)},ot.World.add(this.world,this.hitbox),t(.1,(function(){e.hitbox.removeSelf()})),!this.destroyed){this.destroyed=!0,ot.World.remove(this.world,[this.body,this.constraint]),this.container.removeChild(this.gfcContainer);var r=this.landmines.indexOf(this);r>-1&&this.landmines.splice(r,1)}}}]),e}(),Wa={WOOD:"Wooden",STONE:"Stone",METAL:"Metal",EXPLOSIVE:"Explosive Barrel"},Ha={LANDMINE:"Landmine",CLUSTER_BOMB:"Cluster Bomb",REMOTE_MINE:"Remote Mine",TURRET:"Machine Gun Turret"},Na=function(){function e(t,a){var n=this;Object(mt.a)(this,e);var o=t.x,i=t.y,r=window.gameObjects;this.world=r.getKeyValue("world"),this.container=r.getKeyValue("game-pixi-container"),this.buildObjects=r.getKeyValue("build-objects"),this.remoteMines=r.getKeyValue("remote-mines"),this.remoteMinesArr=r.getKeyValue("remote-mines-array");var s=r.getKeyValue("remote-mine-sheet");this.body=ot.Bodies.rectangle(o,i,100,5,{collisionFilter:ft}),this.body.label="remote mine trap",this.body.destroy=function(){n.destroy()};var l=r.getKeyValue("ground");this.constraint=ot.Constraint.create({bodyA:l,bodyB:this.body,pointA:{x:-ct(l)/2+t.x,y:-pt(l)/2},pointB:{x:0,y:pt(this.body)/2},length:0}),ot.World.add(this.world,[this.body,this.constraint]),this.gfc=new c.a(s.animations["remote-mine"]),this.gfc.updateAnchor=!0,this.gfc.loop=!0,this.gfc.animationSpeed=.75,this.gfc.play(),this.gfc.width=100,this.gfc.height=100,this.gfcContainer=new c.e,this.gfcContainer.addChild(this.gfc),this.gfcContainer.pivot.x=0,this.gfcContainer.pivot.y=0,this.container.addChild(this.gfcContainer),console.log(this.gfcContainer.position);return this.num=new c.i("[ ".concat(a," ]: detonate"),{fill:"#00FFFF",fontSize:12}),this.num.pivot.x=.5*this.num.width,this.num.pivot.y=.5*this.num.height,this.container.addChild(this.num),this.destroyed=!1,this}return Object(Ba.a)(e,[{key:"getBody",value:function(){return this.body}},{key:"updatePosition",value:function(e){var t=e(this.body),a=t.x,n=t.y;this.gfcContainer.position={x:a,y:n},this.num.position={x:a,y:n-50}}},{key:"detonate",value:function(){this.destroy()}},{key:"updateNumber",value:function(e){this.num.text="[ ".concat(e," ]: detonate")}},{key:"destroy",value:function(){var e=this,t=window.TweenLite.delayedCall;new ja(this.body.position,!0);var a=this.body.position,n=a.x,o=a.y;if(this.hitbox=ot.Bodies.rectangle(n,o,500,300),this.hitbox.label="landmine explosion",this.hitbox.removeSelf=function(){ot.World.remove(e.world,e.hitbox)},ot.World.add(this.world,this.hitbox),t(.1,(function(){e.hitbox.removeSelf()})),!this.destroyed){this.destroyed=!0,ot.World.remove(this.world,[this.body,this.constraint]),this.container.removeChild(this.gfcContainer),this.container.removeChild(this.num);var i=this.buildObjects.indexOf(this);i>-1&&this.buildObjects.splice(i,1),this.remoteMinesArr.indexOf(this)>-1&&this.remoteMinesArr.splice(i,1)}}}]),e}(),Ua=nt.getState,Ga=nt.dispatch,qa=function(e){var t=Ua().game.player.weapons.damage["pistol weapon"],a=t.min,n=t.max;return e.label.indexOf("body")>-1?{part:"torso",dmg:a}:e.label.indexOf("head")>-1?{part:"head",dmg:n}:void 0};function Ja(e,t,a){var n=this,o=t.x,i=t.y,r=window,s=r.gameObjects,l=r.TweenLite,d=l.to,p=l.set,u=(l.from,s.getKeyValue("world")),h=s.getKeyValue("game-pixi-container"),m=ot.Bodies.rectangle(o,i,10,10,{isStatic:!0,collisionFilter:ft});ot.World.add(u,m);for(var g=s.getKeyValue("explosion-assets-sheet"),y=["smoke1.png","smoke2.png","smoke3.png","smoke4.png"],f=function(t){var o=new c.h(g.textures[y[Math.floor(Math.random()*y.length)]]);"enemy"===e&&(o.tint=16711680),o.pivot.x=.5*o.width,o.pivot.y=.5*o.height,d(o,a&&a.alphaDuration?a.alphaDuration:.5,{alpha:0,onComplete:function(){1===t&&(ot.World.remove(u,m),u=null)}});var i=void 0;i=a&&a.rand&&a.rand.min&&a.rand.max?rt.a.float(a.rand.min,a.rand.max):rt.a.float(.25,.5),p(o.scale,{x:a&&a.set?a.set:.1,y:a&&a.set?a.set:.1}),d(o.scale,a&&a.duration?a.duration:.25,{x:i,y:i});var r={x:0,y:0};d(r,a&&a.duration?a.duration:.25,{x:"enemy"===e?rt.a.int(-20,20):rt.a.int(-10,10),y:"enemy"===e?rt.a.int(-20,20):rt.a.int(-50,0)}),d(o.position,3,{onUpdate:function(){n.calculatedPosition&&(o.position.x=n.calculatedPosition.x+r.x,o.position.y=n.calculatedPosition.y+r.y,h&&h.children.indexOf(o)<0&&h.addChild(o))},onComplete:function(){o.destroy(),h=null,s=null}})},b=0;b<2;++b)f(b);return this.renderPosition=function(e){n.calculatedPosition=e(m)},this}function Xa(e,t,a,n,o){var i,r,s,l=Ua().game,d=l.mouseState,p=l.player.weapons,u=p.equipped,h=p.shellEjectionForce,m=p.shellRemovalTimeout;r||(r=a.getKeyValue("game-pixi-container")),i||(i=a.getKeyValue("world")),s||(s=a.getKeyValue("pistol-shells")),this.body=o&&o.body?o.body:ot.Bodies.rectangle("greater than player y position"===d.y||"less than player y position"===d.y?e:d.x===yt?e+30:e-30,"less than player y position"===d.y?t-40:t-20,7,4,{restitution:.75,collisionFilter:ft}),this.body.label=void 0!==n?"player ".concat(n," shell"):"player pistol shell","shotgun weapon"===u&&(this.body.label="shotgun shell"),ot.World.add(i,this.body),ot.Body.applyForce(this.body,this.body.position,o&&o.force?o.force:{x:d.x===yt?rt.a.float(-h[u].min,-h[u].max):rt.a.float(h[u].min,h[u].max),y:rt.a.float(-h[u].min,-h[u].max)}),ot.Body.setAngularVelocity(this.body,rt.a.float(-.5,-1)),this.gfc=new c.f,this.gfc.beginFill("shotgun weapon"===u?11534336:11244318);var g=ct(this.body),y=pt(this.body);"shotgun weapon"===u?this.gfc.drawRect(0,0,y,g+1):"smg weapon"===u?this.gfc.drawRect(0,0,y,g+2):this.gfc.drawRect(0,0,g,y),this.gfc.endFill(),"shotgun weapon"===u&&(this.gfc.beginFill(13416013),this.gfc.drawRect(0,g+1,y,3)),window.gameObjects.getKeyValue("bullet-shell-bevel")||window.gameObjects.setKeyValue("bullet-shell-bevel",new Da.a({lightAlpha:.5,shadowAlpha:.5}));var f=[window.gameObjects.getKeyValue("bullet-shell-bevel")];return this.gfc.filters=Ua().game.filterEffects?f:[],this.gfc.pivot.x=this.gfc.width/2,this.gfc.pivot.y=this.gfc.height/2,r.addChild(this.gfc),s.push(this),this.destroy=function(){r.removeChild(this.gfc),ot.World.remove(i,this.body),this.body=null,this.gfc=null,s.splice(s.indexOf(this),1),i=null,r=null,a=null,s=null},setTimeout(this.destroy.bind(this),m[u]),this}function Ya(e,t,a,n,o,i){var r,s,l,d,p;l=ut("arm",a);var u=Ua().game,h=u.mouseRelativeToPlayerPosition,m=u.mouseState;return s||(s=a.getKeyValue("game-pixi-container")),r||(r=a.getKeyValue("world")),d||(d=a.getKeyValue("pistol-bullets")),this.body=o&&o.overrideBody?o.overrideBody:ot.Bodies.circle("greater than player y position"===m.y||"less than player y position"===m.y?e:m.x===yt?e+50:e-50,t,4,{restitution:.3}),this.body.label=i?"extra damage bullet":void 0!==n&&null!==n?"player ".concat(n," bullet"):"player pistol bullet",this.body.main=this,ot.World.add(r,this.body),ot.Body.setAngle(this.body,o&&o.overrideAngle?o.overrideAngle:ot.Vector.angle(this.body.position,h)),ot.Body.applyForce(this.body,this.body.position,o&&o.overrideForce?o.overrideForce:function(e,t){var a=st().game.player.weapons,n=a.bulletVariance,o=a.equipped,i=a.bulletForce,r=ot.Vector.angle(e,t);return{x:Math.cos(r)*i[o],y:Math.sin(r)*i[o]+rt.a.float(-n[o],n[o])}}(l.position,h)),this.gfc=new c.f,this.gfc.beginFill(16777215),p||(p=ct(this.body)),this.gfc.drawRect(0,0,p,p/3),this.gfc.endFill(),this.gfc.pivot.x=this.gfc.width/2,this.gfc.pivot.y=this.gfc.height/2,s.addChild(this.gfc),d.push(this),this.addImpactEffect=function(e,t){var n=a.getKeyValue("bullet-impacts"),o=new Ja(e,t);n.push(o)},this.destroyed=!1,this.destroy=function(e){if(!this.destroyed){var t=this.body.position;this.destroyed=!0,s.removeChild(this.gfc),s.removeChild(this.bulletTrail),ot.World.remove(r,this.body),this.linePoints=null,this.body=null,this.gfc=null,d.indexOf(this)>-1&&d.splice(d.indexOf(this),1),e&&this.addImpactEffect(e,t),r=null,s=null,a=null}},setTimeout(this.destroy.bind(this),500),this}var Za=function(e){var t,a,n,o,i,r,s;t||(t=e.getKeyValue("world")),a||(a=e.getKeyValue("weapons-ui")),n||(n=e.getKeyValue("player"));var l=Ua().game.player.weapons,d=l.lastShot,c=l.totalAmmo,p=l.equipped,u=l.shotLimiter;if(JSON.parse(d[p])+u[p]<Date.now()&&!a.checkEmpty(p)&&!a.reloading&&c[p]>0){Ga(Ee(p,JSON.stringify(Date.now()))),Ga(W(A)),a.fireBullet(p),n.fireWeaponAnimation(),o||(o=ht(e)),i||(i=ct(o)),r||(r=pt(o)),s||(s=ut("arm",e));var h=!(!a.lastBulletByWepType[p]||!Ua().game.player.perks.lastBullet.owned);if("shotgun weapon"===p?new Xa(0,0,e,null,{body:ot.Bodies.rectangle(o.position.x,s.position.y,10,4,{collisionFilter:ft})}):new Xa(o.position.x,s.position.y,e,"pistol weapon"!==p?p.split(" ")[0]:void 0),"shotgun weapon"===p)for(var m=0;m<10;++m)new Ya(s.position.x,s.position.y,e,"shotgun",h);else new Ya(s.position.x,s.position.y,e,"pistol weapon"!==p?p.split(" ")[0]:void 0,null,h);t=null,a=null,n=null,o=null,i=null,r=null,s=null}else 0===c[p]&&!1===Ua().game.showingMessage?a.shaking||(a.changeTextForEmptyShake("EMPTY"),a.emptyMagShake()):a.checkEmpty(p)&&!1===Ua().game.showingMessage&&(a.reloading||a.shaking||(a.changeTextForEmptyShake("RELOAD"),a.emptyMagShake()))},$a=function(){function e(){var t=this;Object(mt.a)(this,e);var a=window.gameObjects;this.to=window.TweenLite.to,this.set=window.TweenLite.set;var n=a.getKeyValue("game-pixi-container");this.container=n;var o=a.getKeyValue("muzzle-flashes-sheet"),i=new c.h(o.textures["muzzle-flash1.png"]),r=new c.h(o.textures["muzzle-flash2.png"]),s=new c.h(o.textures["muzzle-flash3.png"]),l=new c.h(o.textures["muzzle-flash4.png"]),d=new c.h(o.textures["muzzle-flash5.png"]),p=[i,r,s,l,d];n.addChild(i),n.addChild(r),n.addChild(s),n.addChild(l),n.addChild(d),i.visible=!1,r.visible=!1,s.visible=!1,l.visible=!1,d.visible=!1,this.muzzleScale=.65,this.blurFilter=new c.k.BlurFilter,this.blurFilter.blur=this.getRandomBlur(),this.blurFilter.quality=5,this.glowFilter=new Va.a,this.glowFilter.innerStrength=.1,this.glowFilter.outerStrength=rt.a.float(1,1.5),this.adjustmentFilter=new Oa.a,this.adjustmentFilter.brightness=2,this.adjustmentFilter.saturation=2,this.flashes=[],p.forEach((function(e){e.updateAnchor=!0,e.scale={x:t.muzzleScale,y:t.muzzleScale},e.filters=nt.getState().game.filterEffects?[t.blurFilter,t.adjustmentFilter,t.glowFilter]:[],t.flashes.push(e)}))}return Object(Ba.a)(e,[{key:"fireEffect",value:function(e){var t=nt.getState().game.player.weapons.equipped,a=nt.getState().game.player.modTiers.powder[t].current,n=this.getRandomFlash();n.visible=!0,e&&(n.position=e),nt.getState().game.filterEffects&&(this.adjustmentFilter.saturation=1===a?1:2===a?2:3===a?3:4===a?5:1,this.glowFilter.color=1===a?16774400:2===a?16765184:3===a?16739584:4===a?16726016:16777215),n.filters=nt.getState().game.filterEffects?[this.glowFilter,this.adjustmentFilter,this.blurFilter]:[],this.container.addChild(n),this.set(n,{alpha:1}),this.set(n.scale,{x:this.muzzleScale}),this.to(n,.1,{alpha:0}),this.to(n.scale,.1,{x:2*this.muzzleScale,onComplete:function(){n.visible=!1}})}},{key:"setMuzzleRotations",value:function(e){this.flashes.forEach((function(t){t.rotation=e})),this.rotation=e}},{key:"getRandomBlur",value:function(){return rt.a.float(.5,4)}},{key:"changeBlurAmount",value:function(){this.blurFilter.blur=this.getRandomBlur()}},{key:"getFlashes",value:function(){return this.flashes}},{key:"getRandomFlash",value:function(){return this.flashes[Math.floor(Math.random()*this.flashes.length)]}},{key:"muzzleScale",get:function(){return this._muzzleScale},set:function(e){this._muzzleScale=e}}]),e}(),Qa=function(){function e(t){var a=this;Object(mt.a)(this,e);var n=t.x,o=t.y;this.delayedCall=window.TweenLite.delayedCall,this.gameObjects=window.gameObjects,this.world=this.gameObjects.getKeyValue("world"),this.buildObjects=this.gameObjects.getKeyValue("build-objects"),this.container=this.gameObjects.getKeyValue("game-pixi-container"),this.scanAnim=new c.a(this.gameObjects.getKeyValue("turret-scan-sheet").animations.turretScan),this.scanAnim.visible=!0,this.scanAnim.loop=!0,this.scanAnim.play(),this.shootAnim=new c.a(this.gameObjects.getKeyValue("turret-shoot-sheet").animations.turretShoot),this.shootAnim.loop=!1,this.shootAnim.onFrameChange=function(){},this.shootAnim.onComplete=function(){a.shootAnim.gotoAndStop(0),a.scanAnim.play(),a.scanAnim.visible=!0,a.shootAnim.visible=!1},this.shootAnim.visible=!1,this.scanAnim.width=150,this.scanAnim.height=150,this.scanAnim.pivot.x=.5*this.scanAnim.width,this.scanAnim.pivot.y=this.scanAnim.height,this.shootAnim.width=150,this.shootAnim.height=150,this.shootAnim.pivot.x=.5*this.shootAnim.width,this.shootAnim.pivot.y=this.shootAnim.height,this.turret=new c.e,this.turret.addChild(this.scanAnim,this.shootAnim),this.container.addChild(this.turret),this.turret.children.forEach((function(e){})),this.body=ot.Bodies.rectangle(n,o,50,50,{label:"turret barrier",main:this}),this.body.removeSelf=function(){a.destroy()};var i=this.gameObjects.getKeyValue("ground");this.constraint=ot.Constraint.create({bodyA:i,bodyB:this.body,pointA:{x:-ct(i)/2+t.x,y:-pt(i)/2},pointB:{x:0,y:pt(this.body)/2},length:0}),ot.World.add(this.world,[this.body,this.constraint]),this.body.strength=250,this.healthDisplay=new c.i("health: ".concat(this.body.strength),{fontSize:12,fill:16777215}),this.healthDisplay.pivot.x=.5*this.healthDisplay.width,this.container.addChild(this.healthDisplay),this.direction="right";var r=this.gameObjects.getKeyValue("player");return r.dead||r.sprites.forEach((function(e){a.container.addChild(e)})),this.destroyed=!1,this}return Object(Ba.a)(e,[{key:"takeDamage",value:function(e){this.body.strength-=e,this.healthDisplay.text="health: ".concat(this.body.strength)}},{key:"displayBarrierStrength",value:function(e){var t=e(this.body),a=t.x,n=t.y;this.healthDisplay.position={x:a,y:n-100},this.turret.position={x:a,y:n}}},{key:"updateDirection",value:function(e){this.turret.scale.x="left"===e?-1:1,this.direction=e}},{key:"getBody",value:function(){return this.body}},{key:"resumeScan",value:function(){this.scanning||(this.scanning=!0,this.scanAnim.play(),this.scanAnim.visible=!0,this.shootAnim.visible=!1)}},{key:"fireBullet",value:function(){if(!this.destroyed){this.muzzleFlashFX||(this.muzzleFlashFX=new $a,this.muzzleFlashFX.setMuzzleRotations("left"===this.direction?Object(gt.degrees)(-92):Object(gt.degrees)(92)));nt.getState().game.player.weapons.bulletForce;var e=this.body.position,t=e.x,a=e.y;this.muzzleFlashFX.fireEffect("left"==this.direction?{x:this.turret.position.x-100,y:this.turret.position.y-25}:{x:this.turret.position.x+100,y:this.turret.position.y-25});var n=ot.Bodies.circle(t,a-25,5),o=rt.a.float(-5e-4,-75e-5);new Xa(0,0,this.gameObjects,null,{body:ot.Bodies.rectangle(t,a-50,7,4,{collisionFilter:ft}),force:"right"===this.direction?{x:rt.a.float(-35e-5,-75e-5),y:o}:{x:rt.a.float(35e-5,75e-5),y:o}}),new Ya(0,0,this.gameObjects,"turret",{overrideBody:n,overrideForce:"left"===this.direction?{x:-.01,y:-75e-5}:{x:.01,y:-75e-5},overrideAngle:"left"===this.direction?-3:.1})}}},{key:"shoot",value:function(){var e=this;if(!this.shooting&&!this.destroyed){var t=nt.getState().game.traps.turret.cooldown;this.fireBullet(),this.shooting=!0,this.scanAnim.visible=!1,this.shootAnim.visible=!0,this.shootAnim.play(),this.delayedCall(t,(function(){e.shooting=!1}))}}},{key:"destroy",value:function(){if(!this.destroyed){this.destroyed=!0,new ja(this.body.position,!0),this.container.removeChild(this.turret,this.healthDisplay),ot.World.remove(this.world,[this.body,this.constraint]);var e=this.buildObjects.indexOf(this,1);e>-1&&this.buildObjects.splice(e,1)}}}]),e}(),en=function(){function e(t,a,n){var o=this;Object(mt.a)(this,e);var i=new c.a(window.gameObjects.getKeyValue("sparks-sheet").animations["spark-particle"]),r=new c.a(window.gameObjects.getKeyValue("muzzle-sparks-sheet").animations.muzzleSparks),s=[i,r];switch(s.forEach((function(e){var t=n&&n.scale?n.scale:1;1!==t&&(e.scale.x=t,e.scale.y=t),e.pivot.x=.5*e.width,e.pivot.y=.5*e.height,e.loop=!1,e.animationSpeed=n&&n.animationSpeed?n.animationSpeed:1,e.onComplete=function(){o.container.removeChild(e),o.container=null,e=null,i=null,r=null,s=null}})),this.container=window.gameObjects.getKeyValue("game-pixi-container"),t){case 1:this.spark=i,n&&n.tint&&(this.spark.tint=n.tint);break;case 2:this.spark=r,this.blurFilter=new c.k.BlurFilter(rt.a.float(.5,.75),5),this.adjFilter=new Oa.a,this.glowFilter=new Va.a,this.adjFilter.saturation=2,this.adjFilter.brightness=1.5,this.glowFilter.color=16777215,this.filters=nt.getState().game.filterEffects?[this.blurFilter,this.adjFilter,this.glowFilter]:[],this.spark.filters=this.filters}if(n&&n.scale){var l=new c.e;this.spark.scale.x=n.scale,this.spark.scale.y=n.scale,l.addChild(this.spark),l.pivot.x=l.width*(.5*n.scale),l.pivot.y=l.height*(.5*n.scale),this.spark=l}return this.renderBody=a,(!n||n&&!n.stop)&&(this.spark.play&&this.spark.play(),this.spark.children&&this.spark.children[0]&&this.spark.children[0].play()),this}return Object(Ba.a)(e,[{key:"getFilters",value:function(){return{glow:this.glowFilter,adjust:this.adjFilter,blur:this.blurFilter}}},{key:"updateFilters",value:function(e){this.filters=e,this.spark.filters=this.filters}},{key:"renderPosition",value:function(e){this.renderBody&&(this.spark.position=e(this.renderBody),this.container&&-1===this.container.children.indexOf(this.spark)&&this.container.addChild(this.spark))}}]),e}();function tn(){var e=Object(vt.a)(["\nheight: 140px;\nwidth: 100%;\nbackground-color: #222;\nopacity: .5;\n"]);return tn=function(){return e},e}function an(){var e=Object(vt.a)(["\nheight: 140px;\nwidth: 100%;\nposition: absolute;\nmargin: auto;\ntop: 40px;\n"]);return an=function(){return e},e}var nn=_t.MenuButtonContainer,on=_t.MenuButtonSpacer,rn=xt.a.div(an()),sn=xt.a.div(tn()),ln=function(){var e=nt.dispatch,t=(0,nt.getState)().game,a=t.waveNum,n=t.lvlToWin,o=t.gameState,i=t.gameSubState,r=window.gameObjects.getKeyValue("screen-ui");a<n?(r.unpause(),e(_e()),e(Be("main",o,E.GAMEPLAY)),e(Be("sub",i,g))):alert("You win!")};function dn(){window.gameObjects;var e=Object(l.c)(),t=Object(l.d)((function(e){return e.game.waveNum})),a=Object(l.d)((function(e){return e.game.lvlToWin})),n=Object(l.d)((function(e){return e.game.gameState})),i=Object(l.d)((function(e){return e.game.gameSubState}));return o.a.createElement(o.a.Fragment,null,o.a.createElement(rn,{className:"shop-query-menu"},o.a.createElement(sn,null),o.a.createElement(nn,{"space-top":2},o.a.createElement(on,null,o.a.createElement(It,null,o.a.createElement(on,{padding:4},o.a.createElement(Nt,{width:400,height:40,onClick:function(){e(Be("main",n,E.SHOP_MENU)),e(Be("sub",i,m))}},"Shop"))),o.a.createElement(It,null,o.a.createElement(on,{padding:4},o.a.createElement(Nt,{width:400,height:40,onClick:function(){e(Be("main",n,E.BUILD_MENU)),e(Be("sub",i,m))}},"Build Barriers/Traps")))),o.a.createElement(on,{padding:2},o.a.createElement(Nt,{width:400,height:40,onClick:ln},t<a?"Next Wave":"Submit your score!")))))}var cn=function e(t){Object(mt.a)(this,e);var a=nt.getState().game.player.weapons.equipped,n=nt.getState().game.player.modTiers.powder[a].current,o=window.TweenLite.to,i=window.gameObjects,r=new en(2,t),s=i.getKeyValue("spark-sprites");if(r.spark.scale.x=.5,r.spark.scale.y=.5,s.push(r),r.spark.gotoAndPlay(rt.a.int(10,15)),nt.getState().game.filterEffects){var l=r.getFilters(),d=l.adjust,c=l.glow,p=l.blur;d.brightness=1===n?1:2===n?2:3===n?3:4===n?3.5:1,d.saturation=1===n?1:2===n?2:3===n?3:4===n?5:1,c.color=1===n?16777215:2===n?16774400:3===n||4===n?16739584:16777215,r.updateFilters([c,p,d])}return o(r.spark.scale,.1,{x:.55,y:.55}),r};function pn(){var e=this,t=window.gameObjects,a=t.getKeyValue("world"),n=t.getKeyValue("engine"),o=t.getKeyValue("weapons-ui"),i=t.getKeyValue("game-pixi-container"),r=nt.getState,s=nt.dispatch,d=r().game,p=d.width,u=d.height,h=d.player.constants,g=h.width,y=h.height,f=window.TweenLite,k=f.delayedCall,A=f.to,K=f.from;f.set;this.body=ot.Bodies.rectangle(400,200,g,y,{inertia:1/0,collisionFilter:ft}),this.arm=ot.Bodies.rectangle(400,200,30,15,{friction:0,inertia:1/0,collisionFilter:ft}),this.armAttach=ot.Constraint.create({bodyA:this.arm,bodyB:this.body,pointA:{x:12,y:0},pointB:{x:0,y:-80},length:0}),this.head=ot.Bodies.rectangle(400,200,20,24,{inertia:1/0,collisionFilter:ft}),this.headAttach=ot.Constraint.create({bodyA:this.head,bodyB:this.body,pointA:{x:0,y:10},pointB:{x:0,y:-(y/2+5)},length:0}),this.composite=ot.Composite.create(),ot.Composite.add(this.composite,[this.body,this.arm,this.head,this.armAttach,this.headAttach]),this.composite.bodies.forEach((function(t){t.label="player character",t.main=e})),s(ue(this.composite.id)),s(Ae({bodyId:this.body.id,headId:this.head.id,armId:this.arm.id})),s(I(JSON.stringify(Date.now()))),this.composite.body=this.body,this.composite.arm=this.arm,ot.World.add(a,this.composite),s(Ee("pistol weapon",JSON.stringify(Date.now()))),s(Ee("smg weapon",JSON.stringify(Date.now()))),s(Ee("shotgun weapon",JSON.stringify(Date.now()))),this.life=100;var V=new c.f;V.lineStyle(1,2108682),V.drawRect(0,0,.75*p,12),i.addChild(V);var M=new c.f;M.beginFill(16777215),M.tint=64154,M.drawRect(0,0,.75*p-2,10);var F=new Da.a({thickness:5,lightAlpha:.5,lightColor:16777215,shadowAlpha:.4,shadowColor:0});M.filters=r().game.filterEffects?[F]:[],i.addChild(M),this.initialLifebarWidth=M.width,V.position.x=50,V.position.y=u-60,M.position.x=V.position.x+1,M.position.y=V.position.y+1;M.position;var P=t.getKeyValue("char-reload-pistol-sheet"),D=new c.a(P.animations.char_reload_pistol);D.loop=!1,D.animationSpeed=.5,D.updateAnchor=!0,D.pivot.x=.52*D.width,D.pivot.y=.5*D.height,D.visible=!1,D.onComplete=function(){D.gotoAndStop(0),o.reloading=!1},i.addChild(D);var N=t.getKeyValue("char-reload-smg-sheet"),U=new c.a(N.animations.char_reload_smg);U.loop=!1,U.animationSpeed=.5,U.updateAnchor=!0,U.pivot.x=.52*D.width,U.pivot.y=.5*D.height,U.visible=!1,U.onComplete=function(){U.gotoAndStop(0),o.reloading=!1},i.addChild(U);var G=t.getKeyValue("char-reload-shotgun-sheet"),q=new c.a(G.animations.shotgunReload);q.loop=!1,q.animationSpeed=.5,q.updateAnchor=!0,q.pivot.x=.725*q.width,q.pivot.y=.5*q.height,q.visible=!1,this.shotgunShellLoadIterations=0,this.gotoToEndOfShotgunReload=!0,q.onComplete=function(){q.gotoAndStop(0),o.reloading=!1,e.shotgunShellLoadIterations=0,e.gotoToEndOfShotgunReload=!0},i.addChild(q),this.reloadAnimsByType={"pistol weapon":D,"smg weapon":U,"shotgun weapon":q},this.reloadAnims=[D,U,q];var J=new Ra.a;J.kernelSize=5,J.velocity.x=30,J.velocity.y=40;var X=t.getKeyValue("melee-pistol-sheet"),Y=new c.a(X.animations.melee_pistol);Y.loop=!1,Y.animationSpeed=.75,Y.updateAnchor=!0,Y.pivot.x=.5*Y.width,Y.pivot.y=.5*Y.height,Y.visible=!1,Y.onComplete=function(){Y.gotoAndStop(0),Y.visible=!1,e.meleeAttackInProgress=!1,e.removeMeleeHitbox()},Y.onFrameChange=function(){e.meleeAttackInProgress=!0,r().game.filterEffects&&Y.currentFrame>12&&Y.currentFrame<15?Y.filters=[J]:Y.filters=[]},i.addChild(Y);var Z=t.getKeyValue("melee-ump-sheet"),$=new c.a(Z.animations.melee_ump);$.loop=!1,$.animationSpeed=.75,$.updateAnchor=!0,$.pivot.x=.5*$.width,$.pivot.y=.5*$.height,$.visible=!1,$.onComplete=function(){$.gotoAndStop(0),$.visible=!1,e.meleeAttackInProgress=!1,e.removeMeleeHitbox()},$.onFrameChange=function(){e.meleeAttackInProgress=!0,r().game.filterEffects&&$.currentFrame>11&&$.currentFrame<14?$.filters=[J]:$.filters=[]},i.addChild($);var Q=t.getKeyValue("melee-shotgun-sheet"),ee=new c.a(Q.animations.meleeShotgun);ee.loop=!1,ee.animationSpeed=.5,ee.updateAnchor=!0,ee.pivot.x=.75*ee.width,ee.pivot.y=.5*ee.height,ee.visible=!1,ee.onComplete=function(){ee.gotoAndStop(0),ee.visible=!1,e.meleeAttackInProgress=!1,e.removeMeleeHitbox()},ee.onFrameChange=function(){e.meleeAttackInProgress=!0,r().game.filterEffects&&ee.currentFrame>6&&ee.currentFrame<9?ee.filters=[J]:ee.filters=[]},i.addChild(ee),this.meleeSprites=[Y,$,ee],this.grenadeThrowInProgress=!1,this.grenadeForce={x:.001,y:.001},this.chargingGrenade=!1,this.chargeGrenade=function(){e.chargeGrenadeSound=t.getKeyValue("charging-grenade-sound"),e.chargeGrenadeSound&&!e.chargingGrenade&&e.chargeGrenadeSound.play(),i.addChild(e.meter),e.grenadeChargeRate=r().game.player.weapons.grenadeChargeRate,e.chargingGrenade=!0,e.grenadeForce.x<=e.grenadeUpperForceThreshold&&(e.grenadeForce.x+=e.grenadeChargeRate,e.grenadeForce.y+=e.grenadeChargeRate)};e.meter=new c.f,e.meter.beginFill(16753215),e.meter.drawRect(0,0,100,10),i.addChild(e.meter),this.renderGrenadeChargeMeter=function(t){var a=t(e.body),n=a.x,o=a.y;e.grenadeUpperForceThreshold=r().game.player.weapons.grenadeUpperForceThreshold,e.meter&&e.chargingGrenade?(e.meter.position.x=n-e.meter.width/2,e.meter.position.y=o-.75*pt(e.body),e.meter.width=e.grenadeForce.x/e.grenadeUpperForceThreshold*100):e.meter.width=0},this.createGrenade=function(){t.getKeyValue("weapons-ui").updateGrenadeIcons();var a=t.getKeyValue("grenades");e.grenadeChargeRate=r().game.player.weapons.grenadeChargeRate,e.calculatedGrenadeForce=function(e,t,a){var n=ot.Vector.angle(e,t);return{x:Math.cos(n)*a.x,y:Math.sin(n)*a.y}}(e.arm.position,r().game.mouseRelativeToPlayerPosition,e.grenadeForce),a.push(new za(r().game.mouseState.x===yt?e.body.position.x+ct(e.body):e.body.position.x-ct(e.body),e.body.position.y-pt(e.body)/2,8,e.calculatedGrenadeForce)),e.grenadeForce={x:.001,y:.001},e.chargingGrenade=!1},this.throwGrenade=function(){var t=r().game.player.weapons.equipped,a={"pistol weapon":function(){ae.currentFrame<1&&(ae.visible=!0,ae.gotoAndPlay(8))},"smg weapon":function(){oe.currentFrame<1&&(oe.visible=!0,oe.gotoAndPlay(8))},"shotgun weapon":function(){re.currentFrame<1&&(re.visible=!0,re.gotoAndPlay(8))}};e.grenadeThrowInProgress||(e.chargeGrenadeSound&&e.chargeGrenadeSound.stop(),k(.2,(function(){window.gameObjects.getKeyValue("throw-sound").play(),e.createGrenade()})),e.chargingGrenade=!1,e.grenadeThrowInProgress=!0,a[t]&&(a[t](),Object(l.b)((function(){s(Ue()),s(W(B))}))))};var te=t.getKeyValue("grenade-pistol-sheet"),ae=new c.a(te.animations.grenade_throw_pistol);ae.loop=!1,ae.animationSpeed=1,ae.updateAnchor=!0,ae.pivot.x=.5*ae.width,ae.pivot.y=.5*ae.height,ae.visible=!1,ae.onComplete=function(){ae.gotoAndStop(0),ae.visible=!1,e.grenadeThrowInProgress=!1},ae.onFrameChange=function(){e.grenadeThrowInProgress=!0,ae.currentFrame>22&&(e.grenadeThrown||(e.grenadeThrown=!0,k(.5,(function(){e.grenadeThrown=!1})))),ae.currentFrame>27&&(ae.gotoAndStop(0),ae.visible=!1,e.grenadeThrowInProgress=!1)},i.addChild(ae);var ne=t.getKeyValue("grenade-ump-sheet"),oe=new c.a(ne.animations.grenade_throw_ump);oe.loop=!1,oe.animationSpeed=1,oe.updateAnchor=!0,oe.pivot.x=.5*oe.width,oe.pivot.y=.5*oe.height,oe.visible=!1,oe.onComplete=function(){oe.gotoAndStop(0),oe.visible=!1,e.grenadeThrowInProgress=!1},oe.onFrameChange=function(){e.grenadeThrowInProgress=!0,22===oe.currentFrame&&(e.grenadeThrown=!0,k(.5,(function(){e.grenadeThrown=!1}))),oe.currentFrame>27&&(oe.gotoAndStop(0),oe.visible=!1,e.grenadeThrowInProgress=!1)},i.addChild(oe);var ie=t.getKeyValue("grenade-shotgun-sheet"),re=new c.a(ie.animations.shotgunGrenadeThrow);re.loop=!1,re.animationSpeed=1,re.updateAnchor=!0,re.pivot.x=.5*re.width,re.pivot.y=.5*re.height,re.visible=!1,re.onComplete=function(){re.gotoAndStop(0),re.visible=!1,e.grenadeThrowInProgress=!1},re.onFrameChange=function(){22===re.currentFrame&&(e.grenadeThrown=!0,k(.5,(function(){e.grenadeThrown=!1}))),re.currentFrame>27&&(re.gotoAndStop(0),re.visible=!1,e.grenadeThrowInProgress=!1)},i.addChild(re),this.grenadeSprites=[ae,oe,re],this.grenadeSpritesByEquipped={"pistol weapon":ae,"smg weapon":oe,"shotgun weapon":re},this.ejectedMags=[],this.reloadMagazineActionsByType={"pistol weapon":function(){var t=r().game,n=t.player,o=n.weapons,s=(o.equipped,o.reloadSpeed,n.perks.magDmg.owned),l=t.mouseState.x;Ze.play(),Ze.fade(1,0,300);var d=l===yt?"left":"right",p=ot.Bodies.rectangle(e.body.position.x+("left"===d?20:-20),e.body.position.y,7,20,{collisionFilter:s?{}:wt});p.label="magazine",ot.World.add(a,p),ot.Body.applyForce(p,e.body.position,{x:+("left"===d?rt.a.float(.0025,.005):rt.a.float(-.0025,-.005)),y:rt.a.float(-.0025,-.005)});var u=new c.f;u.beginFill(3355443),u.drawRect(0,0,7,20),u.pivot.x=u.width/2,u.pivot.y=u.height/2;var h={gfx:u,body:p};e.ejectedMags.unshift(h),i.addChild(u),k(2,(function(){ot.World.remove(a,p),u.destroy(),e.ejectedMags.pop()}))},"smg weapon":function(){var t=r().game,n=t.player.perks.magDmg.owned,o=t.mouseState.x;Ze.play(),Ze.fade(1,0,300);var s=o===yt?"left":"right",l=ot.Bodies.rectangle(e.body.position.x+("left"===s?20:-20),e.body.position.y-pt(e.body)/2,7,42,{collisionFilter:n?{}:wt});l.label="magazine",ot.World.add(a,l),ot.Body.applyForce(l,e.body.position,{x:+("left"===s?rt.a.float(.004,.01):rt.a.float(-.004,-.01)),y:rt.a.float(-.0015,-.01)});var d=new c.f;d.beginFill(3355443),d.drawRect(0,0,7,42),d.pivot.x=d.width/2,d.pivot.y=d.height/2;var p={gfx:d,body:l};e.ejectedMags.unshift(p),i.addChild(d),k(2,(function(){ot.World.remove(a,l),d.destroy(),e.ejectedMags.pop()}))},"shotgun weapon":function(){!function t(){k(.3,(function(){e.shotgunShellLoadIterations>5?q.gotoAndPlay(21):(q.gotoAndPlay(10),e.shotgunShellLoadIterations++,t())}))}()}},this.updateEjectedMagPositions=function(t){e.ejectedMags.forEach((function(e){var a=t(e.body),n=a.x,o=a.y,i=a.rotation;e.gfx.position={x:n,y:o},e.gfx.rotation=i}))},this.reloadWeapon=function(){var t=r().game.player.weapons,a=t.reloadSpeed,n=(t.reloadAnimationFrames,t.equipped);e.reloadAnimsByType[n].animationSpeed=a[n],e.reloadAnimsByType[n].gotoAndPlay(1),k("pistol weapon"===n?a[n]/4:"smg weapon"===n?2*a[n]+a[n]/2:"shotgun weapon"===n?a[n]+a[n]/4:0,(function(){!0===e.reloadAnimsByType[n].visible&&(s(W(C)),e.reloadMagazineActionsByType[n]())}))};var se=t.getKeyValue("right-arm-pistol-fire-sheet"),le=new c.a(se.animations.right_char_arm_pistol_fire);le.play(),le.loop=!1,le.animationSpeed=.35,le.updateAnchor=!0,le.pivot.x=.6*le.width,le.pivot.y=.4*le.height,le.onComplete=function(){le.stop()},i.addChild(le);var ge=t.getKeyValue("right-arm-smg-fire-sheet"),ye=new c.a(ge.animations.char_right_arm_smg_fire);ye.play(),ye.loop=!1,ye.animationSpeed=.35,ye.updateAnchor=!0,ye.pivot.x=.6*ye.width,ye.pivot.y=.4*ye.height,ye.onComplete=function(){ye.stop()},i.addChild(ye);var ke=t.getKeyValue("arms-fire-shotgun-sheet"),Ce=new c.a(ke.animations.rightArmFireShotgun);Ce.play(),Ce.loop=!1,Ce.animationSpeed=.5,Ce.updateAnchor=!0,Ce.pivot.x=.6*Ce.width,Ce.pivot.y=.4*Ce.height,Ce.onComplete=function(){Ce.stop()},i.addChild(Ce);var _e=dt("char-head");i.addChild(_e),this.positionHeadSprite=function(t){var a=r().game,n=a.keys,o=a.mouseState.x,i=a.mousePosition,s=a.player,l=s.variables,d=l.jumping,c=l.currentDirection,p=s.weapons.equipped,u=t.mx,h=t.my,m=(0,t.fn)(e.head),g=m.x,y=m.y;(n.indexOf(68)>-1||n.indexOf(65)>-1)&&!d?"right"===c?_e.position.x=o===yt?g+5:g:"left"===c&&(_e.position.x="less than player x position"===o?g-5:g):_e.position.x=g,_e.position.y=y+12,d?e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.6*e.width,e.pivot.y=.47*e.height})):"less than player y position"===h?(e.armsSpritesByType[p].forEach((function(e){e.pivot.y=.45*e.height})),_e.rotation=u===yt?2.5:.957):"greater than player y position"===h?(e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.65*e.width,e.pivot.y=.45*e.height})),_e.rotation=u===yt?-2.723:-.5532):i.x>550&&i.x<650?(e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.62*e.width,e.pivot.y=.42*e.height})),_e.rotation=u===yt?-2.723:-.5532):i.x<750&&i.y>250&&u===yt?(e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.62*e.width,e.pivot.y=.42*e.height})),_e.rotation=-2.723):i.x>450&&i.y>250&&"less than player x position"===u?(e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.62*e.width,e.pivot.y=.42*e.height})),_e.rotation=-.5532):(e.armsSpritesByType[p].forEach((function(e){e.pivot.x=.6*e.width,e.pivot.y=.42*e.height})),_e.rotation=ze.rotation)},_e.pivot.x=.52*_e.width,_e.pivot.y=.17*_e.height,this.headSprite=_e;var Oe=t.getKeyValue("char-run-sheet"),Ke=new c.a(Oe.animations.char_run);Ke.loop=!0,Ke.animationSpeed=1,Ke.updateAnchor=!0,Ke.pivot.x=.52*Ke.width,Ke.pivot.y=.5*Ke.height,i.addChild(Ke);var Ve=t.getKeyValue("char-idle-sheet"),Te=new c.a(Ve.animations.char_idle);Te.play(),Te.loop=!0,Te.animationSpeed=.1,Te.updateAnchor=!0,Te.pivot.x=.52*Te.width,Te.pivot.y=.5*Te.height,i.addChild(Te);var Me=t.getKeyValue("char-jump-sheet"),De=new c.a(Me.animations.char_jump);De.loop=!1,De.animationSpeed=.35,De.updateAnchor=!0,De.pivot.x=.52*De.width,De.pivot.y=.5*De.height,De.visible=!1,i.addChild(De),this.stopJumpAnimation=function(){De.gotoAndStop(0),De.visible=!1},De.onComplete=function(){r().game.player.variables.jumping?e.resumeJumpAnimation():e.stopJumpAnimation()};var Le=new Ra.a({velocity:{y:0}});this.resumeJumpAnimation=function(){De.gotoAndPlay(3),De.visible=!0,Ke.visible=!1,Te.visible=!1},this.playJumpAnimation=function(){r().game.filterEffects&&(De.filters=[Le],K(Le.velocity,.35,{y:50,onUpdate:function(){De.filters=[Le]}})),De.gotoAndPlay(0),De.visible=!0,Ke.visible=!1,Te.visible=!1};var Re=t.getKeyValue("left-arm-pistol-fire-sheet"),ze=new c.a(Re.animations.left_char_arm_pistol_fire);ze.play(),ze.loop=!1,ze.animationSpeed=.35,ze.updateAnchor=!0,ze.pivot.x=.6*ze.width,ze.pivot.y=.4*ze.height,ze.onComplete=function(){ze.gotoAndStop(0)},i.addChild(ze);var Ie=t.getKeyValue("left-arm-smg-fire-sheet"),We=new c.a(Ie.animations.char_left_arm_smg_fire);We.play(),We.loop=!1,We.animationSpeed=.35,We.updateAnchor=!0,We.pivot.x=.6*We.width,We.pivot.y=.4*We.height,We.onComplete=function(){We.gotoAndStop(0)},i.addChild(We);var Ne=new c.a(ke.animations.leftArmFireShotgun);Ne.play(),Ne.loop=!1,Ne.animationSpeed=.5,Ne.updateAnchor=!0,Ne.pivot.x=.6*Ne.width,Ne.pivot.y=.4*Ne.height,Ne.onComplete=function(){Ne.stop()},i.addChild(Ne);new Ra.a({velocity:{y:0}});this.armsSprites=[ze,le,We,ye,Ne,Ce],this.armsSpritesByType={"pistol weapon":[ze,le],"smg weapon":[We,ye],"shotgun weapon":[Ne,Ce]};var Ge=new $a,qe=window.gameObjects.getKeyValue("9mm-sound1"),Je=window.gameObjects.getKeyValue("9mm-sound2"),Xe=new Ma.Howl({src:[qe]}),Ye=(new Ma.Howl({src:[Je],sprite:{_1:[500,1e3]}}),window.gameObjects.getKeyValue("pistol-reload-sound")),Ze=new Ma.Howl({src:[Ye],volume:.25}),$e=t.getKeyValue("jump-sound"),Qe=t.getKeyValue("pain1-sound"),et=t.getKeyValue("pain2-sound"),tt=t.getKeyValue("death-rip-sound"),at=t.getKeyValue("player-death-sound"),it=t.getKeyValue("bullet-impact-body-sound"),lt=t.getKeyValue("smg-fire-sound"),ut=t.getKeyValue("shotgun-blast-sound");this.fireWeaponAnimation=function(){var t=r().game,a=(t.mouseState,t.player.weapons.equipped);e.armsSpritesByType[a].forEach((function(e){e.visible=!0})),e.armsSpritesByType[a].forEach((function(e){e.gotoAndPlay(0)})),Ge.fireEffect();var n=new cn(e.arm);e.currentMuzzleSpark=n,"pistol weapon"===a&&Xe.play(),"smg weapon"===a&&lt.play(),"shotgun weapon"===a&&ut.play()},this.charRunSprite=Ke,this.charIdleSprite=Te,this.charJumpSprite=De,this.charReloadPistolSprite=D,this.charReloadSMGSprite=U,this.charReloadShotgunSprite=q,this.bodySprites=[Ke,Te,De,D,U,q,Y,$,ee,ae,oe,re],this.sprites=[le,ye,Ce,Ke,Te,De,D,U,q,Y,$,ae,oe,re,ze,We,Ne],this.shadow=new c.f,this.shadow.beginFill(0,.35),this.shadow.drawEllipse(0,0,60,10);var mt=new c.k.BlurFilter;mt.blur=8,this.shadow.filters=r().game.filterEffects?[mt]:[],this.checkFilters=function(){r().game.filterEffects?(e.shadow.alpha=.85,e.shadow.filters=[mt],M.filters=[F]):(e.shadow.alpha=.45,e.shadow.filters=[],M.filters=[])},this.setBodySpritesPositions=function(t){var a=(0,t.fn)(e.body),n=a.x,o=a.y;e.bodySprites.forEach((function(e){e.position.x=n,e.position.y=o-15})),i&&-1===i.children.indexOf(e.shadow)&&i.addChild(e.shadow),e.shadow.position.x=n,e.shadow.position.y=e.bodySprites[0].position.y+e.bodySprites[0].height/2-5},this.setArmsSpritePosition=function(t){var a,n=r().game,o=n.keys,i=n.mouseState,s=i.x,l=i.y,d=n.player.variables,c=d.jumping,p=d.currentDirection,u=(0,t.fn)(e.arm),h=u.x,m=u.y,g=u.rotation;e.armsSprites.forEach((function(e){(o.indexOf(68)>-1||o.indexOf(65)>-1)&&!c?"right"===p?e.x=s===yt?h+5:h:"left"===p&&(e.x="less than player x position"===s?h-5:h):e.x=h,e.y=c&&"less than player y position"===l?m-10:m,e.rotation=g})),Ge.getFlashes().forEach((function(e){e.position=le.position,e.rotation=g-Object(gt.degrees)(90),e.pivot.x=.05*-e.width,e.pivot.y="shotgun weapon"===r().game.player.weapons.equipped?3.25*e.height:2.25*e.height,a=e.position,e.rotation})),e.currentMuzzleSpark&&(e.currentMuzzleSpark.spark.pivot.x=-e.currentMuzzleSpark.spark.width,e.currentMuzzleSpark.spark.position=a,e.currentMuzzleSpark.spark.rotation=g-Object(gt.degrees)(180))},this.meleeAttackInProgress=!1,this.createMeleeHitbox=function(){var t=r().game,n=t.mouseState,o=t.player.weapons.equipped;window.gameObjects.getKeyValue("throw-sound").play(),e.meleeHitbox=ot.Bodies.rectangle(n.x===yt?e.body.position.x+1.75*ct(e.body):e.body.position.x-1.75*ct(e.body),e.body.position.y-pt(e.body)/2,2*ct(e.body),pt(e.body),{isStatic:!0}),e.meleeHitbox.main=e,e.meleeHitbox.label="melee hitbox ".concat(o),ot.World.add(a,e.meleeHitbox)},this.removeMeleeHitbox=function(){e.meleeHitbox&&ot.World.remove(a,e.meleeHitbox)},this.meleeAttack=function(){var t=r().game.player.weapons.equipped,a={"pistol weapon":function(){Y.currentFrame<1&&(Y.visible=!0,Y.gotoAndPlay(1))},"smg weapon":function(){$.currentFrame<1&&($.visible=!0,$.gotoAndPlay(1))},"shotgun weapon":function(){ee.currentFrame<1&&(ee.visible=!0,ee.gotoAndPlay(1))}};e.meleeAttackInProgress||(e.meleeAttackInProgress=!0,k(.35,(function(){e.dead||e.createMeleeHitbox(),k(.1,(function(){e.removeMeleeHitbox()}))})),a[t]())},this.collectHealth=function(t){e.life+=t,e.life>100&&(e.life=100),s(He(e.life)),Kt(r().game.scoreAmounts.collectHealth),A(M,.5,{width:e.life/100*e.initialLifebarWidth})},this.collectCredits=function(e){s(Fe(e)),Kt(r().game.scoreAmounts.collectCredit)},this.collectAmmo=function(e,t){ua("+".concat(t," ").concat(e," ammo"),"#32BD6A",.35,1),s(je(e,t)),Kt(r().game.scoreAmounts.collectAmmo)},this.playerHit=!1,this.resetPlayerHit=function(){e.playerHit=!0,k(1,(function(){e.playerHit=!1}))},this.blinkAlpha=function(){e.headSprite.alpha=.25,e.armsSprites.forEach((function(e){e.alpha=.25})),e.bodySprites.forEach((function(e){e.alpha=.25})),k(.1,(function(){e.headSprite.alpha=1,e.armsSprites.forEach((function(e){e.alpha=1})),e.bodySprites.forEach((function(e){e.alpha=1}))})),k(.2,(function(){e.headSprite.alpha=.25,e.armsSprites.forEach((function(e){e.alpha=.25})),e.bodySprites.forEach((function(e){e.alpha=.25}))})),k(.3,(function(){e.headSprite.alpha=1,e.armsSprites.forEach((function(e){e.alpha=1})),e.bodySprites.forEach((function(e){e.alpha=1}))})),k(.35,(function(){e.headSprite.alpha=.25,e.armsSprites.forEach((function(e){e.alpha=.25})),e.bodySprites.forEach((function(e){e.alpha=.25}))})),k(.4,(function(){e.headSprite.alpha=1,e.armsSprites.forEach((function(e){e.alpha=1})),e.bodySprites.forEach((function(e){e.alpha=1}))})),k(.45,(function(){e.headSprite.alpha=.25,e.armsSprites.forEach((function(e){e.alpha=.25})),e.bodySprites.forEach((function(e){e.alpha=.25}))})),k(.5,(function(){e.headSprite.alpha=1,e.armsSprites.forEach((function(e){e.alpha=1})),e.bodySprites.forEach((function(e){e.alpha=1}))}))},this.takeDamage=function(t){var a=r().game.player.variables.defense;e.life-=t-a,Vt(r().game.scoreAmounts.penalties.damageTaken),Object(l.b)((function(){s(He(e.life)),s(L(j,t))})),1===[1,2][Math.floor(2*Math.random())]?Qe.play():et.play(),it.play(),M.tint=14487054,A(M,.2,{width:e.life/100*e.initialLifebarWidth}),A(M,.1,{y:M.position.y+2,onComplete:function(){A(M,.1,{y:M.position.y-3,onComplete:function(){A(M,.1,{y:M.position.y+1,onComplete:function(){M.tint=64154}})}})}});var n={x:rt.a.float(e.bodySprites[0].position.x-5,e.bodySprites[0].position.x+20),y:rt.a.float(e.bodySprites[0].position.y,e.bodySprites[0].position.y-60)};ua("-".concat(t),"#FF0000",.35,1,12),new Sa(null,n,.75),e.blinkAlpha(),e.resetPlayerHit(),e.life<=0&&e.kill()},this.acceptHealth=function(t){e.life=t,s(He(e.life)),A(M,.5,{width:e.life/100*e.initialLifebarWidth})},this.addSpritesInOrder=function(){i.addChild(e.headSprite),e.armsSprites.forEach((function(e){return i.addChild(e)})),e.bodySprites.forEach((function(e){return i.addChild(e)})),i.addChild(ze),i.addChild(We),i.addChild(Ne),i.addChild(M)},this.respawn=function(){if(n.timing.timeScale=1,e.playerRagdoll&&(e.playerRagdoll.destroy(),e.playerRagdoll=null),s(W(O)),Vt(r().game.scoreAmounts.penalties.respawn),e.addSpritesInOrder(),e.life=100,M.width=e.initialLifebarWidth,e.dead=!1,M.visible=V.visible=!0,e.lastDeathType===ka)if(e.lastBodyPosition.x<0)for(;e.body.position.x<200&&e.body.position.y>0;)ot.Composite.translate(e.composite,{x:100,y:-100});else for(;e.body.position.x>r().game.width&&e.body.position.y>0;)ot.Composite.translate(e.composite,{x:-100,y:-100});ot.World.add(a,e.composite),r().game.lastGameSubState===v?s(Be("sub",r().game.gameSubState,v)):s(Be("sub",r().game.gameSubState,w))},this.dead=!1,this.kill=function(o){if(!1===e.dead){o?e.lastDeathType=o:(tt.play(),e.lastDeathType="killed by zombie"),s(W(_)),Vt(r().game.scoreAmounts.penalties.killed),at.play(),n.timing.timeScale=.5,M.visible=V.visible=!1,e.life=0,e.dead=!0,e.removeMeleeHitbox(),e.lastBodyPosition=e.body.position,ot.World.remove(a,e.composite),e.bodySprites&&e.armsSprites&&(i.removeChild(e.headSprite),e.bodySprites.forEach((function(e){return i.removeChild(e)})),e.armsSprites.forEach((function(e){return i.removeChild(e)})));var d={x:1===n.timing.timeScale?1===Te.scale.x?.1:-.1:1===Te.scale.x?.25:-.25,y:1===n.timing.timeScale?-.25:-.75},c=["head","body","limb","none"],p=c[Math.floor(Math.random()*c.length)];e.playerRagdoll="head"===p?t.setKeyValue("player-ragdoll",new ba({x:e.body.position.x,y:e.body.position.y},d,p)):"body"===p?t.setKeyValue("player-ragdoll",new wa({x:e.body.position.x,y:e.body.position.y},d,p)):"limb"===p?t.setKeyValue("player-ragdoll",new va({x:e.body.position.x,y:e.body.position.y},d,p)):t.setKeyValue("player-ragdoll",new xa({x:e.body.position.x,y:e.body.position.y},d,p)),Object(l.b)((function(){s(pe()),s(ce()),s(xe("mouse up")),s(Be("sub",r().game.gameSubState,b))}))}};var bt=ht(t),vt=function(e){var t=e.getKeyValue("world"),a=st().game.player.compositeId;return ot.Composite.get(t,a,"composite")}(t).bodies[1],xt=pt(this.body);return window.keydownListenersAdded||(window.addEventListener("keydown",(function(a){var n=r().game,i=n.keys,l=n.gameState,d=n.gameSubState,c=n.player.variables,p=c.jumpForce,u=c.jumping;(l===E.GAMEPLAY&&(e.dead||o.reloading||e.meleeAttackInProgress||e.grenadeThrowInProgress||(87!==a.keyCode||u||e.chargingGrenade?i.indexOf(a.keyCode)<0&&s(he(a.keyCode)):(s(fe(!0)),$e.play(),e.playJumpAnimation(),ot.Body.applyForce(e.body,e.body.position,{x:0,y:p})))),l===E.GAMEPLAY&&d!==v&&d!==x&&(e.dead||o.reloading||e.meleeAttackInProgress||u||e.grenadeThrowInProgress||"f"!==a.key&&"F"!==a.key||e.meleeAttack()),l!==E.SHOP_MENU&&d===v&&"Enter"===a.key&&ln(),l!==E.SHOP_MENU&&d===x)&&("b"!==a.key&&"B"!==a.key||(t.getKeyValue("object-placement-arrow").changeBack=!0,s(Be("main",l,E.BUILD_MENU)),s(Be("sub",d,m))));if((l===E.GAMEPLAY||l===E.SHOP_MENU)&&32===a.keyCode&&(!o.reloading||l===E.SHOP_MENU)&&!e.meleeAttackInProgress&&!e.grenadeThrowInProgress){var h=r().game.player.weapons,g=h.equipped,y=h.list;if(y[y.indexOf(g)+1]){var f=y.indexOf(g);s(Se(y[f+1]))}else s(Se(y[0]))}if(l===E.GAMEPLAY&&d!==v&&d!==x){var b=t.getKeyValue("remote-mines"),w=["1","2","3","4","5","6","7","8","9"].indexOf(a.key.toString());console.log(a.key),w>-1&&b[a.key.toString()]&&(b[a.key.toString()].detonate(),delete b[a.key.toString()])}if(l===E.GAMEPLAY&&d===x&&r().game.traps.selectedTrap===Ha.TURRET){var S=t.getKeyValue("current-turret");S&&("ArrowLeft"===a.key&&S.updateDirection("left"),"ArrowRight"===a.key&&S.updateDirection("right"))}if(l===E.GAMEPLAY&&82===a.keyCode&&!e.meleeAttackInProgress){var k=r().game,A=k.showingMessage,C=k.player.weapons,B=C.equipped;0===C.totalAmmo[B]&&!1===A?ua("Out of ammo!","#FF0000",.25,.75):o.reloading||u||e.dead||(e.reloadWeapon(),o.reload())}})),window.addEventListener("keyup",(function(t){var a=r().game,n=a.keys,i=a.gameState,l=a.gameSubState,d=a.player.variables.jumping;i===E.GAMEPLAY&&(e.dead||(n.indexOf(t.keyCode)>-1&&s(me(t.keyCode)),"g"!==t.key&&"G"!==t.key||!(r().game.player.weapons.totalAmmo.grenades>0)||e.meleeAttackInProgress||o.reloading||d||i===E.GAMEPLAY&&l!==x&&l!==v&&e.throwGrenade()))})),window.addEventListener("mousemove",(function(e){var t=r().game,a=t.gameState;t.gameSubState;if(a===E.GAMEPLAY&&e.target&&e.target===document.getElementsByTagName("canvas")[1]&&e.target.getBoundingClientRect){var n,o,i,l=e.target.getBoundingClientRect(),d=e.clientX-l.left,c=e.clientY-l.top,p=r().game.mouseRelativeToPlayerPosition;s(be({x:d,y:c})),p.x>bt.position.x&&(o=yt),p.x<bt.position.x&&(o="less than player x position"),p.y>bt.position.y+xt/2&&(i="greater than player y position"),p.y<bt.position.y-xt&&(i="less than player y position"),n=ot.Vector.angle(p,vt.position),ot.Body.setAngle(vt,n),s(we(o)),s(ve(i))}})),window.addEventListener("mousedown",(function(t){console.log(t);var a=r().game,n=a.gameState,o=a.gameSubState;n===E.GAMEPLAY&&o!==x&&o!==v&&(e.dead||e.meleeAttackInProgress||e.grenadeThrowInProgress||(1===t.buttons?s(xe("mouse down")):2===t.buttons&&(s(de(!0)),console.log("should charge"))))})),window.addEventListener("mouseup",(function(e){r().game.gameState===E.GAMEPLAY&&(console.log(e),s(xe("mouse up")),r().game.rightMouseDown&&s(de(!1)))})),window.addEventListener("click",(function(e){var a=r().game,n=a.player.credits,o=a.mouseRelativeToPlayerPosition,i=a.gameSubState,d=a.traps,c=d.selectedTrap,p=d.costToBuild,u=a.barriers,h=u.selectedBarrier,m=u.costToBuild;if(i===x){var g,y,f={x:o.x,y:360},b=!0,w=(t.getKeyValue("remote-mines"),t.getKeyValue("build-objects")),v=t.getKeyValue("place-object-sound"),E=t.getKeyValue("button-cancel-sound"),k=w.map((function(e){return function(e){return f.x+25<e.getBody().position.x-ct(e.getBody())/2||e.getBody().position.x+ct(e.getBody())/2<f.x-25}(e)?"allow placement":"place next to"}));if(w.length>0)g=w.map((function(e){return e.getBody().position.x})).reduce((function(e,t){return Math.abs(t-f.x)<Math.abs(e-f.x)?t:e})),console.log(g);if(k.indexOf("place next to")>-1&&(b=!1),h)n>=m[h]?(y=b||0===w.length?new Fa(f,{width:50,height:100},h):new Fa(f.x<g?{x:g-50,y:f.y}:{x:g+50,y:f.y},{width:50,height:100},h))&&(Object(l.b)((function(){s(z(h)),s(W(T)),s(Pe(m[h]))})),setTimeout((function(){r().game.barrierTypesPlaced&&Object.keys(r().game.barrierTypesPlaced).length>2&&!r().game.achievements[S.BARRICADE].owned&&s(H(S.BARRICADE))}),0),ua("- $".concat(m[h]),16711680,.5,.75),w.push(y),v.play()):(E.play(),ua("insufficient credits",16711680,.5,.75));var A,C=function(e){switch(c){case Ha.LANDMINE:return new Pa(e);case Ha.CLUSTER_BOMB:return new Ia(e);case Ha.REMOTE_MINE:var a=t.getKeyValue("remote-mines-array");return new Na(e,a.length+1);case Ha.TURRET:return new Qa(e)}};if(c)if(n>=p[c]){if(A=b||0===w.length?C(f):C(f.x<g?{x:g-50,y:f.y}:{x:g+50,y:f.y})){Object(l.b)((function(){s(R(c)),s(W(T)),s(Pe(p[c]))})),setTimeout((function(){r().game.trapTypesPlaced&&Object.keys(r().game.trapTypesPlaced).length>2&&!r().game.achievements[S.TRAPHOUSE].owned&&s(H(S.TRAPHOUSE))}),0),ua("- $".concat(p[c]),16711680,.5,.75),v.play(),w.push(A);var B=t.getKeyValue("remote-mines-array");if(c===Ha.REMOTE_MINE)if(B.length<10){var _=t.getKeyValue("remote-mines");B.push(A),B.forEach((function(e,t){_[t+1]=e,e.updateNumber(t+1)}))}else E.play(),ua("can hold up to 9 remote mines at a time",16711680,.5,.75);c===Ha.TURRET&&(ua("Press Left or Right arrow to change turret direction",16777215,.75,2),t.setKeyValue("current-turret",A))}}else E.play(),ua("insufficient credits",16711680,.5,.75)}})),window.addEventListener("contextmenu",(function(t){t.preventDefault();var a=r().game,n=a.gameState,i=a.gameSubState,s=a.player,l=s.variables.jumping,d=s.weapons.totalAmmo.grenades;n===E.GAMEPLAY&&d>0&&!e.meleeAttackInProgress&&!o.reloading&&!l&&i!==x&&i!==v&&(e.throwGrenade(),console.log("throw!"))})),window.addEventListener("wheel",(function(t){var a=r().game.gameState;if(a===E.MAIN_MENU&&a===E.SCORES_VIEW||t.preventDefault(),(a===E.GAMEPLAY||a===E.SHOP_MENU)&&(!o.reloading||a===E.SHOP_MENU)&&!e.meleeAttackInProgress&&!e.grenadeThrowInProgress){var n=r().game.player.weapons,i=n.equipped,l=n.list;if(t.deltaY<0)if(l[l.indexOf(i)-1]){var d=l.indexOf(i);s(Se(l[d-1]))}else s(Se(l[l.length-1]));else if(t.deltaY>0)if(l[l.indexOf(i)+1]){var c=l.indexOf(i);s(Se(l[c+1]))}else s(Se(l[0]))}})),window.keydownListenersAdded=!0),this.pause=function(){0!==e.charRunSprite.currentFrame&&e.charRunSprite.play(),0!==e.charReloadPistolSprite.currentFrame&&e.charReloadPistolSprite.play(),0!==e.charReloadSMGSprite.currentFrame&&e.charReloadSMGSprite.play(),0!==De.currentFrame&&De.play()},this.unpause=function(){e.charRunSprite.stop(),e.charReloadPistolSprite.stop(),e.charReloadSMGSprite.stop(),De.stop(),s(fe(!1))},this}var un=window.TweenLite,hn=un.to;un.from,un.kill;function mn(e){var t=this,a=e.getKeyValue("game-pixi-container");return this.crosshair=new c.e,this.cross=new c.f,this.cross.lineStyle(2,11534336,.75),this.cross.moveTo(0,-15),this.cross.lineTo(0,15),this.cross.moveTo(-15,0),this.cross.lineTo(15,0),this.crosshair.addChild(this.cross),this.circle=new c.f,this.circle.lineStyle(1,11534336,.75),this.circle.drawCircle(0,0,10),this.crosshair.addChild(this.circle),this.changed=!1,this.changeBack=!1,this._new=null,a.addChild(this.crosshair),this.crosshair.buildArrow=function(n){var o=e.getKeyValue("crosshair");a.removeChild(o);var i=new c.f;return i.lineStyle(2,n,1),i.beginFill(7829367,0),i.moveTo(0,0),i.lineTo(20,0),i.lineTo(20,30),i.lineTo(30,30),i.lineTo(10,45),i.lineTo(-10,30),i.lineTo(0,30),i.lineTo(0,0),i.endFill(),i.pivot.x=.5*i.width,i.pivot.y=.5*i.height,a.addChild(i),t._new=i,o._new=i,o.changed=!0,e.setKeyValue("object-placement-arrow",i),t.animationLoop=function(){hn(i.scale,.5,{x:1.2,y:.75,onComplete:function(){hn(i.scale,.5,{x:.9,y:1.2,onComplete:t.animationLoop})}})},t.animationLoop(),i},this}function gn(e,t,a){var n,o=this,i=e.x,r=e.y,s=window,l=s.gameObjects,d=s.TweenLite,p=d.to,u=d.delayedCall,h=l.getKeyValue("world"),m=l.getKeyValue("game-pixi-container"),g=l.getKeyValue("static-ground-effects"),y=l.getKeyValue("ground-fx-sheet"),f=["bullet-impact1.png","bullet-impact2.png"],b=["ground-blood-spatter1.png","ground-blood-spatter2.png","ground-blood-spatter3.png"];"bullet impact"===t&&(n=new c.h(y.textures[f[Math.floor(Math.random()*f.length)]])),"blood spatter"===t&&(n=new c.h(y.textures[b[Math.floor(Math.random()*b.length)]])),n.pivot.x=.5*n.width,n.pivot.y=n.height*(a?.2:.5);var w=l.getKeyValue("ground");n.position.x-n.width>w.bounds.min.x||(n.position.x,n.width,w.bounds.max.x);var v=l.getKeyValue("player");v.dead||v.sprites.forEach((function(e){m.addChild(e)}));var x=ot.Bodies.rectangle(i,r,10,10,{isStatic:!0,collisionFilter:ft});ot.World.add(h,x),this.renderPosition=function(e){n.position=e(x),m&&-1===m.children.indexOf(n)&&m.addChild(n)},this.destroy=function(){ot.World.remove(h,x),m.removeChild(n);var e=g.indexOf(o);e>-1&&g.splice(e,1),h=null,m=null,l=null,g=null,y=null,f=null,b=null,x=null};return u(1,(function(){p(n,.5,{alpha:0,onComplete:function(){o.destroy()}})})),this}var yn,fn,bn,wn,vn,xn,En,Sn,kn,An,Cn,Bn,_n,On,Kn,Vn,Tn,Mn,jn,Fn,Pn,Dn,Ln,Rn,zn,In,Wn,Hn,Nn,Un,Gn,qn,Jn,Xn,Yn,Zn,$n,Qn,eo,to,ao=a(124),no=a(125),oo=a(6),io=function(e){Object(no.a)(a,e);var t=Object(ao.a)(a);function a(){var e;Object(mt.a)(this,a);var n=oo.p.from(window.gameObjects.getKeyValue("wall-tile"));return(e=t.call(this,n,1,n.height)).width=window.gameObjects.getKeyValue("game-width"),e.height=window.gameObjects.getKeyValue("game-height"),e.alpha=.2,e}return Object(Ba.a)(a,[{key:"onResize",value:function(e,t){}},{key:"onUpdate",value:function(e){this.tilePosition.x-=4*e}},{key:"renderPosition",value:function(e,t,a){var n=e(t),o=(n.x,n.y,(0,nt.getState)().game),i=o.keys,r=o.player.variables,s=r.currentDirection,l=r.jumping;"right"===s&&i.indexOf(68)>-1&&(this.tilePosition.x-=.35),"left"===s&&i.indexOf(65)>-1&&(this.tilePosition.x+=.35),l&&(this.tilePosition.y+=.25)}}]),a}(a(37).a),ro=nt.getState,so=nt.dispatch,lo=ro().game,co=lo.width,po=lo.height,uo=window.TweenLite.delayedCall,ho=function(e,t,a){var n=a.body1_label,o=a.body2_label,i=a.callback,r={};e.pairs[t].bodyA.label.indexOf(n)>-1&&e.pairs[t].bodyB.label.indexOf(o)>-1?(r.body1=e.pairs[t].bodyA,r.body2=e.pairs[t].bodyB,i(r)):e.pairs[t].bodyB.label.indexOf(n)>-1&&e.pairs[t].bodyA.label.indexOf(o)>-1&&(r.body1=e.pairs[t].bodyB,r.body2=e.pairs[t].bodyA,i(r))},mo=function(e,t){return"pistol weapon"===e?qa(t):"smg weapon"===e?function(e){var t=Ua().game.player.weapons.damage["smg weapon"],a=t.min,n=t.max;return e.label.indexOf("body")>-1?{part:"torso",dmg:a}:e.label.indexOf("head")>-1?{part:"head",dmg:n}:void 0}(t):"shotgun weapon"===e?function(e){var t=Ua().game.player.weapons.damage["shotgun weapon"],a=t.min,n=t.max;return e.label.indexOf("body")>-1?{part:"torso",dmg:a}:e.label.indexOf("head")>-1?{part:"head",dmg:n}:void 0}(t):"turret weapon"===e?function(e){var t=Ua().game.player.weapons.damage["turret weapon"],a=t.min,n=t.max;return e.label.indexOf("body")>-1?{part:"torso",dmg:a}:e.label.indexOf("head")>-1?{part:"head",dmg:n}:void 0}(t):qa(t)},go=function(e,t,a){ho(e,t,{body1_label:"player character",body2_label:"ground",callback:function(){so(fe(!1));var e=a.getKeyValue("jump-landing-sound");e.seek(.1),e.play()}}),ho(e,t,{body1_label:"player character",body2_label:"barrier",callback:function(){so(fe(!1));var e=a.getKeyValue("jump-landing-sound");e.seek(.1),e.play()}}),ho(e,t,{body1_label:"gib",body2_label:"ground",callback:function(e){a.getKeyValue("static-ground-effects").push(new gn(e.body1.position,"blood spatter"))}}),ho(e,t,{body1_label:"zombie body part",body2_label:"ground",callback:function(e){a.getKeyValue("static-ground-effects").push(new gn(e.body1.position,"blood spatter",!0))}}),ho(e,t,{body1_label:"bullet",body2_label:"ground",callback:function(e){e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("ground")}}),ho(e,t,{body1_label:"pistol shell",body2_label:"ground",callback:function(e){e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("ground"),a.getKeyValue("shell-impact-sound").play()}}),ho(e,t,{body1_label:"smg shell",body2_label:"ground",callback:function(e){e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("ground"),a.getKeyValue("shell-impact-sound").play()}}),ho(e,t,{body1_label:"bullet",body2_label:"player character",callback:function(e){e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy()}}),ho(e,t,{body1_label:"grenade explosion",body2_label:"ground",callback:function(e){var t=a.getKeyValue("world");ot.World.remove(t,e.body1)}}),ho(e,t,{body1_label:"turret bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=mo("turret weapon",e.body2),a=t.part,n=t.dmg;e.body2.main.takeDamage(n,a,null,null,"turret")}}}),ho(e,t,{body1_label:"pistol bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=mo("pistol weapon",e.body2),n=t.part,o=t.dmg;e.body2.main.takeDamage(o,n)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),ho(e,t,{body1_label:"smg bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=mo("smg weapon",e.body2),n=t.part,o=t.dmg;e.body2.main.takeDamage(o,n)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),ho(e,t,{body1_label:"shotgun bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=mo("shotgun weapon",e.body2),n=t.part,o=t.dmg;e.body2.main.takeDamage(o,n)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),ho(e,t,{body1_label:"extra damage bullet",body2_label:"enemy",callback:function(e){if(e.body1.main&&e.body1.main.destroy&&e.body1.main.destroy("enemy"),e.body2.main&&e.body2.main.takeDamage){var t=ro().game.player.weapons.damage[ro().game.player.weapons.equipped].max;e.body2.main.takeDamage(3*t,"head","critical")}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),ho(e,t,{body1_label:"magazine",body2_label:"ground",callback:function(e){ro().game.lastMagDropped&&JSON.parse(ro().game.lastMagDropped)+200<Date.now()&&a.getKeyValue("mag-drop-sound").play();so(I(JSON.stringify(Date.now())))}}),ho(e,t,{body1_label:"magazine",body2_label:"enemy",callback:function(e){e.body2.main&&e.body2.main.takeDamage&&e.body2.main.takeDamage(20,"head"),a.getKeyValue("spark-sprites").push(new en(1,e.body2,{tint:16741632})),a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),ho(e,t,{body1_label:"melee hitbox",body2_label:"enemy zombie body",callback:function(e){a.getKeyValue("spark-sprites").push(new en(1,e.body2,{tint:16711680})),a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play();for(var t=ro().game.player.variables.currentDirection,n=0,o=3*ro().game.player.upgradeTiers.melee.current;n<10;)n++,ot.Body.translate(e.body2,{x:"right"===t?-o:o,y:-.25});Kt(ro().game.scoreAmounts.meleeConnect)}}),ho(e,t,{body1_label:"melee hitbox pistol",body2_label:"enemy",callback:function(e){if(e.body2.main&&e.body2.main.takeDamage){var t=ro().game.player.weapons.meleeDamage["pistol weapon"];e.body1.main.removeMeleeHitbox(),e.body2.main.takeDamage(t,null,null,!0)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),ho(e,t,{body1_label:"melee hitbox smg",body2_label:"enemy",callback:function(e){if(e.body2.main&&e.body2.main.takeDamage){var t=ro().game.player.weapons.meleeDamage["smg weapon"];e.body1.main.removeMeleeHitbox(),e.body2.main.takeDamage(t,null,null,!0)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),ho(e,t,{body1_label:"melee hitbox shotgun",body2_label:"enemy",callback:function(e){if(e.body2.main&&e.body2.main.takeDamage){var t=ro().game.player.weapons.meleeDamage["shotgun weapon"];e.body1.main.removeMeleeHitbox(),e.body2.main.takeDamage(t,null,null,!0)}a.getKeyValue("bullet-impact-body-sound").play(),a.getKeyValue("zombie-hurt-sound").play()}}),ho(e,t,{body1_label:"clustermine trap",body2_label:"enemy",callback:function(e){e.body1.destroy&&e.body1.destroy(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill()}}),ho(e,t,{body1_label:"clustermine explosion",body2_label:"enemy",callback:function(e){e.body1.removeSelf(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill(null,null,"clustermine explosion")}}),ho(e,t,{body1_label:"landmine trap",body2_label:"enemy",callback:function(e){e.body1.destroy&&e.body1.destroy(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill(null,null,"landmine")}}),ho(e,t,{body1_label:"landmine explosion",body2_label:"enemy",callback:function(e){e.body1.removeSelf(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill(null,null,"landmine")}}),ho(e,t,{body1_label:"barrel explosion",body2_label:"enemy",callback:function(e){e.body1.removeSelf(),e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill(null,null,"barrel explosion")}}),ho(e,t,{body1_label:"grenade explosion",body2_label:"enemy",callback:function(e){e.body2.main&&e.body2.main.takeDamage&&e.body2.main.kill(null,null,"grenade explosion")}}),ho(e,t,{body1_label:"pistol bullet",body2_label:"grenade",callback:function(e){e.body2.main&&e.body2.main.explode&&e.body2.main.explode()}}),ho(e,t,{body1_label:"smg bullet",body2_label:"grenade",callback:function(e){e.body2.main&&e.body2.main.explode&&e.body2.main.explode()}}),ho(e,t,{body1_label:"shotgun bullet",body2_label:"grenade",callback:function(e){e.body2.main&&e.body2.main.explode&&e.body2.main.explode()}}),ho(e,t,{body1_label:"enemy",body2_label:"grenade",callback:function(e){e.body2.main&&e.body2.main.explode&&uo(.1,(function(){e.body2.main.explode(),(e.body2.distance.start-e.body2.distance.end>2e3||e.body2.distance.end-e.body2.distance.start>2e3)&&(so(H(S.FROM_DOWNTOWN)),Kt(ro().game.scoreAmounts.achievement))}))}}),ho(e,t,{body1_label:"player character",body2_label:"attack",callback:function(e){if(e.body1.main&&e.body1.main.takeDamage){var t=ro().game.enemies.zombies.attackDmg,a=e.body1.main;a.playerHit||a.takeDamage(t)}}}),ho(e,t,{body1_label:"explosive barrier",body2_label:"bullet",callback:function(e){var t=ro().game.enemies.zombies.attackDmg;e.body1.main&&e.body1.main.takeDamage(t),e.body1.strength<0&&e.body1.removeSelf(),a.getKeyValue("spark-sprites").push(new en(1,e.body2,{scale:.5,animationSpeed:2}))}}),ho(e,t,{body1_label:"barrier",body2_label:"attack",callback:function(e){var t=ro().game.enemies.zombies.attackDmg;e.body1.main&&e.body1.main.takeDamage(t),e.body1.strength<0&&e.body1.removeSelf()}}),ho(e,t,{body1_label:"player character",body2_label:"health drop",callback:function(e){(e.body2.main.destroy&&e.body2.main.destroy(),e.body1.main&&e.body1.main.collectHealth)&&(xn.collectHealth(e.body2.amount),a.getKeyValue("spark-sprites").push(new en(1,e.body2,{scale:.5,animationSpeed:.75})),a.getKeyValue("health-pickup-sound").play())}}),ho(e,t,{body1_label:"player character",body2_label:"ammo drop",callback:function(e){(e.body2.main.destroy&&e.body2.main.destroy(),e.body1.main&&e.body1.main.collectAmmo)&&(xn.collectAmmo(e.body2.ammo_type,e.body2.amount),a.getKeyValue("spark-sprites").push(new en(1,e.body2,{scale:.5,animationSpeed:.75})),a.getKeyValue("ammo-collect-sound").play())}}),ho(e,t,{body1_label:"player character",body2_label:"currency drop",callback:function(e){(e.body2.main.destroy&&e.body2.main.destroy(),e.body1.main&&e.body1.main.collectCredits)&&(xn.collectCredits(e.body2.amount),a.getKeyValue("spark-sprites").push(new en(1,e.body2,{scale:.5,animationSpeed:.75})),a.getKeyValue("coin-collect-sound").play())}}),ho(e,t,{body1_label:"ground",body2_label:"shotgun shell",callback:function(e){var t=a.getKeyValue("shot-shell-sound");t.play(),t.fade(1,0,200)}}),ho(e,t,{body1_label:"ground",body2_label:"grenade",callback:function(e){var t=a.getKeyValue("grenade-clink-sound");t.play(),t.fade(1,0,500)}})},yo=!1,fo=function(e){return{fill:0===e?"#00e595":"#FF0000",fontSize:12}},bo=function(e,t){if(!yo){fn=t.getKeyValue("render"),Gn=t.getKeyValue("container"),qn=t.getKeyValue("game-width"),yn=t.getKeyValue("weapons-ui"),bn=t.getKeyValue("ground-texture"),wn=t.getKeyValue("ground"),vn=t.getKeyValue("static-ground-effects"),Sn=ro().game.player.variables.acceleration.min,(Yn=new c.i("")).position={x:10,y:5},(Zn=new c.i("zombies on right: 0")).pivot.x=.075*Zn.width,Zn.position={x:qn,y:5},xn=t.getKeyValue("player"),En=ut("body",t),Dn=new mn(t),Pn=Dn.crosshair,t.setKeyValue("crosshair-shape",Dn.crosshair),t.setKeyValue("crosshair",Pn),In=t.getKeyValue("gibs"),Wn=t.getKeyValue("grenades"),Hn=t.getKeyValue("explosions"),Nn=t.getKeyValue("rocks"),Un=t.getKeyValue("wood-planks"),zn=t.getKeyValue("build-objects"),$n=t.getKeyValue("explosion-sprites"),Qn=t.getKeyValue("spark-sprites"),Gn=t.getKeyValue("game-pixi-container"),to=new io;var a=t.getKeyValue("gradient-alpha");a.alpha=.75,Gn.addChild(to,a,bn),xn.addSpritesInOrder(),Gn.addChild(Yn),Gn.addChild(Zn),yo=!0}Ln=t.getKeyValue("zombies"),Rn=t.getKeyValue("zombie-ragdolls"),_n=t.getKeyValue("pistol-shells"),kn=t.getKeyValue("pistol-bullets"),Bn=t.getKeyValue("bullet-impacts"),Vn=t.getKeyValue("ammo-drops-by-type"),Fn=t.getKeyValue("currency-drops"),eo=t.getKeyValue("health-drops"),Tn=Vn["pistol weapon"],Mn=Vn["smg weapon"],jn=Vn["shotgun weapon"];var n=ro().game,o=n.keys,i=n.gameState,r=n.gameSubState,s=n.mouseState,l=n.mousePosition,d=n.player,p=d.variables,u=p.magnetism,h=p.magnetismSpeed,m=p.currentDirection,g=p.jumping,y=p.acceleration.max,f=p.deceleration,w=d.weapons,S=(w.laser,w.equipped),k=w.totalAmmo.grenades,A=n.enemies.zombies,C=A.zombieAttackLimiter,B=A.zombieAttackDistance,_=n.traps.turret.fireDistance,O=n.mouseState,K=O.x,V=O.y,T=O.btn,M={x:l.x+En.position.x-co/2,y:l.y+En.position.y-po/2};so(ke({x:M.x,y:M.y}));var j=function(e){return{x:e.position.x-En.position.x+co/2+("right"===m?Sn:-Sn),y:e.position.y-En.position.y+po/2,rotation:e.angle}};if(i===E.GAMEPLAY){to.renderPosition(j,En,Sn),"mouse down"!==T||xn.meleeAttackInProgress||xn.grenadeThrowInProgress||("pistol weapon"===S&&function(e){Za(e)}(t),"smg weapon"===S&&function(e){Za(e)}(t),"shotgun weapon"===S&&function(e){Za(e)}(t)),ot.Render.lookAt(fn,{min:{x:En.position.x+co/2,y:En.position.y-po/2},max:{x:En.position.x-co/2,y:En.position.y+po/2}}),ot.Body.setAngle(En,0),yn.reloading||xn.meleeAttackInProgress||xn.grenadeThrowInProgress||(o.indexOf(68)>-1||o.indexOf(65)>-1?Sn<y&&(Sn+=.25):(so(ge(m)),Sn>0&&(Sn-=f)),o.indexOf(68)>-1&&o.indexOf(65)>-1&&Sn>0&&(Sn-=f),o.indexOf(68)>-1&&(so(ye("right")),ot.Body.translate(En,{x:Sn,y:0})),o.indexOf(65)>-1&&(so(ye("left")),ot.Body.translate(En,{x:-Sn,y:0})),o.indexOf(71)>-1&&k>0&&xn&&!xn.meleeAttackInProgress&&!yn.reloading&&!g&&r!==v&&r!==x&&xn.chargeGrenade(),ro().game.rightMouseDown&&k>0&&xn&&!xn.meleeAttackInProgress&&!yn.reloading&&!g&&r!==v&&r!==x&&(xn.chargeGrenade(),console.log("should charge grenade from engineHandlers")));var F=j(En),P=F.x,D=F.y;if(so(De({x:P,y:D})),eo.forEach((function(e){e.renderPosition(j)})),Tn.concat(Mn).concat(jn).forEach((function(e){e.positionAmmoBox(j),e.body&&e.body.position.y>500&&e.destroy(),e.body&&(En.position.x>e.body.position.x&&En.position.x-e.body.position.x<u&&ot.Body.translate(e.body,{x:h,y:0}),En.position.x<e.body.position.x&&e.body.position.x-En.position.x<u&&ot.Body.translate(e.body,{x:-h,y:0}))})),Fn.forEach((function(e){e.positionCreditGfx(j),e.creditBody&&e.creditBody.position.y>500&&e.destroy(),e.creditBody&&(En.position.x>e.creditBody.position.x&&En.position.x-e.creditBody.position.x<u&&(En.position.x>e.creditBody.position.x&&En.position.x-e.creditBody.position.x<u/2?ot.Body.translate(e.creditBody,{x:2*h,y:0}):ot.Body.translate(e.creditBody,{x:h,y:0})),En.position.x<e.creditBody.position.x&&e.creditBody.position.x-En.position.x<u&&(En.position.x<e.creditBody.position.x&&e.creditBody.position.x-En.position.x<u/2?ot.Body.translate(e.creditBody,{x:-2*h,y:0}):ot.Body.translate(e.creditBody,{x:-h,y:0})))})),xn.setBodySpritesPositions({mx:K,fn:j}),xn.setArmsSpritePosition({mx:K,my:V,fn:j}),xn.positionHeadSprite({mx:K,my:V,fn:j}),xn.renderGrenadeChargeMeter(j),xn.charRunSprite&&xn.charIdleSprite&&xn.charJumpSprite&&(o.indexOf(65)>-1||o.indexOf(68)>-1?g||(xn.charRunSprite.play(),xn.charRunSprite.visible=!0,xn.charIdleSprite.visible=!1,xn.stopJumpAnimation()):(xn.charRunSprite.stop(),xn.charRunSprite.visible=!1,xn.charIdleSprite.visible=!0,xn.armsSprites.forEach((function(e){e.visible=!1})),xn.reloadAnims.forEach((function(e){e.visible=!1}))),o.indexOf(65)>-1&&s.x===yt||o.indexOf(68)>-1&&"less than player x position"===s.x?xn.charRunSprite.animationSpeed=-1:xn.charRunSprite.animationSpeed=1,s.x===yt?(xn.bodySprites.forEach((function(e){e.scale.x=-1})),xn.armsSprites.forEach((function(e){e.scale.y=-1})),xn.headSprite.scale.y=-1):(xn.bodySprites.forEach((function(e){e.scale.x=1})),xn.armsSprites.forEach((function(e){e.scale.y=1})),xn.headSprite.scale.y=1),yn.reloading?(xn.bodySprites.forEach((function(e){e.visible=!1})),xn.armsSprites.forEach((function(e){e.visible=!1})),xn.reloadAnimsByType[S].visible=!0,xn.charIdleSprite.visible=!1):xn.armsSpritesByType[S]&&(xn.armsSprites.forEach((function(e){e.visible=!1})),xn.armsSpritesByType[S].forEach((function(e){e.visible=!0})),xn.reloadAnimsByType[S].visible=!1),g||yn.reloading||xn.meleeAttackInProgress||xn.grenadeThrowInProgress?xn.headSprite.visible=!1:xn.headSprite.visible=!0,g?(xn.charIdleSprite.visible=!1,xn.charJumpSprite.currentFrame<2&&xn.armsSpritesByType[S].forEach((function(e){e.y+=80}))):xn.stopJumpAnimation(),xn.meleeAttackInProgress&&(xn.armsSprites.forEach((function(e){e.visible=!1})),xn.bodySprites.forEach((function(e){xn.meleeSprites.indexOf(e)<0&&(e.visible=!1)}))),xn.grenadeThrowInProgress&&(xn.armsSprites.forEach((function(e){e.visible=!1})),xn.bodySprites.forEach((function(e){xn.grenadeSprites.indexOf(e)<0&&(e.visible=!1)})))),null!==t.getKeyValue("player-ragdoll")){var L=t.getKeyValue("player-ragdoll");L&&L.animateRagParts&&L.animateRagParts(j)}}xn.body.position.y>500&&xn.kill(ka);for(var R=0;R<_n.length;++R)On||(On=ct(_n[R].body)),Kn||(Kn=pt(_n[R].body)),_n[R].gfc.position.x=_n[R].body.position.x-En.position.x+co/2+("right"===m?Sn:-Sn),_n[R].gfc.position.y=_n[R].body.position.y-En.position.y+po/2,_n[R].gfc.rotation="shotgun weapon"===S?_n[R].body.angle+Object(gt.degrees)(90):_n[R].body.angle;for(var z=0;z<kn.length;++z)An||(An=ct(kn[z].body)),Cn||(Cn=pt(kn[z].body)),kn[z].gfc.position.x=kn[z].body.position.x-En.position.x+co/2+("right"===m?Sn:-Sn),kn[z].gfc.position.y=kn[z].body.position.y-En.position.y+po/2,kn[z].gfc.rotation=kn[z].body.angle;Wn.forEach((function(e){e.animate(j)})),Hn.forEach((function(e){e.calcRenderedPosition(j)})),Nn.forEach((function(e){e.animate(j)})),Un.forEach((function(e){e.animate(j)})),xn.updateEjectedMagPositions(j),In.forEach((function(e){e.animate(j)})),Jn=0,Xn=0,Ln.forEach((function(e){if(e.setPlayerVars({player:xn,playerDirection:m,playerBody:En}),e.paused||e.walk(),ot.Body.setAngle(e.body,0),e.setSpritesPositions(j),e.body.position.y>500){e.kill(null,null,"fell off")}(En.position.x>e.body.position.x&&En.position.x-e.body.position.x<B||En.position.x<e.body.position.x&&e.body.position.x-En.position.x<B)&&e.timeSinceLastAttack+C<Date.now()&&e.attack(),zn.forEach((function(t){t&&!t.destroyed&&"remote mine trap"!==t.getBody().label&&((t.getBody().position.x>e.body.position.x&&t.getBody().position.x-e.body.position.x<B||t.getBody().position.x<e.body.position.x&&e.body.position.x-t.getBody().position.x<B)&&e.timeSinceLastAttack+C<Date.now()&&"landmine trap"!==t.getBody().label&&e.attack(),(t.direction&&"right"===t.direction&&e.body.position.x>t.getBody().position.x-10&&e.body.position.x-t.getBody().position.x<_||t.direction&&"left"===t.direction&&e.body.position.x<t.getBody().position.x-10&&t.getBody().position.x-e.body.position.x<_)&&t.shoot())})),e.dead||(e.body.position.x<En.position.x&&(Jn+=1),e.body.position.x>En.position.x&&(Xn+=1))})),zn.forEach((function(e){e&&!e.destroyed&&e.displayBarrierStrength&&e.displayBarrierStrength(j),e.updatePosition&&e.updatePosition(j)})),0!==ro().game.waveCountToDefeat&&null!==ro().game.waveCountToDefeat||(Jn=0,Xn=0),Yn.text="".concat(Jn),Yn.style=fo(Jn),Zn.text="".concat(Xn),Zn.style=fo(Xn),Rn.forEach((function(e){e.animateRagParts(j)})),r!==b&&(Pn.position=l),Pn.changed&&((Pn=Pn._new).changed=!1),Pn.changeBack&&(Gn.removeChild(Pn),Pn=Dn.crosshair,Gn.addChild(Dn.crosshair),Pn.changeBack=!1),bn.position=j(wn),Bn.forEach((function(e){e.renderPosition(j)})),vn.forEach((function(e){e.renderPosition(j)})),$n.forEach((function(e){e.renderPosition(j)})),Qn.forEach((function(e){e.renderPosition(j)})),Gn.addChild(Dn.crosshair)},wo=a(63),vo=nt.getState,xo=nt.dispatch,Eo=window.TweenLite,So=Eo.to,ko=Eo.from;function Ao(){var e,t=this,a=window.gameObjects,n=a.getKeyValue("game-pixi-container"),o=a.getKeyValue("game-width"),i=a.getKeyValue("game-height"),r=dt("weapon-ui-icon-pistol"),s=dt("weapon-ui-icon-smg"),l=dt("weapon-ui-icon-shotgun"),d=[],p=(new wo.a({distance:3,alpha:1}),new wo.a({distance:1,alpha:2}),new c.f);p.beginFill(4345921),p.drawRect(0,0,120,90),p.alpha=.65,p.position.x=o-p.width-20,p.position.y=i-p.height-20,n.addChild(p),r.width=r.width/2,r.height=r.height/2,d.push(r),s.width=s.width/2,s.height=s.height/2,d.push(s),l.width=l.width/2,l.height=l.height/2,d.push(l),d.forEach((function(e){e.position.x=o-(e.width+20),e.position.y=i-(e.height+10),e.alpha=0,n.addChild(e)})),this.keepOnTop=function(){n.addChild(p),d.forEach((function(e){n.addChild(e)})),u["pistol weapon"].concat(u["smg weapon"]).concat(u["shotgun weapon"]).forEach((function(e){n.addChild(e)})),t.grenades.forEach((function(e){n.addChild(e)})),t.shaking&&!t.reloading&&n.addChild(t.emptyText)},setInterval(this.keepOnTop,1e3);var u={"pistol weapon":null,"smg weapon":null,"shotgun weapon":null},h=new c.f;h.beginFill(16777215),h.drawRect(r.position.x,r.position.y,r.width,r.height),n.addChild(h),window.gameObjects.getKeyValue("bullet-shell-bevel-ui")||window.gameObjects.setKeyValue("bullet-shell-bevel-ui",new Da.a({lightAlpha:.5,shadowAlpha:.5,thickness:.5}));var m=window.gameObjects.getKeyValue("bullet-shell-bevel-ui");this.checkFilters=function(){vo().game.filterEffects?(u["pistol weapon"].forEach((function(e){e.filters=[m]})),u["shotgun weapon"].forEach((function(e){e.filters=[m]})),t.grenades&&t.gbevel&&t.gnoise&&t.grenades.forEach((function(e){e.filters=[t.gbevel,t.gnoise]}))):(u["pistol weapon"].forEach((function(e){e.filters=[]})),u["shotgun weapon"].forEach((function(e){e.filters=[]})),t.grenades&&t.grenades.forEach((function(e){e.filters=[]})))};var g={"pistol weapon":function(){u["pistol weapon"]=u["pistol weapon"].map((function(e,t){var a=new c.f;return a.lineStyle(1,5656365),a.beginFill(12559650),a.drawRect(0,0,4,8),a.filters=vo().game.filterEffects?[m]:[],a.alpha=0,a.position.x=o-27-r.width/u["pistol weapon"].length*t,a.position.y=r.position.y+r.height-22,n.addChild(a),a.mask=h,a}))},"smg weapon":function(){u["smg weapon"]=u["smg weapon"].map((function(e,t){var a=new c.f;return a.lineStyle(1,5656365),a.beginFill(13549954),a.drawRect(0,0,2,8),a.alpha=0,a.position.x=o-24-s.width/u["smg weapon"].length*t,a.position.y=s.position.y+s.height-22,n.addChild(a),a.mask=h,a}))},"shotgun weapon":function(){u["shotgun weapon"]=u["shotgun weapon"].map((function(e,t){var a=new c.f;return a.lineStyle(1,4068115),a.beginFill(11534336),a.drawRect(0,0,4,8),a.beginFill(12363845),a.drawRect(0,8,4,3),a.filters=vo().game.filterEffects?[m]:[],a.alpha=0,a.position.x=o-32-l.width/u["shotgun weapon"].length*t,a.position.y=l.position.y+l.height-26,n.addChild(a),a.mask=h,a}))}},y={"pistol weapon":r,"smg weapon":s,"shotgun weapon":l};this.updateMagazine=function(e){var t=vo().game.player.weapons.ammoCapacity;u[e]&&(u[e].forEach((function(e){e.destroy()})),u[e]=null),u[e]=new Array(t[e]).fill(1),g[e]()},this.updateMagazine("pistol weapon"),this.updateMagazine("smg weapon"),this.updateMagazine("shotgun weapon"),e=[u["pistol weapon"],u["smg weapon"],u["shotgun weapon"]],this.swapSwap=function(e){var a=vo().game.player.weapons,n=a.list,o=a.equipped;f[e]=0;var i=n.indexOf(e);i>-1&&t.select(n[i+1]?n[i+1]:n[0]),window.TweenLite.delayedCall(.05,(function(){t.select(o)}))},this.updateWeaponMagazines=function(a){var o=vo().game.player.weapons.list;e.forEach((function(e){e.forEach((function(e){n.removeChild(e)}))})),o.forEach((function(e){t.updateMagazine(e)})),e=[u["pistol weapon"],u["smg weapon"],u["shotgun weapon"]],t.reload(!0),xo(Se(a)),t.swapSwap(a)};var f={"pistol weapon":0,"smg weapon":0,"shotgun weapon":0},b={"pistol weapon":!1,"smg weapon":!1,"shotgun weapon":!1};this.checkEmpty=function(e){return b[e]};var w=function(e,a,n){So(e,.1,{x:a+10,onComplete:function(){So(e,.1,{x:a-10,onComplete:function(){So(e,.1,{x:a+5,onComplete:function(){So(e,.1,{x:a-5,onComplete:function(){So(e,.1,{x:a+3,onComplete:function(){So(e,.1,{x:a-2,onComplete:function(){So(e,.1,{x:a+1,onComplete:function(){So(e,.1,{x:a,onComplete:function(){t.shaking=!1,n()}})}})}})}})}})}})}})}})};this.textForEmptyShake="RELOAD",this.changeTextForEmptyShake=function(e){t.textForEmptyShake=e,t.emptyText.text=e},this.emptyText=new c.i(this.textForEmptyShake,{fill:11534336,fontSize:"15px",fontWeight:"bold"}),this.emptyText.pivot.x=.5*this.emptyText.width,this.emptyText.pivot.y=.5*this.emptyText.height,this.emptyText.position.x=p.position.x+.5*p.width,this.emptyText.position.y=p.position.y+.8*p.height,this.removeEmptyText=function(){n.removeChild(t.emptyText)},this.shaking=!1,this.emptyMagShake=function(){n.addChild(t.emptyText),t.shaking||(t.shaking=!0,d.forEach((function(e){var a=e.position.x;w(e,a,t.removeEmptyText)})),w(p,p.position.x,t.removeEmptyText))},this.reloading=!1,this.reload=function(e){t.reloading&&!e||function(){var a=vo().game.player.weapons,n=a.reloadAnimationFrames,i=a.equipped,r=a.totalAmmo;if(t.removeEmptyText(),0!==f[i]&&0!==r[i]||e){e&&(f[i]=0),t.reloading=!0;var s=r[i]<u[i].length;u[i].forEach((function(e,t){e.alpha=0}));for(var l=function(a,s){var l=u[i][a];l.alpha=1,ko(l,n[i]/60,{x:o-l.width*a,onComplete:function(a){a===s-1&&(f[i]=0,b[i]=!1,t.lastBulletByWepType[i]=!1,e&&(t.reloading=!1)),0===r[i]&&(t.reloading=!1)},onCompleteParams:[a]})},d=0,c=s?r[i]:u[i].length;d<c;++d)l(d,c)}}()},this.select=function(t){var a=vo().game.player.weapons,n=a.totalAmmo,o=a.equipped;d.forEach((function(e){e.alpha=0})),e.forEach((function(e){e.forEach((function(e){e&&e.hasOwnProperty("alpha")&&(e.alpha=0)}))})),y[t||o].alpha=1;var i=n[t||o]<u[t||o].length;if(0!==n[t||o]){var r=i?n[t||o]:u[t||o].length-f[t||o],s=i?u[t||o].length-n[t||o]:0;i&&(f[t||o]=s);for(var l=0;l<r;++l)u[t||o][u[t||o].length-1-l].alpha=1}b[o]&&u[o].forEach((function(e){t||(e.alpha=0)}))},this.lastBulletByWepType={"pistol weapon":!1,"smg weapon":!1,"shotgun weapon":!1},this.fireBullet=function(e){u[e][f[e]]&&(u[e][f[e]].alpha=0,f[e]++,xo(Me(e)),u[e].length===f[e]&&(t.lastBulletByWepType[e]=!0),u[e].length===f[e]&&(b[e]=!0))};var v=function(){t.gbevel=new Da.a,t.gnoise=new La.a,t.gbevel.shadowAlpha=.45,t.gbevel.lightAlpha=.35,t.gbevel.thickness=5,t.gbevel.shadowColor=0,t.gbevel.lightColor=2133060,t.gnoise.noise=.1,t.gnoise.seed=.5;var e=new c.f;return e.lineStyle(1,0),e.beginFill(2049836),e.drawCircle(0,0,6),e.filters=vo().game.filterEffects?[t.gbevel,t.gnoise]:[],n.addChild(e),e};return this.grenades=[],this.updateGrenadeIcons=function(){t.grenades&&t.grenades.forEach((function(e){e.destroy()})),t.grenades=[];for(var e=vo().game.player.weapons.totalAmmo.grenades,a=0;a<e;++a){var n=v();t.grenades.push(n)}t.grenades.forEach((function(e,t){e.position.x=vo().game.width-25-1.5*e.width*t,e.position.y=vo().game.height-110-e.height,ko(e,.1*t,{y:e.position.y-10,alpha:0})}))},this.updateGrenadeIcons(),this}var Co=function(){function e(t,a){Object(mt.a)(this,e),this.container=window.gameObjects.getKeyValue("game-pixi-container");var n=3*t;return this.gfc=new c.f,this.gfc.lineStyle(2,0),this.gfc.beginFill(1881185),this.gfc.drawRect(0,0,n/2,n),this.gfc.drawRect(-n/4,n/4,n,n/2),this.gfc.lineStyle(0,0,0),this.gfc.beginFill(1881185),this.gfc.drawRect(0,0,n/2,n),this.gfc.drawRect(-n/4,n/4,n,n/2),this.bevel=new Da.a({thickness:3,lightAlpha:.5,shadowAlpha:.5,shadowColor:2391885}),this.glow=new Va.a({outerStrength:.5}),this.gfc.filters=nt.getState().game.filterEffects?[this.glow,this.bevel]:[],this.body=ot.Bodies.rectangle(a.x,a.y,n,n,{restitution:.65,collisionFilter:wt}),this.body.main=this,this.body.amount=t,this.body.label="health drop",ot.World.add(window.gameObjects.getKeyValue("world"),this.body),window.gameObjects.getKeyValue("health-drops").push(this),this}return Object(Ba.a)(e,[{key:"checkFilters",value:function(){this.gfc&&nt.getState().game.filterEffects?this.gfc.filters=[this.bevel,this.glow]:this.gfc&&(this.gfc.filters=[])}},{key:"destroy",value:function(){var e=window.gameObjects.getKeyValue("health-drops"),t=e.indexOf(this);t>-1&&e.splice(t,1),this.gfc.destroy(),this.gfc=null,ot.World.remove(window.gameObjects.getKeyValue("world"),this.body),this.body=null,e=null,t=null,this.container=null}},{key:"renderPosition",value:function(e){this.container&&-1===this.container.children.indexOf(this.gfc)&&this.container.addChild(this.gfc),this.gfc.position=e(this.body)}}]),e}();function Bo(e,t,a){var n=this,o=c.k.BlurFilter,i=window.gameObjects,r=i.getKeyValue("game-pixi-container"),s=i.getKeyValue("ammo-drops-by-type"),l={"pistol weapon":152831,"smg weapon":16751874,"shotgun weapon":10821921},d={x:e.x,y:e.y,w:50,h:20},p=ot.Bodies.rectangle(d.x,d.y,d.w,d.h,{collisionFilter:wt});p.label="ammo drop",p.ammo_type=t,p.amount=a;var u=i.getKeyValue("world");ot.World.add(u,p),p.main=this;var h=new c.e,m=new c.f;m.beginFill(l[t]),m.drawRect(0,0,d.w,d.h),m.pivot.x=.5*m.width,m.pivot.y=.5*m.height;var g,y,f=new Da.a;f.thickness=5,f.lightColor=16777215,f.lightAlpha=.25,f.shadowColor=0,f.shadowAlpha=.25,m.filters=nt.getState().game.filterEffects?[f]:[],(g=new c.f).beginFill(0),g.drawRect(0,d.h/2,d.w,d.h/2),g.pivot.x=.5*g.width,g.pivot.y=.5*g.height,y=new o(5,3),g.alpha=.85,g.filters=nt.getState().game.filterEffects?[y]:[];var b=new c.f;b.beginFill(l[t]),b.drawRect(0,0,d.w,d.h),b.pivot.x=.5*b.width,b.pivot.y=.5*b.height,g.mask=b,nt.getState().game.filterEffects?h.addChild(m,g,b):h.addChild(m,b);var w=new c.i({"pistol weapon":"PISTOL","smg weapon":"SMG","shotgun weapon":"SHOTGUN"}[t],{fontSize:"9px",fill:"#FFF",fontWeight:"bold"});w.pivot.x=.5*w.width,w.pivot.y=.5*w.height;var v=new Va.a;return v.color=0,v.outerStrength=1,w.filters=nt.getState().game.filterEffects?[v]:[],h.addChild(w),this.gfc=h,this.body=p,this.checkFilters=function(){nt.getState().game.filterEffects?(h.addChild(g,w),m.filters=[f],g.filters=[y],w.filters=[v]):(h.children.indexOf(g)>-1&&h.removeChild(g),m.filters=[],g.filters=[],w.filters=[])},this.destroy=function(){var e=s[t].indexOf(n);e>-1&&(s[t].splice(e,1),h.destroy(),ot.World.remove(u,p))},setTimeout((function(){n.destroy()}),2e4),s[t].push(this),this.positionAmmoBox=function(e){var t=e(p),a=t.x,o=t.y,i=t.rotation;h.position={x:a,y:o},h.rotation=i,r&&-1===r.children.indexOf(n.gfc)&&r.addChild(h)},this}function _o(e,t,a){var n,o,i,r=this,s=e.x,l=e.y,d=(nt.dispatch,nt.getState),p=window.TweenLite,u=p.delayedCall,h=p.to,m=window.gameObjects;n||(n=m.getKeyValue("world")),o||(o=m.getKeyValue("game-pixi-container")),i||(i=m.getKeyValue("zombie-ragdolls")),m.getKeyValue("death-rip-sound").play(),m.getKeyValue("zombie-death-sound").play();var g=40,y=90,f=20,b=30,w=15,v=40,x=15,E=40,S=15,k=35,A=15,C=35,B=ot.Bodies.rectangle(s,l,g,y,{collisionFilter:ft}),_=ot.Bodies.rectangle(s,l,f,b,{collisionFilter:ft}),O=ot.Bodies.rectangle(s,l,w,v,{collisionFilter:ft}),K=ot.Bodies.rectangle(s,l,w,v,{collisionFilter:ft}),V=ot.Bodies.rectangle(s,l,S,k,{collisionFilter:ft}),T=ot.Bodies.rectangle(s,l,w,v,{collisionFilter:ft}),M=ot.Bodies.rectangle(s,l,w,v,{collisionFilter:ft}),j=ot.Bodies.rectangle(s,l,S,k,{collisionFilter:ft}),F=ot.Bodies.rectangle(s,l,x,E,{collisionFilter:ft}),P=ot.Bodies.rectangle(s,l,x,E,{collisionFilter:ft}),D=ot.Bodies.rectangle(s,l,x,E,{collisionFilter:ft}),L=ot.Bodies.rectangle(s,l,x,E,{collisionFilter:ft}),R=ot.Bodies.rectangle(s,l,A,C,{collisionFilter:ft}),z=ot.Bodies.rectangle(s,l,A,C,{collisionFilter:ft}),I=ot.Constraint.create({bodyA:B,bodyB:_,pointA:{x:0,y:-y/2},pointB:{x:0,y:b/2},length:1}),W=ot.Constraint.create({bodyA:B,bodyB:O,pointA:{x:-g/4,y:-y/2+10},pointB:{x:0,y:-v/2},length:2}),H=ot.Constraint.create({bodyA:B,bodyB:K,pointA:{x:0,y:-y/2+10},pointB:{x:0,y:-v/2},length:2}),N=ot.Constraint.create({bodyA:O,bodyB:T,pointA:{x:0,y:v/2},pointB:{x:0,y:-v/2},length:2}),U=ot.Constraint.create({bodyA:K,bodyB:M,pointA:{x:0,y:v/2},pointB:{x:0,y:-v/2},length:2}),G=ot.Constraint.create({bodyA:T,bodyB:V,pointA:{x:0,y:v/2},pointB:{x:0,y:-k/2},length:1}),q=ot.Constraint.create({bodyA:M,bodyB:j,pointA:{x:0,y:v/2},pointB:{x:0,y:-k/2},length:1}),J=ot.Constraint.create({bodyA:B,bodyB:F,pointA:{x:-g/4,y:y/2},pointB:{x:0,y:-E/2},length:2}),X=ot.Constraint.create({bodyA:B,bodyB:P,pointA:{x:0,y:y/2},pointB:{x:0,y:-E/2},length:2}),Y=ot.Constraint.create({bodyA:F,bodyB:D,pointA:{x:0,y:E/2},pointB:{x:0,y:-E/2},length:2}),Z=ot.Constraint.create({bodyA:P,bodyB:L,pointA:{x:0,y:E/2},pointB:{x:0,y:-E/2},length:2}),$=ot.Constraint.create({bodyA:D,bodyB:R,pointA:{x:0,y:E/2},pointB:{x:0,y:-C/2},length:1}),Q=ot.Constraint.create({bodyA:L,bodyB:z,pointA:{x:0,y:E/2},pointB:{x:0,y:-C/2},length:1});this.composite=ot.Composite.create(),this.bodies=[_,O,K,T,M,F,P,D,L,R,z],this.bodies.forEach((function(e){e.label="zombie body part"})),B.label="torso",ot.Composite.add(this.composite,[_,B,O,K,T,M,F,P,D,L,V,j,R,z,I,G,q,$,Q,W,H,N,U,J,X,Y,Z]),this.constraints=[I,G,q,$,Q,W,H,N,U,J,X,Y,Z],ot.World.add(n,this.composite),ot.Body.applyForce(B,B.position,t),this.bodies.forEach((function(e){ot.Body.applyForce(e,e.position,{x:rt.a.float(-.01,-.05),y:rt.a.float(-.01,-.05)})})),i.push(this);var ee=m.getKeyValue("zombie-parts-gored-sheet"),te=new c.h(ee.textures[function(){var e=["skull_gored.png","skull_gored2.png","skull_gored3.png"];return e[Math.floor(Math.random()*e.length)]}()]);te._id="skull";var ae=new c.h(ee.textures["torso_whole_gored.png"]);ae._id="torso";var ne=[],oe=new c.h(ee.textures["rear_leg_lower_gored.png"]);oe._id="leg 2",ne.push(oe);var ie=new c.h(ee.textures["rear_arm_hand_gored.png"]);ie._id="hand 2",ne.push(ie);var re=new c.h(ee.textures["rear_arm_forearm_gored.png"]);re._id="arm 2",ne.push(re);var se=new c.h(ee.textures["rear_arm_upper_gored.png"]);se._id="limb",ne.push(se);var le=new c.h(ee.textures["rear_leg_upper_gored.png"]);le._id="limb",ne.push(le);var de=new c.h(ee.textures["rear_leg_foot_gored.png"]);de._id="foot 2",ne.push(de),ne.push(ae,te);var ce=new c.h(ee.textures["front_leg_lower_gored.png"]);ce._id="leg 1",ne.push(ce);var pe=new c.h(ee.textures["front_arm_hand_gored.png"]);pe._id="hand 1",ne.push(pe);var ue=new c.h(ee.textures["front_arm_forearm_gored.png"]);ue._id="arm 1",ne.push(ue);var he=new c.h(ee.textures["front_arm_upper_gored.png"]);he._id="limb",ne.push(he);var me=new c.h(ee.textures["front_arm_upper_gored.png"]);me._id="limb",ne.push(me);var ge=new c.h(ee.textures["front_leg_foot_gored.png"]);ge._id="foot 1",ne.push(ge),ne.forEach((function(e){e.updateAnchor=!0,e.pivot.x=.5*e.width,e.pivot.y=.5*e.height,o.addChild(e)})),this.head=_,this.bodyUpper=B,this.armUpperL=O,this.armUpperR=K,this.armLowerL=T,this.armLowerR=M,this.legUpperL=F,this.legUpperR=P,this.legLowerL=D,this.legLowerR=L,this.handL=V,this.handR=j,this.footL=R,this.footR=z;var ye=t?t.x<0?{x:-.002}:{x:.002}:{x:rt.a.float(-.002,.002)};ye.y=-.005,new fa(d().game.lastWaveCountDefeated&&d().game.lastWaveCountDefeated<10?rt.a.int(5,10):3,B.position,ye,d().game.lastWaveCountDefeated&&d().game.lastWaveCountDefeated<10?2:1),this.destroy=function(){ne.forEach((function(e,t){h(e,d().game.lastWaveCountDefeated&&d().game.lastWaveCountDefeated<10?1:.5,{alpha:0,onComplete:function(){o.removeChild(e),t===ne.length-1&&(ot.World.remove(n,r.composite),i.splice(i.indexOf(r),1),i=null,n=null,r.bodies.forEach((function(e){null})),r.constraints.forEach((function(e){null})))}})}))},this.animateRagParts=function(e){var t=e(r.head);te.position=t,te.rotation=t.rotation;var a=e(r.bodyUpper);ae.position=a,ae.rotation=a.rotation;var n=e(r.armLowerL);ue.position=n,ue.rotation=n.rotation;var o=e(r.armUpperL);he.position=o,he.rotation=o.rotation;var i=e(r.handL);pe.position=i,pe.rotation=i.rotation;var s=e(r.legUpperL);me.position=s,me.rotation=s.rotation;var l=e(r.legLowerL);ce.position=l,ce.rotation=l.rotation;var d=e(r.footL);ge.position=d,ge.rotation=d.rotation;var c=e(r.armLowerR);re.position=c,re.rotation=c.rotation;var p=e(r.armUpperR);se.position=p,se.rotation=p.rotation;var u=e(r.handR);ie.position=u,ie.rotation=u.rotation;var h=e(r.legUpperR);le.position=h,le.rotation=h.rotation;var m=e(r.legLowerR);oe.position=m,oe.rotation=m.rotation;var g=e(r.footR);de.position=g,de.rotation=g.rotation};var fe=new Array(rt.a.int(1,10)).fill(1);return(fe=fe.map((function(e,t){var a;return function e(){if(a=r.constraints[Math.floor(Math.random()*r.constraints.length)],!(fe.indexOf(a)>-1))return a;e()}()}))).forEach((function(e){ot.Composite.remove(r.composite,e)})),u(!d().game.lastWaveCountDefeated||d().game.lastWaveCountDefeated<10?4:1,this.destroy),this}function Oo(e,t){var a,n,o,i=this,r=nt.dispatch,s=nt.getState,l=window,d=(l.Power2,l.TweenLite),p=d.delayedCall,u=(d.to,d.set,window.gameObjects);a||(a=u.getKeyValue("world")),n||(n=u.getKeyValue("zombies")),o||(o=u.getKeyValue("game-pixi-container"));var h=u.getKeyValue("bullet-impacts");r(Qe());var m=60,g=125,y=40,f=60,b=s().game.enemies.zombies.walkSpeed,w=ot.Bodies.rectangle(e,t,m,g,{collisionFilter:bt}),v=ot.Bodies.rectangle(e,t,y,f,{collisionFilter:bt,inertia:1/0});w.label="enemy zombie body",v.label="enemy zombie head";var x=ot.Constraint.create({bodyA:v,bodyB:w,pointA:{x:0,y:f/2},pointB:{x:0,y:-g/2},length:0}),E=ot.Composite.create();this.composite=E,this.body=w,this.head=v,ot.Composite.add(E,[w,v,x]),ot.World.add(a,E);var A=u.getKeyValue("zombie-walk-sheet"),C=u.getKeyValue("zombie-attack1-sheet"),B=u.getKeyValue("zombie-idle-sheet"),_=new c.a(B.animations.idle),O=new c.a(A.animations.walkcycle),T=new c.a(C.animations.attack1),j=new c.a(u.getKeyValue("zombie-attack2-sheet").animations.attackTwo),F=u.getKeyValue("zombie-slash-fx-sheet"),P=new c.a(F.animations.slash);P.loop=!1,P.animationSpeed=.5,P.updateAnchor=!0,P.pivot.x=.5*P.width,P.pivot.y=.5*P.height,P.visible=!1,P.onComplete=function(){P.visible=!1},o.addChild(P),this.shadow=new c.f,this.shadow.beginFill(0,.35),this.shadow.drawEllipse(0,0,80,10);var D=new c.k.BlurFilter;D.blur=8,this.shadow.filters=s().game.filterEffects?[D]:[],o&&-1===o.children.indexOf(this.shadow)&&o.addChild(this.shadow),_.loop=!0,_.animationSpeed=.5,_.updateAnchor=!0,_.pivot.x=.5*_.width,_.pivot.y=.6*_.height,o.addChild(_),O.loop=!0,O.animationSpeed=.5,O.updateAnchor=!0,O.pivot.x=.5*O.width,O.pivot.y=.6*O.height,o.addChild(O),T.loop=!1,T.animationSpeed=.65,T.updateAnchor=!0,T.pivot.x=.5*T.width,T.pivot.y=.6*T.height,o.addChild(T),T.visible=!1,j.loop=!1,j.animationSpeed=.65,j.updateAnchor=!0,j.pivot.x=.5*j.width,j.pivot.y=.6*j.height,o.addChild(j),j.visible=!1,this.walkAnim=O,this.attackAnim=T,this.attackAnim2=j,this.idleAnim=_,this.anims=[this.walkAnim,this.attackAnim,this.attackAnim2,this.idleAnim],this.anims.forEach((function(e){window.TweenLite.from(e,1,{alpha:0})})),this.playerBodyPosition=null,this.playSlashAnim=function(){i.attackAnim.visible?(P.position={x:i.attackAnim.position.x,y:i.attackAnim.position.y-50},P.scale.x=i.attackAnim.scale.x,P.rotation=Object(gt.degrees)(0)):(P.position={x:i.attackAnim.position.x,y:i.attackAnim.position.y-50},P.scale.x=-1*i.attackAnim.scale.x,P.rotation=Object(gt.degrees)(180)),P.visible=!0,P.gotoAndPlay(0)},this.setSpritesPositions=function(e){var t=e(i.body),a=t.x,n=t.y;i.shadow.position.x=a,i.shadow.position.y=n+i.walkAnim.height/4+10,i.walkAnim.position.x=a,i.walkAnim.position.y=n,i.attackAnim.position.x=a,i.attackAnim.position.y=n,i.attackAnim2.position.x=a,i.attackAnim2.position.y=n,i.idleAnim.position.x=a,i.idleAnim.position.y=n,i.player.dead?(i.walkAnim.animationSpeed=.2,i.walkAnim.animationSpeed=.2,i.attackAnim.animationSpeed=.2,i.attackAnim2.animationSpeed=.2,i.idleAnim.animationSpeed=.2,P.animationSpeed=.2):(i.walkAnim.animationSpeed=.5,i.attackAnim.animationSpeed=.65,i.attackAnim2.animationSpeed=.65,i.idleAnim.animationSpeed=.5,P.animationSpeed=.5),i.shouldDisplayHealth&&void 0!==i.healthDisplay&&i.moveLifeDisplay(e(i.body))},this.setPlayerVars=function(e){var t=e.player,a=e.playerDirection,n=e.playerBody;i.player=t,i.playerBodyPosition=n.position,i.playerBody=n,i.playerDirection=a};var L=function(e){return i.playerBody.position.x-(e||120)>i.body.position.x||i.playerBody.position.x+(e||120)<i.body.position.x};this.playIdleAnim=function(){T.playing||j.playing||i.walkAnimPlaying||(_.play(),_.visible=!0)},this.stopIdleAnim=function(){_.visible=!1},this.walkAnimPlaying=!1,this.playWalkAnim=function(){!1===i.walkAnimPlaying?(i.stopIdleAnim(),i.walkAnim.visible=!0,i.walkAnim.play(),i.walkAnimPlaying=!0):i.playIdleAnim()},this.stopWalkAnim=function(){!0===i.walkAnimPlaying&&(i.walkAnim.stop(),i.walkAnim.gotoAndStop(0),i.walkAnimPlaying=!1,i.walkAnim.visible=!1,i.playIdleAnim())},this.playWalkAnim(),this.healthOffsetY=160,this.damageDisplayOptions={fill:"#FF0000",fontSize:11},this.healthDisplayOptions={fill:"#FFFF00",fontSize:11},this.healthDisplay=new c.i(this.health,this.healthDisplayOptions),this.healthDisplay.pivot.x=.5*this.healthDisplay.width,s().game.displayZombieHealth&&(this.shouldDisplayHealth=!0,o.addChild(this.healthDisplay)),this.moveLifeDisplay=function(e){i.shouldDisplayHealth?(i.dead?i.healthDisplay.text=0:i.healthDisplay.text=i.health,i.healthDisplay.position={x:e.x,y:e.y-i.healthOffsetY}):o.children.indexOf(i.healthDisplay)>-1&&o.removeChild(i.healthDisplay)},this.walk=function(){var e,t=i.playerBody.position.x<i.body.position.x;!L()||T.playing||j.playing||i.player.dead?i.stopWalkAnim():(i.playWalkAnim(),t?i.sprites.forEach((function(e){e.scale.x=1})):i.sprites.forEach((function(e){e.scale.x=-1})),L(800)?(O.animationSpeed=1,e=b*rt.a.float(2.8,3.2)):L(400)?(O.animationSpeed=.75,e=b*rt.a.float(1.8,2.2)):(O.animationSpeed=.5,e=b),ot.Body.translate(i.body,{x:t?-e:e,y:0}))},this.health=s().game.enemies.zombies.startingHealth,this.checkFilters=function(){},this.displayHealth=function(e){i.shouldDisplayHealth=e,e?o.addChild(i.healthDisplay):o.children.indexOf(i.healthDisplay)&&o.removeChild(i.healthDisplay)},this.sprites=[this.walkAnim,this.attackAnim,this.attackAnim2,this.idleAnim,P],this.composite.bodies.forEach((function(e){e.main=i})),this.dead=!1,this.dmgTxts=[],this.dmgIterator=0,this.tintAmounts={1:16751616,2:16723456,3:16711680,4:11993103},this.takeDamage=function(e,t,a,n,o){var l={x:rt.a.float(i.walkAnim.position.x-20,i.walkAnim.position.x+20),y:rt.a.float(i.walkAnim.position.y,i.walkAnim.position.y+50)},d={x:rt.a.float(i.walkAnim.position.x-20,i.walkAnim.position.x+20),y:rt.a.float(i.walkAnim.position.y-100,i.walkAnim.position.y-50)};new Sa(null,t&&"head"!==t?l:d),i.health-=e,i.directionX=!!i.playerBodyPosition&&i.playerBodyPosition.x>i.body.position.x,i.health<=0&&!i.dead&&("turret"===o&&r(W(M)),i.kill(t,null,o||null),n&&(r(W(K)),setTimeout((function(){5!==s().game.stats.meleeKills||s().game.achievements[S.PILEDRIVE].owned||r(H(S.PILEDRIVE))}),0))),i.sprites.forEach((function(e){e!==P&&(i.health<25&&(e.tint=i.tintAmounts[3]),i.health<10&&(e.tint=i.tintAmounts[4]))}))},this.removeZombieFromMatterWorld=function(){return i.dead=!0,i.attackHitbox&&ot.World.remove(a,i.attackHitbox),i.healthDisplay&&o.removeChild(i.healthDisplay),i.sprites.forEach((function(e){o.removeChild(e)})),i.attackHitbox&&ot.World.remove(a,i.attackHitbox),ot.World.remove(a,i.composite),"zombie removed"},this.removeZombieFromZombiesArray=function(){var e=n.indexOf(i);e>-1&&n.splice(e,1)},this.kill=function(e,t,l){if(i.attackHitbox&&ot.World.remove(a,i.attackHitbox),!i.dead){i.dead=!0,i.health=0,i.healthDisplay&&o.removeChild(i.healthDisplay),i.shadow&&o.removeChild(i.shadow),o.removeChild(i.shadow),i.removeZombieFromMatterWorld(),i.removeZombieFromZombiesArray();var d={x:i.directionX?-.2:.2,y:-.25},c={x:i.directionX?i.body.position.x-20:i.body.position.x+20,y:i.body.position.y-60};if(!t){if(Mo(c),s().game.player.perks.ammoDropper.owned){var p=s().game.player.weapons.list;new Bo(c,p[Math.floor(Math.random()*p.length)],rt.a.int(4,16))}s().game.player.perks.healthDropper.owned&&new Co(rt.a.int(2,6),c),h.push(new Ja("enemy",i.body.position,{duration:3,alphaDuration:3,set:1,rand:{min:1,max:4}}))}if(!t){r(Ve());var u=s().game.scoreAmounts.zombie;"head"===e&&(u+=s().game.scoreAmounts.headShot),Date.now()-JSON.parse(s().game.zombieLastKilled)<1e3&&(ua("kill streak bonus!","#FF5500",.35,.75),u+=s().game.scoreAmounts.zombieStreakBonus),l&&"fell off"===l&&(s().game.achievements[S.THIS_IS_SPARTA].owned||(r(H(S.THIS_IS_SPARTA)),Kt(s().game.scoreAmounts.achievement)),ua("knockoff bonus!","#FF5500",.35,.75),u+=s().game.scoreAmounts.zombieKnockedOffStage),r(G(JSON.stringify(Date.now()))),"grenade explosion"===l&&(r(U(JSON.stringify(Date.now()))),setTimeout((function(){Date.now()-JSON.parse(s().game.lastGrenadeKill<100)&&s().game.consecutiveGrenadeKills>2&&(s().game.achievements[S.FIRE_IN_THE_HOLE].owned||(r(H(S.FIRE_IN_THE_HOLE)),Kt(s().game.scoreAmounts.achievement))),r(N())}),0)),"landmine"===l&&(r(W(V)),setTimeout((function(){s().game.stats.mineKills>2&&!s().game.achievements[S.MINER].owned&&(r(H(S.MINER)),Kt(s().game.scoreAmounts.achievement))}),0)),"turret"===l&&(r(W(M)),setTimeout((function(){s().game.stats.turretKills>9&&!s().game.achievements[S.GUNNA].owned&&(r(H(S.GUNNA)),Kt(s().game.scoreAmounts.achievement))}),0)),s().game.player.variables.jumping&&!s().game.achievements[S.THE_JUMP_SHOT].owned&&"grenade explosion"!==l&&"landmine"!==l&&"landmine explosion"!==l&&"clustermine explosion"!==l&&r(H(S.THE_JUMP_SHOT)),Kt(u),r(W(k)),new _o({x:i.body.position.x,y:i.body.position.y-pt(i.body)},d,e)}i.attackHitbox&&ot.World.remove(a,i.attackHitbox),n=1,n=null}};T.onFrameChange=function(){_.visible=!1},T.onComplete=function(){T.gotoAndStop(0),T.visible=!1,i.playWalkAnim(),ot.World.remove(a,i.attackHitbox)},j.onComplete=function(){j.gotoAndStop(0),j.visible=!1,i.playWalkAnim(),ot.World.remove(a,i.attackHitbox)},this.timeSinceLastAttack=Date.now()+500;var R=u.getKeyValue("zombie-growl-sound");return this.attack=function(){if(!i.paused&&n.indexOf(i)>-1&&!i.player.dead&&!i.dead){i.timeSinceLastAttack=Date.now();var e=[1,2][Math.floor(2*Math.random())];i.attackHitbox=function(e){if(i.playerBodyPosition){var t=i.playerBodyPosition.x>i.body.position.x?80:-80;return ot.Bodies.rectangle(i.body.position.x+t,i.body.position.y-pt(i.body)/2,2===e?120:100,150,{label:"enemy zombie attack",isStatic:!0})}}(e),R.play(),O.visible=!1,1===e?(T.visible=!0,T.play()):(j.visible=!0,j.play()),_.visible=!1,p(.15,(function(){i.playSlashAnim()})),p(.2,(function(){ot.World.add(a,i.attackHitbox),p(.1,(function(){ot.World.remove(a,i.attackHitbox)}))}))}else i.attackHitbox&&ot.World.remove(a,i.attackHitbox)},this.pause=function(){i.paused=!0,_.stop(),i.walkAnim.stop(),i.attackAnim.stop(),i.attackAnim2.stop()},this.unpause=function(){i.paused=!1,i.walkAnim.play(),0!==T.currentFrame&&T.play()},n.push(this),this}function Ko(e,t){var a=this,n=window.gameObjects,o=n.getKeyValue("world"),i=n.getKeyValue("game-pixi-container"),r=n.getKeyValue("currency-drops"),s=e.x,l=e.y,d=ot.Bodies.circle(s,l,.25*t,{restitution:.5,collisionFilter:wt});d.label="currency drop",d.amount=t,ot.World.add(o,d);var p=new c.e,u=new c.f;u.beginFill(977624),u.drawCircle(0,0,.25*t);var h=new c.k.BlurFilter;h.blur=3,u.filters=nt.getState().game.filterEffects?[h]:[],u.pivot.x=.25*u.width*.5,u.pivot.y=.25*u.height*.5,u.scale.x=1.1,u.scale.y=1.1,p.addChild(u);var m=new c.f;m.beginFill(977624),m.drawCircle(0,0,.25*t),m.pivot.x=.25*m.width*.5,m.pivot.y=.25*m.height*.5,p.addChild(m);var g=new Da.a;return g.lightColor=16777215,g.lightAlpha=.3,g.shadowColor=0,g.shadowAlpha=.3,p.filters=nt.getState().game.filterEffects?[g]:[],i.addChild(p),r.push(this),d.main=this,this.creditBody=d,this.checkFilters=function(){nt.getState().game.filterEffects?(p.filters=[g],u.filters=[h]):(p.filters=[],u.filters=[])},this.destroyed=!1,this.destroy=function(){if(!a.destroyed){a.destroyed=!0;var e=r.indexOf(a);e>-1&&(r.splice(e,1),p.destroy(),ot.World.remove(o,d),o=null,i=null,r=null,n=null,d=null,a.creditBody=null,p=null)}},setTimeout((function(){a.destroy()}),2e4),this.positionCreditGfx=function(e){var t=e(d),a=t.x,n=t.y,o=t.rotation;p.position={x:a,y:n},p.rotation=o},this}var Vo=nt.getState,To=(window.TweenLite.delayedCall,Vo().game.height/2),Mo=function(e,t){for(var a=window.gameObjects.getKeyValue("world-width"),n=Vo().game.player.perks.creditDropper.owned?rt.a.int(5,8):rt.a.int(4,5),o=0;o<n;++o)new Ko(e?{x:e.x,y:e.y-rt.a.int(0,75)}:{x:rt.a.int(150,a-150),y:200-rt.a.int(0,75)},t?rt.a.int(t.min,t.max):Vo().game.player.perks.creditDropper.owned?rt.a.int(15,30):rt.a.int(5,20))},jo=nt.dispatch,Fo=nt.getState;function Po(){var e=new c.e,t=new c.f;t.beginFill(5592405),t.drawRect(0,0,150,50),e.addChild(t);var a=new c.i("Respawn?",{font:"Arial",fill:"#FFFFFF",fontSize:20,fontWeight:"bold"});return a.position.x=t.width/2-a.width/2,a.position.y=t.height/2-a.height/2,e.addChild(a),e}function Do(){var e,t=this,a=window,n=a.gameObjects,o=a.TweenLite.from,i=a.Bounce,r=n.getKeyValue("game-pixi-container"),s=n.getKeyValue("engine");this.respawnButton=new Po,r.addChild(this.respawnButton),this.respawnButton.visible=!1,this.respawnButton.interactive=!0,this.respawnButton.pivot.x=this.respawnButton.width/2,this.respawnButton.pivot.y=this.respawnButton.height/2,this.respawnButton.position.x=this.respawnButton.width/2+20,this.respawnButton.position.y=this.respawnButton.height/2+20,this.respawn=function(){var e=n.getKeyValue("player");e.respawn(),pa("Still alive!",16777215,.5,.75),e.lastDeathType!==ka&&(!function(e,t,a){for(var n=window.gameObjects.getKeyValue("world-width"),o=Vo().game.player.weapons,i=o.list,r=o.ammoCapacity,s=a||rt.a.int(1,2),l=i[Math.floor(Math.random()*i.length)],d=0;d<s;++d)new Bo(e||{x:rt.a.int(150,n-150),y:200},l,t?rt.a.int(t.min,t.max):rt.a.int(5,r[l]))}({x:rt.a.float(e.body.position.x-100,e.body.position.x+100),y:e.body.position.y-200},{min:10,max:2*Fo().game.player.weapons.ammoCapacity[Fo().game.player.weapons.equipped]},rt.a.int(1,2)),Mo({x:rt.a.float(e.body.position.x-100,e.body.position.x+100),y:e.body.position.y-200}))},this.respawnButton.on("click",(function(){t.respawn(),t.respawnButton.visible=!1})),(e=this.respawnButton).on("mouseover",(function(){lt(e.scale,.35,{x:1.05,y:1.05})})),e.on("mouseout",(function(){lt(e.scale,.35,{x:1,y:1})})),this.showRespawnButton=function(){t.respawnButton.visible=!0,o(t.respawnButton.scale,1.5,{x:.5,y:.5,ease:i.easeOut})};var l=function(){var e=n.getKeyValue("zombies");n.getKeyValue("player").pause(),e.forEach((function(e){e.unpause()})),s.timing.timeScale=1},d=function(){var e=n.getKeyValue("zombies");jo(pe()),n.getKeyValue("player").unpause(),e.forEach((function(e){e.pause()})),s.timing.timeScale=.05};return this.unpause=l,this.pause=d,this.togglePause=function(){var e=Fo().game,t=e.gameState,a=e.gameSubState;t!==E.MAIN_MENU&&t!==E.SHOP_MENU&&a!==x&&t!==E.BUILD_MENU&&a!==v&&a!==f&&(n.getKeyValue("player").dead||(t!==E.PAUSE&&a!==g?(jo(Be("main",t,E.PAUSE)),d()):(jo(Be("main",t,E.GAMEPLAY)),a===y?jo(Be("sub",a,y)):a===m&&jo(Be("sub",a,g)),l())))},document.body.addEventListener("keydown",(function(e){"p"!==e.key&&"P"!==e.key&&"Escape"!==e.key||(console.log("pause key was pressed"),t.togglePause())})),this}var Lo=a(54),Ro=a.n(Lo),zo=a(55),Io=a.n(zo),Wo=a(56),Ho=a.n(Wo),No=a(57),Uo=a.n(No),Go=a(58),qo=a.n(Go),Jo=a(59),Xo=a.n(Jo),Yo=a(80),Zo=a.n(Yo),$o=a(60),Qo=a.n($o),ei=a(61),ti=a.n(ei),ai=a(81),ni=a.n(ai),oi=a(82),ii=a.n(oi),ri=a(83),si=a.n(ri),li=a(84),di=a.n(li),ci=a(85),pi=a.n(ci),ui=a(62),hi=a.n(ui),mi=a(86),gi=a.n(mi),yi=a(87),fi=a.n(yi),bi=a(88),wi=a.n(bi),vi=a(89),xi=a.n(vi),Ei=a(90),Si=a.n(Ei),ki=a(91),Ai=a.n(ki),Ci=a(92),Bi=a.n(Ci),_i=a(93),Oi=a.n(_i),Ki=a(94),Vi=a.n(Ki),Ti=a(95),Mi=a.n(Ti),ji=a(96),Fi=a.n(ji),Pi=a(97),Di=a.n(Pi),Li=a(98),Ri=a.n(Li),zi=a(99),Ii=a.n(zi),Wi=a(100),Hi=a.n(Wi),Ni=a(101),Ui=a.n(Ni),Gi=a(102),qi=a.n(Gi),Ji=a(103),Xi=a.n(Ji),Yi=a(104),Zi=a.n(Yi),$i=a(105),Qi=a.n($i),er=a(106),tr=a.n(er),ar=a(107),nr=a.n(ar),or=a(108),ir=a.n(or),rr=a(109),sr=a.n(rr),lr=a(110),dr=a.n(lr),cr=a(111),pr=a.n(cr),ur=a(112),hr=a.n(ur),mr=a(113),gr=a.n(mr),yr=a(114),fr=a.n(yr),br=a(115),wr=a.n(br),vr=a(116),xr=a.n(vr),Er=a(117),Sr=a.n(Er),kr=a(118),Ar=a.n(kr),Cr=a(119),Br=a.n(Cr),_r=a(120),Or=a.n(_r),Kr=a(121),Vr=a.n(Kr),Tr="./spritesheet-assets/FX/muzzle_flashes/muzzle-flashes.json",Mr="./spritesheet-assets/enemy-spritesheets/zombie/idle/idle.json",jr="./spritesheet-assets/enemy-spritesheets/zombie/walkcycle/walkcycle.json",Fr="./spritesheet-assets/enemy-spritesheets/zombie/attack1/attack1.json",Pr="./spritesheet-assets/enemy-spritesheets/zombie/attack2/attack2.json",Dr="./spritesheet-assets/enemy-spritesheets/zombie/parts/zombie_parts.json",Lr="./spritesheet-assets/enemy-spritesheets/zombie/parts/zombie_parts_gored.json",Rr="./spritesheet-assets/enemy-spritesheets/zombie/slash_fx/slash_fx.json",zr="./spritesheet-assets/barriers/barriers.json",Ir="./spritesheet-assets/character-spritesheets/parts/player_parts.json",Wr="./spritesheet-assets/character-spritesheets/idle/char_idle_anim.json",Hr="./spritesheet-assets/character-spritesheets/run/char_run_anim.json",Nr="./spritesheet-assets/character-spritesheets/jump/char_jump_anim.json",Ur="./spritesheet-assets/character-spritesheets/reloadPistol/char_reload_pistol_anim.json",Gr="./spritesheet-assets/character-spritesheets/reloadSMG/char_reload_smg_anim.json",qr="./spritesheet-assets/character-spritesheets/leftArmPistolFire/char_left_arm_pistol_fire.json",Jr="./spritesheet-assets/character-spritesheets/rightArmPistolFire/char_right_arm_pistol_fire.json",Xr="./spritesheet-assets/character-spritesheets/leftArmSMGFire/char_left_arm_smg_fire.json",Yr="./spritesheet-assets/character-spritesheets/rightArmSMGFire/char_right_arm_smg_fire.json",Zr="./spritesheet-assets/character-spritesheets/melee/melee_pistol/melee_pistol.json",$r="./spritesheet-assets/character-spritesheets/melee/melee_ump/melee_ump.json",Qr="./spritesheet-assets/character-spritesheets/melee/melee_shotgun/melee_shotgun.json",es="./spritesheet-assets/character-spritesheets/grenadeThrow/pistolEquipped/grenade_throw_pistol.json",ts="./spritesheet-assets/character-spritesheets/grenadeThrow/umpEquipped/grenade_throw_ump.json",as="./spritesheet-assets/character-spritesheets/grenadeThrow/shotgunEquipped/grenade_throw_shotgun.json",ns="./spritesheet-assets/character-spritesheets/armsFireShotgun/arms_fire_shotgun_anim.json",os="./spritesheet-assets/character-spritesheets/reloadShotgun/reloadShotgun.json",is="./spritesheet-assets/FX/blood_fx/blood_spurt_1/blood_spurt_1.json",rs="./spritesheet-assets/FX/blood_fx/blood_spurt_2/blood_spurt_2.json",ss="./spritesheet-assets/FX/blood_fx/blood_spurt_3/blood_spurt_3.json",ls="./spritesheet-assets/landmine/landmine.json",ds="./spritesheet-assets/FX/wood_planks/wood_planks.json",cs="./spritesheet-assets/FX/spark-particle/spark_particle.json",ps=nt.dispatch,us=nt.getState,hs=window.TweenLite.to,ms=function(e,t){var a=ot.Engine.create(),n=a.world;n.bounds={min:{x:-6e3,y:-1100},max:{x:6e3,y:825}};var o=ot.Render.create({element:document.getElementById(e),engine:a,options:{width:1200,height:550,pixelRatio:.5}});ot.Render.run(o);var i=ot.Runner.create();if(ot.Runner.run(i,a),t){var r=ot.Mouse.create(o.canvas),s=ot.MouseConstraint.create(a,{mouse:r,constraint:{stiffness:.2,render:{visible:!1}}});ot.World.add(n,s),o.mouse=r}return{engine:a,render:o,runner:i,world:n,width:1200,height:550,worldWidth:6e3}}("app-container",!0),gs=ms.world,ys=ms.render,fs=ms.engine,bs=ms.width,ws=ms.height,vs=ms.worldWidth,xs=function(e){var t=new c.b({width:1200,height:550,antialias:!1,resolution:1});return c.l.ROUND_PIXELS=!0,document.getElementById(e).appendChild(t.view),{app:t,loader:new c.g}}("app-container"),Es=xs.app,Ss=xs.loader;function ks(){Ss.add(Xo.a).add(qo.a).add(os).add(ns).add(cs).add("./spritesheet-assets/FX/muzzle-sparks/muzzle_sparks.json").add("./spritesheet-assets/FX/explosion3d/explosion3d1.json").add("./spritesheet-assets/FX/explosion3d/explosion3d2.json").add("./spritesheet-assets/turret/sheets/turret_scan.json").add("./spritesheet-assets/turret/sheets/turret_shoot.json").add("./spritesheet-assets/remote-mine/remote-mine.json").add("./spritesheet-assets/clustermine/clustermine.json").add(ls).add(Qo.a).add(zr).add(Uo.a).add("./spritesheet-assets/zombie_walkcycle_test.json").add("./spritesheet-assets/z_walk/z_walk.json").add("./spritesheet-assets/z_attack/z_attack.json").add("./spritesheet-assets/z_parts/limbs.json").add(Mr).add(jr).add(Fr).add(Pr).add(Dr).add(Lr).add(Rr).add(Tr).add(is).add(rs).add(ss).add("./spritesheet-assets/FX/explosion_fx/explosion_assets.json").add(ds).add("./spritesheet-assets/FX/ground_fx/ground_fx.json").add(Ir).add(Wr).add(Hr).add(Nr).add(Ur).add(Gr).add(Zr).add($r).add(Qr).add(es).add(ts).add(as).add(qr).add(Jr).add(Xr).add(Yr).add(ti.a).add(Ro.a).add(Io.a).add(Ho.a).load((function(){window.gameObjects=new function(){var e=this;this.state={},this.getKeyValue=function(t){return!!e.state[t]&&e.state[t]},this.setKeyValue=function(t,a){return e.state[t]=a,e.state[t]},this.getFullState=function(){return e.state},this.setFullState=function(t){e.state=t}};var e=window.gameObjects;ps(Ce("game-cover",Zo.a)),ps(Ce("char-head",ti.a)),ps(Ce("gradient-alpha",Xo.a)),ps(Ce("weapon-ui-icon-pistol",Ro.a)),ps(Ce("weapon-ui-icon-smg",Io.a)),ps(Ce("weapon-ui-icon-shotgun",Ho.a)),ps(Ce("ground-texture",Uo.a)),ps(Ce("explosive-barrel",Qo.a));var t=dt("ground-texture");t.pivot.x=.5*t.width,t.pivot.y=.425*t.height;var a=dt("gradient-alpha");a.width=bs,a.height=ws,e.setKeyValue("gradient-alpha",a);var n=dt("game-cover");e.setKeyValue("game-cover-art",n),e.setKeyValue("9mm-sound1",ni.a),e.setKeyValue("9mm-sound2",ii.a),e.setKeyValue("explosion1",si.a),e.setKeyValue("distant-explosion",di.a),e.setKeyValue("pistol-reload-sound",pi.a),e.setKeyValue("bullet-impact-body",hi.a),e.setKeyValue("bullet-impact-body-sound",new Ma.Howl({src:[hi.a]})),e.setKeyValue("grenade-clink-sound",new Ma.Howl({src:[gi.a]})),e.setKeyValue("throw-sound",new Ma.Howl({src:[fi.a]})),e.setKeyValue("confirm-sound",new Ma.Howl({src:[sr.a]})),e.setKeyValue("coin-collect-sound",new Ma.Howl({src:[wi.a]})),e.setKeyValue("ammo-collect-sound",new Ma.Howl({src:[xi.a]})),e.setKeyValue("item-collect-sound",new Ma.Howl({src:[Si.a]})),e.setKeyValue("blood-squish-sound",new Ma.Howl({src:[Bi.a]})),e.setKeyValue("blood-squash-sound",new Ma.Howl({src:[Ai.a]})),e.setKeyValue("blood-smack-sound",new Ma.Howl({src:[Oi.a]})),e.setKeyValue("death-rip-sound",new Ma.Howl({src:[Vi.a]})),e.setKeyValue("jump-landing-sound",new Ma.Howl({src:[Mi.a]})),e.setKeyValue("dirt-impact-sound",new Ma.Howl({src:[Fi.a]})),e.setKeyValue("zombie-hurt-sound",new Ma.Howl({src:[Di.a],volume:.5})),e.setKeyValue("zombie-death-sound",new Ma.Howl({src:[Ri.a],volume:.5})),e.setKeyValue("pain1-sound",new Ma.Howl({src:[Ii.a]})),e.setKeyValue("pain2-sound",new Ma.Howl({src:[Hi.a]})),e.setKeyValue("player-death-sound",new Ma.Howl({src:[Ui.a]})),e.setKeyValue("button-add-sound",new Ma.Howl({src:[qi.a]})),e.setKeyValue("button-subtract-sound",new Ma.Howl({src:[Xi.a]})),e.setKeyValue("button-hover-sound",new Ma.Howl({src:[Qi.a]})),e.setKeyValue("button-click-sound",new Ma.Howl({src:[Zi.a]})),e.setKeyValue("place-object-sound",new Ma.Howl({src:[tr.a]})),e.setKeyValue("button-cancel-sound",new Ma.Howl({src:[nr.a]})),e.setKeyValue("purchase-sound",new Ma.Howl({src:[ir.a]})),e.setKeyValue("shell-impact-sound",new Ma.Howl({src:[dr.a]})),e.setKeyValue("health-pickup-sound",new Ma.Howl({src:[pr.a]})),e.setKeyValue("zombie-growl-sound",new Ma.Howl({src:[hr.a]})),e.setKeyValue("smg-fire-sound",new Ma.Howl({src:[gr.a]})),e.setKeyValue("mag-drop-sound",new Ma.Howl({src:[fr.a]})),e.setKeyValue("shot-shell-sound",new Ma.Howl({src:[wr.a]})),e.setKeyValue("shotgun-blast-sound",new Ma.Howl({src:[xr.a]})),e.setKeyValue("achievement1-sound",new Ma.Howl({src:[Sr.a]})),e.setKeyValue("achievement2-sound",new Ma.Howl({src:[Ar.a]})),e.setKeyValue("achievement3-sound",new Ma.Howl({src:[Br.a]})),e.setKeyValue("charging-grenade-sound",new Ma.Howl({src:[Vr.a]})),e.setKeyValue("jump-sound",new Ma.Howl({src:[Or.a]})),e.setKeyValue("zombie-idle-sheet",Ss.resources[Mr].spritesheet),e.setKeyValue("zombie-walk-sheet",Ss.resources[jr].spritesheet),e.setKeyValue("zombie-attack1-sheet",Ss.resources[Fr].spritesheet),e.setKeyValue("zombie-attack2-sheet",Ss.resources[Pr].spritesheet),e.setKeyValue("zombie-parts-sheet",Ss.resources[Dr].spritesheet),e.setKeyValue("zombie-parts-gored-sheet",Ss.resources[Lr].spritesheet),e.setKeyValue("zombie-slash-fx-sheet",Ss.resources[Rr].spritesheet),e.setKeyValue("muzzle-flashes",Ss.resources[Tr].spritesheet),e.setKeyValue("sparks-sheet",Ss.resources[cs].spritesheet),e.setKeyValue("muzzle-sparks-sheet",Ss.resources["./spritesheet-assets/FX/muzzle-sparks/muzzle_sparks.json"].spritesheet),e.setKeyValue("explosion3d1-sheet",Ss.resources["./spritesheet-assets/FX/explosion3d/explosion3d1.json"].spritesheet),e.setKeyValue("explosion3d2-sheet",Ss.resources["./spritesheet-assets/FX/explosion3d/explosion3d2.json"].spritesheet),e.setKeyValue("blood-spurt-1",Ss.resources[is].spritesheet),e.setKeyValue("blood-spurt-2",Ss.resources[rs].spritesheet),e.setKeyValue("blood-spurt-3",Ss.resources[ss].spritesheet),e.setKeyValue("explosion-assets-sheet",Ss.resources["./spritesheet-assets/FX/explosion_fx/explosion_assets.json"].spritesheet),e.setKeyValue("wood-planks-sheet",Ss.resources[ds].spritesheet),e.setKeyValue("remote-mine-sheet",Ss.resources["./spritesheet-assets/remote-mine/remote-mine.json"].spritesheet),e.setKeyValue("landmine-sheet",Ss.resources[ls].spritesheet),e.setKeyValue("clustermine-sheet",Ss.resources["./spritesheet-assets/clustermine/clustermine.json"].spritesheet),e.setKeyValue("turret-scan-sheet",Ss.resources["./spritesheet-assets/turret/sheets/turret_scan.json"].spritesheet),e.setKeyValue("turret-shoot-sheet",Ss.resources["./spritesheet-assets/turret/sheets/turret_shoot.json"].spritesheet),e.setKeyValue("barriers-sheet",Ss.resources[zr].spritesheet),e.setKeyValue("ground-fx-sheet",Ss.resources["./spritesheet-assets/FX/ground_fx/ground_fx.json"].spritesheet),e.setKeyValue("player-parts-sheet",Ss.resources[Ir].spritesheet),e.setKeyValue("char-idle-sheet",Ss.resources[Wr].spritesheet),e.setKeyValue("char-run-sheet",Ss.resources[Hr].spritesheet),e.setKeyValue("char-jump-sheet",Ss.resources[Nr].spritesheet),e.setKeyValue("char-reload-pistol-sheet",Ss.resources[Ur].spritesheet),e.setKeyValue("char-reload-smg-sheet",Ss.resources[Gr].spritesheet),e.setKeyValue("char-reload-shotgun-sheet",Ss.resources[os].spritesheet),e.setKeyValue("left-arm-pistol-fire-sheet",Ss.resources[qr].spritesheet),e.setKeyValue("right-arm-pistol-fire-sheet",Ss.resources[Jr].spritesheet),e.setKeyValue("left-arm-smg-fire-sheet",Ss.resources[Xr].spritesheet),e.setKeyValue("right-arm-smg-fire-sheet",Ss.resources[Yr].spritesheet),e.setKeyValue("melee-pistol-sheet",Ss.resources[Zr].spritesheet),e.setKeyValue("melee-ump-sheet",Ss.resources[$r].spritesheet),e.setKeyValue("melee-shotgun-sheet",Ss.resources[Qr].spritesheet),e.setKeyValue("grenade-pistol-sheet",Ss.resources[es].spritesheet),e.setKeyValue("grenade-ump-sheet",Ss.resources[ts].spritesheet),e.setKeyValue("grenade-shotgun-sheet",Ss.resources[as].spritesheet),e.setKeyValue("arms-fire-shotgun-sheet",Ss.resources[ns].spritesheet);var o=new c.e;o.interactive=!0,o.width=bs,o.height=ws,e.setKeyValue("muzzle-flashes-sheet",Ss.resources[Tr].spritesheet);var i=function(){var e=ot.Bodies.rectangle(vs/2,ws,vs,ws/2,{isStatic:!0,collisionFilter:{mask:3}});return e.label="ground",ot.World.add(gs,e),e}();Es.stage.interactive=!0,Es.stage.addChild(o),o.addChild(t),e.setKeyValue("pixi-app",Es),e.setKeyValue("game-pixi-container",o),e.setKeyValue("ammo-drops-by-type",{"pistol weapon":[],"smg weapon":[],"shotgun weapon":[]}),e.setKeyValue("text-messages",[]),e.setKeyValue("reload-text-messages",[]),e.setKeyValue("gibs",[]),e.setKeyValue("grenades",[]),e.setKeyValue("explosions",[]),e.setKeyValue("rocks",[]),e.setKeyValue("currency-drops",[]),e.setKeyValue("pistol-shells",[]),e.setKeyValue("pistol-bullets",[]),e.setKeyValue("build-objects",[]),e.setKeyValue("bullet-impacts",[]),e.setKeyValue("wood-planks",[]),e.setKeyValue("spark-sprites",[]),e.setKeyValue("explosion-sprites",[]),e.setKeyValue("remote-mines",{}),e.setKeyValue("remote-mines-array",[]),e.setKeyValue("static-ground-effects",[]),e.setKeyValue("zombie-ragdolls",[]),e.setKeyValue("zombies",[]),e.setKeyValue("health-drops",[]),e.setKeyValue("wall-tile",qo.a),e.setKeyValue("ground",i),e.setKeyValue("ground-texture",t),e.setKeyValue("game-width",bs),e.setKeyValue("game-height",ws),e.setKeyValue("world-width",vs),e.setKeyValue("world",gs),e.setKeyValue("render",ys),e.setKeyValue("engine",fs);var r=new Do;e.setKeyValue("screen-ui",r),e.setKeyValue("weapons-ui",new Ao);var s=new pn;e.setKeyValue("player",s);var l=function(){var t=new c.e;n.pivot.x=.5*n.width,n.pivot.y=.5*n.height,n.scale.x=.51,n.scale.y=.51,o.alpha=0,t.addChild(n),o.alpha=1,t.interactive=!0;var a=new c.e,i=new c.f;i.beginFill(5592405),i.drawRect(0,0,250,80);var r=new c.i("Play",{fontFamily:"Arial",fontSize:36,fill:16777215});function s(){a.position.x=bs/2-a.width/2,a.position.y=ws/2-a.height/2}return a.addChild(i,r),s(),r.position.x=a.width/2-r.width/2,r.position.y=a.height/2-r.height/2,a.interactive=!0,a.on("click",(function(){var e=us().game,t=e.gameState,a=e.gameSubState;ps(Be("main",t,E.GAMEPLAY)),ps(Be("sub",a,g))})),a.on("mouseover",(function(){hs(a.scale,.35,{x:1.05,y:1.05,onUpdate:s})})),a.on("mouseout",(function(){hs(a.scale,.35,{x:1,y:1,onUpdate:s})})),Es.stage.addChild(t),e.setKeyValue("main-menu",t),{menu:t}}().menu;ot.Events.on(fs,"tick",(function(t){var a=us().game,n=a.gameState,o=a.gameSubState;!0===l.visible&&(l.visible=!1,document.body.style.cursor="auto"),n!==E.MAIN_MENU&&n!==E.SCORES_VIEW||!1===l.visible&&(l.visible=!0,document.body.style.cursor="auto"),n===E.MAIN_MENU||n===E.SCORES_VIEW||n===E.PAUSE||o===v||n===E.SHOP_MENU||n===E.BUILD_MENU||o===b?(document.body.style.cursor="auto",document.getElementsByClassName("App")[0].style.pointerEvents="all"):document.getElementsByClassName("App")[0].style.pointerEvents="none",n===E.GAMEPLAY&&(document.body.style.cursor=o===v||o===b?"auto":"none"),bo(0,e)})),ot.Events.on(fs,"collisionStart",(function(t){if(us().game.gameState===E.GAMEPLAY)for(var a=0;a<t.pairs.length;++a)go(t,a,e)}))}))}var As=nt.getState,Cs=nt.dispatch,Bs=function(){0===As().game.waveNum&&Cs(_e());var e=function(){var e=As().game.waveNum;Object(l.b)((function(){Cs(Ge(e)),Cs(qe(e)),Cs(Je(e)),Cs(Ye(e)),Cs(Ke(e))})),function(e){var t=window.gameObjects.getKeyValue("world-width");!function(){for(var a=Vo().game.waveNum>20?4:Vo().game.waveNum>10?3:2,n=0;n<e;++n)!function e(){Vo().game.zombiesOnStage<a&&Vo().game.gameState!==E.PAUSE&&Vo().game.gameState!==E.MAIN_MENU&&(Vo().game.gameSubState===y||Vo().game.gameSubState===w)?(console.log("should create a zombo"),Vo().game.gameSubState!==f&&new Oo(rt.a.int(150,t-150),To)):setTimeout((function(){e()}),2e3)}()}()}(e)};As().game.gameState===E.GAMEPLAY&&As().game.gameSubState!==v&&As().game.gameSubState!==f?(e(),setTimeout((function(){0===As().game.zombiesOnStage&&e()}),1e3)):setTimeout(e,3e3)},_s=function(){oa(),Cs(et(0)),Cs(Ke(null)),function(e){c.c.from("Arial",{fill:"#FFFFFF",fontSize:40,fontWeight:"bold"},{chars:[["a","z"],["0","9"],["A","Z"]," .!?"]});var t=window,a=t.gameObjects,n=t.TweenLite,o=n.from,i=n.to,r=t.Power1,s=a.getKeyValue("player"),l=a.getKeyValue("game-pixi-container"),d=a.getKeyValue("game-width"),p=a.getKeyValue("game-height"),u=new c.d(e,{font:"Arial"});u.pivot.x=u.width/2,u.pivot.y=u.height/2,u.position.x=d/2,u.position.y=p/5,l.addChild(u);var h=function(){oa(),da().game.gameState===E.MAIN_MENU||da().game.gameState===E.PAUSE?da().game.gameSubState===f||da().game.gameSubState===v?ca(Be("sub",da().game.gameSubState,v)):ca(Be("sub",da().game.gameSubState,m)):s.dead?ca(Be("sub",da().game.gameSubState,b)):(ca(Be("sub",da().game.gameSubState,v)),l.removeChild(u))},g=function e(){da().game.gameState===E.PAUSE?setTimeout(e,2e3):i(u,.75,{delay:2,x:1.5*d,ease:r.easeIn,onComplete:h})};!function e(){da().game.gameState===E.PAUSE?setTimeout(e,2e3):o(u,.75,{x:-100,alpha:0,onComplete:g})}()}("Wave Defeated!"),Kt(As().game.scoreAmounts.waveCompleted*As().game.waveNum),localStorage&&localStorage.setItem("ZombieChamber-GameSave",JSON.stringify(As().game))},Os=function(){var e=window.gameObjects,t=Object(l.c)(),a=Object(l.d)((function(e){return e.game.gameSubState})),n=Object(l.d)((function(e){return e.game.lastGameSubState})),i=Object(l.d)((function(e){return e.game.player.credits})),r=Object(l.d)((function(e){return e.game.respawnCost})),s=Object(l.d)((function(e){return e.game.respawnToShopCost})),d=Object(l.d)((function(e){return e.game.waveNum})),c=e.getKeyValue("game-width"),p=e.getKeyValue("game-height"),u=e.getKeyValue("screen-ui");return o.a.createElement(o.a.Fragment,null,o.a.createElement(_t.Container,{width:.75*c,height:.75*p},o.a.createElement(_t.Backing,{width:.75*c,height:.75*p}),o.a.createElement(_t.MenuTitle,null,i>=s?"Respawn Menu":"Game Over"),o.a.createElement(_t.MenuButtonContainer,null,i>=r||n===v?o.a.createElement(_t.MenuButtonSpacer,null,o.a.createElement(Nt,{width:240,onClick:function(){u.respawn(),n!==v&&n!==w&&n!==y&&t(Be("sub",a,g)),n!==v&&t(Pe(r)),t(le("Respawn",r))}},"Respawn? ",n===v?"":"$".concat(r))):null,i>=s&&d>0&&n!==v?o.a.createElement(_t.MenuButtonSpacer,null,o.a.createElement(Nt,{width:360,onClick:function(){oa(),Object(l.b)((function(){t(et(0)),t(Ke(null)),t(Oe()),t(Be("sub",a,v)),t(Pe(s)),t(le("Shop Respawn",s))}))}},"Restart Current Wave from Shop? ","$".concat(s))):null,o.a.createElement(_t.MenuButtonSpacer,null,o.a.createElement(Nt,{onClick:ia},"Go to Main Menu")))))},Ks=function(){var e=window.gameObjects,t=Object(l.c)(),a=e.getKeyValue("game-width"),n=e.getKeyValue("game-height"),i=e.getKeyValue("screen-ui"),r=Object(l.d)((function(e){return e.game.gameState})),d=Object(l.d)((function(e){return e.game.gameSubState})),c="main",p="barriers",u="traps",h=o.a.useState(c),m=Object(s.a)(h,2),g=m[0],y=m[1],f=Object(l.d)((function(e){return e.game.barriers.costToBuild})),b=Object(l.d)((function(e){return e.game.traps.costToBuild})),w=Object(l.d)((function(e){return e.game.player.credits})),S=function(){y(c)},k=function(){e.getKeyValue("screen-ui").unpause(),t(Be("main",r,E.GAMEPLAY)),t(Be("sub",d,x))},A=function(){e.getKeyValue("crosshair").buildArrow(16777215)},C=function(e){w>=f[e]&&(t(Ze(e)),t($e(null)),A(),setTimeout((function(){k()}),50))},B=function(e){w>=b[e]&&(t($e(e)),t(Ze(null)),A(),setTimeout((function(){k()}),50))};return o.a.createElement(o.a.Fragment,null,o.a.createElement(_t.Container,{width:.75*a,height:.75*n},o.a.createElement(_t.Backing,{width:.75*a,height:.75*n}),g===u?o.a.createElement(o.a.Fragment,null,o.a.createElement(_t.MenuTitle,null,"Build Traps"),o.a.createElement(_t.MenuButtonContainer,null,o.a.createElement(_t.MenuButtonSpacer,null,o.a.createElement(_t.MenuButtonSpacer,null,Object.keys(Ha).filter((function(e,t){return t%2==0})).map((function(e,t){return o.a.createElement(It,{key:t},o.a.createElement(_t.MenuButtonSpacer,null,o.a.createElement(Nt,{width:Ha[e].length>14?300:200,onClick:function(){return B(Ha[e])}},Ha[e]," ",o.a.createElement("span",{style:{color:w>=b[Ha[e]]?"#ffffff":"#ff0000"}},"$",b[Ha[e]]))))}))),o.a.createElement(_t.MenuButtonSpacer,null,Object.keys(Ha).filter((function(e,t){return t%2==1})).map((function(e,t){return o.a.createElement(It,{key:t},o.a.createElement(_t.MenuButtonSpacer,null,o.a.createElement(Nt,{width:Ha[e].length>14?300:200,onClick:function(){return B(Ha[e])}},Ha[e]," ",o.a.createElement("span",{style:{color:w>=b[Ha[e]]?"#ffffff":"#ff0000"}},"$",b[Ha[e]]))))}))),o.a.createElement(_t.MenuButtonSpacer,null,o.a.createElement(Ut,{onClick:S},"Back"))))):null,g===p?o.a.createElement(o.a.Fragment,null,o.a.createElement(_t.MenuTitle,null,"Build Barriers"),o.a.createElement(_t.MenuButtonContainer,null,o.a.createElement(_t.MenuButtonSpacer,null,Object.keys(Wa).filter((function(e,t){return t%2==1})).map((function(e,t){return o.a.createElement(It,{key:t},o.a.createElement(_t.MenuButtonSpacer,null,o.a.createElement(Nt,{width:Wa[e].length>14?300:200,onClick:function(){return C(Wa[e])}},Wa[e]," ",o.a.createElement("span",{style:{color:w>=f[Wa[e]]?"#ffffff":"#ff0000"}},"$",f[Wa[e]]))))}))),o.a.createElement(_t.MenuButtonSpacer,null,Object.keys(Wa).filter((function(e,t){return t%2==0})).map((function(e,t){return o.a.createElement(It,{key:t},o.a.createElement(_t.MenuButtonSpacer,null,o.a.createElement(Nt,{width:Wa[e].length>14?300:200,onClick:function(){return C(Wa[e])}},Wa[e]," ",o.a.createElement("span",{style:{color:w>=f[Wa[e]]?"#ffffff":"#ff0000"}},"$",f[Wa[e]]))))})),o.a.createElement(_t.MenuButtonSpacer,null,o.a.createElement(_t.MenuButtonSpacer,{padding:20}),o.a.createElement(Ut,{onClick:S},"Back"))))):null,g===c?o.a.createElement(o.a.Fragment,null,o.a.createElement(_t.MenuTitle,null,"Build Menu"),o.a.createElement(_t.MenuButtonContainer,null,o.a.createElement(_t.MenuButtonSpacer,null,o.a.createElement(It,null,o.a.createElement(_t.MenuButtonSpacer,null,o.a.createElement(Nt,{onClick:function(){y(p)}},"Barriers"))),o.a.createElement(It,null,o.a.createElement(_t.MenuButtonSpacer,null,o.a.createElement(Nt,{onClick:function(){y(u)}},"Traps")))),o.a.createElement(_t.MenuButtonSpacer,{padding:20}),o.a.createElement(_t.MenuButtonSpacer,null,o.a.createElement(Ut,{onClick:function(){i.unpause(),t(Be("main",r,E.GAMEPLAY)),t(Be("sub",d,v))}},"Back")))):null))};function Vs(){var e=Object(vt.a)(["\nheight: 120px;\nwidth: 100%;\nbackground-color: #333;\nopacity: .8;\n"]);return Vs=function(){return e},e}function Ts(){var e=Object(vt.a)(["\nheight: 120px;\nwidth: 100%;\nposition: absolute;\nbottom: 0;\n"]);return Ts=function(){return e},e}var Ms=_t.MenuButton,js=_t.MenuButtonContainer,Fs=_t.MenuButtonSpacer,Ps=xt.a.div(Ts()),Ds=xt.a.div(Vs()),Ls=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ps,{className:"shop-query-menu"},o.a.createElement(Ds,null),o.a.createElement(js,{"space-top":2},o.a.createElement(Fs,null,o.a.createElement(It,null,o.a.createElement(Fs,{padding:4},o.a.createElement(Ms,{bgcolor:"#555",width:500,height:40},"Done Placing Barriers/Traps: Press [ B ]")))))))},Rs=a(123),zs=a(122),Is=a.n(zs),Ws=function(e){return o.a.createElement(_t.Container,null,o.a.createElement(_t.MenuTitle,null,"Top 100 Scores of All-time"),o.a.createElement(_t.MenuButtonContainer,{style:{height:470,overflow:"scroll"}},e&&e.scores&&e.scores.sort((function(e,t){return t.score-e.score})).map((function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(ra,{bgcolor:"rgba(0, 0, 0, 0.25)",hovercolor:"rgba(0, 0, 0, 0.35)",bordercolor:"rgba(0, 0, 0, 0)",hoverborder:"rgba(0, 0, 0, 0)"},o.a.createElement(It,null,o.a.createElement("div",{style:{left:"20px",position:"absolute"}},e.name)),o.a.createElement(It,null,o.a.createElement("div",{style:{left:0,right:0}},e.score)),o.a.createElement(It,null,o.a.createElement("div",{style:{right:"20px",position:"absolute"}},function(){var t=e.time.substr(0,e.time.indexOf("T")),a=t.substr(0,e.time.indexOf("-")),n=t.substr(e.time.indexOf("-")+1,t.length);return"".concat(n," - ").concat(a)}()))))}))),o.a.createElement(_t.MenuButtonContainer,null,o.a.createElement(Gt,{marginTop:"-60px",onClick:ia})))};function Hs(){var e=window,t=e.gameObjects,a=e.TweenLite.delayedCall,i=Object(l.c)(),r=Object(l.d)((function(e){return e.game})),c=Object(l.d)((function(e){return e.game.player.weapons.equipped})),p=o.a.useRef(null),u=o.a.useRef(!1),h=function(e){var t=o.a.useState(e),a=Object(s.a)(t,2);return[a[0],a[1]]}([]),m=Object(s.a)(h,2),w=m[0],S=m[1],k=Object(n.useState)(!1),A=Object(s.a)(k,2),C=A[0],B=A[1],_=Object(n.useState)(!1),O=Object(s.a)(_,2),K=O[0],V=O[1],T=Object(n.useState)(!1),M=Object(s.a)(T,2),j=M[0],F=M[1],P=Object(n.useState)(!1),L=Object(s.a)(P,2),R=L[0],z=L[1],I=Object(n.useState)(!1),W=Object(s.a)(I,2),H=W[0],N=W[1],U=Object(n.useState)(!1),G=Object(s.a)(U,2),q=G[0],J=G[1];return o.a.useEffect((function(){ks(),i(D())}),[]),o.a.useEffect((function(){!function(){var e=window.gameObjects,t=vo().game.gameState;if(e){var a=e.getKeyValue("weapons-ui");!a||a.reloading&&t!==E.SHOP_MENU||(a.select(),e=null)}}()}),[c]),o.a.useEffect((function(){if(r.gameSubState===y&&(console.log("wave starting.."),Bs()),r.gameSubState===f&&(console.log("wave defeated"),_s()),r.gameSubState===g){var e=3;u.current=!1,p.current=setInterval((function(){pa("".concat(e),"#FFFFFF",.25,.5),e-=1}),500),a(2,(function(){u.current||(clearInterval(p.current),i(Be("sub",r.gameSubState,y)))}))}r.gameSubState===b&&(clearInterval(p.current),u.current=!0,pa("You died.","#FF0000",.75,3))}),[r.gameSubState,a,i]),o.a.useEffect((function(){0===r.waveCountToDefeat&&r.gameSubState!==v&&_s()}),[r.waveCountToDefeat,r.lastGameSubState,r.gameSubState,i]),o.a.useEffect((function(){(console.log("Game state has changed"),r.gameState===E.SHOP_MENU||r.gameState===E.BUILD_MENU)&&t.getKeyValue("screen-ui").pause();r.gameState===E.MAIN_MENU||r.gameState===E.GAMEPLAY?document.getElementsByClassName("App")[0].style.pointerEvents="none":document.getElementsByClassName("App")[0].style.pointerEvents="all",r.gameState===E.GAMEPLAY&&null===r.player.weapons.equipped&&i(Se("pistol weapon"))}),[r.gameState,r.player.weapons.equipped,t,i]),o.a.useEffect((function(){null!==r.purchases&&r.lastPurchase&&null!==r.lastPurchase.item&&r.lastPurchase.amount>0&&(window.gameObjects.getKeyValue("purchase-sound").play(),window.gameObjects.getKeyValue("confirm-sound").play(),d.b.dark("You bought ".concat(r.lastPurchase.item," for $").concat(r.lastPurchase.amount),{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}));console.log(r.lastPurchase)}),[r.purchases,r.lastPurchase]),o.a.useEffect((function(){null!==r.lastAchievementEarned&&(window.gameObjects.getKeyValue("achievement2-sound").play(),d.b.warning("Achievement Earned: ".concat(r.lastAchievementEarned),{position:"top-left",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),i(Fe(500)))}),[r.achievements,r.lastAchievementEarned]),o.a.useEffect((function(){var e;r.gameState===E.SCORES_VIEW&&Is.a.get("http://localhost:8080/scores").catch((function(t){console.log(t),e=!0})).then((function(t){e?console.log("api is on a different port, use yarn build to view working scores"):S(t.data)}))}),[r.gameState]),o.a.useEffect((function(){B(!0),a(.1,(function(){B(!1)}))}),[r.scoreToggle]),o.a.useEffect((function(){V(!0),a(.25,(function(){V(!1)}))}),[r.player.upgradeTiers.run.current]),o.a.useEffect((function(){F(!0),a(.25,(function(){F(!1)}))}),[r.player.upgradeTiers.reload.current]),o.a.useEffect((function(){z(!0),a(.25,(function(){z(!1)}))}),[r.player.upgradeTiers.jump.current]),o.a.useEffect((function(){N(!0),a(.25,(function(){N(!1)}))}),[r.player.upgradeTiers.melee.current]),o.a.useEffect((function(){J(!0),a(.25,(function(){J(!1)}))}),[r.player.upgradeTiers.defense.current]),o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,null),o.a.createElement(o.a.Fragment,null,r.gameState===E.SCORES_VIEW?o.a.createElement(Ws,{scores:w}):null),o.a.createElement(o.a.Fragment,null,r.gameState===E.MAIN_MENU&&window.gameObjects?o.a.createElement(o.a.Fragment,null,o.a.createElement(la,{margintop:!0,hidetitle:!0,hidebg:!1,bgcolor:"#222",playbtn:!0})):null),o.a.createElement(o.a.Fragment,null,r.gameSubState===x&&r.gameState===E.GAMEPLAY?o.a.createElement(o.a.Fragment,null,o.a.createElement(Ls,null)):null),o.a.createElement(o.a.Fragment,null,t&&r.gameState===E.PAUSE?o.a.createElement(la,{"shop-query-visibility":r.gameSubState===v}):o.a.createElement(o.a.Fragment,null)),o.a.createElement(o.a.Fragment,null,r.gameState===E.SHOP_MENU?o.a.createElement(Zt,null):o.a.createElement(o.a.Fragment,null)),o.a.createElement(o.a.Fragment,null,r.gameState===E.BUILD_MENU?o.a.createElement(Ks,null):o.a.createElement(o.a.Fragment,null)),o.a.createElement(o.a.Fragment,null,r.gameSubState===v?o.a.createElement(dn,null):o.a.createElement(o.a.Fragment,null)),o.a.createElement(o.a.Fragment,null,r.gameSubState===b?o.a.createElement(Os,null):null),o.a.createElement(o.a.Fragment,null,r.gameState!==E.MAIN_MENU&&r.gameState!==E.SCORES_VIEW?o.a.createElement("div",{style:{backgroundColor:"#333",position:"absolute",margin:"auto",width:"50%",height:"30px",lineHeight:"30px",top:"4px",left:0,right:0,textAlign:"center",borderRadius:"2px"}},o.a.createElement("div",{style:{display:"inline-block"},className:"debug-ui"},"wave no: ",r.waveNum),o.a.createElement("div",{style:{marginLeft:"100px",display:"inline-block"},className:"debug-ui"},"enemies to defeat: ",r.waveCountToDefeat)):null,r.gameState!==E.MAIN_MENU&&r.gameState!==E.SCORES_VIEW?o.a.createElement(Rs.a.div,{className:"game-score",animate:{scale:C?[1.35,1]:1},transition:{duration:.35}},o.a.createElement("span",{style:{color:r.score<r.prevScore?"red":r.score>r.prevScore?"#00FF61":"white"}},r.score)):null,o.a.createElement("div",{className:r.gameState!==E.MAIN_MENU&&r.gameState!==E.SCORES_VIEW?"player-attributes":""},r.gameState!==E.MAIN_MENU&&r.gameState!==E.SCORES_VIEW?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:j?"upgrade-gui-transition":"upgrade-gui"},"Reload Lvl. ",r.player.upgradeTiers.reload.current),o.a.createElement("div",{className:K?"upgrade-gui-transition":"upgrade-gui"},"Run Lvl. ",r.player.upgradeTiers.run.current),o.a.createElement("div",{className:R?"upgrade-gui-transition":"upgrade-gui"},"Jump Lvl. ",r.player.upgradeTiers.jump.current),o.a.createElement("div",{className:q?"upgrade-gui-transition":"upgrade-gui"},"Defense Lvl. ",r.player.upgradeTiers.defense.current),o.a.createElement("div",{className:H?"upgrade-gui-transition":"upgrade-gui"},"Melee Lvl. ",r.player.upgradeTiers.melee.current)):null),r.gameState!==E.MAIN_MENU&&r.gameState!==E.SCORES_VIEW?o.a.createElement("div",{className:"total-ammo-count-ui"},r.player.weapons.totalAmmo[r.player.weapons.equipped]):null,r.gameState!==E.MAIN_MENU&&r.gameState!==E.SCORES_VIEW?o.a.createElement("div",{className:"total-credits-ui"},"credits: ",o.a.createElement("span",{style:{color:"#71DD4D"}},"$",r.player.credits)):null,r.gameState!==E.MAIN_MENU&&r.gameState!==E.SCORES_VIEW&&c?o.a.createElement("div",{className:"weapon-stats"},o.a.createElement("div",{className:"weapon-stats-item"},"ROF: ",r.player.modTiers.rof[c].current),o.a.createElement("div",{className:"weapon-stats-item"},"PWR: ",r.player.modTiers.powder[c].current),o.a.createElement("div",{className:"weapon-stats-item"},"ACC: ",r.player.modTiers.sight[c].current),o.a.createElement("div",{className:"weapon-stats-item"},"CAP: ",r.player.modTiers.mag[c].current)):null))}var Ns=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement(Hs,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(l.a,{store:nt},o.a.createElement(Ns,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}]),[[126,1,2]]]);
//# sourceMappingURL=main.7f9cf22e.chunk.js.map